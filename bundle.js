!function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{},id:e,loaded:!1};return t[e].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="/scripts/",n(0)}([function(t,n,r){t.exports=r(63)},function(t,n,r){var e,o;(function(t,u){(function(){var i,c,s,a,f,l,p,h,v,d,g,y,b,m,A,w,E,S,I,x,O,j,B,k,R,U,T,P,D,C,M,L,F,z,W,V,N,q,H,G,K,Y,Q,X,J,Z,_,$,tt,nt,rt,et,ot,ut,it,ct,st,at,ft,lt,pt,ht,vt,dt,gt,yt,bt,mt,At,wt,Et,St={}.hasOwnProperty,It=function(t,n){function r(){this.constructor=t}for(var e in n)St.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},xt=[].slice,Ot=function(t,n){return function(){return t.apply(n,arguments)}};i={toString:function(){return"Bacon"}},i.version="0.7.65",y=("undefined"!=typeof t&&null!==t?t:this).Error,st=function(){},tt=function(t,n){return n},Q=function(t,n){return t},L=function(t){return t.slice(0)},k=function(t,n){if(!n)throw new y(t)},C=function(t){if(t instanceof w&&!(t instanceof E))throw new y("Observable is not a Property : "+t)},U=function(t){if(!(t instanceof g))throw new y("not an EventStream : "+t)},D=function(t){if(!(t instanceof w))throw new y("not an Observable : "+t)},T=function(t){return k("not a function : "+t,j.isFunction(t))},Z=function(t){return t instanceof Array},$=function(t){return t instanceof w},R=function(t){if(!Z(t))throw new y("not an array : "+t)},P=function(t){return k("no arguments supported",0===t.length)},M=function(t){if("string"!=typeof t)throw new y("not a string : "+t)},j={indexOf:Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:function(t,n){var r,e,o,u;for(r=e=0,o=t.length;o>e;r=++e)if(u=t[r],n===u)return r;return-1},indexWhere:function(t,n){var r,e,o,u;for(r=e=0,o=t.length;o>e;r=++e)if(u=t[r],n(u))return r;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(n){return!t(n)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,n){var r,e,o,u;for(r=[],e=0,o=n.length;o>e;e++)u=n[e],t(u)&&r.push(u);return r},map:function(t,n){var r,e,o,u;for(o=[],r=0,e=n.length;e>r;r++)u=n[r],o.push(t(u));return o},each:function(t,n){var r,e;for(r in t)St.call(t,r)&&(e=t[r],n(r,e));return void 0},toArray:function(t){return Z(t)?t:[t]},contains:function(t,n){return-1!==j.indexOf(t,n)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,n){var r,e,o;for(null==n&&(n=j.id),r=0,e=t.length;e>r;r++)if(o=t[r],!n(o))return!1;return!0},any:function(t,n){var r,e,o;for(null==n&&(n=j.id),r=0,e=t.length;e>r;r++)if(o=t[r],n(o))return!0;return!1},without:function(t,n){return j.filter(function(n){return n!==t},n)},remove:function(t,n){var r;return r=j.indexOf(n,t),r>=0?n.splice(r,1):void 0},fold:function(t,n,r){var e,o,u;for(e=0,o=t.length;o>e;e++)u=t[e],n=r(n,u);return n},flatMap:function(t,n){return j.fold(n,[],function(n,r){return n.concat(t(r))})},cached:function(t){var n;return n=A,function(){return n===A&&(n=t(),t=void 0),n}},isFunction:function(t){return"function"==typeof t},toString:function(t){var n,r,e,o;try{return ft++,null==t?"undefined":j.isFunction(t)?"function":Z(t)?ft>5?"[..]":"["+j.map(j.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?ft>5?"{..}":(r=function(){var r;r=[];for(e in t)St.call(t,e)&&(o=function(){try{return t[e]}catch(r){return n=r}}(),r.push(j.toString(e)+":"+j.toString(o)));return r}(),"{"+r+"}"):t}finally{ft--}}},ft=0,i._=j,O=i.UpdateBarrier=function(){var t,n,r,e,o,u,c,s,a,f,l,p,h,v;return f=void 0,l=[],p={},n=[],r=0,t=function(t){return f?n.push(t):t()},h=function(t,n){var r;return f?(r=p[t.id],null==r?(r=p[t.id]=[n],l.push(t)):r.push(n)):n()},o=function(){for(;l.length>0;)c(0);return void 0},c=function(t){var n,r,e,o,i,c;for(o=l[t],i=o.id,c=p[i],l.splice(t,1),delete p[i],u(o),r=0,e=c.length;e>r;r++)(n=c[r])();return void 0},u=function(t){var n,r,e,o,i;for(r=t.internalDeps(),o=0,i=r.length;i>o;o++)n=r[o],u(n),p[n.id]&&(e=j.indexOf(l,n),c(e));return void 0},a=function(t,e,u,i){var c,s;if(f)return u.apply(e,i);f=t;try{s=u.apply(e,i),o()}finally{for(f=void 0;r<n.length;)c=n[r],r++,c();r=0,n=[]}return s},e=function(){return f?f.id:void 0},v=function(n,r){var e,o,u,c;return c=!1,o=!1,e=function(){return o=!0},u=function(){return c=!0,e()},e=n.dispatcher.subscribe(function(n){return t(function(){var t;return c||(t=r(n),t!==i.noMore)?void 0:u()})}),o&&e(),u},s=function(){return l.length>0},{whenDoneWith:h,hasWaiters:s,inTransaction:a,currentEventId:e,wrappedSubscribe:v,afterTransaction:t}}(),x=function(){function t(t,n,r){this.obs=t,this.sync=n,this.lazy=null!=r?r:!1,this.queue=[]}return t.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=function(){return this.ended=!0},t.prototype.consume=function(){return this.lazy?{value:j.always(this.queue[0])}:this.queue[0]},t.prototype.push=function(t){return this.queue=[t]},t.prototype.mayHave=function(){return!0},t.prototype.hasAtLeast=function(){return this.queue.length},t.prototype.flatten=!0,t}(),f=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return It(n,t),n.prototype.consume=function(){return this.queue.shift()},n.prototype.push=function(t){return this.queue.push(t)},n.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},n.prototype.hasAtLeast=function(t){return this.queue.length>=t},n.prototype.flatten=!1,n}(x),c=function(t){function n(t){n.__super__.constructor.call(this,t,!0)}return It(n,t),n.prototype.consume=function(){var t;return t=this.queue,this.queue=[],{value:function(){return t}}},n.prototype.push=function(t){return this.queue.push(t.value())},n.prototype.hasAtLeast=function(){return!0},n}(x),x.isTrigger=function(t){return t instanceof x?t.sync:t instanceof g},x.fromObservable=function(t){return t instanceof x?t:t instanceof E?new x(t,!1):new f(t,!0)},l=function(){function t(t,n,r){this.context=t,this.method=n,this.args=r}return t.prototype.deps=function(){return this.cached||(this.cached=G([this.context].concat(this.args)))},t.prototype.toString=function(){return j.toString(this.context)+"."+j.toString(this.method)+"("+j.map(j.toString,this.args)+")"},t}(),V=function(){var t,n,r;return n=arguments[0],r=arguments[1],t=3<=arguments.length?xt.call(arguments,2):[],(n||r)instanceof l?n||r:new l(n,r,t)},wt=function(t,n){return n.desc=t,n},G=function(t){return Z(t)?j.flatMap(G,t):$(t)?[t]:t instanceof x?[t.obs]:[]},i.Desc=l,i.Desc.empty=new i.Desc("","",[]),Et=function(t){return function(){var n,r,e,o;return e=arguments[0],n=2<=arguments.length?xt.call(arguments,1):[],"object"==typeof e&&n.length&&(r=e,o=n[0],e=function(){return r[o].apply(r,arguments)},n=n.slice(1)),t.apply(null,[e].concat(xt.call(n)))}},et=function(t){return t=Array.prototype.slice.call(t),ot.apply(null,t)},at=function(t,n){return function(){var r;return r=1<=arguments.length?xt.call(arguments,0):[],t.apply(null,n.concat(r))}},mt=function(t){return function(n){return function(r){var e;return null==r?void 0:(e=r[n],j.isFunction(e)?e.apply(r,t):e)}}},gt=function(t,n){var r,e;return e=t.slice(1).split("."),r=j.map(mt(n),e),function(n){var e,o;for(e=0,o=r.length;o>e;e++)t=r[e],n=t(n);return n}},_=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},ot=Et(function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],j.isFunction(n)?t.length?at(n,t):n:_(n)?gt(n,t):j.always(n)}),rt=function(t,n){return ot.apply(null,[t].concat(xt.call(n)))},W=function(t,n,r,e){var o;return n instanceof E?(o=n.sampledBy(t,function(t,n){return[t,n]}),e.call(o,function(t){var n,r;return n=t[0],r=t[1],n}).map(function(t){var n,r;return n=t[0],r=t[1]})):(n=rt(n,r),e.call(t,n))},vt=function(t){var n;if(j.isFunction(t))return t;if(_(t))return n=yt(t),function(t,r){return t[n](r)};throw new y("not a function or a field key: "+t)},yt=function(t){return t.slice(1)},I=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(n){return n(this.value)?new t(this.value):A},t.prototype.map=function(n){return new t(n(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),A={getOrElse:function(t){return t},filter:function(){return A},map:function(){return A},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},bt=function(t){return t instanceof I||t===A?t:new I(t)},i.noMore=["<no-more>"],i.more=["<more>"],q=0,d=function(){function t(){this.id=++q}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t}(),m=function(t){function n(t,r){n.__super__.constructor.call(this),!r&&j.isFunction(t)||t instanceof n?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}return It(n,t),n.prototype.isNext=function(){return!0},n.prototype.hasValue=function(){return!0},n.prototype.value=function(){return this.valueF instanceof n?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},n.prototype.fmap=function(t){var n,r;return this.valueInternal?(r=this.valueInternal,this.apply(function(){return t(r)})):(n=this,this.apply(function(){return t(n.value())}))},n.prototype.apply=function(t){return new n(t)},n.prototype.filter=function(t){return t(this.value())},n.prototype.toString=function(){return j.toString(this.value())},n.prototype.log=function(){return this.value()},n}(d),b=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return It(n,t),n.prototype.isInitial=function(){return!0},n.prototype.isNext=function(){return!1},n.prototype.apply=function(t){return new n(t)},n.prototype.toNext=function(){return new m(this)},n}(m),h=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return It(n,t),n.prototype.isEnd=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<end>"},n}(d),v=function(t){function n(t){this.error=t}return It(n,t),n.prototype.isError=function(){return!0},n.prototype.fmap=function(){return this},n.prototype.apply=function(){return this},n.prototype.toString=function(){return"<error> "+j.toString(this.error)},n}(d),i.Event=d,i.Initial=b,i.Next=m,i.End=h,i.Error=v,J=function(t){return new b(t,!0)},ct=function(t){return new m(t,!0)},N=function(){return new h},dt=function(t){return t instanceof d?t:ct(t)},X=0,pt=function(){},w=function(){function t(t){this.desc=t,this.id=++X,this.initialDesc=this.desc}return t.prototype.subscribe=function(t){return O.wrappedSubscribe(this,t)},t.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)},t.prototype.onValue=function(){var t;return t=et(arguments),this.subscribe(function(n){return n.hasValue()?t(n.value()):void 0})},t.prototype.onValues=function(t){return this.onValue(function(n){return t.apply(null,n)})},t.prototype.onError=function(){var t;return t=et(arguments),this.subscribe(function(n){return n.isError()?t(n.error):void 0})},t.prototype.onEnd=function(){var t;return t=et(arguments),this.subscribe(function(n){return n.isEnd()?t():void 0})},t.prototype.name=function(t){return this._name=t,this},t.prototype.withDescription=function(){return this.desc=V.apply(null,arguments),this},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),w.prototype.assign=w.prototype.onValue,w.prototype.forEach=w.prototype.onValue,w.prototype.inspect=w.prototype.toString,i.Observable=w,a=function(){function t(t){var n,r,e;for(null==t&&(t=[]),this.unsubscribe=Ot(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],n=0,r=t.length;r>n;n++)e=t[n],this.add(e)}return t.prototype.add=function(t){var n,r,e;if(!this.unsubscribed)return n=!1,r=st,this.starting.push(t),e=function(e){return function(){return e.unsubscribed?void 0:(n=!0,e.remove(r),j.remove(t,e.starting))}}(this),r=t(this.unsubscribe,e),this.unsubscribed||n?r():this.subscriptions.push(r),j.remove(t,this.starting),r},t.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==j.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){var t,n,r,e;if(!this.unsubscribed){for(this.unsubscribed=!0,r=this.subscriptions,t=0,n=r.length;n>t;t++)(e=r[t])();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),i.CompositeUnsubscribe=a,p=function(){function t(t,n){this._subscribe=t,this._handleEvent=n,this.subscribe=Ot(this.subscribe,this),this.handleEvent=Ot(this.handleEvent,this),this.subscriptions=[],this.queue=[]}return t.prototype.pushing=!1,t.prototype.ended=!1,t.prototype.prevError=void 0,t.prototype.unsubSrc=void 0,t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(t){return this.subscriptions=j.without(t,this.subscriptions)},t.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),O.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){var n,r,e,o,u,c;try{for(c=this.subscriptions,r=0,e=c.length;e>r;r++)u=c[r],o=u.sink(t),(o===i.noMore||t.isEnd())&&this.removeSub(u);return!0}catch(s){throw n=s,this.pushing=!1,this.queue=[],n}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),i.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?i.more:(this.unsubscribeFromSource(),i.noMore)}},t.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(t){var n;return this.ended?(t(N()),st):(T(t),n={sink:t},this.subscriptions.push(n),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),T(this.unsubSrc)),function(t){return function(){return t.removeSub(n),t.hasSubscribers()?void 0:t.unsubscribeFromSource()}}(this))},t}(),i.Dispatcher=p,g=function(t){function n(t,r,e){j.isFunction(t)&&(e=r,r=t,t=l.empty),n.__super__.constructor.call(this,t),T(r),this.dispatcher=new p(r,e),pt(this)}return It(n,t),n.prototype.toProperty=function(t){var n,r;return r=0===arguments.length?A:bt(function(){return t}),n=this.dispatcher,new E(new i.Desc(this,"toProperty",[t]),function(t){var e,o,u,c;return e=!1,c=st,o=i.more,u=function(){return e?void 0:r.forEach(function(n){return e=!0,o=t(new b(n)),o===i.noMore?(c(),c=st):void 0})},c=n.subscribe(function(n){return n.hasValue()?e&&n.isInitial()?i.more:(n.isInitial()||u(),e=!0,r=new I(n),t(n)):(n.isEnd()&&(o=u()),o!==i.noMore?t(n):void 0)}),u(),c})},n.prototype.toEventStream=function(){return this},n.prototype.withHandler=function(t){return new n(new i.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)},n}(w),i.EventStream=g,i.never=function(){return new g(V(i,"never"),function(t){return t(N()),st})},i.when=function(){var t,n,r,e,o,u,c,s,a,f,l,p,h,v,d,y,b,m,A,w;if(0===arguments.length)return i.never();for(c=arguments.length,w="when: expecting arguments in the form (Observable+,function)+",k(w,c%2===0),m=[],h=[],n=0,v=[];c>n;){for(v[n]=arguments[n],v[n+1]=arguments[n+1],p=j.toArray(arguments[n]),t=F(arguments[n+1]),l={f:t,ixs:[]},A=!1,o=0,s=p.length;s>o;o++){for(b=p[o],r=j.indexOf(m,b),A||(A=x.isTrigger(b)),0>r&&(m.push(b),r=m.length-1),d=l.ixs,u=0,a=d.length;a>u;u++)e=d[u],e.index===r&&e.count++;l.ixs.push({index:r,count:1})}k("At least one EventStream required",A||!p.length),p.length>0&&h.push(l),n+=2}return m.length?(m=j.map(x.fromObservable,m),f=j.any(m,function(t){return t.flatten})&&z(j.map(function(t){return t.obs},m)),y=new g(new i.Desc(i,"when",v),function(t){var r,e,o,u,c,s,a;return a=[],o=!1,u=function(t){var r,e,o;for(o=t.ixs,r=0,e=o.length;e>r;r++)if(n=o[r],!m[n.index].hasAtLeast(n.count))return!1;return!0},e=function(t){return!t.sync||t.ended},r=function(t){var r,e,o;for(o=t.ixs,r=0,e=o.length;e>r;r++)if(n=o[r],!m[n.index].mayHave(n.count))return!0},c=function(t){return!t.source.flatten},s=function(s){return function(l){var p,v,d;return v=function(){return O.whenDoneWith(y,p)},d=function(){var r,e,o,s,f,l;if(!(a.length>0))return i.more;for(f=i.more,l=a.pop(),e=0,o=h.length;o>e;e++)if(s=h[e],u(s))return r=function(){var t,r,e,o;for(e=s.ixs,o=[],r=0,t=e.length;t>r;r++)n=e[r],o.push(m[n.index].consume());return o}(),f=t(l.e.apply(function(){var t,n;return n=function(){var n,e,o;for(o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(t.value());return o}(),s.f.apply(s,n)})),a.length&&(a=j.filter(c,a)),f===i.noMore?f:d()},p=function(){var n;return n=d(),o&&(o=!1,(j.all(m,e)||j.all(h,r))&&(n=i.noMore,t(N()))),n===i.noMore&&l(),n},s.subscribe(function(n){var r;return n.isEnd()?(o=!0,s.markEnded(),v()):n.isError()?r=t(n):(s.push(n),s.sync&&(a.push({source:s,e:n}),f||O.hasWaiters()?v():p())),r===i.noMore&&l(),r||i.more})}},new i.CompositeUnsubscribe(function(){var t,n,r;for(r=[],t=0,n=m.length;n>t;t++)b=m[t],r.push(s(b));return r}()).unsubscribe})):i.never()},z=function(t,n){var r;return null==n&&(n=[]),r=function(t){var e;return j.contains(n,t)?!0:(e=t.internalDeps(),e.length?(n.push(t),j.any(e,r)):(n.push(t),!1))},j.any(t,r)},F=function(t){return j.isFunction(t)?t:j.always(t)},i.groupSimultaneous=function(){var t,n,r;return r=1<=arguments.length?xt.call(arguments,0):[],1===r.length&&Z(r[0])&&(r=r[0]),n=function(){var n,e,o;for(o=[],n=0,e=r.length;e>n;n++)t=r[n],o.push(new c(t));return o}(),wt(new i.Desc(i,"groupSimultaneous",r),i.when(n,function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[]}))},S=function(t){function n(t,r,e){this.property=t,this.subscribe=Ot(this.subscribe,this),n.__super__.constructor.call(this,r,e),this.current=A,this.currentValueRootId=void 0,this.propertyEnded=!1}return It(n,t),n.prototype.push=function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new I(t),this.currentValueRootId=O.currentEventId()),n.__super__.push.call(this,t)},n.prototype.maybeSubSource=function(t,n){return n===i.noMore?st:this.propertyEnded?(t(N()),st):p.prototype.subscribe.call(this,t)},n.prototype.subscribe=function(t){var n,r,e,o;return r=!1,e=i.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(n=O.currentEventId(),o=this.currentValueRootId,!this.propertyEnded&&o&&n&&n!==o?(O.whenDoneWith(this.property,function(n){return function(){return n.currentValueRootId===o?t(J(n.current.get().value())):void 0}}(this)),this.maybeSubSource(t,e)):(O.inTransaction(void 0,this,function(){return e=t(J(this.current.get().value()))},[]),this.maybeSubSource(t,e))):this.maybeSubSource(t,e)},n}(p),E=function(t){function n(t,r,e){n.__super__.constructor.call(this,t),T(r),this.dispatcher=new S(this,r,e),pt(this)}return It(n,t),n.prototype.changes=function(){return new g(new i.Desc(this,"changes",[]),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()?void 0:n(t)})}}(this))},n.prototype.withHandler=function(t){return new n(new i.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)},n.prototype.toProperty=function(){return P(arguments),this},n.prototype.toEventStream=function(){return new g(new i.Desc(this,"toEventStream",[]),function(t){return function(n){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),n(t)})}}(this))},n}(w),i.Property=E,i.constant=function(t){return new E(new i.Desc(i,"constant",[t]),function(n){return n(J(t)),n(N()),st})},i.fromBinder=function(t,n){return null==n&&(n=j.id),new g(new i.Desc(i,"fromBinder",[t,n]),function(r){var e,o,u,c;return c=!1,e=!1,o=function(){return c?void 0:"undefined"!=typeof u&&null!==u?(u(),c=!0):e=!0},u=t(function(){var t,e,u,c,s,a;for(t=1<=arguments.length?xt.call(arguments,0):[],a=n.apply(this,t),Z(a)&&j.last(a)instanceof d||(a=[a]),s=i.more,u=0,c=a.length;c>u;u++)if(e=a[u],s=r(e=dt(e)),s===i.noMore||e.isEnd())return o(),s;return s}),e&&o(),o})},H=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],K=function(t){var n,r,e,o;for(n=0,r=H.length;r>n;n++)if(o=H[n],e=[t[o[0]],t[o[1]]],e[0]&&e[1])return e;throw new v("No suitable event methods in "+t)},i.fromEventTarget=function(t,n,r){var e,o,u;return e=K(t),o=e[0],u=e[1],wt(new i.Desc(i,"fromEvent",[t,n]),i.fromBinder(function(r){return o.call(t,n,r),function(){return u.call(t,n,r)}},r))},i.fromEvent=i.fromEventTarget,i.Observable.prototype.map=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],W(this,n,t,function(t){return wt(new i.Desc(this,"map",[t]),this.withHandler(function(n){return this.push(n.fmap(t))}))})},i.combineAsArray=function(){var t,n,r,e,o,u,c;for(c=1<=arguments.length?xt.call(arguments,0):[],1===c.length&&Z(c[0])&&(c=c[0]),t=n=0,r=c.length;r>n;t=++n)u=c[t],$(u)||(c[t]=i.constant(u));return c.length?(o=function(){var t,n,r;for(r=[],t=0,n=c.length;n>t;t++)e=c[t],r.push(new x(e,!0));return r}(),wt(new i.Desc(i,"combineAsArray",c),i.when(o,function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[]}).toProperty())):i.constant([])},i.onValues=function(){var t,n,r;return r=2<=arguments.length?xt.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],i.combineAsArray(r).onValues(t)},i.combineWith=function(){var t,n;return t=arguments[0],n=2<=arguments.length?xt.call(arguments,1):[],wt(new i.Desc(i,"combineWith",[t].concat(xt.call(n))),i.combineAsArray(n).map(function(n){return t.apply(null,n)}))},i.combineTemplate=function(t){var n,r,e,o,u,c,s,a,f,l;return s=[],l=[],c=function(t){return t[t.length-1]},f=function(t,n,r){return c(t)[n]=r},n=function(t,n){return function(r,e){return f(r,t,e[n])}},u=function(t,n){return function(r){return f(r,t,n)}},a=function(t){return Z(t)?[]:{}},e=function(t,r){var e,i;return $(r)?(l.push(r),s.push(n(t,l.length-1))):r!==Object(r)||"function"==typeof r||r instanceof RegExp||r instanceof Date?s.push(u(t,r)):(i=function(t){return function(n){var e;return e=a(r),f(n,t,e),n.push(e)}},e=function(t){return t.pop()},s.push(i(t)),o(r),s.push(e))},o=function(t){return j.each(t,e)},o(t),r=function(n){var r,e,o,u,i;for(i=a(t),r=[i],o=0,u=s.length;u>o;o++)(e=s[o])(r,n);return i},wt(new i.Desc(i,"combineTemplate",[t]),i.combineAsArray(l).map(r))},i.Observable.prototype.combine=function(t,n){var r;return r=vt(n),wt(new i.Desc(this,"combine",[t,n]),i.combineAsArray(this,t).map(function(t){return r(t[0],t[1])}))},i.Observable.prototype.decode=function(t){return wt(new i.Desc(this,"decode",[t]),this.combine(i.combineTemplate(t),function(t,n){return n[t]}))},i.Observable.prototype.withStateMachine=function(t,n){var r;return r=t,wt(new i.Desc(this,"withStateMachine",[t,n]),this.withHandler(function(t){var e,o,u,c,s,a,f;for(e=n(r,t),c=e[0],a=e[1],r=c,f=i.more,o=0,u=a.length;u>o;o++)if(s=a[o],f=this.push(s),f===i.noMore)return f;return f}))},i.Observable.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,n){return t===n}),wt(new i.Desc(this,"skipDuplicates",[]),this.withStateMachine(A,function(n,r){return r.hasValue()?r.isInitial()||n===A||!t(n.get(),r.value())?[new I(r.value()),[r]]:[n,[]]:[n,[r]]}))},i.Observable.prototype.awaiting=function(t){return wt(new i.Desc(this,"awaiting",[t]),i.groupSimultaneous(this,t).map(function(t){var n,r;return n=t[0],r=t[1],0===r.length}).toProperty(!1).skipDuplicates())},i.Observable.prototype.not=function(){return wt(new i.Desc(this,"not",[]),this.map(function(t){return!t}))},i.Property.prototype.and=function(t){return wt(new i.Desc(this,"and",[t]),this.combine(t,function(t,n){return t&&n}))},i.Property.prototype.or=function(t){return wt(new i.Desc(this,"or",[t]),this.combine(t,function(t,n){return t||n}))},i.scheduler={setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},i.EventStream.prototype.bufferWithTime=function(t){return wt(new i.Desc(this,"bufferWithTime",[t]),this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},i.EventStream.prototype.bufferWithCount=function(t){return wt(new i.Desc(this,"bufferWithCount",[t]),this.bufferWithTimeOrCount(void 0,t))},i.EventStream.prototype.bufferWithTimeOrCount=function(t,n){var r;return r=function(r){return r.values.length===n?r.flush():void 0!==t?r.schedule():void 0},wt(new i.Desc(this,"bufferWithTimeOrCount",[t,n]),this.buffer(t,r,r))},i.EventStream.prototype.buffer=function(t,n,r){var e,o,u;return null==n&&(n=st),null==r&&(r=st),e={scheduled:null,end:void 0,values:[],flush:function(){var t;if(this.scheduled&&(i.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){if(t=this.push(ct(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==i.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:this.scheduled=t(function(t){return function(){return t.flush()}}(this))}},u=i.more,j.isFunction(t)||(o=t,t=function(t){return i.scheduler.setTimeout(t,o)}),wt(new i.Desc(this,"buffer",[]),this.withHandler(function(t){return e.push=function(t){return function(n){return t.push(n)}}(this),t.isError()?u=this.push(t):t.isEnd()?(e.end=t,e.scheduled||e.flush()):(e.values.push(t.value()),n(e)),u}))},i.Observable.prototype.filter=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],C(n),W(this,n,t,function(t){return wt(new i.Desc(this,"filter",[t]),this.withHandler(function(n){return n.filter(t)?this.push(n):i.more}))})},i.once=function(t){return new g(new l(i,"once",[t]),function(n){return n(dt(t)),n(N()),st})},i.EventStream.prototype.concat=function(t){var n;return n=this,new g(new i.Desc(n,"concat",[t]),function(r){var e,o;return o=st,e=n.dispatcher.subscribe(function(n){return n.isEnd()?o=t.dispatcher.subscribe(r):r(n)}),function(){return e(),o()}})},i.Observable.prototype.flatMap=function(){return Y(this,it(arguments))},i.Observable.prototype.flatMapFirst=function(){return Y(this,it(arguments),!0)},Y=function(t,n,r,e){var o,u,c;return c=[t],o=[],u=new g(new i.Desc(t,"flatMap"+(r?"First":""),[n]),function(u){var c,s,f,l,p;return f=new a,l=[],p=function(t){var r;return r=ut(n(t.value())),o.push(r),f.add(function(t,n){return r.dispatcher.subscribe(function(e){var a;return e.isEnd()?(j.remove(r,o),s(),c(n),i.noMore):(e instanceof b&&(e=e.toNext()),a=u(e),a===i.noMore&&t(),a)})})},s=function(){var t;return t=l.shift(),t?p(t):void 0},c=function(t){return t(),f.empty()?u(N()):void 0},f.add(function(n,o){return t.dispatcher.subscribe(function(t){return t.isEnd()?c(o):t.isError()?u(t):r&&f.count()>1?i.more:f.unsubscribed?i.noMore:e&&f.count()>e?l.push(t):p(t)})}),f.unsubscribe}),u.internalDeps=function(){return o.length?c.concat(o):c},u},it=function(t){return 1===t.length&&$(t[0])?j.always(t[0]):et(t)},ut=function(t){return $(t)?t:i.once(t)},i.Observable.prototype.flatMapWithConcurrencyLimit=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],wt(new i.Desc(this,"flatMapWithConcurrencyLimit",[n].concat(xt.call(t))),Y(this,it(t),!1,n))},i.Observable.prototype.flatMapConcat=function(){return wt(new i.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0)),this.flatMapWithConcurrencyLimit.apply(this,[1].concat(xt.call(arguments))))},i.later=function(t,n){return wt(new i.Desc(i,"later",[t,n]),i.fromBinder(function(r){var e,o;return o=function(){return r([n,N()])},e=i.scheduler.setTimeout(o,t),function(){return i.scheduler.clearTimeout(e)}}))},i.Observable.prototype.bufferingThrottle=function(t){return wt(new i.Desc(this,"bufferingThrottle",[t]),this.flatMapConcat(function(n){return i.once(n).concat(i.later(t).filter(!1))}))},i.Property.prototype.bufferingThrottle=function(){return i.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},s=function(t){function n(){this.guardedSink=Ot(this.guardedSink,this),this.subscribeAll=Ot(this.subscribeAll,this),this.unsubAll=Ot(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,n.__super__.constructor.call(this,new i.Desc(i,"Bus",[]),this.subscribeAll)}return It(n,t),n.prototype.unsubAll=function(){var t,n,r,e;for(r=this.subscriptions,t=0,n=r.length;n>t;t++)e=r[t],"function"==typeof e.unsub&&e.unsub();return void 0},n.prototype.subscribeAll=function(t){var n,r,e,o;if(this.ended)t(N());else for(this.sink=t,e=L(this.subscriptions),n=0,r=e.length;r>n;n++)o=e[n],this.subscribeInput(o);return this.unsubAll},n.prototype.guardedSink=function(t){return function(n){return function(r){return r.isEnd()?(n.unsubscribeInput(t),i.noMore):n.sink(r)}}(this)},n.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))},n.prototype.unsubscribeInput=function(t){var n,r,e,o,u;for(o=this.subscriptions,n=r=0,e=o.length;e>r;n=++r)if(u=o[n],u.input===t)return"function"==typeof u.unsub&&u.unsub(),void this.subscriptions.splice(n,1)},n.prototype.plug=function(t){var n;return D(t),this.ended?void 0:(n={input:t},this.subscriptions.push(n),null!=this.sink&&this.subscribeInput(n),function(n){return function(){return n.unsubscribeInput(t)}}(this))},n.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(N()):void 0},n.prototype.push=function(t){return this.ended?void 0:"function"==typeof this.sink?this.sink(ct(t)):void 0},n.prototype.error=function(t){return"function"==typeof this.sink?this.sink(new v(t)):void 0},n}(g),i.Bus=s,nt=function(t,n){return Et(function(){var r,e,o;return e=arguments[0],r=2<=arguments.length?xt.call(arguments,1):[],o=at(n,[function(t,n){return e.apply(null,xt.call(t).concat([n]))}]),wt(new i.Desc(i,t,[e].concat(xt.call(r))),i.combineAsArray(r).flatMap(o))})},i.fromCallback=nt("fromCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],i.fromBinder(function(r){return rt(n,t)(r),st},function(t){return[t,N()]})}),i.fromNodeCallback=nt("fromNodeCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],i.fromBinder(function(r){return rt(n,t)(r),st},function(t,n){return t?[new v(t),N()]:[n,N()]})}),B=function(t,n){var r;return r=new g(V(t,"justInitValue"),function(n){var e,o;return o=void 0,e=t.dispatcher.subscribe(function(t){return t.isEnd()||(o=t),i.noMore}),O.whenDoneWith(r,function(){return null!=o&&n(o),n(N())}),e}),r.concat(n).toProperty()},i.Observable.prototype.mapEnd=function(){var t;return t=et(arguments),wt(new i.Desc(this,"mapEnd",[t]),this.withHandler(function(n){return n.isEnd()?(this.push(ct(t(n))),this.push(N()),i.noMore):this.push(n)}))},i.Observable.prototype.skipErrors=function(){return wt(new i.Desc(this,"skipErrors",[]),this.withHandler(function(t){return t.isError()?i.more:this.push(t)}))},i.EventStream.prototype.takeUntil=function(t){
var n;return n={},wt(new i.Desc(this,"takeUntil",[t]),i.groupSimultaneous(this.mapEnd(n),t.skipErrors()).withHandler(function(r){var e,o,u,c,s,a;if(r.hasValue()){if(c=r.value(),e=c[0],t=c[1],t.length)return this.push(N());for(s=i.more,o=0,u=e.length;u>o;o++)a=e[o],s=a===n?this.push(N()):this.push(ct(a));return s}return this.push(r)}))},i.Property.prototype.takeUntil=function(t){var n;return n=this.changes().takeUntil(t),wt(new i.Desc(this,"takeUntil",[t]),B(this,n))},i.Observable.prototype.flatMapLatest=function(){var t,n;return t=it(arguments),n=this.toEventStream(),wt(new i.Desc(this,"flatMapLatest",[t]),n.flatMap(function(r){return ut(t(r)).takeUntil(n)}))},i.Property.prototype.delayChanges=function(t,n){return wt(t,B(this,n(this.changes())))},i.EventStream.prototype.delay=function(t){return wt(new i.Desc(this,"delay",[t]),this.flatMap(function(n){return i.later(t,n)}))},i.Property.prototype.delay=function(t){return this.delayChanges(new i.Desc(this,"delay",[t]),function(n){return n.delay(t)})},i.EventStream.prototype.debounce=function(t){return wt(new i.Desc(this,"debounce",[t]),this.flatMapLatest(function(n){return i.later(t,n)}))},i.Property.prototype.debounce=function(t){return this.delayChanges(new i.Desc(this,"debounce",[t]),function(n){return n.debounce(t)})},i.EventStream.prototype.debounceImmediate=function(t){return wt(new i.Desc(this,"debounceImmediate",[t]),this.flatMapFirst(function(n){return i.once(n).concat(i.later(t).filter(!1))}))},i.Observable.prototype.scan=function(t,n){var r,e,o;return n=vt(n),r=bt(t),o=function(t){return function(o){var u,c,s,a;return u=!1,a=st,c=i.more,s=function(){return u?void 0:r.forEach(function(t){return u=!0,c=o(new b(function(){return t})),c===i.noMore?(a(),a=st):void 0})},a=t.dispatcher.subscribe(function(t){var e,a;return t.hasValue()?u&&t.isInitial()?i.more:(t.isInitial()||s(),u=!0,a=r.getOrElse(void 0),e=n(a,t.value()),r=new I(e),o(t.apply(function(){return e}))):(t.isEnd()&&(c=s()),c!==i.noMore?o(t):void 0)}),O.whenDoneWith(e,s),a}}(this),e=new E(new i.Desc(this,"scan",[t,n]),o)},i.Observable.prototype.diff=function(t,n){return n=vt(n),wt(new i.Desc(this,"diff",[t,n]),this.scan([t],function(t,r){return[r,n(t[0],r)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},i.Observable.prototype.doAction=function(){var t;return t=et(arguments),wt(new i.Desc(this,"doAction",[t]),this.withHandler(function(n){return n.hasValue()&&t(n.value()),this.push(n)}))},i.Observable.prototype.doError=function(){var t;return t=et(arguments),wt(new i.Desc(this,"doError",[t]),this.withHandler(function(n){return n.isError()&&t(n.error),this.push(n)}))},i.Observable.prototype.doLog=function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[],wt(new i.Desc(this,"doLog",t),this.withHandler(function(n){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,xt.call(t).concat([n.log()])),this.push(n)}))},i.Observable.prototype.endOnError=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],null==n&&(n=!0),W(this,n,t,function(t){return wt(new i.Desc(this,"endOnError",[]),this.withHandler(function(n){return n.isError()&&t(n.error)?(this.push(n),this.push(N())):this.push(n)}))})},w.prototype.errors=function(){return wt(new i.Desc(this,"errors",[]),this.filter(function(){return!1}))},At=function(t){return[t,N()]},i.fromPromise=function(t,n,r){return null==r&&(r=At),wt(new i.Desc(i,"fromPromise",[t]),i.fromBinder(function(r){var e;return null!=(e=t.then(r,function(t){return r(new v(t))}))&&"function"==typeof e.done&&e.done(),function(){return n&&"function"==typeof t.abort?t.abort():void 0}},r))},i.Observable.prototype.mapError=function(){var t;return t=et(arguments),wt(new i.Desc(this,"mapError",[t]),this.withHandler(function(n){return n.isError()?this.push(ct(t(n.error))):this.push(n)}))},i.Observable.prototype.flatMapError=function(t){return wt(new i.Desc(this,"flatMapError",[t]),this.mapError(function(t){return new v(t)}).flatMap(function(n){return n instanceof v?t(n.error):i.once(n)}))},i.EventStream.prototype.sampledBy=function(t,n){return wt(new i.Desc(this,"sampledBy",[t,n]),this.toProperty().sampledBy(t,n))},i.Property.prototype.sampledBy=function(t,n){var r,e,o,u,c;return null!=n?n=vt(n):(r=!0,n=function(t){return t.value()}),c=new x(this,!1,r),o=new x(t,!0,r),u=i.when([c,o],n),e=t instanceof E?u.toProperty():u,wt(new i.Desc(this,"sampledBy",[t,n]),e)},i.Property.prototype.sample=function(t){return wt(new i.Desc(this,"sample",[t]),this.sampledBy(i.interval(t,{})))},i.Observable.prototype.map=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],n instanceof E?n.sampledBy(this,Q):W(this,n,t,function(t){return wt(new i.Desc(this,"map",[t]),this.withHandler(function(n){return this.push(n.fmap(t))}))})},i.Observable.prototype.fold=function(t,n){return wt(new i.Desc(this,"fold",[t,n]),this.scan(t,n).sampledBy(this.filter(!1).mapEnd().toProperty()))},w.prototype.reduce=w.prototype.fold,i.fromPoll=function(t,n){return wt(new i.Desc(i,"fromPoll",[t,n]),i.fromBinder(function(n){var r;return r=i.scheduler.setInterval(n,t),function(){return i.scheduler.clearInterval(r)}},n))},i.fromArray=function(t){var n;return R(t),t.length?(n=0,new g(new i.Desc(i,"fromArray",[t]),function(r){var e,o,u,c,s;return s=!1,c=i.more,u=!1,o=!1,e=function(){var a;if(o=!0,!u){for(u=!0;o;)o=!1,c===i.noMore||s||(a=t[n++],c=r(dt(a)),c!==i.noMore&&(n===t.length?r(N()):O.afterTransaction(e)));return u=!1}},e(),function(){return s=!0}})):wt(new i.Desc(i,"fromArray",t),i.never())},i.EventStream.prototype.holdWhen=function(t){var n,r,e,o,u;return r=new a,e=!1,n=[],u=!1,o=this,new g(new i.Desc(this,"holdWhen",[t]),function(i){var c;return c=function(t){return"function"==typeof t&&t(),r.empty()&&u?i(N()):void 0},r.add(function(r,o){return t.subscribeInternal(function(t){var r,u,s,a,f;if(!t.hasValue())return t.isEnd()?c(o):i(t);if(e=t.value(),!e){for(a=n,n=[],s=[],r=0,u=a.length;u>r;r++)f=a[r],s.push(i(ct(f)));return s}})}),r.add(function(t,r){return o.subscribeInternal(function(t){return e&&t.hasValue()?n.push(t.value()):t.isEnd()&&n.length?c(r):i(t)})}),u=!0,c(),r.unsubscribe})},i.interval=function(t,n){return null==n&&(n={}),wt(new i.Desc(i,"interval",[t,n]),i.fromPoll(t,function(){return ct(n)}))},i.$={},i.$.asEventStream=function(t,n,r){var e;return j.isFunction(n)&&(e=[n,void 0],r=e[0],n=e[1]),wt(new i.Desc(this.selector||this,"asEventStream",[t]),i.fromBinder(function(r){return function(e){return r.on(t,n,e),function(){return r.off(t,n,e)}}}(this),r))},null!=(lt="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(lt.fn.asEventStream=i.$.asEventStream),i.Observable.prototype.log=function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[],this.subscribe(function(n){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,xt.call(t).concat([n.log()])):void 0}),this},i.EventStream.prototype.merge=function(t){var n;return U(t),n=this,wt(new i.Desc(n,"merge",[t]),i.mergeAll(this,t))},i.mergeAll=function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[],Z(t[0])&&(t=t[0]),t.length?new g(new i.Desc(i,"mergeAll",t),function(n){var r,e,o;return r=0,o=function(e){return function(o){return e.dispatcher.subscribe(function(e){var u;return e.isEnd()?(r++,r===t.length?n(N()):i.more):(u=n(e),u===i.noMore&&o(),u)})}},e=j.map(o,t),new i.CompositeUnsubscribe(e).unsubscribe}):i.never()},i.repeatedly=function(t,n){var r;return r=0,wt(new i.Desc(i,"repeatedly",[t,n]),i.fromPoll(t,function(){return n[r++%n.length]}))},i.repeat=function(t){var n;return n=0,i.fromBinder(function(r){var e,o,u,c,s;return e=!1,u=i.more,s=function(){},o=function(t){return t.isEnd()?e?c():e=!0:u=r(t)},c=function(){var c;for(e=!0;e&&u!==i.noMore;)c=t(n++),e=!1,c?s=c.subscribeInternal(o):r(N());return e=!0},c(),function(){return s()}})},i.retry=function(t){var n,r,e,o,u,c,s;if(!j.isFunction(t.source))throw new y("'source' option has to be a function");return s=t.source,c=t.retries||0,u=t.maxRetries||c,n=t.delay||function(){return 0},o=t.isRetryable||function(){return!0},e=!1,r=null,wt(new i.Desc(i,"retry",[t]),i.repeat(function(){var t,a,f;return e?null:(f=function(){return s().endOnError().withHandler(function(t){return t.isError()?(r=t,o(r.error)&&c>0?void 0:(e=!0,this.push(t))):(t.hasValue()&&(r=null,e=!0),this.push(t))})},r?(t={error:r.error,retriesDone:u-c},a=i.later(n(t)).filter(!1),c-=1,a.concat(i.once().flatMap(f))):f())}))},i.sequentially=function(t,n){var r;return r=0,wt(new i.Desc(i,"sequentially",[t,n]),i.fromPoll(t,function(){var t;return t=n[r++],r<n.length?t:r===n.length?[t,N()]:N()}))},i.Observable.prototype.skip=function(t){return wt(new i.Desc(this,"skip",[t]),this.withHandler(function(n){return n.hasValue()&&t>0?(t--,i.more):this.push(n)}))},i.Observable.prototype.take=function(t){return 0>=t?i.never():wt(new i.Desc(this,"take",[t]),this.withHandler(function(n){return n.hasValue()?(t--,t>0?this.push(n):(0===t&&this.push(n),this.push(N()),i.noMore)):this.push(n)}))},i.EventStream.prototype.skipUntil=function(t){var n;return n=t.take(1).map(!0).toProperty(!1),wt(new i.Desc(this,"skipUntil",[t]),this.filter(n))},i.EventStream.prototype.skipWhile=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],C(n),r=!1,W(this,n,t,function(t){return wt(new i.Desc(this,"skipWhile",[t]),this.withHandler(function(n){return!r&&n.hasValue()&&t(n.value())?i.more:(n.hasValue()&&(r=!0),this.push(n))}))})},i.Observable.prototype.slidingWindow=function(t,n){return null==n&&(n=0),wt(new i.Desc(this,"slidingWindow",[t,n]),this.scan([],function(n,r){return n.concat([r]).slice(-t)}).filter(function(t){return t.length>=n}))},i.spy=function(t){return ht.push(t)},ht=[],pt=function(t){var n,r,e;if(ht.length&&!pt.running)try{for(pt.running=!0,n=0,r=ht.length;r>n;n++)(e=ht[n])(t)}finally{delete pt.running}return void 0},i.Property.prototype.startWith=function(t){return wt(new i.Desc(this,"startWith",[t]),this.scan(t,function(t,n){return n}))},i.EventStream.prototype.startWith=function(t){return wt(new i.Desc(this,"startWith",[t]),i.once(t).concat(this))},i.Observable.prototype.takeWhile=function(){var t,n;return n=arguments[0],t=2<=arguments.length?xt.call(arguments,1):[],C(n),W(this,n,t,function(t){return wt(new i.Desc(this,"takeWhile",[t]),this.withHandler(function(n){return n.filter(t)?this.push(n):(this.push(N()),i.noMore)}))})},i.update=function(){var t,n,r,e;for(n=arguments[0],e=2<=arguments.length?xt.call(arguments,1):[],r=function(t){return function(){var n;return n=1<=arguments.length?xt.call(arguments,0):[],function(r){return t.apply(null,[r].concat(n))}}},t=e.length-1;t>0;)e[t]instanceof Function||(e[t]=function(t){return function(){return t}}(e[t])),e[t]=r(e[t]),t-=2;return wt(new i.Desc(i,"update",[n].concat(xt.call(e))),i.when.apply(i,e).scan(n,function(t,n){return n(t)}))},i.zipAsArray=function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[],Z(t[0])&&(t=t[0]),wt(new i.Desc(i,"zipAsArray",t),i.zipWith(t,function(){var t;return t=1<=arguments.length?xt.call(arguments,0):[]}))},i.zipWith=function(){var t,n,r;return t=arguments[0],r=2<=arguments.length?xt.call(arguments,1):[],j.isFunction(t)||(n=[t,r[0]],r=n[0],t=n[1]),r=j.map(function(t){return t.toEventStream()},r),wt(new i.Desc(i,"zipWith",[t].concat(xt.call(r))),i.when(r,t))},i.Observable.prototype.zip=function(t,n){return null==n&&(n=Array),wt(new i.Desc(this,"zip",[t]),i.zipWith([this,t],n))},i.Observable.prototype.first=function(){return wt(new i.Desc(this,"first",[]),this.take(1))},i.Observable.prototype.last=function(){var t;return wt(new i.Desc(this,"last",[]),this.withHandler(function(n){return n.isEnd()?(t&&this.push(t),this.push(N()),i.noMore):void(t=n)}))},i.EventStream.prototype.throttle=function(t){return wt(new i.Desc(this,"throttle",[t]),this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},i.Property.prototype.throttle=function(t){return this.delayChanges(new i.Desc(this,"throttle",[t]),function(n){return n.throttle(t)})},w.prototype.firstToPromise=function(t){var n=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new y("There isn't default Promise, use shim or parameter");t=Promise}return new t(function(t,r){return n.subscribe(function(n){return n.hasValue()&&t(n.value()),n.isError()&&r(n.error),i.noMore})})},w.prototype.toPromise=function(t){return this.last().firstToPromise(t)},null!==r(77)&&null!=r(78)?(e=[],o=function(){return i}.apply(n,e),!(void 0!==o&&(u.exports=o)),this.Bacon=i):"undefined"!=typeof u&&null!==u&&null!=u.exports?(u.exports=i,i.Bacon=i):this.Bacon=i}).call(this)}).call(n,function(){return this}(),r(17)(t))},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return c(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&A>=t}function c(t){return null==t?!1:y.call(t)==f?b.test(d.call(t)):o(t)&&h.test(t)}function s(t){return t=e(t),t&&p.test(t)?t.replace(l,"\\$&"):t}var a="[object Array]",f="[object Function]",l=/[.*+?^${}()|[\]\/\\]/g,p=RegExp(l.source),h=/^\[object .+?Constructor\]$/,v=Object.prototype,d=Function.prototype.toString,g=v.hasOwnProperty,y=v.toString,b=RegExp("^"+s(d.call(g)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=u(Array,"isArray"),A=9007199254740991,w=m||function(t){return o(t)&&i(t.length)&&y.call(t)==a};t.exports=w},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=5;n.BIRD_RADIUS=e;var o=1e3/60;n.FRAME_RATE=o;var u=20;n.GROUND_HEIGHT=u;var i=50;n.HOLE_HEIGHT=i;var c=80;n.PAUSE_KEY=c;var s=32;n.SPACE_KEY=s;var a=100;n.PIPE_DISTANCE=a;var f=22;n.PIPE_WIDTH=f;var l=200;n.WORLD_HEIGHT=l;var p=.2;n.GRAVITY=p;var h=.4*l;n.PIPE_OFFSET=h;var v=[],d,g,y,b,b,m,A,w},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return c(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&A>=t}function c(t){return null==t?!1:y.call(t)==f?b.test(d.call(t)):o(t)&&h.test(t)}function s(t){return t=e(t),t&&p.test(t)?t.replace(l,"\\$&"):t}var a="[object Array]",f="[object Function]",l=/[.*+?^${}()|[\]\/\\]/g,p=RegExp(l.source),h=/^\[object .+?Constructor\]$/,v=Object.prototype,d=Function.prototype.toString,g=v.hasOwnProperty,y=v.toString,b=RegExp("^"+s(d.call(g)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=u(Array,"isArray"),A=9007199254740991,w=m||function(t){return o(t)&&i(t.length)&&y.call(t)==a};t.exports=w},function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},o=e(r(1)),u=new o.Bus;t.exports=u.push.bind(u),t.exports.replaceNotifier$=u.startWith().delay(1);var i=[],c,s,a,f,f,l,p,h},function(t,n,r){var e,o=Object.prototype.hasOwnProperty,u=Object.prototype.toString,i=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===u.call(t)},c=function(t){"use strict";if(!t||"[object Object]"!==u.call(t))return!1;var n=o.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return i===e||o.call(t,i)};t.exports=function s(){"use strict";var t,n,r,o,u,a,f=arguments[0],l=1,p=arguments.length,h=!1;for("boolean"==typeof f?(h=f,f=arguments[1]||{},l=2):("object"!=typeof f&&"function"!=typeof f||null==f)&&(f={});p>l;++l)if(t=arguments[l],null!=t)for(n in t)r=f[n],o=t[n],f!==o&&(h&&o&&(c(o)||(u=i(o)))?(u?(u=!1,a=r&&i(r)?r:[]):a=r&&c(r)?r:{},f[n]=s(h,a,o)):o!==e&&(f[n]=o));return f}},function(t,n,r){function e(t){return t}t.exports=e},function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}function o(t){return null!=t&&i(b(t))}function u(t,n){return t="number"==typeof t||h.test(t)?+t:-1,n=null==n?y:n,t>-1&&t%1==0&&n>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function c(t){for(var n=a(t),r=n.length,e=r&&t.length,o=!!e&&i(e)&&(p(t)||l(t)),c=-1,s=[];++c<r;){var f=n[c];(o&&u(f,e)||d.call(t,f))&&s.push(f)}return s}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function a(t){if(null==t)return[];s(t)||(t=Object(t));var n=t.length;n=n&&i(n)&&(p(t)||l(t))&&n||0;for(var r=t.constructor,e=-1,o="function"==typeof r&&r.prototype===t,c=Array(n),a=n>0;++e<n;)c[e]=e+"";for(var f in t)a&&u(f,n)||"constructor"==f&&(o||!d.call(t,f))||c.push(f);return c}var f=r(44),l=r(45),p=r(2),h=/^\d+$/,v=Object.prototype,d=v.hasOwnProperty,g=f(Object,"keys"),y=9007199254740991,b=e("length"),m=g?function(t){var n=null==t?null:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&o(t)?c(t):s(t)?g(t):[]}:c;t.exports=m},function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}function o(t){return null!=t&&i(b(t))}function u(t,n){return t="number"==typeof t||h.test(t)?+t:-1,n=null==n?y:n,t>-1&&t%1==0&&n>t}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&y>=t}function c(t){for(var n=a(t),r=n.length,e=r&&t.length,o=!!e&&i(e)&&(p(t)||l(t)),c=-1,s=[];++c<r;){var f=n[c];(o&&u(f,e)||d.call(t,f))&&s.push(f)}return s}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function a(t){if(null==t)return[];s(t)||(t=Object(t));var n=t.length;n=n&&i(n)&&(p(t)||l(t))&&n||0;for(var r=t.constructor,e=-1,o="function"==typeof r&&r.prototype===t,c=Array(n),a=n>0;++e<n;)c[e]=e+"";for(var f in t)a&&u(f,n)||"constructor"==f&&(o||!d.call(t,f))||c.push(f);return c}var f=r(58),l=r(59),p=r(4),h=/^\d+$/,v=Object.prototype,d=v.hasOwnProperty,g=f(Object,"keys"),y=9007199254740991,b=e("length"),m=g?function(t){var n=null==t?null:t.constructor;return"function"==typeof n&&n.prototype===t||"function"!=typeof t&&o(t)?c(t):s(t)?g(t):[]}:c;t.exports=m},function(t,n,r){function e(t,n){for(var r=-1,e=t.length,u=-1,i=[];++r<e;)t[r]===n&&(t[r]=o,i[++u]=r);return i}var o="__lodash_placeholder__";t.exports=e},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return c(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&A>=t}function c(t){return null==t?!1:y.call(t)==f?b.test(d.call(t)):o(t)&&h.test(t)}function s(t){return t=e(t),t&&p.test(t)?t.replace(l,"\\$&"):t}var a="[object Array]",f="[object Function]",l=/[.*+?^${}()|[\]\/\\]/g,p=RegExp(l.source),h=/^\[object .+?Constructor\]$/,v=Object.prototype,d=Function.prototype.toString,g=v.hasOwnProperty,y=v.toString,b=RegExp("^"+s(d.call(g)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=u(Array,"isArray"),A=9007199254740991,w=m||function(t){return o(t)&&i(t.length)&&y.call(t)==a};t.exports=w},function(t,n,r){"use strict";function e(t,n){var r=c(n,2),e=c(r[0],2),o=e[0],u=e[1],i=r[1];if(!i.running)return g;var s={x:t.x+t.vx,vx:u.birdTouchedPipe?0:Math.min(t.vx+.1,2),y:t.y+t.vy,vy:t.vy-d,touchesGround:!1,groundTouchTime:t.touchesGround?t.groundTouchTime+1:0},a=s.y-2*v;return l>=a&&(s.y=l+2*v,s.vy=0,s.touchesGround=!0),o.clicks.length>0&&!s.touchesGround&&(s.vy=3),s}function o(t){var n=t.bird,r=t.pipes;return s(r,function(t){return n.x+2*v>t.x&&n.x<t.x+h?!(n.y<t.y&&n.y-2*v>t.y-p):!1})}function u(t){var n=t.bird;return n.y-2*v<=l}var i=function(t){return t&&t.__esModule?t["default"]:t},c=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,e=[],o=t[Symbol.iterator]();!(r=o.next()).done&&(e.push(r.value),!n||e.length!==n););return e}throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.updateBird=e,n.birdTouchesPipe=o,n.birdTouchesGround=u,Object.defineProperty(n,"__esModule",{value:!0});var s=i(r(50)),a=r(3),f=a.WORLD_HEIGHT,l=a.GROUND_HEIGHT,p=a.HOLE_HEIGHT,h=a.PIPE_WIDTH,v=a.BIRD_RADIUS,d=a.GRAVITY,g={radius:f,x:0,vx:2,y:f/2-v/2,vy:0,touchesGround:!1,groundTouchTime:0};n.initialBird=g,r(5)();var y=["updateBird","birdTouchesPipe","birdTouchesGround"],b,m,A,w,w,E,S,I},function(t,n,r){"use strict";function e(t,n){var r=u(n,2),e=r[0],o=r[1];if(!e.running)return s;var a=t.slice(0).map(function(t){return i({},t)});a.length>25&&a.shift();var h=a[a.length-1];return(0===a.length||o.x+5*l>h.x+l)&&a.push({x:o.x+5*l,y:c(p,f-f/8)}),a}var o=function(t){return t&&t.__esModule?t["default"]:t},u=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,e=[],o=t[Symbol.iterator]();!(r=o.next()).done&&(e.push(r.value),!n||e.length!==n););return e}throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.updatePipes=e,Object.defineProperty(n,"__esModule",{value:!0});var i=o(r(6)),c=r(65).random,s=[];n.initialPipes=s;var a=r(3),f=a.WORLD_HEIGHT,l=a.PIPE_DISTANCE,p=a.PIPE_OFFSET,h=["updatePipes"],v,d,g,y,y,b,m,A},function(t,n,r){"use strict";function e(t,n,r,e,o,u){t.drawImage(k,n.x,n.y,n.w,n.h,r,e,o,u)}function o(t){return O.height/m*t}function u(t){var n=document.body.classList;t?n.add("running"):n.remove("running")}function i(t,n){return t[Math.floor(n/t.length)%t.length]}function c(t,n){j.save();var r=o(I),u=2*r;j.translate(O.width/2-r,O.height-o(n.y)+r),j.rotate(v(7*-n.vy+4*n.groundTouchTime)),j.translate(-r,-r);var c=n.vy>0?i(B.bird,t.tick):B.bird[0],s=c.w/c.h;e(j,c,0,0,u*s,u),j.restore()}function s(t){var n=B.ground,r=o(n.w),u=o(n.h);j.save();var i=o(t.x)%r*-1;j.translate(0+i,O.height-1.25*o(S));for(var c=0;c<Math.ceil(O.width/r)+1;c++)e(j,n,0,0,r,u),j.translate(r,0);j.restore()}function a(t){var n=B.background,r=o(n.w),u=o(n.h);j.save(),j.translate(0,.25*-o(n.h));for(var i=0;i<Math.ceil(O.width/r)+1;i++)e(j,n,0,0,r,u),j.translate(r,0);j.restore()}function f(t,n){var r=B.pipe,u=B.pipe2,i=o(E),c=r.w/i,s=(o(r.w),o(r.h)*c),a=(o(u.w),o(u.h)*c),f=o(B.pipe3.h)*c;t.forEach(function(t){var c=O.width/2-o(I)-(o(n.x)-o(t.x)),l=O.height-o(t.y)+o(w),p=O.height-(l+s);p>o(S)&&g(Math.ceil((p-o(S))/f)).forEach(function(t){j.save(),j.translate(c,l+s+f*t),e(j,B.pipe3,0,0,i,f),j.restore()}),j.save(),j.translate(c,l),e(j,r,0,0,i,s),j.restore(),j.save(),l=O.height-o(t.y)-a,l>0&&g(Math.ceil(l/f)).forEach(function(t){j.save(),j.translate(c,l-t*f-f),e(j,B.pipe3,0,0,i,f),j.restore()}),j.translate(c,l),e(j,u,0,0,i,a),j.restore()})}function l(t){var n=t.world,r=t.bird,e=t.pipes;n.running!==R&&(u(n.running),R=n.running),j.clearRect(0,0,O.width,O.height),a(n),f(e,r),s(r),c(n,r)}function p(t,n){var r=n.bird;j.save(),j.globalAlpha=.3,j.translate(o(t.bird.x-r.x),0),c(t.world,t.bird),j.restore()}var h=function(t){return t&&t.__esModule?t["default"]:t},v=h(r(23)),d=h(r(6)),g=h(r(46));r(75);var y=r(3),b=y.FRAME_RATE,m=y.WORLD_HEIGHT,A=y.BIRD_HEIGHT,w=y.HOLE_HEIGHT,E=y.PIPE_WIDTH,S=y.GROUND_HEIGHT,I=y.BIRD_RADIUS,x=r(61),O=x.canvas,j=x.ctx,B={background:{x:0,y:0,w:144,h:256},ground:{x:146,y:0,w:153,h:56},score:{x:146,y:58,w:113,h:58},bird:[{x:223,y:124,w:17,h:12},{x:264,y:90,w:17,h:12},{x:264,y:63,w:17,h:12}],pipe:{x:330,y:0,w:26,h:121},pipe2:{x:302,y:0,w:26,h:135},pipe3:{x:302,y:0,w:26,h:100}},k=new Image;k.src=r(76);var R=!1;t.exports=l,t.exports.renderFuture=p,r(5)();var U=["drawSprite","scale","updateRunningClass","getFrame","renderBird","renderGround","renderBackground","renderPipes","render","renderFuture"],T,P,D,C,C,M,L,F},function(t,n,r){"use strict";function e(t,n){var r=u(n,2),e=r[0],o=r[1],i={running:t.running,tick:t.tick+1};return!i.running&&e.clicks.length>0&&(i.running=!0),i.running&&o.gameEnds&&(i.running=!1),i}var o=function(t){return t&&t.__esModule?t["default"]:t},u=function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){for(var r,e=[],o=t[Symbol.iterator]();!(r=o.next()).done&&(e.push(r.value),!n||e.length!==n););return e}throw new TypeError("Invalid attempt to destructure non-iterable instance")};n.updateWorld=e,Object.defineProperty(n,"__esModule",{value:!0});var i=o(r(6)),c=o(r(48)),s=r(3).WORLD_HEIGHT,a={running:!1,tick:0};n.initialWorld=a,r(5)();var f=["updateWorld"],l,p,h,v,v,d,g,y},function(t,n,r){(function(t){function t(n){return this instanceof t?(this.length=0,this.parent=void 0,"number"==typeof n?e(this,n):"string"==typeof n?o(this,n,arguments.length>1?arguments[1]:"utf8"):u(this,n)):arguments.length>1?new t(n,arguments[1]):new t(n)}function e(n,r){if(n=l(n,0>r?0:0|p(r)),!t.TYPED_ARRAY_SUPPORT)for(var e=0;r>e;e++)n[e]=0;return n}function o(t,n,r){("string"!=typeof r||""===r)&&(r="utf8");var e=0|v(n,r);return t=l(t,e),t.write(n,r),t}function u(n,r){if(t.isBuffer(r))return i(n,r);if(G(r))return c(n,r);if(null==r)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer?s(n,r):r.length?a(n,r):f(n,r)}function i(t,n){var r=0|p(n.length);return t=l(t,r),n.copy(t,0,0,r),t}function c(t,n){var r=0|p(n.length);t=l(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function s(t,n){var r=0|p(n.length);t=l(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function a(t,n){var r=0|p(n.length);t=l(t,r);for(var e=0;r>e;e+=1)t[e]=255&n[e];return t}function f(t,n){var r,e=0;"Buffer"===n.type&&G(n.data)&&(r=n.data,e=0|p(r.length)),t=l(t,e);for(var o=0;e>o;o+=1)t[o]=255&r[o];return t}function l(n,r){t.TYPED_ARRAY_SUPPORT?n=t._augment(new Uint8Array(r)):(n.length=r,n._isBuffer=!0);var e=0!==r&&r<=t.poolSize>>>1;return e&&(n.parent=Y),n}function p(t){if(t>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return 0|t}function h(n,r){if(!(this instanceof h))return new h(n,r);var e=new t(n,r);return delete e.parent,e}function v(t,n){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(n||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return L(t).length;case"base64":return W(t).length;default:return t.length}}function d(t,n,r,e){r=Number(r)||0;var o=t.length-r;e?(e=Number(e),e>o&&(e=o)):e=o;var u=n.length;if(u%2!==0)throw new Error("Invalid hex string");e>u/2&&(e=u/2);for(var i=0;e>i;i++){var c=parseInt(n.substr(2*i,2),16);if(isNaN(c))throw new Error("Invalid hex string");t[r+i]=c}return i}function g(t,n,r,e){return V(L(n,t.length-r),t,r,e)}function y(t,n,r,e){return V(F(n),t,r,e)}function b(t,n,r,e){return y(t,n,r,e)}function m(t,n,r,e){return V(W(n),t,r,e)}function A(t,n,r,e){return V(z(n,t.length-r),t,r,e)}function w(t,n,r){return 0===n&&r===t.length?q.fromByteArray(t):q.fromByteArray(t.slice(n,r))}function E(t,n,r){var e="",o="";r=Math.min(t.length,r);for(var u=n;r>u;u++)t[u]<=127?(e+=N(o)+String.fromCharCode(t[u]),o=""):o+="%"+t[u].toString(16);return e+N(o)}function S(t,n,r){var e="";r=Math.min(t.length,r);for(var o=n;r>o;o++)e+=String.fromCharCode(127&t[o]);return e}function I(t,n,r){var e="";r=Math.min(t.length,r);for(var o=n;r>o;o++)e+=String.fromCharCode(t[o]);return e}function x(t,n,r){var e=t.length;(!n||0>n)&&(n=0),(!r||0>r||r>e)&&(r=e);for(var o="",u=n;r>u;u++)o+=M(t[u]);return o}function O(t,n,r){for(var e=t.slice(n,r),o="",u=0;u<e.length;u+=2)o+=String.fromCharCode(e[u]+256*e[u+1]);return o}function j(t,n,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+n>r)throw new RangeError("Trying to access beyond buffer length")}function B(n,r,e,o,u,i){if(!t.isBuffer(n))throw new TypeError("buffer must be a Buffer instance");if(r>u||i>r)throw new RangeError("value is out of bounds");if(e+o>n.length)throw new RangeError("index out of range")}function k(t,n,r,e){0>n&&(n=65535+n+1);for(var o=0,u=Math.min(t.length-r,2);u>o;o++)t[r+o]=(n&255<<8*(e?o:1-o))>>>8*(e?o:1-o)}function R(t,n,r,e){0>n&&(n=4294967295+n+1);for(var o=0,u=Math.min(t.length-r,4);u>o;o++)t[r+o]=n>>>8*(e?o:3-o)&255}function U(t,n,r,e,o,u){if(n>o||u>n)throw new RangeError("value is out of bounds");if(r+e>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function T(t,n,r,e,o){return o||U(t,n,r,4,3.4028234663852886e38,-3.4028234663852886e38),H.write(t,n,r,e,23,4),r+4}function P(t,n,r,e,o){return o||U(t,n,r,8,1.7976931348623157e308,-1.7976931348623157e308),H.write(t,n,r,e,52,8),r+8}function D(t){if(t=C(t).replace(X,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function C(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function M(t){return 16>t?"0"+t.toString(16):t.toString(16)}function L(t,n){n=n||1/0;for(var r,e=t.length,o=null,u=[],i=0;e>i;i++){if(r=t.charCodeAt(i),r>55295&&57344>r){if(!o){if(r>56319){(n-=3)>-1&&u.push(239,191,189);continue}if(i+1===e){(n-=3)>-1&&u.push(239,191,189);continue}o=r;continue}if(56320>r){(n-=3)>-1&&u.push(239,191,189),o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else o&&((n-=3)>-1&&u.push(239,191,189),o=null);if(128>r){if((n-=1)<0)break;u.push(r)}else if(2048>r){if((n-=2)<0)break;u.push(r>>6|192,63&r|128)}else if(65536>r){if((n-=3)<0)break;u.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((n-=4)<0)break;u.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return u}function F(t){for(var n=[],r=0;r<t.length;r++)n.push(255&t.charCodeAt(r));return n}function z(t,n){for(var r,e,o,u=[],i=0;i<t.length&&!((n-=2)<0);i++)r=t.charCodeAt(i),e=r>>8,o=r%256,u.push(o),u.push(e);return u}function W(t){return q.toByteArray(D(t))}function V(t,n,r,e){for(var o=0;e>o&&!(o+r>=n.length||o>=t.length);o++)n[o+r]=t[o];return o}function N(t){try{return decodeURIComponent(t)}catch(n){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var q=r(67),H=r(68),G=r(69);n.Buffer=t,n.SlowBuffer=h,n.INSPECT_MAX_BYTES=50,t.poolSize=8192;var K=1073741823,Y={};t.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),n=new Uint8Array(t);return n.foo=function(){return 42},42===n.foo()&&"function"==typeof n.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(n,r){if(!t.isBuffer(n)||!t.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(n===r)return 0;for(var e=n.length,o=r.length,u=0,i=Math.min(e,o);i>u&&n[u]===r[u];)++u;return u!==i&&(e=n[u],o=r[u]),o>e?-1:e>o?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(n,r){if(!G(n))throw new TypeError("list argument must be an Array of Buffers.");if(0===n.length)return new t(0);if(1===n.length)return n[0];var e;if(void 0===r)for(r=0,e=0;e<n.length;e++)r+=n[e].length;var o=new t(r),u=0;for(e=0;e<n.length;e++){var i=n[e];i.copy(o,u),u+=i.length}return o},t.byteLength=v,t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(t,n,r){var e=!1;if(n=0|n,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>n&&(n=0),r>this.length&&(r=this.length),n>=r)return"";for(;;)switch(t){case"hex":return x(this,n,r);case"utf8":case"utf-8":return E(this,n,r);case"ascii":return S(this,n,r);case"binary":return I(this,n,r);case"base64":return w(this,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,n,r);default:if(e)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),e=!0}},t.prototype.equals=function(n){if(!t.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:0===t.compare(this,n)},t.prototype.inspect=function(){var t="",r=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(n){if(!t.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?0:t.compare(this,n)},t.prototype.indexOf=function(n,r){function e(t,n,r){for(var e=-1,o=0;r+o<t.length;o++)if(t[r+o]===n[-1===e?0:o-e]){if(-1===e&&(e=o),o-e+1===n.length)return r+e}else e=-1;return-1}if(r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),r>>=0,0===this.length)return-1;if(r>=this.length)return-1;if(0>r&&(r=Math.max(this.length+r,0)),"string"==typeof n)return 0===n.length?-1:String.prototype.indexOf.call(this,n,r);if(t.isBuffer(n))return e(this,n,r);if("number"==typeof n)return t.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,n,r):e(this,[n],r);throw new TypeError("val must be string, number or Buffer")},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,n){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,n)},t.prototype.write=function(t,n,r,e){if(void 0===n)e="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)e=n,r=this.length,n=0;else if(isFinite(n))n=0|n,isFinite(r)?(r=0|r,void 0===e&&(e="utf8")):(e=r,r=void 0);else{var o=e;e=n,n=0|r,r=o}var u=this.length-n;if((void 0===r||r>u)&&(r=u),t.length>0&&(0>r||0>n)||n>this.length)throw new RangeError("attempt to write outside buffer bounds");e||(e="utf8");for(var i=!1;;)switch(e){case"hex":return d(this,t,n,r);case"utf8":case"utf-8":return g(this,t,n,r);case"ascii":return y(this,t,n,r);case"binary":return b(this,t,n,r);case"base64":return m(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(n,r){var e=this.length;n=~~n,r=void 0===r?e:~~r,0>n?(n+=e,0>n&&(n=0)):n>e&&(n=e),0>r?(r+=e,0>r&&(r=0)):r>e&&(r=e),n>r&&(r=n);var o;if(t.TYPED_ARRAY_SUPPORT)o=t._augment(this.subarray(n,r));else{var u=r-n;o=new t(u,void 0);for(var i=0;u>i;i++)o[i]=this[i+n]}return o.length&&(o.parent=this.parent||this),o},t.prototype.readUIntLE=function(t,n,r){t=0|t,n=0|n,r||j(t,n,this.length);for(var e=this[t],o=1,u=0;++u<n&&(o*=256);)e+=this[t+u]*o;return e},t.prototype.readUIntBE=function(t,n,r){t=0|t,n=0|n,r||j(t,n,this.length);for(var e=this[t+--n],o=1;n>0&&(o*=256);)e+=this[t+--n]*o;return e},t.prototype.readUInt8=function(t,n){return n||j(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,n){return n||j(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,n){return n||j(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,n){return n||j(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,n){return n||j(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readIntLE=function(t,n,r){t=0|t,n=0|n,r||j(t,n,this.length);for(var e=this[t],o=1,u=0;++u<n&&(o*=256);)e+=this[t+u]*o;return o*=128,e>=o&&(e-=Math.pow(2,8*n)),e},t.prototype.readIntBE=function(t,n,r){t=0|t,n=0|n,r||j(t,n,this.length);for(var e=n,o=1,u=this[t+--e];e>0&&(o*=256);)u+=this[t+--e]*o;return o*=128,u>=o&&(u-=Math.pow(2,8*n)),u},t.prototype.readInt8=function(t,n){return n||j(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},t.prototype.readInt16LE=function(t,n){n||j(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt16BE=function(t,n){n||j(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},t.prototype.readInt32LE=function(t,n){return n||j(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,n){return n||j(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,n){return n||j(t,4,this.length),H.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,n){return n||j(t,4,this.length),H.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,n){return n||j(t,8,this.length),H.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,n){return n||j(t,8,this.length),H.read(this,t,!1,52,8)},t.prototype.writeUIntLE=function(t,n,r,e){t=+t,n=0|n,r=0|r,e||B(this,t,n,r,Math.pow(2,8*r),0);var o=1,u=0;for(this[n]=255&t;++u<r&&(o*=256);)this[n+u]=t/o&255;return n+r},t.prototype.writeUIntBE=function(t,n,r,e){t=+t,n=0|n,r=0|r,e||B(this,t,n,r,Math.pow(2,8*r),0);var o=r-1,u=1;for(this[n+o]=255&t;--o>=0&&(u*=256);)this[n+o]=t/u&255;return n+r},t.prototype.writeUInt8=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,1,255,0),t.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),this[r]=n,r+1},t.prototype.writeUInt16LE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=n,this[r+1]=n>>>8):k(this,n,r,!0),r+2},t.prototype.writeUInt16BE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[r]=n>>>8,this[r+1]=n):k(this,n,r,!1),r+2},t.prototype.writeUInt32LE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r+3]=n>>>24,this[r+2]=n>>>16,this[r+1]=n>>>8,this[r]=n):R(this,n,r,!0),r+4},t.prototype.writeUInt32BE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[r]=n>>>24,this[r+1]=n>>>16,this[r+2]=n>>>8,this[r+3]=n):R(this,n,r,!1),r+4},t.prototype.writeIntLE=function(t,n,r,e){if(t=+t,n=0|n,!e){var o=Math.pow(2,8*r-1);B(this,t,n,r,o-1,-o)}var u=0,i=1,c=0>t?1:0;for(this[n]=255&t;++u<r&&(i*=256);)this[n+u]=(t/i>>0)-c&255;return n+r},t.prototype.writeIntBE=function(t,n,r,e){if(t=+t,n=0|n,!e){var o=Math.pow(2,8*r-1);B(this,t,n,r,o-1,-o)}var u=r-1,i=1,c=0>t?1:0;for(this[n+u]=255&t;--u>=0&&(i*=256);)this[n+u]=(t/i>>0)-c&255;return n+r},t.prototype.writeInt8=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,1,127,-128),t.TYPED_ARRAY_SUPPORT||(n=Math.floor(n)),0>n&&(n=255+n+1),this[r]=n,r+1},t.prototype.writeInt16LE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=n,this[r+1]=n>>>8):k(this,n,r,!0),r+2},t.prototype.writeInt16BE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[r]=n>>>8,this[r+1]=n):k(this,n,r,!1),r+2},t.prototype.writeInt32LE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[r]=n,this[r+1]=n>>>8,this[r+2]=n>>>16,this[r+3]=n>>>24):R(this,n,r,!0),r+4},t.prototype.writeInt32BE=function(n,r,e){return n=+n,r=0|r,e||B(this,n,r,4,2147483647,-2147483648),0>n&&(n=4294967295+n+1),t.TYPED_ARRAY_SUPPORT?(this[r]=n>>>24,this[r+1]=n>>>16,this[r+2]=n>>>8,this[r+3]=n):R(this,n,r,!1),r+4},t.prototype.writeFloatLE=function(t,n,r){return T(this,t,n,!0,r)},t.prototype.writeFloatBE=function(t,n,r){return T(this,t,n,!1,r)},t.prototype.writeDoubleLE=function(t,n,r){return P(this,t,n,!0,r)},t.prototype.writeDoubleBE=function(t,n,r){return P(this,t,n,!1,r)},t.prototype.copy=function(n,r,e,o){if(e||(e=0),o||0===o||(o=this.length),r>=n.length&&(r=n.length),r||(r=0),o>0&&e>o&&(o=e),o===e)return 0;if(0===n.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),n.length-r<o-e&&(o=n.length-r+e);var u=o-e;if(1e3>u||!t.TYPED_ARRAY_SUPPORT)for(var i=0;u>i;i++)n[i+r]=this[i+e];else n._set(this.subarray(e,e+u),r);return u},t.prototype.fill=function(t,n,r){if(t||(t=0),n||(n=0),r||(r=this.length),n>r)throw new RangeError("end < start");if(r!==n&&0!==this.length){if(0>n||n>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var e;if("number"==typeof t)for(e=n;r>e;e++)this[e]=t;else{var o=L(t.toString()),u=o.length;for(e=n;r>e;e++)this[e]=o[e%u]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var n=new Uint8Array(this.length),r=0,e=n.length;e>r;r+=1)n[r]=this[r];return n.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=t.prototype;t._augment=function(n){return n.constructor=t,n._isBuffer=!0,n._set=n.set,n.get=Q.get,n.set=Q.set,n.write=Q.write,n.toString=Q.toString,n.toLocaleString=Q.toString,n.toJSON=Q.toJSON,n.equals=Q.equals,n.compare=Q.compare,n.indexOf=Q.indexOf,n.copy=Q.copy,n.slice=Q.slice,n.readUIntLE=Q.readUIntLE,n.readUIntBE=Q.readUIntBE,n.readUInt8=Q.readUInt8,n.readUInt16LE=Q.readUInt16LE,n.readUInt16BE=Q.readUInt16BE,n.readUInt32LE=Q.readUInt32LE,n.readUInt32BE=Q.readUInt32BE,n.readIntLE=Q.readIntLE,n.readIntBE=Q.readIntBE,n.readInt8=Q.readInt8,n.readInt16LE=Q.readInt16LE,n.readInt16BE=Q.readInt16BE,n.readInt32LE=Q.readInt32LE,n.readInt32BE=Q.readInt32BE,n.readFloatLE=Q.readFloatLE,n.readFloatBE=Q.readFloatBE,n.readDoubleLE=Q.readDoubleLE,n.readDoubleBE=Q.readDoubleBE,n.writeUInt8=Q.writeUInt8,n.writeUIntLE=Q.writeUIntLE,n.writeUIntBE=Q.writeUIntBE,n.writeUInt16LE=Q.writeUInt16LE,n.writeUInt16BE=Q.writeUInt16BE,n.writeUInt32LE=Q.writeUInt32LE,n.writeUInt32BE=Q.writeUInt32BE,n.writeIntLE=Q.writeIntLE,n.writeIntBE=Q.writeIntBE,n.writeInt8=Q.writeInt8,n.writeInt16LE=Q.writeInt16LE,n.writeInt16BE=Q.writeInt16BE,n.writeInt32LE=Q.writeInt32LE,n.writeInt32BE=Q.writeInt32BE,n.writeFloatLE=Q.writeFloatLE,n.writeFloatBE=Q.writeFloatBE,n.writeDoubleLE=Q.writeDoubleLE,n.writeDoubleBE=Q.writeDoubleBE,n.fill=Q.fill,n.inspect=Q.inspect,n.toArrayBuffer=Q.toArrayBuffer,n};var X=/[^+\/0-9A-z\-]/g}).call(n,r(16).Buffer)},function(t,n,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,n,r){var e,o,u;(function(t){(function(){var i,c;i=function(t){var n,r,e;return n=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)}}(),e=function(t){return function(){function n(e){return t(e),r(function(t){return n(t)})}return n}()()},t.scheduleAnimationFrame=function(){return t.fromBinder(function(t){var r;return r=e(t),function(){return n(r)}})},t.repeatedlyOnFrame=function(n,r){var e;return null==r&&(r=1),e=0,t.scheduleAnimationFrame().scan(0,function(t){return t+1}).filter(function(t){return!(t%r)}).map(function(){return n[e++%n.length]}).toEventStream()},t},"undefined"!=typeof t&&null!==t?(c=r(1),t.exports=i(c)):(o=[r(19)],e=i,u="function"==typeof e?e.apply(n,o):e,!(void 0!==u&&(t.exports=u)))}).call(this)}).call(n,r(17)(t))},function(t,n,r){!function(){var t=r(20);n.using=t.using,n.to=t.to}()},function(t,n,r){(function(t){!function(){var r=function(n,r,e){var o,u;t.isBuffer(r)||(r=new t(r)),"undefined"==typeof e&&(e=0);for(var o=n.length-r.length;o>=e;){u=!0;for(var i=0;i<r.length;i++)if(n[e+i]!==r[i]){u=!1;break}if(u)return e;e++}return-1},e=function(n){var r=[];return n.forEach(function(n){t.isBuffer(n)||(n=new t(n)),r.push(n)}),t.concat(r)},o=function(t){return Array.isArray(t)||(t=Array.prototype.slice.call(arguments)),new u(t)},u=function(t){this._wrapped=t};u.prototype.append=function(t){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));var n=[];return this._wrapped.forEach(function(r){n.push(e([r].concat(t)))}),n},u.prototype.prepend=function(t){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));var n=[];return this._wrapped.forEach(function(r){n.push(e(t.concat(r)))}),n};var i=function(t){return new c(t)},c=function(t){this._wrapped=t};c.prototype.split=function(n){var e,o=this._wrapped,u=[],i=0,c=0;for(t.isBuffer(n)||(n=new t(n));i>-1;){if(i=r(n,o,c),-1==i){u.push(n.slice(c));break}e=n.slice(c,i),u.push(e),c+=e.length+o.length}return u.length>0?u:[n]},c.prototype.join=function(t){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));var n=this._wrapped,r=[];return t.forEach(function(e){return r.push(e),r.length<t.length+(t.length-1)?void r.push(n):void 0}),e(r)},n.using=i,n.to=o}()}).call(n,r(16).Buffer)},function(t,n,r){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],n=0;n<this.length;n++){var r=this[n];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},t}},function(t,n,r){n=t.exports=r(21)(),n.push([t.id,"html,body,#app,#game{width:100%;height:100%;margin:0;overflow:hidden}#app{box-sizing:border-box;padding-bottom:100px}#controls{width:100%;height:100px;position:absolute;bottom:0;left:0}canvas{display:block;height:100%}canvas,#future-slider{width:100%}.future-slider{margin-top:-9px}",""])},function(t,n,r){var e=r(66);t.exports=function(t){return e("number"==typeof t,"Degrees should be a number"),t*(Math.PI/180)}},function(t,n,r){function e(t,n,r){var e=null==t?void 0:o(t,u(n),n+"");return void 0===e?r:e}var o=r(25),u=r(26);t.exports=e},function(t,n,r){function e(t,n,r){if(null!=t){void 0!==r&&r in o(t)&&(n=[r]);for(var e=0,u=n.length;null!=t&&u>e;)t=t[n[e++]];return e&&e==u?t:void 0}}function o(t){return u(t)?t:Object(t)}function u(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}t.exports=e},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){if(u(t))return t;var n=[];return e(t).replace(i,function(t,r,e,o){n.push(e?o.replace(c,"$1"):r||t)}),n}var u=r(27),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,c=/\\(\\)?/g;t.exports=o},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return c(r)?r:void 0}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&A>=t}function c(t){return null==t?!1:y.call(t)==f?b.test(d.call(t)):o(t)&&h.test(t)}function s(t){return t=e(t),t&&p.test(t)?t.replace(l,"\\$&"):t}var a="[object Array]",f="[object Function]",l=/[.*+?^${}()|[\]\/\\]/g,p=RegExp(l.source),h=/^\[object .+?Constructor\]$/,v=Object.prototype,d=Function.prototype.toString,g=v.hasOwnProperty,y=v.toString,b=RegExp("^"+s(d.call(g)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=u(Array,"isArray"),A=9007199254740991,w=m||function(t){return o(t)&&i(t.length)&&y.call(t)==a};t.exports=w},function(t,n,r){function e(t){var n=i(function(r,e){var i=u(e,n.placeholder);return o(r,t,null,e,i)});return n}var o=r(29),u=r(10),i=r(32),c=64,s=e(c);s.placeholder={},t.exports=s},function(t,n,r){(function(n){function e(t,n,r){for(var e=r.length,o=-1,u=O(t.length-e,0),i=-1,c=n.length,s=Array(u+c);++i<c;)s[i]=n[i];for(;++o<e;)s[r[o]]=t[o];for(;u--;)s[i++]=t[o++];return s}function o(t,n,r){for(var e=-1,o=r.length,u=-1,i=O(t.length-o,0),c=-1,s=n.length,a=Array(i+s);++u<i;)a[u]=t[u];for(var f=u;++c<s;)a[f+c]=n[c];for(;++e<o;)a[f+r[e]]=t[u++];return a}function u(t,r){function e(){var u=this&&this!==n&&this instanceof e?o:t;return u.apply(r,arguments)}var o=i(t);return e}function i(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4])}var r=v(t.prototype),e=t.apply(r,n);return p(e)?e:r}}function c(t,r,u,s,a,f,p,v,I,x){function j(){for(var b=arguments.length,m=b,A=Array(b);m--;)A[m]=arguments[m];if(s&&(A=e(A,s,a)),f&&(A=o(A,f,p)),U||P){var S=j.placeholder,C=d(A,S);if(b-=C.length,x>b){var M=v?h(v):null,L=O(x-b,0),F=U?C:null,z=U?null:C,W=U?A:null,V=U?null:A;r|=U?w:E,r&=~(U?E:w),T||(r&=~(g|y));var N=c(t,r,u,W,F,V,z,M,I,L);return N.placeholder=S,N}}var q=k?u:this,H=R?q[t]:t;return v&&(A=l(A,v)),B&&I<A.length&&(A.length=I),this&&this!==n&&this instanceof j&&(H=D||i(t)),H.apply(q,A)}var B=r&S,k=r&g,R=r&y,U=r&m,T=r&b,P=r&A,D=R?null:i(t);return j}function s(t,r,e,o){function u(){for(var r=-1,i=arguments.length,a=-1,f=o.length,l=Array(i+f);++a<f;)l[a]=o[a];for(;i--;)l[a++]=arguments[++r];var p=this&&this!==n&&this instanceof u?s:t;return p.apply(c?e:this,l)}var c=r&g,s=i(t);return u}function a(t,n,r,e,o,i,a,f){var l=n&y;if(!l&&"function"!=typeof t)throw new TypeError(I);var p=e?e.length:0;if(p||(n&=~(w|E),e=o=null),p-=o?o.length:0,n&E){var h=e,v=o;e=o=null}var d=[t,n,r,e,o,h,v,i,a,f];if(d[9]=null==f?l?0:t.length:O(f-p,0)||0,n==g)var b=u(d[0],d[2]);else b=n!=w&&n!=(g|w)||d[4].length?c.apply(void 0,d):s.apply(void 0,d);return b}function f(t,n){return t="number"==typeof t||x.test(t)?+t:-1,n=null==n?B:n,t>-1&&t%1==0&&n>t}function l(t,n){for(var r=t.length,e=j(n.length,r),o=h(t);e--;){var u=n[e];t[e]=f(u,r)?o[u]:void 0}return t}function p(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var h=r(30),v=r(31),d=r(10),g=1,y=2,b=4,m=8,A=16,w=32,E=64,S=128,I="Expected a function",x=/^\d+$/,O=Math.max,j=Math.min,B=9007199254740991;t.exports=a}).call(n,function(){return this}())},function(t,n,r){function e(t,n){var r=-1,e=t.length;for(n||(n=Array(e));++r<e;)n[r]=t[r];return n}t.exports=e},function(t,n,r){function e(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var o=function(){function t(){}return function(n){if(e(n)){t.prototype=n;var r=new t;t.prototype=null}return r||{}}}();t.exports=o},function(t,n,r){function e(t,n){if("function"!=typeof t)throw new TypeError(o);return n=u(void 0===n?t.length-1:+n||0,0),function(){for(var r=arguments,e=-1,o=u(r.length-n,0),i=Array(o);++e<o;)i[e]=r[n+e];switch(n){case 0:return t.call(this,i);case 1:return t.call(this,r[0],i);case 2:return t.call(this,r[0],r[1],i)}var c=Array(n+1);for(e=-1;++e<n;)c[e]=r[e];return c[n]=i,t.apply(this,c)}}var o="Expected a function",u=Math.max;t.exports=e},function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}function o(t){var n=t+"";return t=l(t),function(r){return f(r,t,n)}}function u(t,n){var r=typeof t;if("string"==r&&d.test(t)||"number"==r)return!0;if(p(t))return!1;var e=!v.test(t);return e||null!=n&&t in i(n)}function i(t){return s(t)?t:Object(t)}function c(t,n){return h(t,a(n))}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function a(t){return u(t)?e(t):o(t)}var f=r(34),l=r(35),p=r(2),h=r(36),v=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,d=/^\w*$/;t.exports=c},function(t,n,r){function e(t,n,r){if(null!=t){void 0!==r&&r in o(t)&&(n=[r]);for(var e=0,u=n.length;null!=t&&u>e;)t=t[n[e++]];return e&&e==u?t:void 0}}function o(t){return u(t)?t:Object(t)}function u(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}t.exports=e},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){if(u(t))return t;var n=[];return e(t).replace(i,function(t,r,e,o){n.push(e?o.replace(c,"$1"):r||t)}),n}var u=r(2),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,c=/\\(\\)?/g;t.exports=o},function(t,n,r){function e(t,n){var r=-1,e=u(t)?Array(t.length):[];return f(t,function(t,o,u){e[++r]=n(t,o,u)}),e}function o(t){return function(n){return null==n?void 0:n[t]}}function u(t){return null!=t&&i(h(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&p>=t}function c(t,n,r){var o=l(t)?s:e;return n=a(n,r,3),o(t,n)}var s=r(37),a=r(38),f=r(43),l=r(2),p=9007199254740991,h=o("length");t.exports=c},function(t,n,r){function e(t,n){for(var r=-1,e=t.length,o=Array(e);++r<e;)o[r]=n(t[r],r,t);return o}t.exports=e},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t,n,r){var e=typeof t;return"function"==e?void 0===n?t:E(t,n,r):null==t?m:"object"==e?c(t):void 0===n?A(t):s(t,n)}function u(t,n,r){if(null!=t){void 0!==r&&r in d(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&o>e;)t=t[n[e++]];return e&&e==o?t:void 0}}function i(t,n,r){var e=n.length,o=e,u=!r;if(null==t)return!o;for(t=d(t);e--;){var i=n[e];if(u&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++e<o;){i=n[e];var c=i[0],s=t[c],a=i[1];if(u&&i[2]){if(void 0===s&&!(c in t))return!1}else{var f=r?r(s,a,c):void 0;if(!(void 0===f?w(a,s,r,!0):f))return!1}}return!0}function c(t){var n=p(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null==t?!1:t[r]===e&&(void 0!==e||r in d(t))}}return function(t){return i(t,n)}}function s(t,n){var r=S(t),e=h(t)&&v(n),o=t+"";return t=g(t),function(i){if(null==i)return!1;var c=o;if(i=d(i),!(!r&&e||c in i)){if(i=1==t.length?i:u(i,l(t,0,-1)),null==i)return!1;c=y(t),i=d(i)}return i[c]===n?void 0!==n||c in i:w(n,i[c],void 0,!0)}}function a(t){return function(n){return null==n?void 0:n[t]}}function f(t){var n=t+"";return t=g(t),function(r){return u(r,t,n)}}function l(t,n,r){var e=-1,o=t.length;n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r=void 0===r||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var u=Array(o);++e<o;)u[e]=t[e+n];return u}function p(t){for(var n=I(t),r=n.length;r--;)n[r][2]=v(n[r][1]);return n}function h(t,n){var r=typeof t;if("string"==r&&O.test(t)||"number"==r)return!0;if(S(t))return!1;var e=!x.test(t);return e||null!=n&&t in d(n)}function v(t){return t===t&&!b(t)}function d(t){return b(t)?t:Object(t)}function g(t){if(S(t))return t;var n=[];return e(t).replace(j,function(t,r,e,o){n.push(e?o.replace(B,"$1"):r||t)}),n}function y(t){var n=t?t.length:0;return n?t[n-1]:void 0}function b(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function m(t){return t}function A(t){return h(t)?a(t):f(t)}var w=r(39),E=r(41),S=r(2),I=r(42),x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,O=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,B=/\\(\\)?/g;t.exports=o},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t,n){for(var r=-1,e=t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}function u(t,n,r,o,c,s){return t===n?!0:null==t||null==n||!f(t)&&!e(n)?t!==t&&n!==n:i(t,n,u,r,o,c,s)}function i(t,n,r,e,o,u,i){var f=l(t),h=l(n),g=d,y=d;f||(g=x.call(t),g==v?g=A:g!=A&&(f=p(t))),h||(y=x.call(n),y==v?y=A:y!=A&&(h=p(n)));var b=g==A,m=y==A,w=g==y;if(w&&!f&&!b)return s(t,n,g);if(!o){var E=b&&I.call(t,"__wrapped__"),S=m&&I.call(n,"__wrapped__");if(E||S)return r(E?t.value():t,S?n.value():n,e,o,u,i)}if(!w)return!1;u||(u=[]),i||(i=[]);for(var O=u.length;O--;)if(u[O]==t)return i[O]==n;u.push(t),i.push(n);var j=(f?c:a)(t,n,r,e,o,u,i);return u.pop(),i.pop(),j}function c(t,n,r,e,u,i,c){var s=-1,a=t.length,f=n.length;if(a!=f&&!(u&&f>a))return!1;for(;++s<a;){var l=t[s],p=n[s],h=e?e(u?p:l,u?l:p,s):void 0;if(void 0!==h){if(h)continue;return!1}if(u){if(!o(n,function(t){return l===t||r(l,t,e,u,i,c)}))return!1}else if(l!==p&&!r(l,p,e,u,i,c))return!1}return!0}function s(t,n,r){switch(r){case g:case y:return+t==+n;case b:return t.name==n.name&&t.message==n.message;case m:return t!=+t?n!=+n:t==+n;case w:case E:return t==n+""}return!1}function a(t,n,r,e,o,u,i){var c=h(t),s=c.length,a=h(n),f=a.length;if(s!=f&&!o)return!1;for(var l=s;l--;){var p=c[l];if(!(o?p in n:I.call(n,p)))return!1}for(var v=o;++l<s;){p=c[l];var d=t[p],g=n[p],y=e?e(o?g:d,o?d:g,p):void 0;if(!(void 0===y?r(d,g,e,o,u,i):y))return!1;v||(v="constructor"==p)}if(!v){var b=t.constructor,m=n.constructor;if(b!=m&&"constructor"in t&&"constructor"in n&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m))return!1}return!0}function f(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var l=r(2),p=r(40),h=r(8),v="[object Arguments]",d="[object Array]",g="[object Boolean]",y="[object Date]",b="[object Error]",m="[object Number]",A="[object Object]",w="[object RegExp]",E="[object String]",S=Object.prototype,I=S.hasOwnProperty,x=S.toString;t.exports=u},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&T>=t}function u(t){return e(t)&&o(t.length)&&!!k[U.call(t)]}var i="[object Arguments]",c="[object Array]",s="[object Boolean]",a="[object Date]",f="[object Error]",l="[object Function]",p="[object Map]",h="[object Number]",v="[object Object]",d="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",A="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",I="[object Int32Array]",x="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",B="[object Uint32Array]",k={};k[A]=k[w]=k[E]=k[S]=k[I]=k[x]=k[O]=k[j]=k[B]=!0,k[i]=k[c]=k[m]=k[s]=k[a]=k[f]=k[l]=k[p]=k[h]=k[v]=k[d]=k[g]=k[y]=k[b]=!1;var R=Object.prototype,U=R.toString,T=9007199254740991;t.exports=u},function(t,n,r){function e(t,n,r){if("function"!=typeof t)return o;if(void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 3:return function(r,e,o){return t.call(n,r,e,o)};case 4:return function(r,e,o,u){return t.call(n,r,e,o,u)};case 5:return function(r,e,o,u,i){return t.call(n,r,e,o,u,i)}}return function(){return t.apply(n,arguments)}}function o(t){return t}t.exports=e},function(t,n,r){function e(t){return o(t)?t:Object(t)}function o(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function u(t){t=e(t);for(var n=-1,r=i(t),o=r.length,u=Array(o);++n<o;){var c=r[n];u[n]=[c,t[c]]}return u}var i=r(8);t.exports=u},function(t,n,r){function e(t,n){return h(t,n,f)}function o(t){return function(n){return null==n?void 0:n[t]}}function u(t,n){return function(r,e){var o=r?v(r):0;if(!c(o))return t(r,e);for(var u=n?o:-1,i=s(r);(n?u--:++u<o)&&e(i[u],u,i)!==!1;);return r}}function i(t){return function(n,r,e){for(var o=s(n),u=e(n),i=u.length,c=t?i:-1;t?c--:++c<i;){var a=u[c];if(r(o[a],a,o)===!1)break}return n}}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function s(t){return a(t)?t:Object(t)}function a(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var f=r(8),l=9007199254740991,p=u(e),h=i(),v=o("length");t.exports=p},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return i(r)?r:void 0}function i(t){return null==t?!1:d.call(t)==s?g.test(h.call(t)):o(t)&&l.test(t)}function c(t){return t=e(t),t&&f.test(t)?t.replace(a,"\\$&"):t}var s="[object Function]",a=/[.*+?^${}()|[\]\/\\]/g,f=RegExp(a.source),l=/^\[object .+?Constructor\]$/,p=Object.prototype,h=Function.prototype.toString,v=p.hasOwnProperty,d=p.toString,g=RegExp("^"+c(h.call(v)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=u},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t){return function(n){return null==n?void 0:n[t]}}function u(t){return null!=t&&i(p(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function c(t){return e(t)&&u(t)&&f.call(t)==s}var s="[object Arguments]",a=Object.prototype,f=a.toString,l=9007199254740991,p=o("length");t.exports=c},function(t,n,r){function e(t,n,r){r&&o(t,n,r)&&(n=r=null),t=+t||0,r=null==r?1:+r||0,null==n?(n=t,t=0):n=+n||0;for(var e=-1,c=i(u((n-t)/(r||1)),0),s=Array(c);++e<c;)s[e]=t,t+=r;return s}var o=r(47),u=Math.ceil,i=Math.max;t.exports=e},function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}function o(t){return null!=t&&c(l(t))}function u(t,n){return t="number"==typeof t||a.test(t)?+t:-1,n=null==n?f:n,t>-1&&t%1==0&&n>t}function i(t,n,r){if(!s(r))return!1;var e=typeof n;if("number"==e?o(r)&&u(n,r.length):"string"==e&&n in r){var i=r[n];return t===t?t===i:i!==i}return!1}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var a=/^\d+$/,f=9007199254740991,l=e("length");t.exports=i},function(t,n,r){function e(t,n){return t="number"==typeof t||p.test(t)?+t:-1,n=null==n?h:n,t>-1&&t%1==0&&n>t}function o(t,n){var r=typeof t;if("string"==r&&l.test(t)||"number"==r)return!0;if(a(t))return!1;var e=!f.test(t);return e||null!=n&&t in u(n)}function u(t){return i(t)?t:Object(t)}function i(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function c(t,n,r){if(null==t)return t;var u=n+"";n=null!=t[u]||o(n,t)?[u]:s(n);for(var c=-1,a=n.length,f=a-1,l=t;null!=l&&++c<a;){var p=n[c];i(l)&&(c==f?l[p]=r:null==l[p]&&(l[p]=e(n[c+1])?[]:{})),l=l[p]}return t}var s=r(49),a=r(11),f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,l=/^\w*$/,p=/^\d+$/,h=9007199254740991;t.exports=c},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){if(u(t))return t;var n=[];return e(t).replace(i,function(t,r,e,o){n.push(e?o.replace(c,"$1"):r||t)}),n}var u=r(11),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,c=/\\(\\)?/g;t.exports=o},function(t,n,r){function e(t,n){for(var r=-1,e=t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}function o(t,n){var r;return c(t,function(t,e,o){return r=n(t,e,o),!r}),!!r}function u(t,n,r){var u=a(t)?e:o;return r&&s(t,n,r)&&(n=null),("function"!=typeof n||void 0!==r)&&(n=i(n,r,3)),u(t,n)}var i=r(51),c=r(56),s=r(57),a=r(4);t.exports=u},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t,n,r){var e=typeof t;return"function"==e?void 0===n?t:E(t,n,r):null==t?m:"object"==e?c(t):void 0===n?A(t):s(t,n)}function u(t,n,r){if(null!=t){void 0!==r&&r in d(t)&&(n=[r]);for(var e=0,o=n.length;null!=t&&o>e;)t=t[n[e++]];return e&&e==o?t:void 0}}function i(t,n,r){var e=n.length,o=e,u=!r;if(null==t)return!o;for(t=d(t);e--;){var i=n[e];if(u&&i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++e<o;){i=n[e];var c=i[0],s=t[c],a=i[1];if(u&&i[2]){if(void 0===s&&!(c in t))return!1}else{var f=r?r(s,a,c):void 0;if(!(void 0===f?w(a,s,r,!0):f))return!1}}return!0}function c(t){var n=p(t);if(1==n.length&&n[0][2]){var r=n[0][0],e=n[0][1];return function(t){return null==t?!1:t[r]===e&&(void 0!==e||r in d(t));
}}return function(t){return i(t,n)}}function s(t,n){var r=S(t),e=h(t)&&v(n),o=t+"";return t=g(t),function(i){if(null==i)return!1;var c=o;if(i=d(i),!(!r&&e||c in i)){if(i=1==t.length?i:u(i,l(t,0,-1)),null==i)return!1;c=y(t),i=d(i)}return i[c]===n?void 0!==n||c in i:w(n,i[c],void 0,!0)}}function a(t){return function(n){return null==n?void 0:n[t]}}function f(t){var n=t+"";return t=g(t),function(r){return u(r,t,n)}}function l(t,n,r){var e=-1,o=t.length;n=null==n?0:+n||0,0>n&&(n=-n>o?0:o+n),r=void 0===r||r>o?o:+r||0,0>r&&(r+=o),o=n>r?0:r-n>>>0,n>>>=0;for(var u=Array(o);++e<o;)u[e]=t[e+n];return u}function p(t){for(var n=I(t),r=n.length;r--;)n[r][2]=v(n[r][1]);return n}function h(t,n){var r=typeof t;if("string"==r&&O.test(t)||"number"==r)return!0;if(S(t))return!1;var e=!x.test(t);return e||null!=n&&t in d(n)}function v(t){return t===t&&!b(t)}function d(t){return b(t)?t:Object(t)}function g(t){if(S(t))return t;var n=[];return e(t).replace(j,function(t,r,e,o){n.push(e?o.replace(B,"$1"):r||t)}),n}function y(t){var n=t?t.length:0;return n?t[n-1]:void 0}function b(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function m(t){return t}function A(t){return h(t)?a(t):f(t)}var w=r(52),E=r(54),S=r(4),I=r(55),x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,O=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,B=/\\(\\)?/g;t.exports=o},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t,n){for(var r=-1,e=t.length;++r<e;)if(n(t[r],r,t))return!0;return!1}function u(t,n,r,o,c,s){return t===n?!0:null==t||null==n||!f(t)&&!e(n)?t!==t&&n!==n:i(t,n,u,r,o,c,s)}function i(t,n,r,e,o,u,i){var f=l(t),h=l(n),g=d,y=d;f||(g=x.call(t),g==v?g=A:g!=A&&(f=p(t))),h||(y=x.call(n),y==v?y=A:y!=A&&(h=p(n)));var b=g==A,m=y==A,w=g==y;if(w&&!f&&!b)return s(t,n,g);if(!o){var E=b&&I.call(t,"__wrapped__"),S=m&&I.call(n,"__wrapped__");if(E||S)return r(E?t.value():t,S?n.value():n,e,o,u,i)}if(!w)return!1;u||(u=[]),i||(i=[]);for(var O=u.length;O--;)if(u[O]==t)return i[O]==n;u.push(t),i.push(n);var j=(f?c:a)(t,n,r,e,o,u,i);return u.pop(),i.pop(),j}function c(t,n,r,e,u,i,c){var s=-1,a=t.length,f=n.length;if(a!=f&&!(u&&f>a))return!1;for(;++s<a;){var l=t[s],p=n[s],h=e?e(u?p:l,u?l:p,s):void 0;if(void 0!==h){if(h)continue;return!1}if(u){if(!o(n,function(t){return l===t||r(l,t,e,u,i,c)}))return!1}else if(l!==p&&!r(l,p,e,u,i,c))return!1}return!0}function s(t,n,r){switch(r){case g:case y:return+t==+n;case b:return t.name==n.name&&t.message==n.message;case m:return t!=+t?n!=+n:t==+n;case w:case E:return t==n+""}return!1}function a(t,n,r,e,o,u,i){var c=h(t),s=c.length,a=h(n),f=a.length;if(s!=f&&!o)return!1;for(var l=s;l--;){var p=c[l];if(!(o?p in n:I.call(n,p)))return!1}for(var v=o;++l<s;){p=c[l];var d=t[p],g=n[p],y=e?e(o?g:d,o?d:g,p):void 0;if(!(void 0===y?r(d,g,e,o,u,i):y))return!1;v||(v="constructor"==p)}if(!v){var b=t.constructor,m=n.constructor;if(b!=m&&"constructor"in t&&"constructor"in n&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m))return!1}return!0}function f(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var l=r(4),p=r(53),h=r(9),v="[object Arguments]",d="[object Array]",g="[object Boolean]",y="[object Date]",b="[object Error]",m="[object Number]",A="[object Object]",w="[object RegExp]",E="[object String]",S=Object.prototype,I=S.hasOwnProperty,x=S.toString;t.exports=u},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&T>=t}function u(t){return e(t)&&o(t.length)&&!!k[U.call(t)]}var i="[object Arguments]",c="[object Array]",s="[object Boolean]",a="[object Date]",f="[object Error]",l="[object Function]",p="[object Map]",h="[object Number]",v="[object Object]",d="[object RegExp]",g="[object Set]",y="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",A="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",S="[object Int16Array]",I="[object Int32Array]",x="[object Uint8Array]",O="[object Uint8ClampedArray]",j="[object Uint16Array]",B="[object Uint32Array]",k={};k[A]=k[w]=k[E]=k[S]=k[I]=k[x]=k[O]=k[j]=k[B]=!0,k[i]=k[c]=k[m]=k[s]=k[a]=k[f]=k[l]=k[p]=k[h]=k[v]=k[d]=k[g]=k[y]=k[b]=!1;var R=Object.prototype,U=R.toString,T=9007199254740991;t.exports=u},function(t,n,r){function e(t,n,r){if("function"!=typeof t)return o;if(void 0===n)return t;switch(r){case 1:return function(r){return t.call(n,r)};case 3:return function(r,e,o){return t.call(n,r,e,o)};case 4:return function(r,e,o,u){return t.call(n,r,e,o,u)};case 5:return function(r,e,o,u,i){return t.call(n,r,e,o,u,i)}}return function(){return t.apply(n,arguments)}}function o(t){return t}t.exports=e},function(t,n,r){function e(t){return o(t)?t:Object(t)}function o(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function u(t){t=e(t);for(var n=-1,r=i(t),o=r.length,u=Array(o);++n<o;){var c=r[n];u[n]=[c,t[c]]}return u}var i=r(9);t.exports=u},function(t,n,r){function e(t,n){return h(t,n,f)}function o(t){return function(n){return null==n?void 0:n[t]}}function u(t,n){return function(r,e){var o=r?v(r):0;if(!c(o))return t(r,e);for(var u=n?o:-1,i=s(r);(n?u--:++u<o)&&e(i[u],u,i)!==!1;);return r}}function i(t){return function(n,r,e){for(var o=s(n),u=e(n),i=u.length,c=t?i:-1;t?c--:++c<i;){var a=u[c];if(r(o[a],a,o)===!1)break}return n}}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function s(t){return a(t)?t:Object(t)}function a(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var f=r(9),l=9007199254740991,p=u(e),h=i(),v=o("length");t.exports=p},function(t,n,r){function e(t){return function(n){return null==n?void 0:n[t]}}function o(t){return null!=t&&c(l(t))}function u(t,n){return t="number"==typeof t||a.test(t)?+t:-1,n=null==n?f:n,t>-1&&t%1==0&&n>t}function i(t,n,r){if(!s(r))return!1;var e=typeof n;if("number"==e?o(r)&&u(n,r.length):"string"==e&&n in r){var i=r[n];return t===t?t===i:i!==i}return!1}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&f>=t}function s(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}var a=/^\d+$/,f=9007199254740991,l=e("length");t.exports=i},function(t,n,r){function e(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return!!t&&"object"==typeof t}function u(t,n){var r=null==t?void 0:t[n];return i(r)?r:void 0}function i(t){return null==t?!1:d.call(t)==s?g.test(h.call(t)):o(t)&&l.test(t)}function c(t){return t=e(t),t&&f.test(t)?t.replace(a,"\\$&"):t}var s="[object Function]",a=/[.*+?^${}()|[\]\/\\]/g,f=RegExp(a.source),l=/^\[object .+?Constructor\]$/,p=Object.prototype,h=Function.prototype.toString,v=p.hasOwnProperty,d=p.toString,g=RegExp("^"+c(h.call(v)).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=u},function(t,n,r){function e(t){return!!t&&"object"==typeof t}function o(t){return function(n){return null==n?void 0:n[t]}}function u(t){return null!=t&&i(p(t))}function i(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function c(t){return e(t)&&u(t)&&f.call(t)==s}var s="[object Arguments]",a=Object.prototype,f=a.toString,l=9007199254740991,p=o("length");t.exports=c},function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},o=e(r(1));o.EventStream.prototype.bufferUntilValue=function(t){var n=t.startWith(!1);return this.filter(!1).merge(n.flatMapConcat(function(n){return function(){return n.scan([],function(t,n){return t.concat(n)},{eager:!0}).sampledBy(t).take(1)}}(this)))};var u=[],i,c,s,a,a,f,l,p},function(t,n,r){"use strict";function e(){o.width=o.offsetWidth,o.height=o.offsetHeight}var o=document.createElement("canvas"),u=o.getContext("2d");document.getElementById("game").appendChild(o),window.addEventListener("resize",e),e(),t.exports={canvas:o,ctx:u};var i=["resize"],c,s,a,f,f,l,p,h},function(t,n,r){"use strict";function e(t,n){var r=new i.Bus,e=r.flatMap(f),o=r.map(a),u=i.zipWith(function(t,n){return{birdTouchedGround:t,birdTouchedPipe:n}},e.startWith(!1),o.startWith(!1)),c=i.zipAsArray(t,u),h=c.scan(n.world,l).skip(1),v=i.zipAsArray(c,h).scan(n.bird,s).skip(1),d=i.zipAsArray(h,v).scan(n.pipes,p).skip(1),g=i.zipWith(function(t,n,r){return{world:t,bird:n,pipes:r}},h,v,d);return g.onValue(r.push.bind(r)),g}var o=function(t){return t&&t.__esModule?t["default"]:t};t.exports=e;var u=o(r(7)),i=o(r(1)),c=r(12),s=c.updateBird,a=c.birdTouchesPipe,f=c.birdTouchesGround,l=r(15).updateWorld,p=r(13).updatePipes,h=["gameLoop"],v,d,g,y,y,b,m,A},function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},o=e(r(7)),u=e(r(1));r(18),r(60);var i=r(3),c=i.FRAME_RATE,s=i.SPACE_KEY,a=r(64),f=a.record,l=a.selectedState$,p=a.isRunning$,h=a.futureInput$,v=e(r(62)),d=r(12).initialBird,g=r(15).initialWorld,y=r(13).initialPipes,b=u.fromEvent(window,"keydown").map(".keyCode").filter(function(t){return t===s}),m=u.fromEvent(window,"click"),A=u.scheduleAnimationFrame().bufferWithTime(c).filter(p),w=m.merge(b).bufferUntilValue(A),E=0,S=u.zipWith(function(t){return{clicks:t,tick:++E}},w),I=u.zipWith(function(t,n){return v(u.fromArray(n),t)},l,h).flatMap(o);u.combineAsArray(I,l).onValues(r(14).renderFuture);var x=v(S.filter(p),{bird:d,pipes:y,world:g});u.zipWith(function(t,n){return{state:t,input:n}},x,S).filter(p).onValue(f),x.merge(l).onValue(r(14));var O=[],j,B,k,R,R,U,T,P},function(t,n,r){"use strict";var e=function(t){return t&&t.__esModule?t["default"]:t},o=e(r(1)),u=e(r(33)),i=e(r(24)),c=e(r(7)),s=e(r(28)),a=r(5).replaceNotifier$,f=document.getElementById("future-slider"),l=document.getElementById("frames"),p=r(3).PAUSE_KEY,h=new o.Bus,v=o.fromEvent(f,"input").map(function(t){return parseInt(t.target.value,10)}),d=o.fromEvent(window,"keydown").filter(function(t){return t.keyCode===p}).scan(!1,function(t){return!t});d.filter(c).onValue(function(){return f.focus()});var g=h.scan([],function(t,n){return t.push(n),t}),y=o.combineWith(c,v,a),b=y.map(!1).toProperty().startWith(!0).and(d.not()),m=o.combineWith(function(t,n){return t[n]||t[t.length-1]},g.filter(b),y).map(".state").toEventStream(),A=g.sampledBy(y,function(t,n){return t.slice(n+1,t.length)}).map(s(u,"input")),w=g.map(function(t){return t.length});w.filter(b).onValue(function(t){return f.value=t}),w.onValue(function(t){f.max=t,l.innerHTML=t}),t.exports.record=h.push.bind(h),t.exports.isRunning$=b,t.exports.selectedState$=m,t.exports.futureInput$=A;var E=[],S,I,x,O,O,j,B,k},function(t,n,r){"use strict";function e(t,n){return Math.random()*(n-t)+t}n.random=e,Object.defineProperty(n,"__esModule",{value:!0});var o=["random"],u,i,c,s,s,a,f,l},function(t,n,r){function e(t,n){return h.isUndefined(n)?""+n:h.isNumber(n)&&!isFinite(n)?n.toString():h.isFunction(n)||h.isRegExp(n)?n.toString():n}function o(t,n){return h.isString(t)?t.length<n?t:t.slice(0,n):t}function u(t){return o(JSON.stringify(t.actual,e),128)+" "+t.operator+" "+o(JSON.stringify(t.expected,e),128)}function i(t,n,r,e,o){throw new g.AssertionError({message:r,actual:t,expected:n,operator:e,stackStartFunction:o})}function c(t,n){t||i(t,!0,n,"==",g.ok)}function s(t,n){if(t===n)return!0;if(h.isBuffer(t)&&h.isBuffer(n)){if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}return h.isDate(t)&&h.isDate(n)?t.getTime()===n.getTime():h.isRegExp(t)&&h.isRegExp(n)?t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase:h.isObject(t)||h.isObject(n)?f(t,n):t==n}function a(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function f(t,n){if(h.isNullOrUndefined(t)||h.isNullOrUndefined(n))return!1;if(t.prototype!==n.prototype)return!1;if(h.isPrimitive(t)||h.isPrimitive(n))return t===n;var r=a(t),e=a(n);if(r&&!e||!r&&e)return!1;if(r)return t=v.call(t),n=v.call(n),s(t,n);var o,u,i=y(t),c=y(n);if(i.length!=c.length)return!1;for(i.sort(),c.sort(),u=i.length-1;u>=0;u--)if(i[u]!=c[u])return!1;for(u=i.length-1;u>=0;u--)if(o=i[u],!s(t[o],n[o]))return!1;return!0}function l(t,n){return t&&n?"[object RegExp]"==Object.prototype.toString.call(n)?n.test(t):t instanceof n?!0:n.call({},t)===!0?!0:!1:!1}function p(t,n,r,e){var o;h.isString(r)&&(e=r,r=null);try{n()}catch(u){o=u}if(e=(r&&r.name?" ("+r.name+").":".")+(e?" "+e:"."),t&&!o&&i(o,r,"Missing expected exception"+e),!t&&l(o,r)&&i(o,r,"Got unwanted exception"+e),t&&o&&r&&!l(o,r)||!t&&o)throw o}var h=r(73),v=Array.prototype.slice,d=Object.prototype.hasOwnProperty,g=t.exports=c;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var n=t.stackStartFunction||i;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var e=r.stack,o=n.name,c=e.indexOf("\n"+o);if(c>=0){var s=e.indexOf("\n",c+1);e=e.substring(s+1)}this.stack=e}}},h.inherits(g.AssertionError,Error),g.fail=i,g.ok=c,g.equal=function(t,n,r){t!=n&&i(t,n,r,"==",g.equal)},g.notEqual=function(t,n,r){t==n&&i(t,n,r,"!=",g.notEqual)},g.deepEqual=function(t,n,r){s(t,n)||i(t,n,r,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,n,r){s(t,n)&&i(t,n,r,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,n,r){t!==n&&i(t,n,r,"===",g.strictEqual)},g.notStrictEqual=function(t,n,r){t===n&&i(t,n,r,"!==",g.notStrictEqual)},g["throws"]=function(t,n,r){p.apply(this,[!0].concat(v.call(arguments)))},g.doesNotThrow=function(t,n){p.apply(this,[!1].concat(v.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var n=[];for(var r in t)d.call(t,r)&&n.push(r);return n}},function(t,n,r){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function n(t){var n=t.charCodeAt(0);return n===i||n===l?62:n===c||n===p?63:s>n?-1:s+10>n?n-s+26+26:f+26>n?n-f:a+26>n?n-a+26:void 0}function r(t){function r(t){a[l++]=t}var e,o,i,c,s,a;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;s="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,a=new u(3*t.length/4-s),i=s>0?t.length-4:t.length;var l=0;for(e=0,o=0;i>e;e+=4,o+=3)c=n(t.charAt(e))<<18|n(t.charAt(e+1))<<12|n(t.charAt(e+2))<<6|n(t.charAt(e+3)),r((16711680&c)>>16),r((65280&c)>>8),r(255&c);return 2===s?(c=n(t.charAt(e))<<2|n(t.charAt(e+1))>>4,r(255&c)):1===s&&(c=n(t.charAt(e))<<10|n(t.charAt(e+1))<<4|n(t.charAt(e+2))>>2,r(c>>8&255),r(255&c)),a}function o(t){function n(t){return e.charAt(t)}function r(t){return n(t>>18&63)+n(t>>12&63)+n(t>>6&63)+n(63&t)}var o,u,i,c=t.length%3,s="";for(o=0,i=t.length-c;i>o;o+=3)u=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s+=r(u);switch(c){case 1:u=t[t.length-1],s+=n(u>>2),s+=n(u<<4&63),s+="==";break;case 2:u=(t[t.length-2]<<8)+t[t.length-1],s+=n(u>>10),s+=n(u>>4&63),s+=n(u<<2&63),s+="="}return s}var u="undefined"!=typeof Uint8Array?Uint8Array:Array,i="+".charCodeAt(0),c="/".charCodeAt(0),s="0".charCodeAt(0),a="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=o}(n)},function(t,n,r){n.read=function(t,n,r,e,o){var u,i,c=8*o-e-1,s=(1<<c)-1,a=s>>1,f=-7,l=r?o-1:0,p=r?-1:1,h=t[n+l];for(l+=p,u=h&(1<<-f)-1,h>>=-f,f+=c;f>0;u=256*u+t[n+l],l+=p,f-=8);for(i=u&(1<<-f)-1,u>>=-f,f+=e;f>0;i=256*i+t[n+l],l+=p,f-=8);if(0===u)u=1-a;else{if(u===s)return i?NaN:(h?-1:1)*(1/0);i+=Math.pow(2,e),u-=a}return(h?-1:1)*i*Math.pow(2,u-e)},n.write=function(t,n,r,e,o,u){var i,c,s,a=8*u-o-1,f=(1<<a)-1,l=f>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=e?0:u-1,v=e?1:-1,d=0>n||0===n&&0>1/n?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(c=isNaN(n)?1:0,i=f):(i=Math.floor(Math.log(n)/Math.LN2),n*(s=Math.pow(2,-i))<1&&(i--,s*=2),n+=i+l>=1?p/s:p*Math.pow(2,1-l),n*s>=2&&(i++,s/=2),i+l>=f?(c=0,i=f):i+l>=1?(c=(n*s-1)*Math.pow(2,o),i+=l):(c=n*Math.pow(2,l-1)*Math.pow(2,o),i=0));o>=8;t[r+h]=255&c,h+=v,c/=256,o-=8);for(i=i<<o|c,a+=o;a>0;t[r+h]=255&i,h+=v,i/=256,a-=8);t[r+h-v]|=128*d}},function(t,n,r){var e=Array.isArray,o=Object.prototype.toString;t.exports=e||function(t){return!!t&&"[object Array]"==o.call(t)}},function(t,n,r){function e(){f=!1,c.length?a=c.concat(a):l=-1,a.length&&o()}function o(){if(!f){var t=setTimeout(e);f=!0;for(var n=a.length;n;){for(c=a,a=[];++l<n;)c[l].run();l=-1,n=a.length}c=null,f=!1,clearTimeout(t)}}function u(t,n){this.fun=t,this.array=n}function i(){}var c,s=t.exports={},a=[],f=!1,l=-1;s.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)n[r-1]=arguments[r];a.push(new u(t,n)),1!==a.length||f||setTimeout(o,0)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=i,s.addListener=i,s.once=i,s.off=i,s.removeListener=i,s.removeAllListeners=i,s.emit=i,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,n,r){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,n,r){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n,r){(function(t,e){function o(t,r){var e={seen:[],stylize:i};return arguments.length>=3&&(e.depth=arguments[2]),arguments.length>=4&&(e.colors=arguments[3]),d(r)?e.showHidden=r:r&&n._extend(e,r),w(e.showHidden)&&(e.showHidden=!1),w(e.depth)&&(e.depth=2),w(e.colors)&&(e.colors=!1),w(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=u),s(e,t,e.depth)}function u(t,n){var r=o.styles[n];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function i(t,n){return t}function c(t){var n={};return t.forEach(function(t,r){n[t]=!0}),n}function s(t,r,e){if(t.customInspect&&r&&O(r.inspect)&&r.inspect!==n.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(e,t);return m(o)||(o=s(t,o,e)),o}var u=a(t,r);if(u)return u;var i=Object.keys(r),d=c(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(r)),x(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(r);if(0===i.length){if(O(r)){var g=r.name?": "+r.name:"";return t.stylize("[Function"+g+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(I(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return f(r)}var y="",b=!1,A=["{","}"];if(v(r)&&(b=!0,A=["[","]"]),O(r)){var w=r.name?": "+r.name:"";y=" [Function"+w+"]"}if(E(r)&&(y=" "+RegExp.prototype.toString.call(r)),I(r)&&(y=" "+Date.prototype.toUTCString.call(r)),x(r)&&(y=" "+f(r)),0===i.length&&(!b||0==r.length))return A[0]+y+A[1];if(0>e)return E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special");t.seen.push(r);var S;return S=b?l(t,r,e,d,i):i.map(function(n){return p(t,r,e,d,n,b)}),t.seen.pop(),h(S,y,A)}function a(t,n){if(w(n))return t.stylize("undefined","undefined");if(m(n)){var r="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return b(n)?t.stylize(""+n,"number"):d(n)?t.stylize(""+n,"boolean"):g(n)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function l(t,n,r,e,o){for(var u=[],i=0,c=n.length;c>i;++i)U(n,String(i))?u.push(p(t,n,r,e,String(i),!0)):u.push("");return o.forEach(function(o){o.match(/^\d+$/)||u.push(p(t,n,r,e,o,!0))}),u}function p(t,n,r,e,o,u){var i,c,a;if(a=Object.getOwnPropertyDescriptor(n,o)||{value:n[o]},a.get?c=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(c=t.stylize("[Setter]","special")),U(e,o)||(i="["+o+"]"),c||(t.seen.indexOf(a.value)<0?(c=g(r)?s(t,a.value,null):s(t,a.value,r-1),c.indexOf("\n")>-1&&(c=u?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n"))):c=t.stylize("[Circular]","special")),w(i)){if(u&&o.match(/^\d+$/))return c;i=JSON.stringify(""+o),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=t.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=t.stylize(i,"string"))}return i+": "+c}function h(t,n,r){var e=0,o=t.reduce(function(t,n){return e++,n.indexOf("\n")>=0&&e++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0);return o>60?r[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+n+" "+t.join(", ")+" "+r[1]}function v(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function b(t){return"number"==typeof t}function m(t){return"string"==typeof t}function A(t){return"symbol"==typeof t}function w(t){return void 0===t}function E(t){return S(t)&&"[object RegExp]"===B(t)}function S(t){return"object"==typeof t&&null!==t}function I(t){return S(t)&&"[object Date]"===B(t)}function x(t){return S(t)&&("[object Error]"===B(t)||t instanceof Error)}function O(t){return"function"==typeof t}function j(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function B(t){return Object.prototype.toString.call(t)}function k(t){return 10>t?"0"+t.toString(10):t.toString(10)}function R(){var t=new Date,n=[k(t.getHours()),k(t.getMinutes()),k(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],n].join(" ")}function U(t,n){return Object.prototype.hasOwnProperty.call(t,n)}var T=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var n=[],r=0;r<arguments.length;r++)n.push(o(arguments[r]));return n.join(" ")}for(var r=1,e=arguments,u=e.length,i=String(t).replace(T,function(t){if("%%"===t)return"%";if(r>=u)return t;switch(t){case"%s":return String(e[r++]);case"%d":return Number(e[r++]);case"%j":try{return JSON.stringify(e[r++])}catch(n){return"[Circular]"}default:return t}}),c=e[r];u>r;c=e[++r])i+=g(c)||!S(c)?" "+c:" "+o(c);return i},n.deprecate=function(r,o){function u(){if(!i){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),i=!0}return r.apply(this,arguments)}if(w(t.process))return function(){return n.deprecate(r,o).apply(this,arguments)};if(e.noDeprecation===!0)return r;var i=!1;return u};var P,D={};n.debuglog=function(t){if(w(P)&&(P=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var r=e.pid;D[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else D[t]=function(){};return D[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=v,n.isBoolean=d,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=b,n.isString=m,n.isSymbol=A,n.isUndefined=w,n.isRegExp=E,n.isObject=S,n.isDate=I,n.isError=x,n.isFunction=O,n.isPrimitive=j,n.isBuffer=r(72);var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",R(),n.format.apply(n,arguments))},n.inherits=r(71),n._extend=function(t,n){if(!n||!S(n))return t;for(var r=Object.keys(n),e=r.length;e--;)t[r[e]]=n[r[e]];return t}}).call(n,function(){return this}(),r(70))},function(t,n,r){function e(t,n){for(var r=0;r<t.length;r++){var e=t[r],o=f[e.id];if(o){o.refs++;for(var u=0;u<o.parts.length;u++)o.parts[u](e.parts[u]);for(;u<e.parts.length;u++)o.parts.push(i(e.parts[u],n))}else{for(var c=[],u=0;u<e.parts.length;u++)c.push(i(e.parts[u],n));f[e.id]={id:e.id,refs:1,parts:c}}}}function o(t){for(var n=[],r={},e=0;e<t.length;e++){var o=t[e],u=o[0],i=o[1],c=o[2],s=o[3],a={css:i,media:c,sourceMap:s};r[u]?r[u].parts.push(a):n.push(r[u]={id:u,parts:[a]})}return n}function u(){var t=document.createElement("style"),n=h();return t.type="text/css",n.appendChild(t),t}function i(t,n){var r,e,o;if(n.singleton){var i=d++;r=v||(v=u()),e=s.bind(null,r,i,!1),o=s.bind(null,r,i,!0)}else r=u(),e=a.bind(null,r),o=function(){r.parentNode.removeChild(r)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else o()}}function c(t,n,r){var e=["/** >>"+n+" **/","/** "+n+"<< **/"],o=t.lastIndexOf(e[0]),u=r?e[0]+r+e[1]:"";if(t.lastIndexOf(e[0])>=0){var i=t.lastIndexOf(e[1])+e[1].length;return t.slice(0,o)+u+t.slice(i)}return t+u}function s(t,n,r,e){var o=r?"":e.css;if(t.styleSheet)t.styleSheet.cssText=c(t.styleSheet.cssText,n,o);else{var u=document.createTextNode(o),i=t.childNodes;i[n]&&t.removeChild(i[n]),i.length?t.insertBefore(u,i[n]):t.appendChild(u)}}function a(t,n){var r=n.css,e=n.media,o=n.sourceMap;if(o&&"function"==typeof btoa)try{r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(o))+" */",r='@import url("data:text/css;base64,'+btoa(r)+'")'}catch(u){}if(e&&t.setAttribute("media",e),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f={},l=function(t){var n;return function(){return"undefined"==typeof n&&(n=t.apply(this,arguments)),n}},p=l(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=l(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,d=0;t.exports=function(t,n){n=n||{},"undefined"==typeof n.singleton&&(n.singleton=p());var r=o(t);return e(r,n),function(t){for(var u=[],i=0;i<r.length;i++){var c=r[i],s=f[c.id];s.refs--,u.push(s)}if(t){var a=o(t);e(a,n)}for(var i=0;i<u.length;i++){var s=u[i];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete f[s.id]}}}}},function(t,n,r){var e=r(22);"string"==typeof e&&(e=[[t.id,e,""]]);r(74)(e,{})},function(t,n,r){t.exports="data:image/png;base64,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";
},function(t,n,r){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,n,r){(function(n){t.exports=n}).call(n,{})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA2MjU5YWU0YWY5MDIzZTIwMzY2OCIsIndlYnBhY2s6Ly8vLi9+L2JhY29uanMvZGlzdC9CYWNvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2hvdFJlcGxhY2VOb3RpZmllci5qcyIsIndlYnBhY2s6Ly8vLi9+L2V4dGVuZC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5pZGVudGl0eS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2gua2V5cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5zb21lL34vbG9kYXNoLmtleXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGFydGlhbHJpZ2h0L34vbG9kYXNoLl9yZXBsYWNlaG9sZGVycy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5zZXQvfi9sb2Rhc2guaXNhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2JpcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9waXBlcy5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL3dvcmxkLmpzIiwid2VicGFjazovLy8uL34vbm9kZS1saWJzLWJyb3dzZXIvfi9idWZmZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhY29uLmFuaW1hdGlvbmZyYW1lL2Rpc3QvYmFjb24uYW5pbWF0aW9uRnJhbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWNvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2JhY29uL2xpYi9iYWNvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2Nzcy1sb2FkZXIvY3NzVG9TdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9zdHlsZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vfi9kZWdyZWVzLXJhZGlhbnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guZ2V0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLmdldC9+L2xvZGFzaC5fYmFzZWdldC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5nZXQvfi9sb2Rhc2guX3RvcGF0aC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5nZXQvfi9sb2Rhc2guX3RvcGF0aC9+L2xvZGFzaC5pc2FycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnBhcnRpYWxyaWdodC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wYXJ0aWFscmlnaHQvfi9sb2Rhc2guX2NyZWF0ZXdyYXBwZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGFydGlhbHJpZ2h0L34vbG9kYXNoLl9jcmVhdGV3cmFwcGVyL34vbG9kYXNoLl9hcnJheWNvcHkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGFydGlhbHJpZ2h0L34vbG9kYXNoLl9jcmVhdGV3cmFwcGVyL34vbG9kYXNoLl9iYXNlY3JlYXRlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnBhcnRpYWxyaWdodC9+L2xvZGFzaC5yZXN0cGFyYW0vaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2guX2Jhc2VnZXQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2guX3RvcGF0aC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9hcnJheW1hcC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5fYmFzZWlzZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svfi9sb2Rhc2guX2Jhc2Vpc2VxdWFsL34vbG9kYXNoLmlzdHlwZWRhcnJheS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5fYmluZGNhbGxiYWNrL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLm1hcC9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL34vbG9kYXNoLnBhaXJzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLm1hcC9+L2xvZGFzaC5fYmFzZWVhY2gvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLmtleXMvfi9sb2Rhc2guX2dldG5hdGl2ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2gua2V5cy9+L2xvZGFzaC5pc2FyZ3VtZW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5yYW5nZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC5yYW5nZS9+L2xvZGFzaC5faXNpdGVyYXRlZWNhbGwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guc2V0L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNldC9+L2xvZGFzaC5fdG9wYXRoL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5fYmFzZWlzZXF1YWwvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL34vbG9kYXNoLl9iYXNlaXNlcXVhbC9+L2xvZGFzaC5pc3R5cGVkYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL34vbG9kYXNoLl9iaW5kY2FsbGJhY2svaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL34vbG9kYXNoLnBhaXJzL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2Jhc2VlYWNoL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2lzaXRlcmF0ZWVjYWxsL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2gua2V5cy9+L2xvZGFzaC5fZ2V0bmF0aXZlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2gua2V5cy9+L2xvZGFzaC5pc2FyZ3VtZW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2J1ZmZlclVudGlsVmFsdWUuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy9nYW1lTG9vcC5qcyIsIndlYnBhY2s6Ly8vLi9zY3JpcHRzL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vc2NyaXB0cy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGUtbGlicy1icm93c2VyL34vYXNzZXJ0L2Fzc2VydC5qcyIsIndlYnBhY2s6Ly8vLi9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9+L2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L2J1ZmZlci9+L2lzLWFycmF5L2luZGV4LmpzIiwid2VicGFjazovLy8uL34vbm9kZS1saWJzLWJyb3dzZXIvfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvfi9pbmhlcml0cy9pbmhlcml0c19icm93c2VyLmpzIiwid2VicGFjazovLy8uL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3N1cHBvcnQvaXNCdWZmZXJCcm93c2VyLmpzIiwid2VicGFjazovLy8uL34vbm9kZS1saWJzLWJyb3dzZXIvfi91dGlsL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL3NjcmlwdHMvc3R5bGUuY3NzPzY1ZjgiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL3Nwcml0ZS5wbmciLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1vcHRpb25zLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsImdsb2JhbCIsIkJhY29uIiwiQnVmZmVyaW5nU291cmNlIiwiQnVzIiwiQ29tcG9zaXRlVW5zdWJzY3JpYmUiLCJDb25zdW1pbmdTb3VyY2UiLCJEZXNjIiwiRGlzcGF0Y2hlciIsIkVuZCIsIkVycm9yIiwiRXZlbnQiLCJFdmVudFN0cmVhbSIsIkV4Y2VwdGlvbiIsIkluaXRpYWwiLCJOZXh0IiwiTm9uZSIsIk9ic2VydmFibGUiLCJQcm9wZXJ0eSIsIlByb3BlcnR5RGlzcGF0Y2hlciIsIlNvbWUiLCJTb3VyY2UiLCJVcGRhdGVCYXJyaWVyIiwiXyIsImFkZFByb3BlcnR5SW5pdFZhbHVlVG9TdHJlYW0iLCJhc3NlcnQiLCJhc3NlcnRBcnJheSIsImFzc2VydEV2ZW50U3RyZWFtIiwiYXNzZXJ0RnVuY3Rpb24iLCJhc3NlcnROb0FyZ3VtZW50cyIsImFzc2VydE9ic2VydmFibGUiLCJhc3NlcnRPYnNlcnZhYmxlSXNQcm9wZXJ0eSIsImFzc2VydFN0cmluZyIsImNsb25lQXJyYXkiLCJjb25zdGFudFRvRnVuY3Rpb24iLCJjb250YWluc0R1cGxpY2F0ZURlcHMiLCJjb252ZXJ0QXJnc1RvRnVuY3Rpb24iLCJkZXNjcmliZSIsImVuZEV2ZW50IiwiZXZlbnRJZENvdW50ZXIiLCJldmVudE1ldGhvZHMiLCJmaW5kRGVwcyIsImZpbmRIYW5kbGVyTWV0aG9kcyIsImZsYXRNYXBfIiwiZm9ybWVyIiwiaWRDb3VudGVyIiwiaW5pdGlhbEV2ZW50IiwiaXNBcnJheSIsImlzRmllbGRLZXkiLCJpc09ic2VydmFibGUiLCJsYXR0ZXIiLCJsaWZ0Q2FsbGJhY2siLCJtYWtlRnVuY3Rpb24iLCJtYWtlRnVuY3Rpb25BcmdzIiwibWFrZUZ1bmN0aW9uXyIsIm1ha2VPYnNlcnZhYmxlIiwibWFrZVNwYXduZXIiLCJuZXh0RXZlbnQiLCJub3AiLCJwYXJ0aWFsbHlBcHBsaWVkIiwicmVjdXJzaW9uRGVwdGgiLCJyZWYiLCJyZWdpc3Rlck9icyIsInNweXMiLCJ0b0NvbWJpbmF0b3IiLCJ0b0V2ZW50IiwidG9GaWVsZEV4dHJhY3RvciIsInRvRmllbGRLZXkiLCJ0b09wdGlvbiIsInRvU2ltcGxlRXh0cmFjdG9yIiwidmFsdWVBbmRFbmQiLCJ3aXRoRGVzYyIsIndpdGhNZXRob2RDYWxsU3VwcG9ydCIsImhhc1Byb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImV4dGVuZCIsImNoaWxkIiwicGFyZW50IiwiY3RvciIsInRoaXMiLCJjb25zdHJ1Y3RvciIsImtleSIsInByb3RvdHlwZSIsIl9fc3VwZXJfXyIsInNsaWNlIiwiYmluZCIsImZuIiwibWUiLCJhcHBseSIsImFyZ3VtZW50cyIsInRvU3RyaW5nIiwidmVyc2lvbiIsIngiLCJ4cyIsIm1lc3NhZ2UiLCJjb25kaXRpb24iLCJldmVudCIsImYiLCJpc0Z1bmN0aW9uIiwiQXJyYXkiLCJhcmdzIiwibGVuZ3RoIiwiaW5kZXhPZiIsImkiLCJqIiwibGVuMSIsInkiLCJpbmRleFdoZXJlIiwiaGVhZCIsImFsd2F5cyIsIm5lZ2F0ZSIsImVtcHR5IiwidGFpbCIsImZpbHRlciIsImZpbHRlcmVkIiwicHVzaCIsIm1hcCIsInJlc3VsdHMiLCJlYWNoIiwidmFsdWUiLCJ0b0FycmF5IiwiY29udGFpbnMiLCJsYXN0IiwiYWxsIiwiYW55Iiwid2l0aG91dCIsInJlbW92ZSIsInNwbGljZSIsImZvbGQiLCJzZWVkIiwiZmxhdE1hcCIsInlzIiwiY29uY2F0IiwiY2FjaGVkIiwib2JqIiwiZXgiLCJpbnRlcm5hbHMiLCJPYmplY3QiLCJfZXJyb3IiLCJhZnRlclRyYW5zYWN0aW9uIiwiYWZ0ZXJzIiwiYWZ0ZXJzSW5kZXgiLCJjdXJyZW50RXZlbnRJZCIsImZsdXNoIiwiZmx1c2hEZXBzT2YiLCJmbHVzaFdhaXRlcnMiLCJoYXNXYWl0ZXJzIiwiaW5UcmFuc2FjdGlvbiIsInJvb3RFdmVudCIsIndhaXRlck9icyIsIndhaXRlcnMiLCJ3aGVuRG9uZVdpdGgiLCJ3cmFwcGVkU3Vic2NyaWJlIiwib2JzIiwib2JzV2FpdGVycyIsImluZGV4Iiwib2JzSWQiLCJkZXAiLCJkZXBzIiwiaW50ZXJuYWxEZXBzIiwiY29udGV4dCIsImFmdGVyIiwicmVzdWx0Iiwic2luayIsImRvVW5zdWIiLCJzaG91bGRVbnN1YiIsInVuc3ViIiwidW5zdWJkIiwiZGlzcGF0Y2hlciIsInN1YnNjcmliZSIsInJlcGx5Iiwibm9Nb3JlIiwib2JzMSIsInN5bmMiLCJsYXp5MSIsImxhenkiLCJxdWV1ZSIsIm1hcmtFbmRlZCIsImVuZGVkIiwiY29uc3VtZSIsIm1heUhhdmUiLCJoYXNBdExlYXN0IiwiZmxhdHRlbiIsInN1cGVyQ2xhc3MiLCJzaGlmdCIsInZhbHVlcyIsImlzVHJpZ2dlciIsInMiLCJmcm9tT2JzZXJ2YWJsZSIsImNvbnRleHQxIiwibWV0aG9kMSIsImFyZ3MxIiwibWV0aG9kIiwiZGVzYyIsIndyYXBwZWQiLCJtZXRob2ROYW1lIiwiYXBwbGllZCIsImZpZWxkVmFsdWUiLCJwYXJ0RnVuY3MiLCJwYXJ0cyIsInNwbGl0IiwiY2hhckF0Iiwic2FtcGxlZCIsInNhbXBsZWRCeSIsImFyZyIsImxlZnQiLCJyaWdodCIsInZhbHVlMSIsImdldE9yRWxzZSIsImdldCIsImZvckVhY2giLCJpc0RlZmluZWQiLCJpbnNwZWN0IiwidiIsIm1vcmUiLCJpc0V2ZW50IiwiaXNFbmQiLCJpc0luaXRpYWwiLCJpc05leHQiLCJpc0Vycm9yIiwiaGFzVmFsdWUiLCJsb2ciLCJ2YWx1ZUYiLCJlYWdlciIsInZhbHVlSW50ZXJuYWwiLCJmbWFwIiwidG9OZXh0IiwiZXJyb3IxIiwiZXJyb3IiLCJkZXNjMSIsImluaXRpYWxEZXNjIiwic3Vic2NyaWJlSW50ZXJuYWwiLCJvblZhbHVlIiwib25WYWx1ZXMiLCJvbkVycm9yIiwib25FbmQiLCJuYW1lIiwiX25hbWUiLCJ3aXRoRGVzY3JpcHRpb24iLCJhc3NpZ24iLCJzcyIsInVuc3Vic2NyaWJlIiwidW5zdWJzY3JpYmVkIiwic3Vic2NyaXB0aW9ucyIsInN0YXJ0aW5nIiwiYWRkIiwic3Vic2NyaXB0aW9uIiwidW5zdWJNZSIsIl90aGlzIiwiY291bnQiLCJfc3Vic2NyaWJlIiwiX2hhbmRsZUV2ZW50IiwiaGFuZGxlRXZlbnQiLCJwdXNoaW5nIiwicHJldkVycm9yIiwidW5zdWJTcmMiLCJoYXNTdWJzY3JpYmVycyIsInJlbW92ZVN1YiIsInB1c2hJdCIsInB1c2hUb1N1YnNjcmlwdGlvbnMiLCJlIiwic3ViIiwidG1wIiwidW5zdWJzY3JpYmVGcm9tU291cmNlIiwiaGFuZGxlciIsInRvUHJvcGVydHkiLCJpbml0VmFsdWVfIiwiZGlzcCIsImluaXRWYWx1ZSIsImluaXRTZW50Iiwic2VuZEluaXQiLCJ0b0V2ZW50U3RyZWFtIiwid2l0aEhhbmRsZXIiLCJuZXZlciIsIndoZW4iLCJpeCIsImsiLCJsZW4iLCJsZW4yIiwibmVlZHNCYXJyaWVyIiwicGF0IiwicGF0U291cmNlcyIsInBhdHMiLCJwYXR0ZXJucyIsInJlc3VsdFN0cmVhbSIsInNvdXJjZXMiLCJ0cmlnZ2VyRm91bmQiLCJ1c2FnZSIsIml4cyIsImNhbm5vdE1hdGNoIiwiY2Fubm90U3luYyIsImVuZHMiLCJtYXRjaCIsIm5vbkZsYXR0ZW5lZCIsInBhcnQiLCJ0cmlnZ2VycyIsImwiLCJsZW4zIiwicmVmMSIsInNvdXJjZSIsInRyaWdnZXIiLCJ1bnN1YkFsbCIsImZsdXNoTGF0ZXIiLCJmbHVzaFdoaWxlVHJpZ2dlcnMiLCJldmVudHMiLCJwb3AiLCJsZW40Iiwib2JzZXJ2YWJsZXMiLCJzdGF0ZSIsImNoZWNrT2JzZXJ2YWJsZSIsImdyb3VwU2ltdWx0YW5lb3VzIiwic3RyZWFtcyIsInByb3BlcnR5MSIsInByb3BlcnR5IiwiY3VycmVudCIsImN1cnJlbnRWYWx1ZVJvb3RJZCIsInByb3BlcnR5RW5kZWQiLCJtYXliZVN1YlNvdXJjZSIsImRpc3BhdGNoaW5nSWQiLCJ2YWxJZCIsImNoYW5nZXMiLCJjb25zdGFudCIsImZyb21CaW5kZXIiLCJiaW5kZXIiLCJldmVudFRyYW5zZm9ybWVyIiwic2hvdWxkVW5iaW5kIiwidW5iaW5kIiwidW5iaW5kZXIiLCJ1bmJvdW5kIiwidGFyZ2V0IiwibWV0aG9kUGFpciIsInBhaXIiLCJmcm9tRXZlbnRUYXJnZXQiLCJldmVudE5hbWUiLCJmcm9tRXZlbnQiLCJjb21iaW5lQXNBcnJheSIsInN0cmVhbSIsImNvbWJpbmVXaXRoIiwiY29tYmluZVRlbXBsYXRlIiwidGVtcGxhdGUiLCJhcHBseVN0cmVhbVZhbHVlIiwiY29tYmluYXRvciIsImNvbXBpbGUiLCJjb21waWxlVGVtcGxhdGUiLCJjb25zdGFudFZhbHVlIiwiZnVuY3MiLCJta0NvbnRleHQiLCJzZXRWYWx1ZSIsImN0eFN0YWNrIiwicG9wQ29udGV4dCIsInB1c2hDb250ZXh0IiwiUmVnRXhwIiwiRGF0ZSIsIm5ld0NvbnRleHQiLCJyb290Q29udGV4dCIsImNvbWJpbmUiLCJvdGhlciIsImRlY29kZSIsImNhc2VzIiwid2l0aFN0YXRlTWFjaGluZSIsImluaXRTdGF0ZSIsImZyb21GIiwibmV3U3RhdGUiLCJvdXRwdXQiLCJvdXRwdXRzIiwic2tpcER1cGxpY2F0ZXMiLCJpc0VxdWFsIiwiYSIsImIiLCJwcmV2IiwiYXdhaXRpbmciLCJteVZhbHVlcyIsIm90aGVyVmFsdWVzIiwibm90IiwiYW5kIiwib3IiLCJzY2hlZHVsZXIiLCJzZXRUaW1lb3V0IiwiZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImNsZWFyVGltZW91dCIsIm5vdyIsImdldFRpbWUiLCJidWZmZXJXaXRoVGltZSIsImRlbGF5IiwiYnVmZmVyV2l0aFRpbWVPckNvdW50IiwiTnVtYmVyIiwiTUFYX1ZBTFVFIiwiYnVmZmVyV2l0aENvdW50IiwiZmx1c2hPclNjaGVkdWxlIiwiYnVmZmVyIiwic2NoZWR1bGUiLCJvbklucHV0Iiwib25GbHVzaCIsImRlbGF5TXMiLCJzY2hlZHVsZWQiLCJlbmQiLCJvbmNlIiwidW5zdWJMZWZ0IiwidW5zdWJSaWdodCIsImZsYXRNYXBGaXJzdCIsInJvb3QiLCJmaXJzdE9ubHkiLCJsaW1pdCIsImNoaWxkRGVwcyIsInJvb3REZXAiLCJjaGVja0VuZCIsImNoZWNrUXVldWUiLCJjb21wb3NpdGUiLCJzcGF3biIsIl9fIiwidW5zdWJSb290IiwiZmxhdE1hcFdpdGhDb25jdXJyZW5jeUxpbWl0IiwiZmxhdE1hcENvbmNhdCIsImxhdGVyIiwic2VuZGVyIiwiYnVmZmVyaW5nVGhyb3R0bGUiLCJtaW5pbXVtSW50ZXJ2YWwiLCJndWFyZGVkU2luayIsInN1YnNjcmliZUFsbCIsIm5ld1NpbmsiLCJzdWJzY3JpYmVJbnB1dCIsImlucHV0IiwidW5zdWJzY3JpYmVJbnB1dCIsInBsdWciLCJjYWxsYmFjayIsImZyb21DYWxsYmFjayIsImZyb21Ob2RlQ2FsbGJhY2siLCJqdXN0SW5pdFZhbHVlIiwibWFwRW5kIiwic2tpcEVycm9ycyIsInRha2VVbnRpbCIsInN0b3BwZXIiLCJlbmRNYXJrZXIiLCJkYXRhIiwiZmxhdE1hcExhdGVzdCIsImRlbGF5Q2hhbmdlcyIsImRlYm91bmNlIiwiZGVib3VuY2VJbW1lZGlhdGUiLCJzY2FuIiwiYWNjIiwicmVzdWx0UHJvcGVydHkiLCJuZXh0IiwiZGlmZiIsInN0YXJ0IiwicHJldlR1cGxlIiwidHVwbGUiLCJkb0FjdGlvbiIsImRvRXJyb3IiLCJkb0xvZyIsImNvbnNvbGUiLCJlbmRPbkVycm9yIiwiZXJyb3JzIiwiZnJvbVByb21pc2UiLCJwcm9taXNlIiwiYWJvcnQiLCJ0aGVuIiwiZG9uZSIsIm1hcEVycm9yIiwiZmxhdE1hcEVycm9yIiwiZXJyIiwic2FtcGxlciIsInNhbXBsZXJTb3VyY2UiLCJ0aGlzU291cmNlIiwic2FtcGxlIiwiaW50ZXJ2YWwiLCJyZWR1Y2UiLCJmcm9tUG9sbCIsInBvbGwiLCJmcm9tQXJyYXkiLCJwdXNoTmVlZGVkIiwiaG9sZFdoZW4iLCJ2YWx2ZSIsImJ1ZmZlcmVkVmFsdWVzIiwib25Ib2xkIiwic3JjIiwic3Vic2NyaWJlZCIsImVuZElmQm90aEVuZGVkIiwidG9TZW5kIiwiJCIsImFzRXZlbnRTdHJlYW0iLCJzZWxlY3RvciIsIm9uIiwib2ZmIiwialF1ZXJ5IiwiWmVwdG8iLCJtZXJnZSIsIm1lcmdlQWxsIiwic2lua3MiLCJzbWFydFNpbmsiLCJ1bnN1YkJvdGgiLCJyZXBlYXRlZGx5IiwicmVwZWF0IiwiZ2VuZXJhdG9yIiwiZmxhZyIsInN1YnNjcmliZU5leHQiLCJyZXRyeSIsIm9wdGlvbnMiLCJmaW5pc2hlZCIsImlzUmV0cnlhYmxlIiwibWF4UmV0cmllcyIsInJldHJpZXMiLCJwYXVzZSIsInZhbHVlU3RyZWFtIiwicmV0cmllc0RvbmUiLCJzZXF1ZW50aWFsbHkiLCJza2lwIiwidGFrZSIsInNraXBVbnRpbCIsInN0YXJ0ZXIiLCJzdGFydGVkIiwic2tpcFdoaWxlIiwib2siLCJzbGlkaW5nV2luZG93IiwibiIsIm1pblZhbHVlcyIsIndpbmRvdyIsInNweSIsInJ1bm5pbmciLCJzdGFydFdpdGgiLCJ0YWtlV2hpbGUiLCJ1cGRhdGUiLCJpbml0aWFsIiwibGF0ZUJpbmRGaXJzdCIsIkZ1bmN0aW9uIiwiemlwQXNBcnJheSIsInppcFdpdGgiLCJ6aXAiLCJmaXJzdCIsImxhc3RFdmVudCIsInRocm90dGxlIiwiZmlyc3RUb1Byb21pc2UiLCJQcm9taXNlQ3RyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0b1Byb21pc2UiLCJ1bmRlZmluZWQiLCJiYXNlVG9TdHJpbmciLCJpc09iamVjdExpa2UiLCJnZXROYXRpdmUiLCJvYmplY3QiLCJpc05hdGl2ZSIsImlzTGVuZ3RoIiwiTUFYX1NBRkVfSU5URUdFUiIsIm9ialRvU3RyaW5nIiwiZnVuY1RhZyIsInJlSXNOYXRpdmUiLCJ0ZXN0IiwiZm5Ub1N0cmluZyIsInJlSXNIb3N0Q3RvciIsImVzY2FwZVJlZ0V4cCIsInN0cmluZyIsInJlSGFzUmVnRXhwQ2hhcnMiLCJyZXBsYWNlIiwicmVSZWdFeHBDaGFycyIsImFycmF5VGFnIiwib2JqZWN0UHJvdG8iLCJuYXRpdmVJc0FycmF5IiwiZGVmaW5lUHJvcGVydHkiLCJCSVJEX1JBRElVUyIsIkZSQU1FX1JBVEUiLCJHUk9VTkRfSEVJR0hUIiwiSE9MRV9IRUlHSFQiLCJQQVVTRV9LRVkiLCJTUEFDRV9LRVkiLCJQSVBFX0RJU1RBTkNFIiwiUElQRV9XSURUSCIsIldPUkxEX0hFSUdIVCIsIkdSQVZJVFkiLCJQSVBFX09GRlNFVCIsIl9fbW9kdWxlQmluZGluZ3MiLCJnZXRFdmFsU291cmNlIiwiaW5qZWN0U2NvcGUiLCJiaW5kaW5ncyIsInBhdGNoZWRCaW5kaW5ncyIsImV2YWxTY29wZSIsIm1vZHVsZUV2YWxXaXRoU2NvcGUiLCJtb2R1bGVFdmFsIiwiX2ludGVyb3BSZXF1aXJlIiwiX19lc01vZHVsZSIsImJ1cyIsInJlcGxhY2VOb3RpZmllciQiLCJoYXNPd24iLCJ0b1N0ciIsImFyciIsImlzUGxhaW5PYmplY3QiLCJoYXNfb3duX2NvbnN0cnVjdG9yIiwiaGFzX2lzX3Byb3BlcnR5X29mX21ldGhvZCIsImNvcHkiLCJjb3B5SXNBcnJheSIsImNsb25lIiwiZGVlcCIsImlkZW50aXR5IiwiYmFzZVByb3BlcnR5IiwiaXNBcnJheUxpa2UiLCJnZXRMZW5ndGgiLCJpc0luZGV4IiwicmVJc1VpbnQiLCJzaGltS2V5cyIsInByb3BzIiwia2V5c0luIiwicHJvcHNMZW5ndGgiLCJhbGxvd0luZGV4ZXMiLCJpc0FyZ3VtZW50cyIsImlzT2JqZWN0IiwidHlwZSIsIkN0b3IiLCJpc1Byb3RvIiwic2tpcEluZGV4ZXMiLCJuYXRpdmVLZXlzIiwia2V5cyIsInJlcGxhY2VIb2xkZXJzIiwiYXJyYXkiLCJwbGFjZWhvbGRlciIsInJlc0luZGV4IiwiUExBQ0VIT0xERVIiLCJ1cGRhdGVCaXJkIiwiYmlyZCIsIl9yZWYiLCJfcmVmMiIsIl9zbGljZWRUb0FycmF5IiwiX3JlZjIkMCIsIndvcmxkIiwiaW5pdGlhbEJpcmQiLCJuZXdCaXJkIiwidngiLCJiaXJkVG91Y2hlZFBpcGUiLCJNYXRoIiwibWluIiwidnkiLCJ0b3VjaGVzR3JvdW5kIiwiZ3JvdW5kVG91Y2hUaW1lIiwiYmlyZEJvdHRvbSIsImNsaWNrcyIsImJpcmRUb3VjaGVzUGlwZSIsInBpcGVzIiwic29tZSIsInBpcGUiLCJiaXJkVG91Y2hlc0dyb3VuZCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX3N0ZXAiLCJfYXJyIiwiX2l0ZXJhdG9yIiwiVHlwZUVycm9yIiwiX2NvbnN0YW50cyIsInJhZGl1cyIsInVwZGF0ZVBpcGVzIiwiaW5pdGlhbFBpcGVzIiwibmV3UGlwZXMiLCJsYXN0UGlwZSIsInJhbmRvbSIsImRyYXdTcHJpdGUiLCJzcHJpdGUiLCJ3IiwiaCIsImRyYXdJbWFnZSIsImF0bGFzIiwic2NhbGUiLCJjYW52YXMiLCJoZWlnaHQiLCJ1cGRhdGVSdW5uaW5nQ2xhc3MiLCJjbGFzc0xpc3QiLCJkb2N1bWVudCIsImJvZHkiLCJnZXRGcmFtZSIsInNwcml0ZXMiLCJ0aWNrIiwiZmxvb3IiLCJyZW5kZXJCaXJkIiwiY3R4Iiwic2F2ZSIsImRpdmlkZXIiLCJ0cmFuc2xhdGUiLCJ3aWR0aCIsInJvdGF0ZSIsInJhZGlhbnMiLCJyYXRpbyIsInJlc3RvcmUiLCJyZW5kZXJHcm91bmQiLCJncm91bmQiLCJzcHJpdGVXaWR0aCIsInNwcml0ZUhlaWdodCIsIm1vdmVtZW50IiwiY2VpbCIsInJlbmRlckJhY2tncm91bmQiLCJiYWNrZ3JvdW5kIiwicmVuZGVyUGlwZXMiLCJzcHJpdGUyIiwicGlwZTIiLCJwaXBlV2lkdGgiLCJzcHJpdGUySGVpZ2h0Iiwic2hhZnRIZWlnaHQiLCJwaXBlMyIsImJvdHRvbVBpcGVCb3R0b20iLCJyYW5nZSIsInJlbmRlciIsImNsZWFyUmVjdCIsInJlbmRlckZ1dHVyZSIsImZ1dHVyZSIsImdsb2JhbEFscGhhIiwiQklSRF9IRUlHSFQiLCJfY2FudmFzIiwic2NvcmUiLCJJbWFnZSIsInVwZGF0ZVdvcmxkIiwibmV3V29ybGQiLCJnYW1lRW5kcyIsInNldCIsImluaXRpYWxXb3JsZCIsIkJ1ZmZlciIsImZyb21OdW1iZXIiLCJmcm9tU3RyaW5nIiwiZnJvbU9iamVjdCIsInRoYXQiLCJhbGxvY2F0ZSIsImNoZWNrZWQiLCJUWVBFRF9BUlJBWV9TVVBQT1JUIiwiZW5jb2RpbmciLCJieXRlTGVuZ3RoIiwid3JpdGUiLCJpc0J1ZmZlciIsImZyb21CdWZmZXIiLCJBcnJheUJ1ZmZlciIsImZyb21UeXBlZEFycmF5IiwiZnJvbUFycmF5TGlrZSIsImZyb21Kc29uT2JqZWN0IiwiX2F1Z21lbnQiLCJVaW50OEFycmF5IiwiX2lzQnVmZmVyIiwiZnJvbVBvb2wiLCJwb29sU2l6ZSIsInJvb3RQYXJlbnQiLCJrTWF4TGVuZ3RoIiwiUmFuZ2VFcnJvciIsIlNsb3dCdWZmZXIiLCJzdWJqZWN0IiwiYnVmIiwiU3RyaW5nIiwidXRmOFRvQnl0ZXMiLCJiYXNlNjRUb0J5dGVzIiwiaGV4V3JpdGUiLCJvZmZzZXQiLCJyZW1haW5pbmciLCJzdHJMZW4iLCJwYXJzZWQiLCJwYXJzZUludCIsInN1YnN0ciIsImlzTmFOIiwidXRmOFdyaXRlIiwiYmxpdEJ1ZmZlciIsImFzY2lpV3JpdGUiLCJhc2NpaVRvQnl0ZXMiLCJiaW5hcnlXcml0ZSIsImJhc2U2NFdyaXRlIiwidWNzMldyaXRlIiwidXRmMTZsZVRvQnl0ZXMiLCJiYXNlNjRTbGljZSIsImJhc2U2NCIsImZyb21CeXRlQXJyYXkiLCJ1dGY4U2xpY2UiLCJyZXMiLCJkZWNvZGVVdGY4Q2hhciIsImZyb21DaGFyQ29kZSIsImFzY2lpU2xpY2UiLCJyZXQiLCJiaW5hcnlTbGljZSIsImhleFNsaWNlIiwib3V0IiwidG9IZXgiLCJ1dGYxNmxlU2xpY2UiLCJieXRlcyIsImNoZWNrT2Zmc2V0IiwiZXh0IiwiY2hlY2tJbnQiLCJtYXgiLCJvYmplY3RXcml0ZVVJbnQxNiIsImxpdHRsZUVuZGlhbiIsIm9iamVjdFdyaXRlVUludDMyIiwiY2hlY2tJRUVFNzU0Iiwid3JpdGVGbG9hdCIsIm5vQXNzZXJ0IiwiaWVlZTc1NCIsIndyaXRlRG91YmxlIiwiYmFzZTY0Y2xlYW4iLCJzdHIiLCJzdHJpbmd0cmltIiwiSU5WQUxJRF9CQVNFNjRfUkUiLCJ0cmltIiwidW5pdHMiLCJJbmZpbml0eSIsImNvZGVQb2ludCIsImxlYWRTdXJyb2dhdGUiLCJjaGFyQ29kZUF0IiwiYnl0ZUFycmF5IiwiaGkiLCJsbyIsInRvQnl0ZUFycmF5IiwiZHN0IiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiSU5TUEVDVF9NQVhfQllURVMiLCJmb28iLCJzdWJhcnJheSIsImNvbXBhcmUiLCJpc0VuY29kaW5nIiwidG9Mb3dlckNhc2UiLCJsaXN0IiwicG9zIiwiaXRlbSIsImxvd2VyZWRDYXNlIiwiZXF1YWxzIiwiam9pbiIsInZhbCIsImJ5dGVPZmZzZXQiLCJhcnJheUluZGV4T2YiLCJmb3VuZEluZGV4IiwicmVhZFVJbnQ4Iiwid3JpdGVVSW50OCIsImlzRmluaXRlIiwic3dhcCIsInRvSlNPTiIsIm5ld0J1ZiIsInNsaWNlTGVuIiwicmVhZFVJbnRMRSIsIm11bCIsInJlYWRVSW50QkUiLCJyZWFkVUludDE2TEUiLCJyZWFkVUludDE2QkUiLCJyZWFkVUludDMyTEUiLCJyZWFkVUludDMyQkUiLCJyZWFkSW50TEUiLCJwb3ciLCJyZWFkSW50QkUiLCJyZWFkSW50OCIsInJlYWRJbnQxNkxFIiwicmVhZEludDE2QkUiLCJyZWFkSW50MzJMRSIsInJlYWRJbnQzMkJFIiwicmVhZEZsb2F0TEUiLCJyZWFkIiwicmVhZEZsb2F0QkUiLCJyZWFkRG91YmxlTEUiLCJyZWFkRG91YmxlQkUiLCJ3cml0ZVVJbnRMRSIsIndyaXRlVUludEJFIiwid3JpdGVVSW50MTZMRSIsIndyaXRlVUludDE2QkUiLCJ3cml0ZVVJbnQzMkxFIiwid3JpdGVVSW50MzJCRSIsIndyaXRlSW50TEUiLCJ3cml0ZUludEJFIiwid3JpdGVJbnQ4Iiwid3JpdGVJbnQxNkxFIiwid3JpdGVJbnQxNkJFIiwid3JpdGVJbnQzMkxFIiwid3JpdGVJbnQzMkJFIiwid3JpdGVGbG9hdExFIiwid3JpdGVGbG9hdEJFIiwid3JpdGVEb3VibGVMRSIsIndyaXRlRG91YmxlQkUiLCJ0YXJnZXRTdGFydCIsIl9zZXQiLCJmaWxsIiwidG9BcnJheUJ1ZmZlciIsIkJQIiwidG9Mb2NhbGVTdHJpbmciLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fIiwiaW5pdCIsImNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjaGVkdWxlRnJhbWUiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1vekNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9DYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsImNiIiwiYW5pbUxvb3AiLCJzY2hlZHVsZUFuaW1hdGlvbkZyYW1lIiwicmVwZWF0ZWRseU9uRnJhbWUiLCJkaXZpc29yIiwiaXQiLCJiYWNvbiIsInVzaW5nIiwidG8iLCJfaW5kZXhPZiIsInBhdHRlcm4iLCJnb29kIiwiX2NvbmNhdCIsImJ1ZmZlcnMiLCJfYnVmZmVycyIsInRvX3dyYXBwZXIiLCJfd3JhcHBlZCIsImFwcGVuZCIsInByZXBlbmQiLCJ1c2luZ193cmFwcGVyIiwiX2J1ZmZlciIsImdsdWUiLCJkZWdyZWVzIiwiUEkiLCJwYXRoIiwiZGVmYXVsdFZhbHVlIiwiYmFzZUdldCIsInRvUGF0aCIsInBhdGhLZXkiLCJ0b09iamVjdCIsInJlUHJvcE5hbWUiLCJudW1iZXIiLCJxdW90ZSIsInJlRXNjYXBlQ2hhciIsImNyZWF0ZVBhcnRpYWwiLCJwYXJ0aWFsRnVuYyIsInJlc3RQYXJhbSIsImZ1bmMiLCJwYXJ0aWFscyIsImhvbGRlcnMiLCJjcmVhdGVXcmFwcGVyIiwiUEFSVElBTF9SSUdIVF9GTEFHIiwicGFydGlhbFJpZ2h0IiwiY29tcG9zZUFyZ3MiLCJob2xkZXJzTGVuZ3RoIiwiYXJnc0luZGV4IiwiYXJnc0xlbmd0aCIsIm5hdGl2ZU1heCIsImxlZnRJbmRleCIsImxlZnRMZW5ndGgiLCJjb21wb3NlQXJnc1JpZ2h0IiwiaG9sZGVyc0luZGV4IiwicmlnaHRJbmRleCIsInJpZ2h0TGVuZ3RoIiwiY3JlYXRlQmluZFdyYXBwZXIiLCJ0aGlzQXJnIiwid3JhcHBlciIsImNyZWF0ZUN0b3JXcmFwcGVyIiwidGhpc0JpbmRpbmciLCJiYXNlQ3JlYXRlIiwiY3JlYXRlSHlicmlkV3JhcHBlciIsImJpdG1hc2siLCJwYXJ0aWFsc1JpZ2h0IiwiaG9sZGVyc1JpZ2h0IiwiYXJnUG9zIiwiYXJ5IiwiYXJpdHkiLCJpc0N1cnJ5IiwiaXNDdXJyeVJpZ2h0IiwiYXJnc0hvbGRlcnMiLCJuZXdBcmdQb3MiLCJhcnJheUNvcHkiLCJuZXdBcml0eSIsIm5ld3NIb2xkZXJzIiwibmV3SG9sZGVyc1JpZ2h0IiwibmV3UGFydGlhbHMiLCJuZXdQYXJ0aWFsc1JpZ2h0IiwiUEFSVElBTF9GTEFHIiwiaXNDdXJyeUJvdW5kIiwiQklORF9GTEFHIiwiQklORF9LRVlfRkxBRyIsImlzQmluZCIsImlzQmluZEtleSIsInJlb3JkZXIiLCJpc0FyeSIsIkFSWV9GTEFHIiwiQ1VSUllfRkxBRyIsIkNVUlJZX0JPVU5EX0ZMQUciLCJDVVJSWV9SSUdIVF9GTEFHIiwiY3JlYXRlUGFydGlhbFdyYXBwZXIiLCJGVU5DX0VSUk9SX1RFWFQiLCJuZXdEYXRhIiwiaW5kZXhlcyIsImFyckxlbmd0aCIsIm5hdGl2ZU1pbiIsIm9sZEFycmF5IiwicmVzdCIsIm90aGVyQXJncyIsImJhc2VQcm9wZXJ0eURlZXAiLCJpc0tleSIsInJlSXNQbGFpblByb3AiLCJyZUlzRGVlcFByb3AiLCJwbHVjayIsImNvbGxlY3Rpb24iLCJiYXNlTWFwIiwiaXRlcmF0ZWUiLCJiYXNlRWFjaCIsImFycmF5TWFwIiwiYmFzZUNhbGxiYWNrIiwiYXJnQ291bnQiLCJiaW5kQ2FsbGJhY2siLCJiYXNlTWF0Y2hlcyIsImJhc2VNYXRjaGVzUHJvcGVydHkiLCJiYXNlSXNNYXRjaCIsIm1hdGNoRGF0YSIsImN1c3RvbWl6ZXIiLCJub0N1c3RvbWl6ZXIiLCJvYmpWYWx1ZSIsInNyY1ZhbHVlIiwiYmFzZUlzRXF1YWwiLCJnZXRNYXRjaERhdGEiLCJpc0FyciIsImlzQ29tbW9uIiwiaXNTdHJpY3RDb21wYXJhYmxlIiwiYmFzZVNsaWNlIiwicGFpcnMiLCJhcnJheVNvbWUiLCJwcmVkaWNhdGUiLCJpc0xvb3NlIiwic3RhY2tBIiwic3RhY2tCIiwiYmFzZUlzRXF1YWxEZWVwIiwiZXF1YWxGdW5jIiwib2JqSXNBcnIiLCJvdGhJc0FyciIsIm9ialRhZyIsIm90aFRhZyIsImFyZ3NUYWciLCJvYmplY3RUYWciLCJpc1R5cGVkQXJyYXkiLCJvYmpJc09iaiIsIm90aElzT2JqIiwiaXNTYW1lVGFnIiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsImVxdWFsQXJyYXlzIiwiZXF1YWxPYmplY3RzIiwib3RoTGVuZ3RoIiwiYXJyVmFsdWUiLCJvdGhWYWx1ZSIsInRhZyIsImJvb2xUYWciLCJkYXRlVGFnIiwiZXJyb3JUYWciLCJudW1iZXJUYWciLCJyZWdleHBUYWciLCJzdHJpbmdUYWciLCJvYmpQcm9wcyIsIm9iakxlbmd0aCIsIm90aFByb3BzIiwic2tpcEN0b3IiLCJvYmpDdG9yIiwib3RoQ3RvciIsInR5cGVkQXJyYXlUYWdzIiwibWFwVGFnIiwic2V0VGFnIiwid2Vha01hcFRhZyIsImFycmF5QnVmZmVyVGFnIiwiZmxvYXQzMlRhZyIsImZsb2F0NjRUYWciLCJpbnQ4VGFnIiwiaW50MTZUYWciLCJpbnQzMlRhZyIsInVpbnQ4VGFnIiwidWludDhDbGFtcGVkVGFnIiwidWludDE2VGFnIiwidWludDMyVGFnIiwiYWNjdW11bGF0b3IiLCJiYXNlRm9yT3duIiwiYmFzZUZvciIsImNyZWF0ZUJhc2VFYWNoIiwiZWFjaEZ1bmMiLCJmcm9tUmlnaHQiLCJpdGVyYWJsZSIsImNyZWF0ZUJhc2VGb3IiLCJrZXlzRnVuYyIsInN0ZXAiLCJpc0l0ZXJhdGVlQ2FsbCIsImxhc3RJbmRleCIsIm5lc3RlZCIsImJhc2VTb21lIiwiYnVmZmVyVW50aWxWYWx1ZSIsInZhbHZlXyIsInJlc2l6ZSIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiY3JlYXRlRWxlbWVudCIsImdldENvbnRleHQiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdhbWVMb29wIiwiaW5pdGlhbHMiLCJnYW1lT3V0cHV0IiwiYmlyZFRvdWNoZWRHcm91bmQiLCJpbyIsInVwZGF0ZWRXb3JsZCIsInVwZGF0ZWRCaXJkIiwidXBkYXRlZFBpcGVzIiwiZ2FtZSIsIl9iaXJkIiwiX3N0b3JlIiwicmVjb3JkIiwic2VsZWN0ZWRTdGF0ZSQiLCJpc1J1bm5pbmckIiwiZnV0dXJlSW5wdXQkIiwic3BhY2VQcmVzc2VkIiwibW91c2VDbGlja2VkIiwidXNlckNsaWNrc0ZvckZyYW1lIiwiZnV0dXJlcyQiLCJpbml0aWFsU3RhdGUiLCJmdXR1cmVJbnB1dCIsInNsaWRlckVsIiwiZnJhbWVzRWwiLCJyZWNvcmRlZFN0YXRlcyQiLCJzbGlkZXJDaGFuZ2UkIiwicGF1c2VkJCIsImV2Iiwia2V5Q29kZSIsInBhdXNlZCIsImZvY3VzIiwiYWxsU3RhdGVzJCIsInN0YXRlcyIsInVwZGF0ZVJlcXVlc3QkIiwibmV3U3RhdGVzTGVuZ3RoJCIsImlubmVySFRNTCIsInJlcGxhY2VyIiwidXRpbCIsImlzVW5kZWZpbmVkIiwiaXNOdW1iZXIiLCJpc1JlZ0V4cCIsInRydW5jYXRlIiwiaXNTdHJpbmciLCJnZXRNZXNzYWdlIiwic2VsZiIsIkpTT04iLCJzdHJpbmdpZnkiLCJhY3R1YWwiLCJvcGVyYXRvciIsImV4cGVjdGVkIiwiZmFpbCIsInN0YWNrU3RhcnRGdW5jdGlvbiIsIkFzc2VydGlvbkVycm9yIiwiX2RlZXBFcXVhbCIsImlzRGF0ZSIsIm11bHRpbGluZSIsImlnbm9yZUNhc2UiLCJvYmpFcXVpdiIsImlzTnVsbE9yVW5kZWZpbmVkIiwiaXNQcmltaXRpdmUiLCJhSXNBcmdzIiwiYklzQXJncyIsInBTbGljZSIsImthIiwib2JqZWN0S2V5cyIsImtiIiwic29ydCIsImV4cGVjdGVkRXhjZXB0aW9uIiwiX3Rocm93cyIsInNob3VsZFRocm93IiwiYmxvY2siLCJnZW5lcmF0ZWRNZXNzYWdlIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJzdGFjayIsImZuX25hbWUiLCJpZHgiLCJuZXh0X2xpbmUiLCJzdWJzdHJpbmciLCJpbmhlcml0cyIsImVxdWFsIiwibm90RXF1YWwiLCJkZWVwRXF1YWwiLCJub3REZWVwRXF1YWwiLCJzdHJpY3RFcXVhbCIsIm5vdFN0cmljdEVxdWFsIiwiZG9lc05vdFRocm93IiwiaWZFcnJvciIsImxvb2t1cCIsImVsdCIsImNvZGUiLCJQTFVTIiwiUExVU19VUkxfU0FGRSIsIlNMQVNIIiwiU0xBU0hfVVJMX1NBRkUiLCJOVU1CRVIiLCJVUFBFUiIsIkxPV0VSIiwiYjY0VG9CeXRlQXJyYXkiLCJiNjQiLCJMIiwicGxhY2VIb2xkZXJzIiwiQXJyIiwidWludDhUb0Jhc2U2NCIsInVpbnQ4IiwiZW5jb2RlIiwibnVtIiwidHJpcGxldFRvQmFzZTY0IiwidGVtcCIsImV4dHJhQnl0ZXMiLCJpc0xFIiwibUxlbiIsIm5CeXRlcyIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJuQml0cyIsIk5hTiIsInJ0IiwiYWJzIiwiTE4yIiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJydW4iLCJJdGVtIiwiZnVuIiwibm9vcCIsInByb2Nlc3MiLCJuZXh0VGljayIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJjcmVhdGUiLCJzdXBlckN0b3IiLCJzdXBlcl8iLCJlbnVtZXJhYmxlIiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJUZW1wQ3RvciIsIm9wdHMiLCJzZWVuIiwic3R5bGl6ZSIsInN0eWxpemVOb0NvbG9yIiwiZGVwdGgiLCJjb2xvcnMiLCJpc0Jvb2xlYW4iLCJzaG93SGlkZGVuIiwiX2V4dGVuZCIsImN1c3RvbUluc3BlY3QiLCJzdHlsaXplV2l0aENvbG9yIiwiZm9ybWF0VmFsdWUiLCJzdHlsZVR5cGUiLCJzdHlsZSIsInN0eWxlcyIsImFycmF5VG9IYXNoIiwiaGFzaCIsInJlY3Vyc2VUaW1lcyIsInByaW1pdGl2ZSIsImZvcm1hdFByaW1pdGl2ZSIsInZpc2libGVLZXlzIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImZvcm1hdEVycm9yIiwiYmFzZSIsImJyYWNlcyIsInRvVVRDU3RyaW5nIiwiZm9ybWF0QXJyYXkiLCJmb3JtYXRQcm9wZXJ0eSIsInJlZHVjZVRvU2luZ2xlU3RyaW5nIiwic2ltcGxlIiwiaXNOdWxsIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibGluZSIsIm51bUxpbmVzRXN0IiwiY3VyIiwiYXIiLCJpc1N5bWJvbCIsInJlIiwib2JqZWN0VG9TdHJpbmciLCJvIiwicGFkIiwidGltZXN0YW1wIiwidGltZSIsImdldEhvdXJzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJnZXREYXRlIiwibW9udGhzIiwiZ2V0TW9udGgiLCJwcm9wIiwiZm9ybWF0UmVnRXhwIiwiZm9ybWF0Iiwib2JqZWN0cyIsIm1zZyIsImRlcHJlY2F0ZWQiLCJ3YXJuZWQiLCJ0aHJvd0RlcHJlY2F0aW9uIiwidHJhY2VEZXByZWNhdGlvbiIsInRyYWNlIiwibm9EZXByZWNhdGlvbiIsImRlYnVnRW52aXJvbiIsImRlYnVncyIsImRlYnVnbG9nIiwiTk9ERV9ERUJVRyIsInRvVXBwZXJDYXNlIiwicGlkIiwiYm9sZCIsIml0YWxpYyIsInVuZGVybGluZSIsImludmVyc2UiLCJ3aGl0ZSIsImdyZXkiLCJibGFjayIsImJsdWUiLCJjeWFuIiwiZ3JlZW4iLCJtYWdlbnRhIiwicmVkIiwieWVsbG93Iiwic3BlY2lhbCIsImJvb2xlYW4iLCJudWxsIiwiZGF0ZSIsInJlZ2V4cCIsIm9yaWdpbiIsImFkZFN0eWxlc1RvRG9tIiwiZG9tU3R5bGUiLCJzdHlsZXNJbkRvbSIsInJlZnMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwiY3JlYXRlU3R5bGVFbGVtZW50Iiwic3R5bGVFbGVtZW50IiwiZ2V0SGVhZEVsZW1lbnQiLCJzaW5nbGV0b24iLCJzdHlsZUluZGV4Iiwic2luZ2xldG9uQ291bnRlciIsInNpbmdsZXRvbkVsZW1lbnQiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYXBwbHlUb1RhZyIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsIm5ld09iaiIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJib3VuZGFyaWVzIiwibGFzdEluZGV4T2YiLCJ3cmFwcGVkUmVwbGFjZW1lbnQiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJpbnNlcnRCZWZvcmUiLCJidG9hIiwic2V0QXR0cmlidXRlIiwiZmlyc3RDaGlsZCIsIm1lbW9pemUiLCJtZW1vIiwiaXNPbGRJRSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibmV3TGlzdCIsIm1heVJl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QyxHQUFBbDJDLEVBQUFELFFBQUFtMkMsSS9FMGxlOEIvMUMsS0FBS0oiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL3NjcmlwdHMvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oNjMpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXywgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgbW9kdWxlKSB7KGZ1bmN0aW9uKCkge1xuXHQgIHZhciBCYWNvbiwgQnVmZmVyaW5nU291cmNlLCBCdXMsIENvbXBvc2l0ZVVuc3Vic2NyaWJlLCBDb25zdW1pbmdTb3VyY2UsIERlc2MsIERpc3BhdGNoZXIsIEVuZCwgRXJyb3IsIEV2ZW50LCBFdmVudFN0cmVhbSwgRXhjZXB0aW9uLCBJbml0aWFsLCBOZXh0LCBOb25lLCBPYnNlcnZhYmxlLCBQcm9wZXJ0eSwgUHJvcGVydHlEaXNwYXRjaGVyLCBTb21lLCBTb3VyY2UsIFVwZGF0ZUJhcnJpZXIsIF8sIGFkZFByb3BlcnR5SW5pdFZhbHVlVG9TdHJlYW0sIGFzc2VydCwgYXNzZXJ0QXJyYXksIGFzc2VydEV2ZW50U3RyZWFtLCBhc3NlcnRGdW5jdGlvbiwgYXNzZXJ0Tm9Bcmd1bWVudHMsIGFzc2VydE9ic2VydmFibGUsIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5LCBhc3NlcnRTdHJpbmcsIGNsb25lQXJyYXksIGNvbnN0YW50VG9GdW5jdGlvbiwgY29udGFpbnNEdXBsaWNhdGVEZXBzLCBjb252ZXJ0QXJnc1RvRnVuY3Rpb24sIGRlc2NyaWJlLCBlbmRFdmVudCwgZXZlbnRJZENvdW50ZXIsIGV2ZW50TWV0aG9kcywgZmluZERlcHMsIGZpbmRIYW5kbGVyTWV0aG9kcywgZmxhdE1hcF8sIGZvcm1lciwgaWRDb3VudGVyLCBpbml0aWFsRXZlbnQsIGlzQXJyYXksIGlzRmllbGRLZXksIGlzT2JzZXJ2YWJsZSwgbGF0dGVyLCBsaWZ0Q2FsbGJhY2ssIG1ha2VGdW5jdGlvbiwgbWFrZUZ1bmN0aW9uQXJncywgbWFrZUZ1bmN0aW9uXywgbWFrZU9ic2VydmFibGUsIG1ha2VTcGF3bmVyLCBuZXh0RXZlbnQsIG5vcCwgcGFydGlhbGx5QXBwbGllZCwgcmVjdXJzaW9uRGVwdGgsIHJlZiwgcmVnaXN0ZXJPYnMsIHNweXMsIHRvQ29tYmluYXRvciwgdG9FdmVudCwgdG9GaWVsZEV4dHJhY3RvciwgdG9GaWVsZEtleSwgdG9PcHRpb24sIHRvU2ltcGxlRXh0cmFjdG9yLCB2YWx1ZUFuZEVuZCwgd2l0aERlc2MsIHdpdGhNZXRob2RDYWxsU3VwcG9ydCxcblx0ICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eSxcblx0ICAgIGV4dGVuZCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpIHsgZm9yICh2YXIga2V5IGluIHBhcmVudCkgeyBpZiAoaGFzUHJvcC5jYWxsKHBhcmVudCwga2V5KSkgY2hpbGRba2V5XSA9IHBhcmVudFtrZXldOyB9IGZ1bmN0aW9uIGN0b3IoKSB7IHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDsgfSBjdG9yLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7IGNoaWxkLnByb3RvdHlwZSA9IG5ldyBjdG9yKCk7IGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7IHJldHVybiBjaGlsZDsgfSxcblx0ICAgIHNsaWNlID0gW10uc2xpY2UsXG5cdCAgICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfTtcblx0XG5cdCAgQmFjb24gPSB7XG5cdCAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBcIkJhY29uXCI7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgQmFjb24udmVyc2lvbiA9ICcwLjcuNjUnO1xuXHRcblx0ICBFeGNlcHRpb24gPSAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwgIT09IG51bGwgPyBnbG9iYWwgOiB0aGlzKS5FcnJvcjtcblx0XG5cdCAgbm9wID0gZnVuY3Rpb24oKSB7fTtcblx0XG5cdCAgbGF0dGVyID0gZnVuY3Rpb24oXywgeCkge1xuXHQgICAgcmV0dXJuIHg7XG5cdCAgfTtcblx0XG5cdCAgZm9ybWVyID0gZnVuY3Rpb24oeCwgXykge1xuXHQgICAgcmV0dXJuIHg7XG5cdCAgfTtcblx0XG5cdCAgY2xvbmVBcnJheSA9IGZ1bmN0aW9uKHhzKSB7XG5cdCAgICByZXR1cm4geHMuc2xpY2UoMCk7XG5cdCAgfTtcblx0XG5cdCAgYXNzZXJ0ID0gZnVuY3Rpb24obWVzc2FnZSwgY29uZGl0aW9uKSB7XG5cdCAgICBpZiAoIWNvbmRpdGlvbikge1xuXHQgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKG1lc3NhZ2UpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgaWYgKHggaW5zdGFuY2VvZiBPYnNlcnZhYmxlICYmICEoeCBpbnN0YW5jZW9mIFByb3BlcnR5KSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiT2JzZXJ2YWJsZSBpcyBub3QgYSBQcm9wZXJ0eSA6IFwiICsgeCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYXNzZXJ0RXZlbnRTdHJlYW0gPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgaWYgKCEoZXZlbnQgaW5zdGFuY2VvZiBFdmVudFN0cmVhbSkpIHtcblx0ICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhbiBFdmVudFN0cmVhbSA6IFwiICsgZXZlbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFzc2VydE9ic2VydmFibGUgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgaWYgKCEoZXZlbnQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSkge1xuXHQgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwibm90IGFuIE9ic2VydmFibGUgOiBcIiArIGV2ZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhc3NlcnRGdW5jdGlvbiA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgIHJldHVybiBhc3NlcnQoXCJub3QgYSBmdW5jdGlvbiA6IFwiICsgZiwgXy5pc0Z1bmN0aW9uKGYpKTtcblx0ICB9O1xuXHRcblx0ICBpc0FycmF5ID0gZnVuY3Rpb24oeHMpIHtcblx0ICAgIHJldHVybiB4cyBpbnN0YW5jZW9mIEFycmF5O1xuXHQgIH07XG5cdFxuXHQgIGlzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIHJldHVybiB4IGluc3RhbmNlb2YgT2JzZXJ2YWJsZTtcblx0ICB9O1xuXHRcblx0ICBhc3NlcnRBcnJheSA9IGZ1bmN0aW9uKHhzKSB7XG5cdCAgICBpZiAoIWlzQXJyYXkoeHMpKSB7XG5cdCAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJub3QgYW4gYXJyYXkgOiBcIiArIHhzKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhc3NlcnROb0FyZ3VtZW50cyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICAgIHJldHVybiBhc3NlcnQoXCJubyBhcmd1bWVudHMgc3VwcG9ydGVkXCIsIGFyZ3MubGVuZ3RoID09PSAwKTtcblx0ICB9O1xuXHRcblx0ICBhc3NlcnRTdHJpbmcgPSBmdW5jdGlvbih4KSB7XG5cdCAgICBpZiAodHlwZW9mIHggIT09IFwic3RyaW5nXCIpIHtcblx0ICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhIHN0cmluZyA6IFwiICsgeCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgXyA9IHtcblx0ICAgIGluZGV4T2Y6IEFycmF5LnByb3RvdHlwZS5pbmRleE9mID8gZnVuY3Rpb24oeHMsIHgpIHtcblx0ICAgICAgcmV0dXJuIHhzLmluZGV4T2YoeCk7XG5cdCAgICB9IDogZnVuY3Rpb24oeHMsIHgpIHtcblx0ICAgICAgdmFyIGksIGosIGxlbjEsIHk7XG5cdCAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4xID0geHMubGVuZ3RoOyBqIDwgbGVuMTsgaSA9ICsraikge1xuXHQgICAgICAgIHkgPSB4c1tpXTtcblx0ICAgICAgICBpZiAoeCA9PT0geSkge1xuXHQgICAgICAgICAgcmV0dXJuIGk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiAtMTtcblx0ICAgIH0sXG5cdCAgICBpbmRleFdoZXJlOiBmdW5jdGlvbih4cywgZikge1xuXHQgICAgICB2YXIgaSwgaiwgbGVuMSwgeTtcblx0ICAgICAgZm9yIChpID0gaiA9IDAsIGxlbjEgPSB4cy5sZW5ndGg7IGogPCBsZW4xOyBpID0gKytqKSB7XG5cdCAgICAgICAgeSA9IHhzW2ldO1xuXHQgICAgICAgIGlmIChmKHkpKSB7XG5cdCAgICAgICAgICByZXR1cm4gaTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIC0xO1xuXHQgICAgfSxcblx0ICAgIGhlYWQ6IGZ1bmN0aW9uKHhzKSB7XG5cdCAgICAgIHJldHVybiB4c1swXTtcblx0ICAgIH0sXG5cdCAgICBhbHdheXM6IGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB4O1xuXHQgICAgICB9O1xuXHQgICAgfSxcblx0ICAgIG5lZ2F0ZTogZnVuY3Rpb24oZikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuXHQgICAgICAgIHJldHVybiAhZih4KTtcblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBlbXB0eTogZnVuY3Rpb24oeHMpIHtcblx0ICAgICAgcmV0dXJuIHhzLmxlbmd0aCA9PT0gMDtcblx0ICAgIH0sXG5cdCAgICB0YWlsOiBmdW5jdGlvbih4cykge1xuXHQgICAgICByZXR1cm4geHMuc2xpY2UoMSwgeHMubGVuZ3RoKTtcblx0ICAgIH0sXG5cdCAgICBmaWx0ZXI6IGZ1bmN0aW9uKGYsIHhzKSB7XG5cdCAgICAgIHZhciBmaWx0ZXJlZCwgaiwgbGVuMSwgeDtcblx0ICAgICAgZmlsdGVyZWQgPSBbXTtcblx0ICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHhzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICAgIHggPSB4c1tqXTtcblx0ICAgICAgICBpZiAoZih4KSkge1xuXHQgICAgICAgICAgZmlsdGVyZWQucHVzaCh4KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZpbHRlcmVkO1xuXHQgICAgfSxcblx0ICAgIG1hcDogZnVuY3Rpb24oZiwgeHMpIHtcblx0ICAgICAgdmFyIGosIGxlbjEsIHJlc3VsdHMsIHg7XG5cdCAgICAgIHJlc3VsdHMgPSBbXTtcblx0ICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHhzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICAgIHggPSB4c1tqXTtcblx0ICAgICAgICByZXN1bHRzLnB1c2goZih4KSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICB9LFxuXHQgICAgZWFjaDogZnVuY3Rpb24oeHMsIGYpIHtcblx0ICAgICAgdmFyIGtleSwgdmFsdWU7XG5cdCAgICAgIGZvciAoa2V5IGluIHhzKSB7XG5cdCAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoeHMsIGtleSkpIGNvbnRpbnVlO1xuXHQgICAgICAgIHZhbHVlID0geHNba2V5XTtcblx0ICAgICAgICBmKGtleSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2b2lkIDA7XG5cdCAgICB9LFxuXHQgICAgdG9BcnJheTogZnVuY3Rpb24oeHMpIHtcblx0ICAgICAgaWYgKGlzQXJyYXkoeHMpKSB7XG5cdCAgICAgICAgcmV0dXJuIHhzO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBbeHNdO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgY29udGFpbnM6IGZ1bmN0aW9uKHhzLCB4KSB7XG5cdCAgICAgIHJldHVybiBfLmluZGV4T2YoeHMsIHgpICE9PSAtMTtcblx0ICAgIH0sXG5cdCAgICBpZDogZnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4geDtcblx0ICAgIH0sXG5cdCAgICBsYXN0OiBmdW5jdGlvbih4cykge1xuXHQgICAgICByZXR1cm4geHNbeHMubGVuZ3RoIC0gMV07XG5cdCAgICB9LFxuXHQgICAgYWxsOiBmdW5jdGlvbih4cywgZikge1xuXHQgICAgICB2YXIgaiwgbGVuMSwgeDtcblx0ICAgICAgaWYgKGYgPT0gbnVsbCkge1xuXHQgICAgICAgIGYgPSBfLmlkO1xuXHQgICAgICB9XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB4cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICB4ID0geHNbal07XG5cdCAgICAgICAgaWYgKCFmKHgpKSB7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSxcblx0ICAgIGFueTogZnVuY3Rpb24oeHMsIGYpIHtcblx0ICAgICAgdmFyIGosIGxlbjEsIHg7XG5cdCAgICAgIGlmIChmID09IG51bGwpIHtcblx0ICAgICAgICBmID0gXy5pZDtcblx0ICAgICAgfVxuXHQgICAgICBmb3IgKGogPSAwLCBsZW4xID0geHMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgeCA9IHhzW2pdO1xuXHQgICAgICAgIGlmIChmKHgpKSB7XG5cdCAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfSxcblx0ICAgIHdpdGhvdXQ6IGZ1bmN0aW9uKHgsIHhzKSB7XG5cdCAgICAgIHJldHVybiBfLmZpbHRlcigoZnVuY3Rpb24oeSkge1xuXHQgICAgICAgIHJldHVybiB5ICE9PSB4O1xuXHQgICAgICB9KSwgeHMpO1xuXHQgICAgfSxcblx0ICAgIHJlbW92ZTogZnVuY3Rpb24oeCwgeHMpIHtcblx0ICAgICAgdmFyIGk7XG5cdCAgICAgIGkgPSBfLmluZGV4T2YoeHMsIHgpO1xuXHQgICAgICBpZiAoaSA+PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuIHhzLnNwbGljZShpLCAxKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGZvbGQ6IGZ1bmN0aW9uKHhzLCBzZWVkLCBmKSB7XG5cdCAgICAgIHZhciBqLCBsZW4xLCB4O1xuXHQgICAgICBmb3IgKGogPSAwLCBsZW4xID0geHMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgeCA9IHhzW2pdO1xuXHQgICAgICAgIHNlZWQgPSBmKHNlZWQsIHgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBzZWVkO1xuXHQgICAgfSxcblx0ICAgIGZsYXRNYXA6IGZ1bmN0aW9uKGYsIHhzKSB7XG5cdCAgICAgIHJldHVybiBfLmZvbGQoeHMsIFtdLCAoZnVuY3Rpb24oeXMsIHgpIHtcblx0ICAgICAgICByZXR1cm4geXMuY29uY2F0KGYoeCkpO1xuXHQgICAgICB9KSk7XG5cdCAgICB9LFxuXHQgICAgY2FjaGVkOiBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHZhciB2YWx1ZTtcblx0ICAgICAgdmFsdWUgPSBOb25lO1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlID09PSBOb25lKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9IGYoKTtcblx0ICAgICAgICAgIGYgPSB2b2lkIDA7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfTtcblx0ICAgIH0sXG5cdCAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgZiA9PT0gXCJmdW5jdGlvblwiO1xuXHQgICAgfSxcblx0ICAgIHRvU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcblx0ICAgICAgdmFyIGV4LCBpbnRlcm5hbHMsIGtleSwgdmFsdWU7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVjdXJzaW9uRGVwdGgrKztcblx0ICAgICAgICBpZiAob2JqID09IG51bGwpIHtcblx0ICAgICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoXy5pc0Z1bmN0aW9uKG9iaikpIHtcblx0ICAgICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgICAgICAgIGlmIChyZWN1cnNpb25EZXB0aCA+IDUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIFwiWy4uXVwiO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIFwiW1wiICsgXy5tYXAoXy50b1N0cmluZywgb2JqKS50b1N0cmluZygpICsgXCJdXCI7XG5cdCAgICAgICAgfSBlbHNlIGlmICgoKG9iaiAhPSBudWxsID8gb2JqLnRvU3RyaW5nIDogdm9pZCAwKSAhPSBudWxsKSAmJiBvYmoudG9TdHJpbmcgIT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpIHtcblx0ICAgICAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcblx0ICAgICAgICAgIGlmIChyZWN1cnNpb25EZXB0aCA+IDUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIFwiey4ufVwiO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgaW50ZXJuYWxzID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0cztcblx0ICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuXHQgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmopIHtcblx0ICAgICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmosIGtleSkpIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICAgIHZhbHVlID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuXHQgICAgICAgICAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG5cdCAgICAgICAgICAgICAgICAgIGV4ID0gX2Vycm9yO1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gZXg7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfSkoKTtcblx0ICAgICAgICAgICAgICByZXN1bHRzLnB1c2goXy50b1N0cmluZyhrZXkpICsgXCI6XCIgKyBfLnRvU3RyaW5nKHZhbHVlKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICAgICAgICB9KSgpO1xuXHQgICAgICAgICAgcmV0dXJuIFwie1wiICsgaW50ZXJuYWxzICsgXCJ9XCI7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBvYmo7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgIHJlY3Vyc2lvbkRlcHRoLS07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZWN1cnNpb25EZXB0aCA9IDA7XG5cdFxuXHQgIEJhY29uLl8gPSBfO1xuXHRcblx0ICBVcGRhdGVCYXJyaWVyID0gQmFjb24uVXBkYXRlQmFycmllciA9IChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhZnRlclRyYW5zYWN0aW9uLCBhZnRlcnMsIGFmdGVyc0luZGV4LCBjdXJyZW50RXZlbnRJZCwgZmx1c2gsIGZsdXNoRGVwc09mLCBmbHVzaFdhaXRlcnMsIGhhc1dhaXRlcnMsIGluVHJhbnNhY3Rpb24sIHJvb3RFdmVudCwgd2FpdGVyT2JzLCB3YWl0ZXJzLCB3aGVuRG9uZVdpdGgsIHdyYXBwZWRTdWJzY3JpYmU7XG5cdCAgICByb290RXZlbnQgPSB2b2lkIDA7XG5cdCAgICB3YWl0ZXJPYnMgPSBbXTtcblx0ICAgIHdhaXRlcnMgPSB7fTtcblx0ICAgIGFmdGVycyA9IFtdO1xuXHQgICAgYWZ0ZXJzSW5kZXggPSAwO1xuXHQgICAgYWZ0ZXJUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgaWYgKHJvb3RFdmVudCkge1xuXHQgICAgICAgIHJldHVybiBhZnRlcnMucHVzaChmKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZigpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgd2hlbkRvbmVXaXRoID0gZnVuY3Rpb24ob2JzLCBmKSB7XG5cdCAgICAgIHZhciBvYnNXYWl0ZXJzO1xuXHQgICAgICBpZiAocm9vdEV2ZW50KSB7XG5cdCAgICAgICAgb2JzV2FpdGVycyA9IHdhaXRlcnNbb2JzLmlkXTtcblx0ICAgICAgICBpZiAob2JzV2FpdGVycyA9PSBudWxsKSB7XG5cdCAgICAgICAgICBvYnNXYWl0ZXJzID0gd2FpdGVyc1tvYnMuaWRdID0gW2ZdO1xuXHQgICAgICAgICAgcmV0dXJuIHdhaXRlck9icy5wdXNoKG9icyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBvYnNXYWl0ZXJzLnB1c2goZik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBmbHVzaCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB3aGlsZSAod2FpdGVyT2JzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBmbHVzaFdhaXRlcnMoMCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZvaWQgMDtcblx0ICAgIH07XG5cdCAgICBmbHVzaFdhaXRlcnMgPSBmdW5jdGlvbihpbmRleCkge1xuXHQgICAgICB2YXIgZiwgaiwgbGVuMSwgb2JzLCBvYnNJZCwgb2JzV2FpdGVycztcblx0ICAgICAgb2JzID0gd2FpdGVyT2JzW2luZGV4XTtcblx0ICAgICAgb2JzSWQgPSBvYnMuaWQ7XG5cdCAgICAgIG9ic1dhaXRlcnMgPSB3YWl0ZXJzW29ic0lkXTtcblx0ICAgICAgd2FpdGVyT2JzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgIGRlbGV0ZSB3YWl0ZXJzW29ic0lkXTtcblx0ICAgICAgZmx1c2hEZXBzT2Yob2JzKTtcblx0ICAgICAgZm9yIChqID0gMCwgbGVuMSA9IG9ic1dhaXRlcnMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgZiA9IG9ic1dhaXRlcnNbal07XG5cdCAgICAgICAgZigpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2b2lkIDA7XG5cdCAgICB9O1xuXHQgICAgZmx1c2hEZXBzT2YgPSBmdW5jdGlvbihvYnMpIHtcblx0ICAgICAgdmFyIGRlcCwgZGVwcywgaW5kZXgsIGosIGxlbjE7XG5cdCAgICAgIGRlcHMgPSBvYnMuaW50ZXJuYWxEZXBzKCk7XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBkZXBzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICAgIGRlcCA9IGRlcHNbal07XG5cdCAgICAgICAgZmx1c2hEZXBzT2YoZGVwKTtcblx0ICAgICAgICBpZiAod2FpdGVyc1tkZXAuaWRdKSB7XG5cdCAgICAgICAgICBpbmRleCA9IF8uaW5kZXhPZih3YWl0ZXJPYnMsIGRlcCk7XG5cdCAgICAgICAgICBmbHVzaFdhaXRlcnMoaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdm9pZCAwO1xuXHQgICAgfTtcblx0ICAgIGluVHJhbnNhY3Rpb24gPSBmdW5jdGlvbihldmVudCwgY29udGV4dCwgZiwgYXJncykge1xuXHQgICAgICB2YXIgYWZ0ZXIsIHJlc3VsdDtcblx0ICAgICAgaWYgKHJvb3RFdmVudCkge1xuXHQgICAgICAgIHJldHVybiBmLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJvb3RFdmVudCA9IGV2ZW50O1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXN1bHQgPSBmLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICAgICAgZmx1c2goKTtcblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgcm9vdEV2ZW50ID0gdm9pZCAwO1xuXHQgICAgICAgICAgd2hpbGUgKGFmdGVyc0luZGV4IDwgYWZ0ZXJzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICBhZnRlciA9IGFmdGVyc1thZnRlcnNJbmRleF07XG5cdCAgICAgICAgICAgIGFmdGVyc0luZGV4Kys7XG5cdCAgICAgICAgICAgIGFmdGVyKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBhZnRlcnNJbmRleCA9IDA7XG5cdCAgICAgICAgICBhZnRlcnMgPSBbXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGN1cnJlbnRFdmVudElkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmIChyb290RXZlbnQpIHtcblx0ICAgICAgICByZXR1cm4gcm9vdEV2ZW50LmlkO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB2b2lkIDA7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB3cmFwcGVkU3Vic2NyaWJlID0gZnVuY3Rpb24ob2JzLCBzaW5rKSB7XG5cdCAgICAgIHZhciBkb1Vuc3ViLCBzaG91bGRVbnN1YiwgdW5zdWIsIHVuc3ViZDtcblx0ICAgICAgdW5zdWJkID0gZmFsc2U7XG5cdCAgICAgIHNob3VsZFVuc3ViID0gZmFsc2U7XG5cdCAgICAgIGRvVW5zdWIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gc2hvdWxkVW5zdWIgPSB0cnVlO1xuXHQgICAgICB9O1xuXHQgICAgICB1bnN1YiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHVuc3ViZCA9IHRydWU7XG5cdCAgICAgICAgcmV0dXJuIGRvVW5zdWIoKTtcblx0ICAgICAgfTtcblx0ICAgICAgZG9VbnN1YiA9IG9icy5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgIHJldHVybiBhZnRlclRyYW5zYWN0aW9uKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgdmFyIHJlcGx5O1xuXHQgICAgICAgICAgaWYgKCF1bnN1YmQpIHtcblx0ICAgICAgICAgICAgcmVwbHkgPSBzaW5rKGV2ZW50KTtcblx0ICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gdW5zdWIoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKHNob3VsZFVuc3ViKSB7XG5cdCAgICAgICAgZG9VbnN1YigpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB1bnN1Yjtcblx0ICAgIH07XG5cdCAgICBoYXNXYWl0ZXJzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB3YWl0ZXJPYnMubGVuZ3RoID4gMDtcblx0ICAgIH07XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB3aGVuRG9uZVdpdGg6IHdoZW5Eb25lV2l0aCxcblx0ICAgICAgaGFzV2FpdGVyczogaGFzV2FpdGVycyxcblx0ICAgICAgaW5UcmFuc2FjdGlvbjogaW5UcmFuc2FjdGlvbixcblx0ICAgICAgY3VycmVudEV2ZW50SWQ6IGN1cnJlbnRFdmVudElkLFxuXHQgICAgICB3cmFwcGVkU3Vic2NyaWJlOiB3cmFwcGVkU3Vic2NyaWJlLFxuXHQgICAgICBhZnRlclRyYW5zYWN0aW9uOiBhZnRlclRyYW5zYWN0aW9uXG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdFxuXHQgIFNvdXJjZSA9IChmdW5jdGlvbigpIHtcblx0ICAgIGZ1bmN0aW9uIFNvdXJjZShvYnMxLCBzeW5jLCBsYXp5MSkge1xuXHQgICAgICB0aGlzLm9icyA9IG9iczE7XG5cdCAgICAgIHRoaXMuc3luYyA9IHN5bmM7XG5cdCAgICAgIHRoaXMubGF6eSA9IGxhenkxICE9IG51bGwgPyBsYXp5MSA6IGZhbHNlO1xuXHQgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICB9XG5cdFxuXHQgICAgU291cmNlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLm9icy5kaXNwYXRjaGVyLnN1YnNjcmliZShzaW5rKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU291cmNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5vYnMudG9TdHJpbmcoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU291cmNlLnByb3RvdHlwZS5tYXJrRW5kZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZW5kZWQgPSB0cnVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBTb3VyY2UucHJvdG90eXBlLmNvbnN1bWUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICB2YWx1ZTogXy5hbHdheXModGhpcy5xdWV1ZVswXSlcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlWzBdO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIFNvdXJjZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucXVldWUgPSBbeF07XG5cdCAgICB9O1xuXHRcblx0ICAgIFNvdXJjZS5wcm90b3R5cGUubWF5SGF2ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgU291cmNlLnByb3RvdHlwZS5oYXNBdExlYXN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgIH07XG5cdFxuXHQgICAgU291cmNlLnByb3RvdHlwZS5mbGF0dGVuID0gdHJ1ZTtcblx0XG5cdCAgICByZXR1cm4gU291cmNlO1xuXHRcblx0ICB9KSgpO1xuXHRcblx0ICBDb25zdW1pbmdTb3VyY2UgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuXHQgICAgZXh0ZW5kKENvbnN1bWluZ1NvdXJjZSwgc3VwZXJDbGFzcyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gQ29uc3VtaW5nU291cmNlKCkge1xuXHQgICAgICByZXR1cm4gQ29uc3VtaW5nU291cmNlLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUuY29uc3VtZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBDb25zdW1pbmdTb3VyY2UucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbih4KSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnB1c2goeCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUubWF5SGF2ZSA9IGZ1bmN0aW9uKGMpIHtcblx0ICAgICAgcmV0dXJuICF0aGlzLmVuZGVkIHx8IHRoaXMucXVldWUubGVuZ3RoID49IGM7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUuaGFzQXRMZWFzdCA9IGZ1bmN0aW9uKGMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoID49IGM7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUuZmxhdHRlbiA9IGZhbHNlO1xuXHRcblx0ICAgIHJldHVybiBDb25zdW1pbmdTb3VyY2U7XG5cdFxuXHQgIH0pKFNvdXJjZSk7XG5cdFxuXHQgIEJ1ZmZlcmluZ1NvdXJjZSA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG5cdCAgICBleHRlbmQoQnVmZmVyaW5nU291cmNlLCBzdXBlckNsYXNzKTtcblx0XG5cdCAgICBmdW5jdGlvbiBCdWZmZXJpbmdTb3VyY2Uob2JzKSB7XG5cdCAgICAgIEJ1ZmZlcmluZ1NvdXJjZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvYnMsIHRydWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIEJ1ZmZlcmluZ1NvdXJjZS5wcm90b3R5cGUuY29uc3VtZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgdmFsdWVzO1xuXHQgICAgICB2YWx1ZXMgPSB0aGlzLnF1ZXVlO1xuXHQgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgcmV0dXJuIHZhbHVlcztcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9O1xuXHRcblx0ICAgIEJ1ZmZlcmluZ1NvdXJjZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaCh4LnZhbHVlKCkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBCdWZmZXJpbmdTb3VyY2UucHJvdG90eXBlLmhhc0F0TGVhc3QgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBCdWZmZXJpbmdTb3VyY2U7XG5cdFxuXHQgIH0pKFNvdXJjZSk7XG5cdFxuXHQgIFNvdXJjZS5pc1RyaWdnZXIgPSBmdW5jdGlvbihzKSB7XG5cdCAgICBpZiAocyBpbnN0YW5jZW9mIFNvdXJjZSkge1xuXHQgICAgICByZXR1cm4gcy5zeW5jO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBFdmVudFN0cmVhbTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBTb3VyY2UuZnJvbU9ic2VydmFibGUgPSBmdW5jdGlvbihzKSB7XG5cdCAgICBpZiAocyBpbnN0YW5jZW9mIFNvdXJjZSkge1xuXHQgICAgICByZXR1cm4gcztcblx0ICAgIH0gZWxzZSBpZiAocyBpbnN0YW5jZW9mIFByb3BlcnR5KSB7XG5cdCAgICAgIHJldHVybiBuZXcgU291cmNlKHMsIGZhbHNlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBuZXcgQ29uc3VtaW5nU291cmNlKHMsIHRydWUpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIERlc2MgPSAoZnVuY3Rpb24oKSB7XG5cdCAgICBmdW5jdGlvbiBEZXNjKGNvbnRleHQxLCBtZXRob2QxLCBhcmdzMSkge1xuXHQgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0MTtcblx0ICAgICAgdGhpcy5tZXRob2QgPSBtZXRob2QxO1xuXHQgICAgICB0aGlzLmFyZ3MgPSBhcmdzMTtcblx0ICAgIH1cblx0XG5cdCAgICBEZXNjLnByb3RvdHlwZS5kZXBzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmNhY2hlZCB8fCAodGhpcy5jYWNoZWQgPSBmaW5kRGVwcyhbdGhpcy5jb250ZXh0XS5jb25jYXQodGhpcy5hcmdzKSkpO1xuXHQgICAgfTtcblx0XG5cdCAgICBEZXNjLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gXy50b1N0cmluZyh0aGlzLmNvbnRleHQpICsgXCIuXCIgKyBfLnRvU3RyaW5nKHRoaXMubWV0aG9kKSArIFwiKFwiICsgXy5tYXAoXy50b1N0cmluZywgdGhpcy5hcmdzKSArIFwiKVwiO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGVzYztcblx0XG5cdCAgfSkoKTtcblx0XG5cdCAgZGVzY3JpYmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzLCBjb250ZXh0LCBtZXRob2Q7XG5cdCAgICBjb250ZXh0ID0gYXJndW1lbnRzWzBdLCBtZXRob2QgPSBhcmd1bWVudHNbMV0sIGFyZ3MgPSAzIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiBbXTtcblx0ICAgIGlmICgoY29udGV4dCB8fCBtZXRob2QpIGluc3RhbmNlb2YgRGVzYykge1xuXHQgICAgICByZXR1cm4gY29udGV4dCB8fCBtZXRob2Q7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gbmV3IERlc2MoY29udGV4dCwgbWV0aG9kLCBhcmdzKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB3aXRoRGVzYyA9IGZ1bmN0aW9uKGRlc2MsIG9icykge1xuXHQgICAgb2JzLmRlc2MgPSBkZXNjO1xuXHQgICAgcmV0dXJuIG9icztcblx0ICB9O1xuXHRcblx0ICBmaW5kRGVwcyA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIGlmIChpc0FycmF5KHgpKSB7XG5cdCAgICAgIHJldHVybiBfLmZsYXRNYXAoZmluZERlcHMsIHgpO1xuXHQgICAgfSBlbHNlIGlmIChpc09ic2VydmFibGUoeCkpIHtcblx0ICAgICAgcmV0dXJuIFt4XTtcblx0ICAgIH0gZWxzZSBpZiAoeCBpbnN0YW5jZW9mIFNvdXJjZSkge1xuXHQgICAgICByZXR1cm4gW3gub2JzXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBbXTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBCYWNvbi5EZXNjID0gRGVzYztcblx0XG5cdCAgQmFjb24uRGVzYy5lbXB0eSA9IG5ldyBCYWNvbi5EZXNjKFwiXCIsIFwiXCIsIFtdKTtcblx0XG5cdCAgd2l0aE1ldGhvZENhbGxTdXBwb3J0ID0gZnVuY3Rpb24od3JhcHBlZCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgYXJncywgY29udGV4dCwgZiwgbWV0aG9kTmFtZTtcblx0ICAgICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuXHQgICAgICBpZiAodHlwZW9mIGYgPT09IFwib2JqZWN0XCIgJiYgYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICBjb250ZXh0ID0gZjtcblx0ICAgICAgICBtZXRob2ROYW1lID0gYXJnc1swXTtcblx0ICAgICAgICBmID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gY29udGV4dFttZXRob2ROYW1lXS5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgYXJncyA9IGFyZ3Muc2xpY2UoMSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdyYXBwZWQuYXBwbHkobnVsbCwgW2ZdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3MpKSk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIG1ha2VGdW5jdGlvbkFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7XG5cdCAgICByZXR1cm4gbWFrZUZ1bmN0aW9uXy5hcHBseShudWxsLCBhcmdzKTtcblx0ICB9O1xuXHRcblx0ICBwYXJ0aWFsbHlBcHBsaWVkID0gZnVuY3Rpb24oZiwgYXBwbGllZCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgYXJncztcblx0ICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgICByZXR1cm4gZi5hcHBseShudWxsLCBhcHBsaWVkLmNvbmNhdChhcmdzKSk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIHRvU2ltcGxlRXh0cmFjdG9yID0gZnVuY3Rpb24oYXJncykge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICB2YXIgZmllbGRWYWx1ZTtcblx0ICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgICAgICAgcmV0dXJuIHZvaWQgMDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZmllbGRWYWx1ZSA9IHZhbHVlW2tleV07XG5cdCAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGZpZWxkVmFsdWUpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlLmFwcGx5KHZhbHVlLCBhcmdzKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgdG9GaWVsZEV4dHJhY3RvciA9IGZ1bmN0aW9uKGYsIGFyZ3MpIHtcblx0ICAgIHZhciBwYXJ0RnVuY3MsIHBhcnRzO1xuXHQgICAgcGFydHMgPSBmLnNsaWNlKDEpLnNwbGl0KFwiLlwiKTtcblx0ICAgIHBhcnRGdW5jcyA9IF8ubWFwKHRvU2ltcGxlRXh0cmFjdG9yKGFyZ3MpLCBwYXJ0cyk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgdmFyIGosIGxlbjE7XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBwYXJ0RnVuY3MubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgZiA9IHBhcnRGdW5jc1tqXTtcblx0ICAgICAgICB2YWx1ZSA9IGYodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgaXNGaWVsZEtleSA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgIHJldHVybiAodHlwZW9mIGYgPT09IFwic3RyaW5nXCIpICYmIGYubGVuZ3RoID4gMSAmJiBmLmNoYXJBdCgwKSA9PT0gXCIuXCI7XG5cdCAgfTtcblx0XG5cdCAgbWFrZUZ1bmN0aW9uXyA9IHdpdGhNZXRob2RDYWxsU3VwcG9ydChmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzLCBmO1xuXHQgICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuXHQgICAgaWYgKF8uaXNGdW5jdGlvbihmKSkge1xuXHQgICAgICBpZiAoYXJncy5sZW5ndGgpIHtcblx0ICAgICAgICByZXR1cm4gcGFydGlhbGx5QXBwbGllZChmLCBhcmdzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZjtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChpc0ZpZWxkS2V5KGYpKSB7XG5cdCAgICAgIHJldHVybiB0b0ZpZWxkRXh0cmFjdG9yKGYsIGFyZ3MpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIF8uYWx3YXlzKGYpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBtYWtlRnVuY3Rpb24gPSBmdW5jdGlvbihmLCBhcmdzKSB7XG5cdCAgICByZXR1cm4gbWFrZUZ1bmN0aW9uXy5hcHBseShudWxsLCBbZl0uY29uY2F0KHNsaWNlLmNhbGwoYXJncykpKTtcblx0ICB9O1xuXHRcblx0ICBjb252ZXJ0QXJnc1RvRnVuY3Rpb24gPSBmdW5jdGlvbihvYnMsIGYsIGFyZ3MsIG1ldGhvZCkge1xuXHQgICAgdmFyIHNhbXBsZWQ7XG5cdCAgICBpZiAoZiBpbnN0YW5jZW9mIFByb3BlcnR5KSB7XG5cdCAgICAgIHNhbXBsZWQgPSBmLnNhbXBsZWRCeShvYnMsIGZ1bmN0aW9uKHAsIHMpIHtcblx0ICAgICAgICByZXR1cm4gW3AsIHNdO1xuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIG1ldGhvZC5jYWxsKHNhbXBsZWQsIGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIHZhciBwLCBzO1xuXHQgICAgICAgIHAgPSBhcmdbMF0sIHMgPSBhcmdbMV07XG5cdCAgICAgICAgcmV0dXJuIHA7XG5cdCAgICAgIH0pLm1hcChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICB2YXIgcCwgcztcblx0ICAgICAgICBwID0gYXJnWzBdLCBzID0gYXJnWzFdO1xuXHQgICAgICAgIHJldHVybiBzO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGYgPSBtYWtlRnVuY3Rpb24oZiwgYXJncyk7XG5cdCAgICAgIHJldHVybiBtZXRob2QuY2FsbChvYnMsIGYpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHRvQ29tYmluYXRvciA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgIHZhciBrZXk7XG5cdCAgICBpZiAoXy5pc0Z1bmN0aW9uKGYpKSB7XG5cdCAgICAgIHJldHVybiBmO1xuXHQgICAgfSBlbHNlIGlmIChpc0ZpZWxkS2V5KGYpKSB7XG5cdCAgICAgIGtleSA9IHRvRmllbGRLZXkoZik7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbihsZWZ0LCByaWdodCkge1xuXHQgICAgICAgIHJldHVybiBsZWZ0W2tleV0ocmlnaHQpO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhIGZ1bmN0aW9uIG9yIGEgZmllbGQga2V5OiBcIiArIGYpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHRvRmllbGRLZXkgPSBmdW5jdGlvbihmKSB7XG5cdCAgICByZXR1cm4gZi5zbGljZSgxKTtcblx0ICB9O1xuXHRcblx0ICBTb21lID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgZnVuY3Rpb24gU29tZSh2YWx1ZTEpIHtcblx0ICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlMTtcblx0ICAgIH1cblx0XG5cdCAgICBTb21lLnByb3RvdHlwZS5nZXRPckVsc2UgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNvbWUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgU29tZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZikge1xuXHQgICAgICBpZiAoZih0aGlzLnZhbHVlKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgU29tZSh0aGlzLnZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gTm9uZTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBTb21lLnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHJldHVybiBuZXcgU29tZShmKHRoaXMudmFsdWUpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgU29tZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgcmV0dXJuIGYodGhpcy52YWx1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNvbWUucHJvdG90eXBlLmlzRGVmaW5lZCA9IHRydWU7XG5cdFxuXHQgICAgU29tZS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gW3RoaXMudmFsdWVdO1xuXHQgICAgfTtcblx0XG5cdCAgICBTb21lLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBcIlNvbWUoXCIgKyB0aGlzLnZhbHVlICsgXCIpXCI7XG5cdCAgICB9O1xuXHRcblx0ICAgIFNvbWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmluc3BlY3QoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFNvbWU7XG5cdFxuXHQgIH0pKCk7XG5cdFxuXHQgIE5vbmUgPSB7XG5cdCAgICBnZXRPckVsc2U6IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0sXG5cdCAgICBmaWx0ZXI6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gTm9uZTtcblx0ICAgIH0sXG5cdCAgICBtYXA6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gTm9uZTtcblx0ICAgIH0sXG5cdCAgICBmb3JFYWNoOiBmdW5jdGlvbigpIHt9LFxuXHQgICAgaXNEZWZpbmVkOiBmYWxzZSxcblx0ICAgIHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gW107XG5cdCAgICB9LFxuXHQgICAgaW5zcGVjdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBcIk5vbmVcIjtcblx0ICAgIH0sXG5cdCAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmluc3BlY3QoKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB0b09wdGlvbiA9IGZ1bmN0aW9uKHYpIHtcblx0ICAgIGlmICh2IGluc3RhbmNlb2YgU29tZSB8fCB2ID09PSBOb25lKSB7XG5cdCAgICAgIHJldHVybiB2O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIG5ldyBTb21lKHYpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEJhY29uLm5vTW9yZSA9IFtcIjxuby1tb3JlPlwiXTtcblx0XG5cdCAgQmFjb24ubW9yZSA9IFtcIjxtb3JlPlwiXTtcblx0XG5cdCAgZXZlbnRJZENvdW50ZXIgPSAwO1xuXHRcblx0ICBFdmVudCA9IChmdW5jdGlvbigpIHtcblx0ICAgIGZ1bmN0aW9uIEV2ZW50KCkge1xuXHQgICAgICB0aGlzLmlkID0gKytldmVudElkQ291bnRlcjtcblx0ICAgIH1cblx0XG5cdCAgICBFdmVudC5wcm90b3R5cGUuaXNFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgRXZlbnQucHJvdG90eXBlLmlzRW5kID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH07XG5cdFxuXHQgICAgRXZlbnQucHJvdG90eXBlLmlzSW5pdGlhbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50LnByb3RvdHlwZS5pc05leHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICBFdmVudC5wcm90b3R5cGUuaXNFcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50LnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50LnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50LnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50LnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEV2ZW50O1xuXHRcblx0ICB9KSgpO1xuXHRcblx0ICBOZXh0ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChOZXh0LCBzdXBlckNsYXNzKTtcblx0XG5cdCAgICBmdW5jdGlvbiBOZXh0KHZhbHVlRiwgZWFnZXIpIHtcblx0ICAgICAgTmV4dC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcblx0ICAgICAgaWYgKCFlYWdlciAmJiBfLmlzRnVuY3Rpb24odmFsdWVGKSB8fCB2YWx1ZUYgaW5zdGFuY2VvZiBOZXh0KSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZUYgPSB2YWx1ZUY7XG5cdCAgICAgICAgdGhpcy52YWx1ZUludGVybmFsID0gdm9pZCAwO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMudmFsdWVGID0gdm9pZCAwO1xuXHQgICAgICAgIHRoaXMudmFsdWVJbnRlcm5hbCA9IHZhbHVlRjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIE5leHQucHJvdG90eXBlLmlzTmV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgTmV4dC5wcm90b3R5cGUuaGFzVmFsdWUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIE5leHQucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmICh0aGlzLnZhbHVlRiBpbnN0YW5jZW9mIE5leHQpIHtcblx0ICAgICAgICB0aGlzLnZhbHVlSW50ZXJuYWwgPSB0aGlzLnZhbHVlRi52YWx1ZSgpO1xuXHQgICAgICAgIHRoaXMudmFsdWVGID0gdm9pZCAwO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMudmFsdWVGKSB7XG5cdCAgICAgICAgdGhpcy52YWx1ZUludGVybmFsID0gdGhpcy52YWx1ZUYoKTtcblx0ICAgICAgICB0aGlzLnZhbHVlRiA9IHZvaWQgMDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy52YWx1ZUludGVybmFsO1xuXHQgICAgfTtcblx0XG5cdCAgICBOZXh0LnByb3RvdHlwZS5mbWFwID0gZnVuY3Rpb24oZikge1xuXHQgICAgICB2YXIgZXZlbnQsIHZhbHVlO1xuXHQgICAgICBpZiAodGhpcy52YWx1ZUludGVybmFsKSB7XG5cdCAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlSW50ZXJuYWw7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gZih2YWx1ZSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZXZlbnQgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiB0aGlzLmFwcGx5KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgcmV0dXJuIGYoZXZlbnQudmFsdWUoKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgTmV4dC5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gbmV3IE5leHQodmFsdWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBOZXh0LnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHJldHVybiBmKHRoaXMudmFsdWUoKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE5leHQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBfLnRvU3RyaW5nKHRoaXMudmFsdWUoKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE5leHQucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy52YWx1ZSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gTmV4dDtcblx0XG5cdCAgfSkoRXZlbnQpO1xuXHRcblx0ICBJbml0aWFsID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChJbml0aWFsLCBzdXBlckNsYXNzKTtcblx0XG5cdCAgICBmdW5jdGlvbiBJbml0aWFsKCkge1xuXHQgICAgICByZXR1cm4gSW5pdGlhbC5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICBJbml0aWFsLnByb3RvdHlwZS5pc0luaXRpYWwgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEluaXRpYWwucHJvdG90eXBlLmlzTmV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIEluaXRpYWwucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBJbml0aWFsKHZhbHVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSW5pdGlhbC5wcm90b3R5cGUudG9OZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgTmV4dCh0aGlzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEluaXRpYWw7XG5cdFxuXHQgIH0pKE5leHQpO1xuXHRcblx0ICBFbmQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuXHQgICAgZXh0ZW5kKEVuZCwgc3VwZXJDbGFzcyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRW5kKCkge1xuXHQgICAgICByZXR1cm4gRW5kLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEVuZC5wcm90b3R5cGUuaXNFbmQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEVuZC5wcm90b3R5cGUuZm1hcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgRW5kLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgRW5kLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gXCI8ZW5kPlwiO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRW5kO1xuXHRcblx0ICB9KShFdmVudCk7XG5cdFxuXHQgIEVycm9yID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChFcnJvciwgc3VwZXJDbGFzcyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRXJyb3IoZXJyb3IxKSB7XG5cdCAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjE7XG5cdCAgICB9XG5cdFxuXHQgICAgRXJyb3IucHJvdG90eXBlLmlzRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIEVycm9yLnByb3RvdHlwZS5mbWFwID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICBFcnJvci5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIEVycm9yLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gXCI8ZXJyb3I+IFwiICsgXy50b1N0cmluZyh0aGlzLmVycm9yKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEVycm9yO1xuXHRcblx0ICB9KShFdmVudCk7XG5cdFxuXHQgIEJhY29uLkV2ZW50ID0gRXZlbnQ7XG5cdFxuXHQgIEJhY29uLkluaXRpYWwgPSBJbml0aWFsO1xuXHRcblx0ICBCYWNvbi5OZXh0ID0gTmV4dDtcblx0XG5cdCAgQmFjb24uRW5kID0gRW5kO1xuXHRcblx0ICBCYWNvbi5FcnJvciA9IEVycm9yO1xuXHRcblx0ICBpbml0aWFsRXZlbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgcmV0dXJuIG5ldyBJbml0aWFsKHZhbHVlLCB0cnVlKTtcblx0ICB9O1xuXHRcblx0ICBuZXh0RXZlbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgcmV0dXJuIG5ldyBOZXh0KHZhbHVlLCB0cnVlKTtcblx0ICB9O1xuXHRcblx0ICBlbmRFdmVudCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIG5ldyBFbmQoKTtcblx0ICB9O1xuXHRcblx0ICB0b0V2ZW50ID0gZnVuY3Rpb24oeCkge1xuXHQgICAgaWYgKHggaW5zdGFuY2VvZiBFdmVudCkge1xuXHQgICAgICByZXR1cm4geDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBuZXh0RXZlbnQoeCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgaWRDb3VudGVyID0gMDtcblx0XG5cdCAgcmVnaXN0ZXJPYnMgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0ICBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShkZXNjMSkge1xuXHQgICAgICB0aGlzLmRlc2MgPSBkZXNjMTtcblx0ICAgICAgdGhpcy5pZCA9ICsraWRDb3VudGVyO1xuXHQgICAgICB0aGlzLmluaXRpYWxEZXNjID0gdGhpcy5kZXNjO1xuXHQgICAgfVxuXHRcblx0ICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgcmV0dXJuIFVwZGF0ZUJhcnJpZXIud3JhcHBlZFN1YnNjcmliZSh0aGlzLCBzaW5rKTtcblx0ICAgIH07XG5cdFxuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlSW50ZXJuYWwgPSBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmRpc3BhdGNoZXIuc3Vic2NyaWJlKHNpbmspO1xuXHQgICAgfTtcblx0XG5cdCAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vblZhbHVlID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBmO1xuXHQgICAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuXHQgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICBpZiAoZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGYoZXZlbnQudmFsdWUoKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25WYWx1ZXMgPSBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLm9uVmFsdWUoZnVuY3Rpb24oYXJncykge1xuXHQgICAgICAgIHJldHVybiBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZjtcblx0ICAgICAgZiA9IG1ha2VGdW5jdGlvbkFyZ3MoYXJndW1lbnRzKTtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGYoZXZlbnQuZXJyb3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9ic2VydmFibGUucHJvdG90eXBlLm9uRW5kID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBmO1xuXHQgICAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuXHQgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgICAgcmV0dXJuIGYoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5uYW1lID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIE9ic2VydmFibGUucHJvdG90eXBlLndpdGhEZXNjcmlwdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLmRlc2MgPSBkZXNjcmliZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgaWYgKHRoaXMuX25hbWUpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5kZXNjLnRvU3RyaW5nKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW50ZXJuYWxEZXBzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmluaXRpYWxEZXNjLmRlcHMoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIE9ic2VydmFibGU7XG5cdFxuXHQgIH0pKCk7XG5cdFxuXHQgIE9ic2VydmFibGUucHJvdG90eXBlLmFzc2lnbiA9IE9ic2VydmFibGUucHJvdG90eXBlLm9uVmFsdWU7XG5cdFxuXHQgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBPYnNlcnZhYmxlLnByb3RvdHlwZS5vblZhbHVlO1xuXHRcblx0ICBPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnNwZWN0ID0gT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xuXHRcblx0ICBDb21wb3NpdGVVbnN1YnNjcmliZSA9IChmdW5jdGlvbigpIHtcblx0ICAgIGZ1bmN0aW9uIENvbXBvc2l0ZVVuc3Vic2NyaWJlKHNzKSB7XG5cdCAgICAgIHZhciBqLCBsZW4xLCBzO1xuXHQgICAgICBpZiAoc3MgPT0gbnVsbCkge1xuXHQgICAgICAgIHNzID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy51bnN1YnNjcmliZSA9IGJpbmQodGhpcy51bnN1YnNjcmliZSwgdGhpcyk7XG5cdCAgICAgIHRoaXMudW5zdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgICB0aGlzLnN0YXJ0aW5nID0gW107XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBzcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBzID0gc3Nbal07XG5cdCAgICAgICAgdGhpcy5hZGQocyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBDb21wb3NpdGVVbnN1YnNjcmliZS5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgIHZhciBlbmRlZCwgdW5zdWIsIHVuc3ViTWU7XG5cdCAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBlbmRlZCA9IGZhbHNlO1xuXHQgICAgICB1bnN1YiA9IG5vcDtcblx0ICAgICAgdGhpcy5zdGFydGluZy5wdXNoKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgIHVuc3ViTWUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZiAoX3RoaXMudW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVuZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIF90aGlzLnJlbW92ZSh1bnN1Yik7XG5cdCAgICAgICAgICByZXR1cm4gXy5yZW1vdmUoc3Vic2NyaXB0aW9uLCBfdGhpcy5zdGFydGluZyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSkodGhpcyk7XG5cdCAgICAgIHVuc3ViID0gc3Vic2NyaXB0aW9uKHRoaXMudW5zdWJzY3JpYmUsIHVuc3ViTWUpO1xuXHQgICAgICBpZiAoISh0aGlzLnVuc3Vic2NyaWJlZCB8fCBlbmRlZCkpIHtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh1bnN1Yik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdW5zdWIoKTtcblx0ICAgICAgfVxuXHQgICAgICBfLnJlbW92ZShzdWJzY3JpcHRpb24sIHRoaXMuc3RhcnRpbmcpO1xuXHQgICAgICByZXR1cm4gdW5zdWI7XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbXBvc2l0ZVVuc3Vic2NyaWJlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih1bnN1Yikge1xuXHQgICAgICBpZiAodGhpcy51bnN1YnNjcmliZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKChfLnJlbW92ZSh1bnN1YiwgdGhpcy5zdWJzY3JpcHRpb25zKSkgIT09IHZvaWQgMCkge1xuXHQgICAgICAgIHJldHVybiB1bnN1YigpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbXBvc2l0ZVVuc3Vic2NyaWJlLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgaiwgbGVuMSwgcmVmLCBzO1xuXHQgICAgICBpZiAodGhpcy51bnN1YnNjcmliZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy51bnN1YnNjcmliZWQgPSB0cnVlO1xuXHQgICAgICByZWYgPSB0aGlzLnN1YnNjcmlwdGlvbnM7XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgcyA9IHJlZltqXTtcblx0ICAgICAgICBzKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cdCAgICAgIHJldHVybiB0aGlzLnN0YXJ0aW5nID0gW107XG5cdCAgICB9O1xuXHRcblx0ICAgIENvbXBvc2l0ZVVuc3Vic2NyaWJlLnByb3RvdHlwZS5jb3VudCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAodGhpcy51bnN1YnNjcmliZWQpIHtcblx0ICAgICAgICByZXR1cm4gMDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCArIHRoaXMuc3RhcnRpbmcubGVuZ3RoO1xuXHQgICAgfTtcblx0XG5cdCAgICBDb21wb3NpdGVVbnN1YnNjcmliZS5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuY291bnQoKSA9PT0gMDtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIENvbXBvc2l0ZVVuc3Vic2NyaWJlO1xuXHRcblx0ICB9KSgpO1xuXHRcblx0ICBCYWNvbi5Db21wb3NpdGVVbnN1YnNjcmliZSA9IENvbXBvc2l0ZVVuc3Vic2NyaWJlO1xuXHRcblx0ICBEaXNwYXRjaGVyID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHVzaGluZyA9IGZhbHNlO1xuXHRcblx0ICAgIERpc3BhdGNoZXIucHJvdG90eXBlLmVuZGVkID0gZmFsc2U7XG5cdFxuXHQgICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHJldkVycm9yID0gdm9pZCAwO1xuXHRcblx0ICAgIERpc3BhdGNoZXIucHJvdG90eXBlLnVuc3ViU3JjID0gdm9pZCAwO1xuXHRcblx0ICAgIGZ1bmN0aW9uIERpc3BhdGNoZXIoX3N1YnNjcmliZSwgX2hhbmRsZUV2ZW50KSB7XG5cdCAgICAgIHRoaXMuX3N1YnNjcmliZSA9IF9zdWJzY3JpYmU7XG5cdCAgICAgIHRoaXMuX2hhbmRsZUV2ZW50ID0gX2hhbmRsZUV2ZW50O1xuXHQgICAgICB0aGlzLnN1YnNjcmliZSA9IGJpbmQodGhpcy5zdWJzY3JpYmUsIHRoaXMpO1xuXHQgICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gYmluZCh0aGlzLmhhbmRsZUV2ZW50LCB0aGlzKTtcblx0ICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG5cdCAgICAgIHRoaXMucXVldWUgPSBbXTtcblx0ICAgIH1cblx0XG5cdCAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5oYXNTdWJzY3JpYmVycyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCA+IDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIERpc3BhdGNoZXIucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zID0gXy53aXRob3V0KHN1YnNjcmlwdGlvbiwgdGhpcy5zdWJzY3JpcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIFVwZGF0ZUJhcnJpZXIuaW5UcmFuc2FjdGlvbihldmVudCwgdGhpcywgdGhpcy5wdXNoSXQsIFtldmVudF0pO1xuXHQgICAgfTtcblx0XG5cdCAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5wdXNoVG9TdWJzY3JpcHRpb25zID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgdmFyIGUsIGosIGxlbjEsIHJlcGx5LCBzdWIsIHRtcDtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0bXAgPSB0aGlzLnN1YnNjcmlwdGlvbnM7XG5cdCAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHRtcC5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICAgIHN1YiA9IHRtcFtqXTtcblx0ICAgICAgICAgIHJlcGx5ID0gc3ViLnNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUgfHwgZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgICAgICB0aGlzLnJlbW92ZVN1YihzdWIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG5cdCAgICAgICAgZSA9IF9lcnJvcjtcblx0ICAgICAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZTtcblx0ICAgICAgICB0aGlzLnF1ZXVlID0gW107XG5cdCAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5wdXNoSXQgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAoIXRoaXMucHVzaGluZykge1xuXHQgICAgICAgIGlmIChldmVudCA9PT0gdGhpcy5wcmV2RXJyb3IpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuXHQgICAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBldmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5wdXNoaW5nID0gdHJ1ZTtcblx0ICAgICAgICB0aGlzLnB1c2hUb1N1YnNjcmlwdGlvbnMoZXZlbnQpO1xuXHQgICAgICAgIHRoaXMucHVzaGluZyA9IGZhbHNlO1xuXHQgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgZXZlbnQgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG5cdCAgICAgICAgICB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5oYXNTdWJzY3JpYmVycygpKSB7XG5cdCAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy51bnN1YnNjcmliZUZyb21Tb3VyY2UoKTtcblx0ICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMucXVldWUucHVzaChldmVudCk7XG5cdCAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAodGhpcy5faGFuZGxlRXZlbnQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlRXZlbnQoZXZlbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIERpc3BhdGNoZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlRnJvbVNvdXJjZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBpZiAodGhpcy51bnN1YlNyYykge1xuXHQgICAgICAgIHRoaXMudW5zdWJTcmMoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy51bnN1YlNyYyA9IHZvaWQgMDtcblx0ICAgIH07XG5cdFxuXHQgICAgRGlzcGF0Y2hlci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oc2luaykge1xuXHQgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuXHQgICAgICBpZiAodGhpcy5lbmRlZCkge1xuXHQgICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG5cdCAgICAgICAgcmV0dXJuIG5vcDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhc3NlcnRGdW5jdGlvbihzaW5rKTtcblx0ICAgICAgICBzdWJzY3JpcHRpb24gPSB7XG5cdCAgICAgICAgICBzaW5rOiBzaW5rXG5cdCAgICAgICAgfTtcblx0ICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIGlmICh0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgICB0aGlzLnVuc3ViU3JjID0gdGhpcy5fc3Vic2NyaWJlKHRoaXMuaGFuZGxlRXZlbnQpO1xuXHQgICAgICAgICAgYXNzZXJ0RnVuY3Rpb24odGhpcy51bnN1YlNyYyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgX3RoaXMucmVtb3ZlU3ViKHN1YnNjcmlwdGlvbik7XG5cdCAgICAgICAgICAgIGlmICghX3RoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBfdGhpcy51bnN1YnNjcmliZUZyb21Tb3VyY2UoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9KSh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRGlzcGF0Y2hlcjtcblx0XG5cdCAgfSkoKTtcblx0XG5cdCAgQmFjb24uRGlzcGF0Y2hlciA9IERpc3BhdGNoZXI7XG5cdFxuXHQgIEV2ZW50U3RyZWFtID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChFdmVudFN0cmVhbSwgc3VwZXJDbGFzcyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gRXZlbnRTdHJlYW0oZGVzYywgc3Vic2NyaWJlLCBoYW5kbGVyKSB7XG5cdCAgICAgIGlmIChfLmlzRnVuY3Rpb24oZGVzYykpIHtcblx0ICAgICAgICBoYW5kbGVyID0gc3Vic2NyaWJlO1xuXHQgICAgICAgIHN1YnNjcmliZSA9IGRlc2M7XG5cdCAgICAgICAgZGVzYyA9IERlc2MuZW1wdHk7XG5cdCAgICAgIH1cblx0ICAgICAgRXZlbnRTdHJlYW0uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgZGVzYyk7XG5cdCAgICAgIGFzc2VydEZ1bmN0aW9uKHN1YnNjcmliZSk7XG5cdCAgICAgIHRoaXMuZGlzcGF0Y2hlciA9IG5ldyBEaXNwYXRjaGVyKHN1YnNjcmliZSwgaGFuZGxlcik7XG5cdCAgICAgIHJlZ2lzdGVyT2JzKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIEV2ZW50U3RyZWFtLnByb3RvdHlwZS50b1Byb3BlcnR5ID0gZnVuY3Rpb24oaW5pdFZhbHVlXykge1xuXHQgICAgICB2YXIgZGlzcCwgaW5pdFZhbHVlO1xuXHQgICAgICBpbml0VmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID09PSAwID8gTm9uZSA6IHRvT3B0aW9uKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBpbml0VmFsdWVfO1xuXHQgICAgICB9KTtcblx0ICAgICAgZGlzcCA9IHRoaXMuZGlzcGF0Y2hlcjtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRvUHJvcGVydHlcIiwgW2luaXRWYWx1ZV9dKSwgZnVuY3Rpb24oc2luaykge1xuXHQgICAgICAgIHZhciBpbml0U2VudCwgcmVwbHksIHNlbmRJbml0LCB1bnN1Yjtcblx0ICAgICAgICBpbml0U2VudCA9IGZhbHNlO1xuXHQgICAgICAgIHVuc3ViID0gbm9wO1xuXHQgICAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcblx0ICAgICAgICBzZW5kSW5pdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYgKCFpbml0U2VudCkge1xuXHQgICAgICAgICAgICByZXR1cm4gaW5pdFZhbHVlLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAgICAgICBpbml0U2VudCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgcmVwbHkgPSBzaW5rKG5ldyBJbml0aWFsKHZhbHVlKSk7XG5cdCAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICAgIHVuc3ViKCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdW5zdWIgPSBub3A7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHVuc3ViID0gZGlzcC5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgIGlmIChldmVudC5oYXNWYWx1ZSgpKSB7XG5cdCAgICAgICAgICAgIGlmIChpbml0U2VudCAmJiBldmVudC5pc0luaXRpYWwoKSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBCYWNvbi5tb3JlO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGlmICghZXZlbnQuaXNJbml0aWFsKCkpIHtcblx0ICAgICAgICAgICAgICAgIHNlbmRJbml0KCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIGluaXRTZW50ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICBpbml0VmFsdWUgPSBuZXcgU29tZShldmVudCk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgICAgICAgIHJlcGx5ID0gc2VuZEluaXQoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAocmVwbHkgIT09IEJhY29uLm5vTW9yZSkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBzaW5rKGV2ZW50KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHNlbmRJbml0KCk7XG5cdCAgICAgICAgcmV0dXJuIHVuc3ViO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgRXZlbnRTdHJlYW0ucHJvdG90eXBlLnRvRXZlbnRTdHJlYW0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIEV2ZW50U3RyZWFtLnByb3RvdHlwZS53aXRoSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyh0aGlzLCBcIndpdGhIYW5kbGVyXCIsIFtoYW5kbGVyXSksIHRoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUsIGhhbmRsZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gRXZlbnRTdHJlYW07XG5cdFxuXHQgIH0pKE9ic2VydmFibGUpO1xuXHRcblx0ICBCYWNvbi5FdmVudFN0cmVhbSA9IEV2ZW50U3RyZWFtO1xuXHRcblx0ICBCYWNvbi5uZXZlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShkZXNjcmliZShCYWNvbiwgXCJuZXZlclwiKSwgZnVuY3Rpb24oc2luaykge1xuXHQgICAgICBzaW5rKGVuZEV2ZW50KCkpO1xuXHQgICAgICByZXR1cm4gbm9wO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24ud2hlbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGYsIGksIGluZGV4LCBpeCwgaiwgaywgbGVuLCBsZW4xLCBsZW4yLCBuZWVkc0JhcnJpZXIsIHBhdCwgcGF0U291cmNlcywgcGF0cywgcGF0dGVybnMsIHJlZiwgcmVzdWx0U3RyZWFtLCBzLCBzb3VyY2VzLCB0cmlnZ2VyRm91bmQsIHVzYWdlO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG5cdCAgICB9XG5cdCAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgdXNhZ2UgPSBcIndoZW46IGV4cGVjdGluZyBhcmd1bWVudHMgaW4gdGhlIGZvcm0gKE9ic2VydmFibGUrLGZ1bmN0aW9uKStcIjtcblx0ICAgIGFzc2VydCh1c2FnZSwgbGVuICUgMiA9PT0gMCk7XG5cdCAgICBzb3VyY2VzID0gW107XG5cdCAgICBwYXRzID0gW107XG5cdCAgICBpID0gMDtcblx0ICAgIHBhdHRlcm5zID0gW107XG5cdCAgICB3aGlsZSAoaSA8IGxlbikge1xuXHQgICAgICBwYXR0ZXJuc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgcGF0dGVybnNbaSArIDFdID0gYXJndW1lbnRzW2kgKyAxXTtcblx0ICAgICAgcGF0U291cmNlcyA9IF8udG9BcnJheShhcmd1bWVudHNbaV0pO1xuXHQgICAgICBmID0gY29uc3RhbnRUb0Z1bmN0aW9uKGFyZ3VtZW50c1tpICsgMV0pO1xuXHQgICAgICBwYXQgPSB7XG5cdCAgICAgICAgZjogZixcblx0ICAgICAgICBpeHM6IFtdXG5cdCAgICAgIH07XG5cdCAgICAgIHRyaWdnZXJGb3VuZCA9IGZhbHNlO1xuXHQgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcGF0U291cmNlcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBzID0gcGF0U291cmNlc1tqXTtcblx0ICAgICAgICBpbmRleCA9IF8uaW5kZXhPZihzb3VyY2VzLCBzKTtcblx0ICAgICAgICBpZiAoIXRyaWdnZXJGb3VuZCkge1xuXHQgICAgICAgICAgdHJpZ2dlckZvdW5kID0gU291cmNlLmlzVHJpZ2dlcihzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuXHQgICAgICAgICAgc291cmNlcy5wdXNoKHMpO1xuXHQgICAgICAgICAgaW5kZXggPSBzb3VyY2VzLmxlbmd0aCAtIDE7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlZiA9IHBhdC5peHM7XG5cdCAgICAgICAgZm9yIChrID0gMCwgbGVuMiA9IHJlZi5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcblx0ICAgICAgICAgIGl4ID0gcmVmW2tdO1xuXHQgICAgICAgICAgaWYgKGl4LmluZGV4ID09PSBpbmRleCkge1xuXHQgICAgICAgICAgICBpeC5jb3VudCsrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBwYXQuaXhzLnB1c2goe1xuXHQgICAgICAgICAgaW5kZXg6IGluZGV4LFxuXHQgICAgICAgICAgY291bnQ6IDFcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBhc3NlcnQoXCJBdCBsZWFzdCBvbmUgRXZlbnRTdHJlYW0gcmVxdWlyZWRcIiwgdHJpZ2dlckZvdW5kIHx8ICghcGF0U291cmNlcy5sZW5ndGgpKTtcblx0ICAgICAgaWYgKHBhdFNvdXJjZXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIHBhdHMucHVzaChwYXQpO1xuXHQgICAgICB9XG5cdCAgICAgIGkgPSBpICsgMjtcblx0ICAgIH1cblx0ICAgIGlmICghc291cmNlcy5sZW5ndGgpIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG5cdCAgICB9XG5cdCAgICBzb3VyY2VzID0gXy5tYXAoU291cmNlLmZyb21PYnNlcnZhYmxlLCBzb3VyY2VzKTtcblx0ICAgIG5lZWRzQmFycmllciA9IChfLmFueShzb3VyY2VzLCBmdW5jdGlvbihzKSB7XG5cdCAgICAgIHJldHVybiBzLmZsYXR0ZW47XG5cdCAgICB9KSkgJiYgKGNvbnRhaW5zRHVwbGljYXRlRGVwcyhfLm1hcCgoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gcy5vYnM7XG5cdCAgICB9KSwgc291cmNlcykpKTtcblx0ICAgIHJldHVybiByZXN1bHRTdHJlYW0gPSBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2MoQmFjb24sIFwid2hlblwiLCBwYXR0ZXJucyksIGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgdmFyIGNhbm5vdE1hdGNoLCBjYW5ub3RTeW5jLCBlbmRzLCBtYXRjaCwgbm9uRmxhdHRlbmVkLCBwYXJ0LCB0cmlnZ2Vycztcblx0ICAgICAgdHJpZ2dlcnMgPSBbXTtcblx0ICAgICAgZW5kcyA9IGZhbHNlO1xuXHQgICAgICBtYXRjaCA9IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICB2YXIgbCwgbGVuMywgcmVmMTtcblx0ICAgICAgICByZWYxID0gcC5peHM7XG5cdCAgICAgICAgZm9yIChsID0gMCwgbGVuMyA9IHJlZjEubGVuZ3RoOyBsIDwgbGVuMzsgbCsrKSB7XG5cdCAgICAgICAgICBpID0gcmVmMVtsXTtcblx0ICAgICAgICAgIGlmICghc291cmNlc1tpLmluZGV4XS5oYXNBdExlYXN0KGkuY291bnQpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH07XG5cdCAgICAgIGNhbm5vdFN5bmMgPSBmdW5jdGlvbihzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gIXNvdXJjZS5zeW5jIHx8IHNvdXJjZS5lbmRlZDtcblx0ICAgICAgfTtcblx0ICAgICAgY2Fubm90TWF0Y2ggPSBmdW5jdGlvbihwKSB7XG5cdCAgICAgICAgdmFyIGwsIGxlbjMsIHJlZjE7XG5cdCAgICAgICAgcmVmMSA9IHAuaXhzO1xuXHQgICAgICAgIGZvciAobCA9IDAsIGxlbjMgPSByZWYxLmxlbmd0aDsgbCA8IGxlbjM7IGwrKykge1xuXHQgICAgICAgICAgaSA9IHJlZjFbbF07XG5cdCAgICAgICAgICBpZiAoIXNvdXJjZXNbaS5pbmRleF0ubWF5SGF2ZShpLmNvdW50KSkge1xuXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIG5vbkZsYXR0ZW5lZCA9IGZ1bmN0aW9uKHRyaWdnZXIpIHtcblx0ICAgICAgICByZXR1cm4gIXRyaWdnZXIuc291cmNlLmZsYXR0ZW47XG5cdCAgICAgIH07XG5cdCAgICAgIHBhcnQgPSBmdW5jdGlvbihzb3VyY2UpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24odW5zdWJBbGwpIHtcblx0ICAgICAgICAgIHZhciBmbHVzaCwgZmx1c2hMYXRlciwgZmx1c2hXaGlsZVRyaWdnZXJzO1xuXHQgICAgICAgICAgZmx1c2hMYXRlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gVXBkYXRlQmFycmllci53aGVuRG9uZVdpdGgocmVzdWx0U3RyZWFtLCBmbHVzaCk7XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgZmx1c2hXaGlsZVRyaWdnZXJzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHZhciBldmVudHMsIGwsIGxlbjMsIHAsIHJlcGx5LCB0cmlnZ2VyO1xuXHQgICAgICAgICAgICBpZiAodHJpZ2dlcnMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcblx0ICAgICAgICAgICAgICB0cmlnZ2VyID0gdHJpZ2dlcnMucG9wKCk7XG5cdCAgICAgICAgICAgICAgZm9yIChsID0gMCwgbGVuMyA9IHBhdHMubGVuZ3RoOyBsIDwgbGVuMzsgbCsrKSB7XG5cdCAgICAgICAgICAgICAgICBwID0gcGF0c1tsXTtcblx0ICAgICAgICAgICAgICAgIGlmIChtYXRjaChwKSkge1xuXHQgICAgICAgICAgICAgICAgICBldmVudHMgPSAoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjQsIG0sIHJlZjEsIHJlc3VsdHM7XG5cdCAgICAgICAgICAgICAgICAgICAgcmVmMSA9IHAuaXhzO1xuXHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwLCBsZW40ID0gcmVmMS5sZW5ndGg7IG0gPCBsZW40OyBtKyspIHtcblx0ICAgICAgICAgICAgICAgICAgICAgIGkgPSByZWYxW21dO1xuXHQgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHNvdXJjZXNbaS5pbmRleF0uY29uc3VtZSgpKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICAgICAgICAgICAgICAgIH0pKCk7XG5cdCAgICAgICAgICAgICAgICAgIHJlcGx5ID0gc2luayh0cmlnZ2VyLmUuYXBwbHkoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGV2ZW50LCB2YWx1ZXM7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjQsIG0sIHJlc3VsdHM7XG5cdCAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XG5cdCAgICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwLCBsZW40ID0gZXZlbnRzLmxlbmd0aDsgbSA8IGxlbjQ7IG0rKykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50c1ttXTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGV2ZW50LnZhbHVlKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICAgICAgICAgICAgICAgICAgfSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5mLmFwcGx5KHAsIHZhbHVlcyk7XG5cdCAgICAgICAgICAgICAgICAgIH0pKTtcblx0ICAgICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJzID0gXy5maWx0ZXIobm9uRmxhdHRlbmVkLCB0cmlnZ2Vycyk7XG5cdCAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwbHk7XG5cdCAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZsdXNoV2hpbGVUcmlnZ2VycygpO1xuXHQgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJldHVybiBCYWNvbi5tb3JlO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgZmx1c2ggPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgdmFyIHJlcGx5O1xuXHQgICAgICAgICAgICByZXBseSA9IGZsdXNoV2hpbGVUcmlnZ2VycygpO1xuXHQgICAgICAgICAgICBpZiAoZW5kcykge1xuXHQgICAgICAgICAgICAgIGVuZHMgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICBpZiAoXy5hbGwoc291cmNlcywgY2Fubm90U3luYykgfHwgXy5hbGwocGF0cywgY2Fubm90TWF0Y2gpKSB7XG5cdCAgICAgICAgICAgICAgICByZXBseSA9IEJhY29uLm5vTW9yZTtcblx0ICAgICAgICAgICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyZXBseSA9PT0gQmFjb24ubm9Nb3JlKSB7XG5cdCAgICAgICAgICAgICAgdW5zdWJBbGwoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm4gcmVwbHk7XG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSkge1xuXHQgICAgICAgICAgICB2YXIgcmVwbHk7XG5cdCAgICAgICAgICAgIGlmIChlLmlzRW5kKCkpIHtcblx0ICAgICAgICAgICAgICBlbmRzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICBzb3VyY2UubWFya0VuZGVkKCk7XG5cdCAgICAgICAgICAgICAgZmx1c2hMYXRlcigpO1xuXHQgICAgICAgICAgICB9IGVsc2UgaWYgKGUuaXNFcnJvcigpKSB7XG5cdCAgICAgICAgICAgICAgcmVwbHkgPSBzaW5rKGUpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHNvdXJjZS5wdXNoKGUpO1xuXHQgICAgICAgICAgICAgIGlmIChzb3VyY2Uuc3luYykge1xuXHQgICAgICAgICAgICAgICAgdHJpZ2dlcnMucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAgIHNvdXJjZTogc291cmNlLFxuXHQgICAgICAgICAgICAgICAgICBlOiBlXG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIGlmIChuZWVkc0JhcnJpZXIgfHwgVXBkYXRlQmFycmllci5oYXNXYWl0ZXJzKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgZmx1c2hMYXRlcigpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgZmx1c2goKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICB1bnN1YkFsbCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHJldHVybiByZXBseSB8fCBCYWNvbi5tb3JlO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfTtcblx0ICAgICAgcmV0dXJuIG5ldyBCYWNvbi5Db21wb3NpdGVVbnN1YnNjcmliZSgoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGwsIGxlbjMsIHJlc3VsdHM7XG5cdCAgICAgICAgcmVzdWx0cyA9IFtdO1xuXHQgICAgICAgIGZvciAobCA9IDAsIGxlbjMgPSBzb3VyY2VzLmxlbmd0aDsgbCA8IGxlbjM7IGwrKykge1xuXHQgICAgICAgICAgcyA9IHNvdXJjZXNbbF07XG5cdCAgICAgICAgICByZXN1bHRzLnB1c2gocGFydChzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiByZXN1bHRzO1xuXHQgICAgICB9KSgpKS51bnN1YnNjcmliZTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIGNvbnRhaW5zRHVwbGljYXRlRGVwcyA9IGZ1bmN0aW9uKG9ic2VydmFibGVzLCBzdGF0ZSkge1xuXHQgICAgdmFyIGNoZWNrT2JzZXJ2YWJsZTtcblx0ICAgIGlmIChzdGF0ZSA9PSBudWxsKSB7XG5cdCAgICAgIHN0YXRlID0gW107XG5cdCAgICB9XG5cdCAgICBjaGVja09ic2VydmFibGUgPSBmdW5jdGlvbihvYnMpIHtcblx0ICAgICAgdmFyIGRlcHM7XG5cdCAgICAgIGlmIChfLmNvbnRhaW5zKHN0YXRlLCBvYnMpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVwcyA9IG9icy5pbnRlcm5hbERlcHMoKTtcblx0ICAgICAgICBpZiAoZGVwcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHN0YXRlLnB1c2gob2JzKTtcblx0ICAgICAgICAgIHJldHVybiBfLmFueShkZXBzLCBjaGVja09ic2VydmFibGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdGF0ZS5wdXNoKG9icyk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIF8uYW55KG9ic2VydmFibGVzLCBjaGVja09ic2VydmFibGUpO1xuXHQgIH07XG5cdFxuXHQgIGNvbnN0YW50VG9GdW5jdGlvbiA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgIGlmIChfLmlzRnVuY3Rpb24oZikpIHtcblx0ICAgICAgcmV0dXJuIGY7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gXy5hbHdheXMoZik7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uZ3JvdXBTaW11bHRhbmVvdXMgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBzLCBzb3VyY2VzLCBzdHJlYW1zO1xuXHQgICAgc3RyZWFtcyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgaWYgKHN0cmVhbXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXkoc3RyZWFtc1swXSkpIHtcblx0ICAgICAgc3RyZWFtcyA9IHN0cmVhbXNbMF07XG5cdCAgICB9XG5cdCAgICBzb3VyY2VzID0gKGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgaiwgbGVuMSwgcmVzdWx0cztcblx0ICAgICAgcmVzdWx0cyA9IFtdO1xuXHQgICAgICBmb3IgKGogPSAwLCBsZW4xID0gc3RyZWFtcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBzID0gc3RyZWFtc1tqXTtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IEJ1ZmZlcmluZ1NvdXJjZShzKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICB9KSgpO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImdyb3VwU2ltdWx0YW5lb3VzXCIsIHN0cmVhbXMpLCBCYWNvbi53aGVuKHNvdXJjZXMsIChmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHhzO1xuXHQgICAgICB4cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgICByZXR1cm4geHM7XG5cdCAgICB9KSkpO1xuXHQgIH07XG5cdFxuXHQgIFByb3BlcnR5RGlzcGF0Y2hlciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG5cdCAgICBleHRlbmQoUHJvcGVydHlEaXNwYXRjaGVyLCBzdXBlckNsYXNzKTtcblx0XG5cdCAgICBmdW5jdGlvbiBQcm9wZXJ0eURpc3BhdGNoZXIocHJvcGVydHkxLCBzdWJzY3JpYmUsIGhhbmRsZUV2ZW50KSB7XG5cdCAgICAgIHRoaXMucHJvcGVydHkgPSBwcm9wZXJ0eTE7XG5cdCAgICAgIHRoaXMuc3Vic2NyaWJlID0gYmluZCh0aGlzLnN1YnNjcmliZSwgdGhpcyk7XG5cdCAgICAgIFByb3BlcnR5RGlzcGF0Y2hlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBzdWJzY3JpYmUsIGhhbmRsZUV2ZW50KTtcblx0ICAgICAgdGhpcy5jdXJyZW50ID0gTm9uZTtcblx0ICAgICAgdGhpcy5jdXJyZW50VmFsdWVSb290SWQgPSB2b2lkIDA7XG5cdCAgICAgIHRoaXMucHJvcGVydHlFbmRlZCA9IGZhbHNlO1xuXHQgICAgfVxuXHRcblx0ICAgIFByb3BlcnR5RGlzcGF0Y2hlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgdGhpcy5wcm9wZXJ0eUVuZGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgIHRoaXMuY3VycmVudCA9IG5ldyBTb21lKGV2ZW50KTtcblx0ICAgICAgICB0aGlzLmN1cnJlbnRWYWx1ZVJvb3RJZCA9IFVwZGF0ZUJhcnJpZXIuY3VycmVudEV2ZW50SWQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gUHJvcGVydHlEaXNwYXRjaGVyLl9fc3VwZXJfXy5wdXNoLmNhbGwodGhpcywgZXZlbnQpO1xuXHQgICAgfTtcblx0XG5cdCAgICBQcm9wZXJ0eURpc3BhdGNoZXIucHJvdG90eXBlLm1heWJlU3ViU291cmNlID0gZnVuY3Rpb24oc2luaywgcmVwbHkpIHtcblx0ICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICByZXR1cm4gbm9wO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydHlFbmRlZCkge1xuXHQgICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG5cdCAgICAgICAgcmV0dXJuIG5vcDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gRGlzcGF0Y2hlci5wcm90b3R5cGUuc3Vic2NyaWJlLmNhbGwodGhpcywgc2luayk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgUHJvcGVydHlEaXNwYXRjaGVyLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHZhciBkaXNwYXRjaGluZ0lkLCBpbml0U2VudCwgcmVwbHksIHZhbElkO1xuXHQgICAgICBpbml0U2VudCA9IGZhbHNlO1xuXHQgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG5cdCAgICAgIGlmICh0aGlzLmN1cnJlbnQuaXNEZWZpbmVkICYmICh0aGlzLmhhc1N1YnNjcmliZXJzKCkgfHwgdGhpcy5wcm9wZXJ0eUVuZGVkKSkge1xuXHQgICAgICAgIGRpc3BhdGNoaW5nSWQgPSBVcGRhdGVCYXJyaWVyLmN1cnJlbnRFdmVudElkKCk7XG5cdCAgICAgICAgdmFsSWQgPSB0aGlzLmN1cnJlbnRWYWx1ZVJvb3RJZDtcblx0ICAgICAgICBpZiAoIXRoaXMucHJvcGVydHlFbmRlZCAmJiB2YWxJZCAmJiBkaXNwYXRjaGluZ0lkICYmIGRpc3BhdGNoaW5nSWQgIT09IHZhbElkKSB7XG5cdCAgICAgICAgICBVcGRhdGVCYXJyaWVyLndoZW5Eb25lV2l0aCh0aGlzLnByb3BlcnR5LCAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICAgIGlmIChfdGhpcy5jdXJyZW50VmFsdWVSb290SWQgPT09IHZhbElkKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gc2luayhpbml0aWFsRXZlbnQoX3RoaXMuY3VycmVudC5nZXQoKS52YWx1ZSgpKSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfSkodGhpcykpO1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMubWF5YmVTdWJTb3VyY2Uoc2luaywgcmVwbHkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBVcGRhdGVCYXJyaWVyLmluVHJhbnNhY3Rpb24odm9pZCAwLCB0aGlzLCAoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgIHJldHVybiByZXBseSA9IHNpbmsoaW5pdGlhbEV2ZW50KHRoaXMuY3VycmVudC5nZXQoKS52YWx1ZSgpKSk7XG5cdCAgICAgICAgICB9KSwgW10pO1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMubWF5YmVTdWJTb3VyY2Uoc2luaywgcmVwbHkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5tYXliZVN1YlNvdXJjZShzaW5rLCByZXBseSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFByb3BlcnR5RGlzcGF0Y2hlcjtcblx0XG5cdCAgfSkoRGlzcGF0Y2hlcik7XG5cdFxuXHQgIFByb3BlcnR5ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChQcm9wZXJ0eSwgc3VwZXJDbGFzcyk7XG5cdFxuXHQgICAgZnVuY3Rpb24gUHJvcGVydHkoZGVzYywgc3Vic2NyaWJlLCBoYW5kbGVyKSB7XG5cdCAgICAgIFByb3BlcnR5Ll9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIGRlc2MpO1xuXHQgICAgICBhc3NlcnRGdW5jdGlvbihzdWJzY3JpYmUpO1xuXHQgICAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgUHJvcGVydHlEaXNwYXRjaGVyKHRoaXMsIHN1YnNjcmliZSwgaGFuZGxlcik7XG5cdCAgICAgIHJlZ2lzdGVyT2JzKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIFByb3BlcnR5LnByb3RvdHlwZS5jaGFuZ2VzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2ModGhpcywgXCJjaGFuZ2VzXCIsIFtdKSwgKGZ1bmN0aW9uKF90aGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICBpZiAoIWV2ZW50LmlzSW5pdGlhbCgpKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgICB9KSh0aGlzKSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIFByb3BlcnR5LnByb3RvdHlwZS53aXRoSGFuZGxlciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eShuZXcgQmFjb24uRGVzYyh0aGlzLCBcIndpdGhIYW5kbGVyXCIsIFtoYW5kbGVyXSksIHRoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUsIGhhbmRsZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBQcm9wZXJ0eS5wcm90b3R5cGUudG9Qcm9wZXJ0eSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICBhc3NlcnROb0FyZ3VtZW50cyhhcmd1bWVudHMpO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgUHJvcGVydHkucHJvdG90eXBlLnRvRXZlbnRTdHJlYW0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRvRXZlbnRTdHJlYW1cIiwgW10pLCAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2luaykge1xuXHQgICAgICAgICAgcmV0dXJuIF90aGlzLmRpc3BhdGNoZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5pc0luaXRpYWwoKSkge1xuXHQgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQudG9OZXh0KCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSkodGhpcykpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gUHJvcGVydHk7XG5cdFxuXHQgIH0pKE9ic2VydmFibGUpO1xuXHRcblx0ICBCYWNvbi5Qcm9wZXJ0eSA9IFByb3BlcnR5O1xuXHRcblx0ICBCYWNvbi5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb3BlcnR5KG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbnN0YW50XCIsIFt2YWx1ZV0pLCBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHNpbmsoaW5pdGlhbEV2ZW50KHZhbHVlKSk7XG5cdCAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG5cdCAgICAgIHJldHVybiBub3A7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5mcm9tQmluZGVyID0gZnVuY3Rpb24oYmluZGVyLCBldmVudFRyYW5zZm9ybWVyKSB7XG5cdCAgICBpZiAoZXZlbnRUcmFuc2Zvcm1lciA9PSBudWxsKSB7XG5cdCAgICAgIGV2ZW50VHJhbnNmb3JtZXIgPSBfLmlkO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tQmluZGVyXCIsIFtiaW5kZXIsIGV2ZW50VHJhbnNmb3JtZXJdKSwgZnVuY3Rpb24oc2luaykge1xuXHQgICAgICB2YXIgc2hvdWxkVW5iaW5kLCB1bmJpbmQsIHVuYmluZGVyLCB1bmJvdW5kO1xuXHQgICAgICB1bmJvdW5kID0gZmFsc2U7XG5cdCAgICAgIHNob3VsZFVuYmluZCA9IGZhbHNlO1xuXHQgICAgICB1bmJpbmQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICBpZiAoIXVuYm91bmQpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdW5iaW5kZXIgIT09IFwidW5kZWZpbmVkXCIgJiYgdW5iaW5kZXIgIT09IG51bGwpIHtcblx0ICAgICAgICAgICAgdW5iaW5kZXIoKTtcblx0ICAgICAgICAgICAgcmV0dXJuIHVuYm91bmQgPSB0cnVlO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHNob3VsZFVuYmluZCA9IHRydWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgICB1bmJpbmRlciA9IGJpbmRlcihmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgYXJncywgZXZlbnQsIGosIGxlbjEsIHJlcGx5LCB2YWx1ZTtcblx0ICAgICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICAgICAgdmFsdWUgPSBldmVudFRyYW5zZm9ybWVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIGlmICghKGlzQXJyYXkodmFsdWUpICYmIF8ubGFzdCh2YWx1ZSkgaW5zdGFuY2VvZiBFdmVudCkpIHtcblx0ICAgICAgICAgIHZhbHVlID0gW3ZhbHVlXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB2YWx1ZS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICAgIGV2ZW50ID0gdmFsdWVbal07XG5cdCAgICAgICAgICByZXBseSA9IHNpbmsoZXZlbnQgPSB0b0V2ZW50KGV2ZW50KSk7XG5cdCAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSB8fCBldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgICAgIHVuYmluZCgpO1xuXHQgICAgICAgICAgICByZXR1cm4gcmVwbHk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiByZXBseTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChzaG91bGRVbmJpbmQpIHtcblx0ICAgICAgICB1bmJpbmQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdW5iaW5kO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgZXZlbnRNZXRob2RzID0gW1tcImFkZEV2ZW50TGlzdGVuZXJcIiwgXCJyZW1vdmVFdmVudExpc3RlbmVyXCJdLCBbXCJhZGRMaXN0ZW5lclwiLCBcInJlbW92ZUxpc3RlbmVyXCJdLCBbXCJvblwiLCBcIm9mZlwiXSwgW1wiYmluZFwiLCBcInVuYmluZFwiXV07XG5cdFxuXHQgIGZpbmRIYW5kbGVyTWV0aG9kcyA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHQgICAgdmFyIGosIGxlbjEsIG1ldGhvZFBhaXIsIHBhaXI7XG5cdCAgICBmb3IgKGogPSAwLCBsZW4xID0gZXZlbnRNZXRob2RzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICBwYWlyID0gZXZlbnRNZXRob2RzW2pdO1xuXHQgICAgICBtZXRob2RQYWlyID0gW3RhcmdldFtwYWlyWzBdXSwgdGFyZ2V0W3BhaXJbMV1dXTtcblx0ICAgICAgaWYgKG1ldGhvZFBhaXJbMF0gJiYgbWV0aG9kUGFpclsxXSkge1xuXHQgICAgICAgIHJldHVybiBtZXRob2RQYWlyO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBzdWl0YWJsZSBldmVudCBtZXRob2RzIGluIFwiICsgdGFyZ2V0KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5mcm9tRXZlbnRUYXJnZXQgPSBmdW5jdGlvbih0YXJnZXQsIGV2ZW50TmFtZSwgZXZlbnRUcmFuc2Zvcm1lcikge1xuXHQgICAgdmFyIHJlZiwgc3ViLCB1bnN1Yjtcblx0ICAgIHJlZiA9IGZpbmRIYW5kbGVyTWV0aG9kcyh0YXJnZXQpLCBzdWIgPSByZWZbMF0sIHVuc3ViID0gcmVmWzFdO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImZyb21FdmVudFwiLCBbdGFyZ2V0LCBldmVudE5hbWVdKSwgQmFjb24uZnJvbUJpbmRlcihmdW5jdGlvbihoYW5kbGVyKSB7XG5cdCAgICAgIHN1Yi5jYWxsKHRhcmdldCwgZXZlbnROYW1lLCBoYW5kbGVyKTtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB1bnN1Yi5jYWxsKHRhcmdldCwgZXZlbnROYW1lLCBoYW5kbGVyKTtcblx0ICAgICAgfTtcblx0ICAgIH0sIGV2ZW50VHJhbnNmb3JtZXIpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5mcm9tRXZlbnQgPSBCYWNvbi5mcm9tRXZlbnRUYXJnZXQ7XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3MsIHA7XG5cdCAgICBwID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG5cdCAgICByZXR1cm4gY29udmVydEFyZ3NUb0Z1bmN0aW9uKHRoaXMsIHAsIGFyZ3MsIGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwibWFwXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50LmZtYXAoZikpO1xuXHQgICAgICB9KSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5jb21iaW5lQXNBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGluZGV4LCBqLCBsZW4xLCBzLCBzb3VyY2VzLCBzdHJlYW0sIHN0cmVhbXM7XG5cdCAgICBzdHJlYW1zID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICBpZiAoc3RyZWFtcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheShzdHJlYW1zWzBdKSkge1xuXHQgICAgICBzdHJlYW1zID0gc3RyZWFtc1swXTtcblx0ICAgIH1cblx0ICAgIGZvciAoaW5kZXggPSBqID0gMCwgbGVuMSA9IHN0cmVhbXMubGVuZ3RoOyBqIDwgbGVuMTsgaW5kZXggPSArK2opIHtcblx0ICAgICAgc3RyZWFtID0gc3RyZWFtc1tpbmRleF07XG5cdCAgICAgIGlmICghKGlzT2JzZXJ2YWJsZShzdHJlYW0pKSkge1xuXHQgICAgICAgIHN0cmVhbXNbaW5kZXhdID0gQmFjb24uY29uc3RhbnQoc3RyZWFtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHN0cmVhbXMubGVuZ3RoKSB7XG5cdCAgICAgIHNvdXJjZXMgPSAoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGssIGxlbjIsIHJlc3VsdHM7XG5cdCAgICAgICAgcmVzdWx0cyA9IFtdO1xuXHQgICAgICAgIGZvciAoayA9IDAsIGxlbjIgPSBzdHJlYW1zLmxlbmd0aDsgayA8IGxlbjI7IGsrKykge1xuXHQgICAgICAgICAgcyA9IHN0cmVhbXNba107XG5cdCAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IFNvdXJjZShzLCB0cnVlKSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiByZXN1bHRzO1xuXHQgICAgICB9KSgpO1xuXHQgICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiY29tYmluZUFzQXJyYXlcIiwgc3RyZWFtcyksIEJhY29uLndoZW4oc291cmNlcywgKGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB4cztcblx0ICAgICAgICB4cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgICAgIHJldHVybiB4cztcblx0ICAgICAgfSkpLnRvUHJvcGVydHkoKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gQmFjb24uY29uc3RhbnQoW10pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEJhY29uLm9uVmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgZiwgaiwgc3RyZWFtcztcblx0ICAgIHN0cmVhbXMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCwgaiA9IGFyZ3VtZW50cy5sZW5ndGggLSAxKSA6IChqID0gMCwgW10pLCBmID0gYXJndW1lbnRzW2orK107XG5cdCAgICByZXR1cm4gQmFjb24uY29tYmluZUFzQXJyYXkoc3RyZWFtcykub25WYWx1ZXMoZik7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uY29tYmluZVdpdGggPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBmLCBzdHJlYW1zO1xuXHQgICAgZiA9IGFyZ3VtZW50c1swXSwgc3RyZWFtcyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbWJpbmVXaXRoXCIsIFtmXS5jb25jYXQoc2xpY2UuY2FsbChzdHJlYW1zKSkpLCBCYWNvbi5jb21iaW5lQXNBcnJheShzdHJlYW1zKS5tYXAoZnVuY3Rpb24odmFsdWVzKSB7XG5cdCAgICAgIHJldHVybiBmLmFwcGx5KG51bGwsIHZhbHVlcyk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uY29tYmluZVRlbXBsYXRlID0gZnVuY3Rpb24odGVtcGxhdGUpIHtcblx0ICAgIHZhciBhcHBseVN0cmVhbVZhbHVlLCBjb21iaW5hdG9yLCBjb21waWxlLCBjb21waWxlVGVtcGxhdGUsIGNvbnN0YW50VmFsdWUsIGN1cnJlbnQsIGZ1bmNzLCBta0NvbnRleHQsIHNldFZhbHVlLCBzdHJlYW1zO1xuXHQgICAgZnVuY3MgPSBbXTtcblx0ICAgIHN0cmVhbXMgPSBbXTtcblx0ICAgIGN1cnJlbnQgPSBmdW5jdGlvbihjdHhTdGFjaykge1xuXHQgICAgICByZXR1cm4gY3R4U3RhY2tbY3R4U3RhY2subGVuZ3RoIC0gMV07XG5cdCAgICB9O1xuXHQgICAgc2V0VmFsdWUgPSBmdW5jdGlvbihjdHhTdGFjaywga2V5LCB2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gY3VycmVudChjdHhTdGFjaylba2V5XSA9IHZhbHVlO1xuXHQgICAgfTtcblx0ICAgIGFwcGx5U3RyZWFtVmFsdWUgPSBmdW5jdGlvbihrZXksIGluZGV4KSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbihjdHhTdGFjaywgdmFsdWVzKSB7XG5cdCAgICAgICAgcmV0dXJuIHNldFZhbHVlKGN0eFN0YWNrLCBrZXksIHZhbHVlc1tpbmRleF0pO1xuXHQgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIGNvbnN0YW50VmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbihjdHhTdGFjaykge1xuXHQgICAgICAgIHJldHVybiBzZXRWYWx1ZShjdHhTdGFjaywga2V5LCB2YWx1ZSk7XG5cdCAgICAgIH07XG5cdCAgICB9O1xuXHQgICAgbWtDb250ZXh0ID0gZnVuY3Rpb24odGVtcGxhdGUpIHtcblx0ICAgICAgaWYgKGlzQXJyYXkodGVtcGxhdGUpKSB7XG5cdCAgICAgICAgcmV0dXJuIFtdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB7fTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGNvbXBpbGUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdCAgICAgIHZhciBwb3BDb250ZXh0LCBwdXNoQ29udGV4dDtcblx0ICAgICAgaWYgKGlzT2JzZXJ2YWJsZSh2YWx1ZSkpIHtcblx0ICAgICAgICBzdHJlYW1zLnB1c2godmFsdWUpO1xuXHQgICAgICAgIHJldHVybiBmdW5jcy5wdXNoKGFwcGx5U3RyZWFtVmFsdWUoa2V5LCBzdHJlYW1zLmxlbmd0aCAtIDEpKTtcblx0ICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gT2JqZWN0KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcblx0ICAgICAgICBwdXNoQ29udGV4dCA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGN0eFN0YWNrKSB7XG5cdCAgICAgICAgICAgIHZhciBuZXdDb250ZXh0O1xuXHQgICAgICAgICAgICBuZXdDb250ZXh0ID0gbWtDb250ZXh0KHZhbHVlKTtcblx0ICAgICAgICAgICAgc2V0VmFsdWUoY3R4U3RhY2ssIGtleSwgbmV3Q29udGV4dCk7XG5cdCAgICAgICAgICAgIHJldHVybiBjdHhTdGFjay5wdXNoKG5ld0NvbnRleHQpO1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHBvcENvbnRleHQgPSBmdW5jdGlvbihjdHhTdGFjaykge1xuXHQgICAgICAgICAgcmV0dXJuIGN0eFN0YWNrLnBvcCgpO1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgZnVuY3MucHVzaChwdXNoQ29udGV4dChrZXkpKTtcblx0ICAgICAgICBjb21waWxlVGVtcGxhdGUodmFsdWUpO1xuXHQgICAgICAgIHJldHVybiBmdW5jcy5wdXNoKHBvcENvbnRleHQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmdW5jcy5wdXNoKGNvbnN0YW50VmFsdWUoa2V5LCB2YWx1ZSkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgY29tcGlsZVRlbXBsYXRlID0gZnVuY3Rpb24odGVtcGxhdGUpIHtcblx0ICAgICAgcmV0dXJuIF8uZWFjaCh0ZW1wbGF0ZSwgY29tcGlsZSk7XG5cdCAgICB9O1xuXHQgICAgY29tcGlsZVRlbXBsYXRlKHRlbXBsYXRlKTtcblx0ICAgIGNvbWJpbmF0b3IgPSBmdW5jdGlvbih2YWx1ZXMpIHtcblx0ICAgICAgdmFyIGN0eFN0YWNrLCBmLCBqLCBsZW4xLCByb290Q29udGV4dDtcblx0ICAgICAgcm9vdENvbnRleHQgPSBta0NvbnRleHQodGVtcGxhdGUpO1xuXHQgICAgICBjdHhTdGFjayA9IFtyb290Q29udGV4dF07XG5cdCAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBmdW5jcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBmID0gZnVuY3Nbal07XG5cdCAgICAgICAgZihjdHhTdGFjaywgdmFsdWVzKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcm9vdENvbnRleHQ7XG5cdCAgICB9O1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbWJpbmVUZW1wbGF0ZVwiLCBbdGVtcGxhdGVdKSwgQmFjb24uY29tYmluZUFzQXJyYXkoc3RyZWFtcykubWFwKGNvbWJpbmF0b3IpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24ob3RoZXIsIGYpIHtcblx0ICAgIHZhciBjb21iaW5hdG9yO1xuXHQgICAgY29tYmluYXRvciA9IHRvQ29tYmluYXRvcihmKTtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImNvbWJpbmVcIiwgW290aGVyLCBmXSksIEJhY29uLmNvbWJpbmVBc0FycmF5KHRoaXMsIG90aGVyKS5tYXAoZnVuY3Rpb24odmFsdWVzKSB7XG5cdCAgICAgIHJldHVybiBjb21iaW5hdG9yKHZhbHVlc1swXSwgdmFsdWVzWzFdKTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbihjYXNlcykge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVjb2RlXCIsIFtjYXNlc10pLCB0aGlzLmNvbWJpbmUoQmFjb24uY29tYmluZVRlbXBsYXRlKGNhc2VzKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZXMpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlc1trZXldO1xuXHQgICAgfSkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLndpdGhTdGF0ZU1hY2hpbmUgPSBmdW5jdGlvbihpbml0U3RhdGUsIGYpIHtcblx0ICAgIHZhciBzdGF0ZTtcblx0ICAgIHN0YXRlID0gaW5pdFN0YXRlO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwid2l0aFN0YXRlTWFjaGluZVwiLCBbaW5pdFN0YXRlLCBmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgdmFyIGZyb21GLCBqLCBsZW4xLCBuZXdTdGF0ZSwgb3V0cHV0LCBvdXRwdXRzLCByZXBseTtcblx0ICAgICAgZnJvbUYgPSBmKHN0YXRlLCBldmVudCk7XG5cdCAgICAgIG5ld1N0YXRlID0gZnJvbUZbMF0sIG91dHB1dHMgPSBmcm9tRlsxXTtcblx0ICAgICAgc3RhdGUgPSBuZXdTdGF0ZTtcblx0ICAgICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuXHQgICAgICBmb3IgKGogPSAwLCBsZW4xID0gb3V0cHV0cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBvdXRwdXQgPSBvdXRwdXRzW2pdO1xuXHQgICAgICAgIHJlcGx5ID0gdGhpcy5wdXNoKG91dHB1dCk7XG5cdCAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgIHJldHVybiByZXBseTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlcGx5O1xuXHQgICAgfSkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBEdXBsaWNhdGVzID0gZnVuY3Rpb24oaXNFcXVhbCkge1xuXHQgICAgaWYgKGlzRXF1YWwgPT0gbnVsbCkge1xuXHQgICAgICBpc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuXHQgICAgICAgIHJldHVybiBhID09PSBiO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic2tpcER1cGxpY2F0ZXNcIiwgW10pLCB0aGlzLndpdGhTdGF0ZU1hY2hpbmUoTm9uZSwgZnVuY3Rpb24ocHJldiwgZXZlbnQpIHtcblx0ICAgICAgaWYgKCFldmVudC5oYXNWYWx1ZSgpKSB7XG5cdCAgICAgICAgcmV0dXJuIFtwcmV2LCBbZXZlbnRdXTtcblx0ICAgICAgfSBlbHNlIGlmIChldmVudC5pc0luaXRpYWwoKSB8fCBwcmV2ID09PSBOb25lIHx8ICFpc0VxdWFsKHByZXYuZ2V0KCksIGV2ZW50LnZhbHVlKCkpKSB7XG5cdCAgICAgICAgcmV0dXJuIFtuZXcgU29tZShldmVudC52YWx1ZSgpKSwgW2V2ZW50XV07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIFtwcmV2LCBbXV07XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5hd2FpdGluZyA9IGZ1bmN0aW9uKG90aGVyKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJhd2FpdGluZ1wiLCBbb3RoZXJdKSwgQmFjb24uZ3JvdXBTaW11bHRhbmVvdXModGhpcywgb3RoZXIpLm1hcChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgdmFyIG15VmFsdWVzLCBvdGhlclZhbHVlcztcblx0ICAgICAgbXlWYWx1ZXMgPSBhcmdbMF0sIG90aGVyVmFsdWVzID0gYXJnWzFdO1xuXHQgICAgICByZXR1cm4gb3RoZXJWYWx1ZXMubGVuZ3RoID09PSAwO1xuXHQgICAgfSkudG9Qcm9wZXJ0eShmYWxzZSkuc2tpcER1cGxpY2F0ZXMoKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUubm90ID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJub3RcIiwgW10pLCB0aGlzLm1hcChmdW5jdGlvbih4KSB7XG5cdCAgICAgIHJldHVybiAheDtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuYW5kID0gZnVuY3Rpb24ob3RoZXIpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImFuZFwiLCBbb3RoZXJdKSwgdGhpcy5jb21iaW5lKG90aGVyLCBmdW5jdGlvbih4LCB5KSB7XG5cdCAgICAgIHJldHVybiB4ICYmIHk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLm9yID0gZnVuY3Rpb24ob3RoZXIpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcIm9yXCIsIFtvdGhlcl0pLCB0aGlzLmNvbWJpbmUob3RoZXIsIGZ1bmN0aW9uKHgsIHkpIHtcblx0ICAgICAgcmV0dXJuIHggfHwgeTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5zY2hlZHVsZXIgPSB7XG5cdCAgICBzZXRUaW1lb3V0OiBmdW5jdGlvbihmLCBkKSB7XG5cdCAgICAgIHJldHVybiBzZXRUaW1lb3V0KGYsIGQpO1xuXHQgICAgfSxcblx0ICAgIHNldEludGVydmFsOiBmdW5jdGlvbihmLCBpKSB7XG5cdCAgICAgIHJldHVybiBzZXRJbnRlcnZhbChmLCBpKTtcblx0ICAgIH0sXG5cdCAgICBjbGVhckludGVydmFsOiBmdW5jdGlvbihpZCkge1xuXHQgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbChpZCk7XG5cdCAgICB9LFxuXHQgICAgY2xlYXJUaW1lb3V0OiBmdW5jdGlvbihpZCkge1xuXHQgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KGlkKTtcblx0ICAgIH0sXG5cdCAgICBub3c6IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmJ1ZmZlcldpdGhUaW1lID0gZnVuY3Rpb24oZGVsYXkpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlcldpdGhUaW1lXCIsIFtkZWxheV0pLCB0aGlzLmJ1ZmZlcldpdGhUaW1lT3JDb3VudChkZWxheSwgTnVtYmVyLk1BWF9WQUxVRSkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5idWZmZXJXaXRoQ291bnQgPSBmdW5jdGlvbihjb3VudCkge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiYnVmZmVyV2l0aENvdW50XCIsIFtjb3VudF0pLCB0aGlzLmJ1ZmZlcldpdGhUaW1lT3JDb3VudCh2b2lkIDAsIGNvdW50KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmJ1ZmZlcldpdGhUaW1lT3JDb3VudCA9IGZ1bmN0aW9uKGRlbGF5LCBjb3VudCkge1xuXHQgICAgdmFyIGZsdXNoT3JTY2hlZHVsZTtcblx0ICAgIGZsdXNoT3JTY2hlZHVsZSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgICAgICBpZiAoYnVmZmVyLnZhbHVlcy5sZW5ndGggPT09IGNvdW50KSB7XG5cdCAgICAgICAgcmV0dXJuIGJ1ZmZlci5mbHVzaCgpO1xuXHQgICAgICB9IGVsc2UgaWYgKGRlbGF5ICE9PSB2b2lkIDApIHtcblx0ICAgICAgICByZXR1cm4gYnVmZmVyLnNjaGVkdWxlKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJidWZmZXJXaXRoVGltZU9yQ291bnRcIiwgW2RlbGF5LCBjb3VudF0pLCB0aGlzLmJ1ZmZlcihkZWxheSwgZmx1c2hPclNjaGVkdWxlLCBmbHVzaE9yU2NoZWR1bGUpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuYnVmZmVyID0gZnVuY3Rpb24oZGVsYXksIG9uSW5wdXQsIG9uRmx1c2gpIHtcblx0ICAgIHZhciBidWZmZXIsIGRlbGF5TXMsIHJlcGx5O1xuXHQgICAgaWYgKG9uSW5wdXQgPT0gbnVsbCkge1xuXHQgICAgICBvbklucHV0ID0gbm9wO1xuXHQgICAgfVxuXHQgICAgaWYgKG9uRmx1c2ggPT0gbnVsbCkge1xuXHQgICAgICBvbkZsdXNoID0gbm9wO1xuXHQgICAgfVxuXHQgICAgYnVmZmVyID0ge1xuXHQgICAgICBzY2hlZHVsZWQ6IG51bGwsXG5cdCAgICAgIGVuZDogdm9pZCAwLFxuXHQgICAgICB2YWx1ZXM6IFtdLFxuXHQgICAgICBmbHVzaDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlcGx5O1xuXHQgICAgICAgIGlmICh0aGlzLnNjaGVkdWxlZCkge1xuXHQgICAgICAgICAgQmFjb24uc2NoZWR1bGVyLmNsZWFyVGltZW91dCh0aGlzLnNjaGVkdWxlZCk7XG5cdCAgICAgICAgICB0aGlzLnNjaGVkdWxlZCA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aGlzLnZhbHVlcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICByZXBseSA9IHRoaXMucHVzaChuZXh0RXZlbnQodGhpcy52YWx1ZXMpKTtcblx0ICAgICAgICAgIHRoaXMudmFsdWVzID0gW107XG5cdCAgICAgICAgICBpZiAodGhpcy5lbmQgIT0gbnVsbCkge1xuXHQgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKHRoaXMuZW5kKTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkgIT09IEJhY29uLm5vTW9yZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gb25GbHVzaCh0aGlzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHRoaXMuZW5kICE9IG51bGwpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaCh0aGlzLmVuZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBzY2hlZHVsZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKCF0aGlzLnNjaGVkdWxlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVkID0gZGVsYXkoKGZ1bmN0aW9uKF90aGlzKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZmx1c2goKTtcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH0pKHRoaXMpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXBseSA9IEJhY29uLm1vcmU7XG5cdCAgICBpZiAoIV8uaXNGdW5jdGlvbihkZWxheSkpIHtcblx0ICAgICAgZGVsYXlNcyA9IGRlbGF5O1xuXHQgICAgICBkZWxheSA9IGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgICByZXR1cm4gQmFjb24uc2NoZWR1bGVyLnNldFRpbWVvdXQoZiwgZGVsYXlNcyk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJidWZmZXJcIiwgW10pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgIGJ1ZmZlci5wdXNoID0gKGZ1bmN0aW9uKF90aGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICByZXR1cm4gX3RoaXMucHVzaChldmVudCk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSkodGhpcyk7XG5cdCAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcblx0ICAgICAgICByZXBseSA9IHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgIGJ1ZmZlci5lbmQgPSBldmVudDtcblx0ICAgICAgICBpZiAoIWJ1ZmZlci5zY2hlZHVsZWQpIHtcblx0ICAgICAgICAgIGJ1ZmZlci5mbHVzaCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBidWZmZXIudmFsdWVzLnB1c2goZXZlbnQudmFsdWUoKSk7XG5cdCAgICAgICAgb25JbnB1dChidWZmZXIpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXBseTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzLCBmO1xuXHQgICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuXHQgICAgYXNzZXJ0T2JzZXJ2YWJsZUlzUHJvcGVydHkoZik7XG5cdCAgICByZXR1cm4gY29udmVydEFyZ3NUb0Z1bmN0aW9uKHRoaXMsIGYsIGFyZ3MsIGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZmlsdGVyXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICBpZiAoZXZlbnQuZmlsdGVyKGYpKSB7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5vbmNlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJldHVybiBuZXcgRXZlbnRTdHJlYW0obmV3IERlc2MoQmFjb24sIFwib25jZVwiLCBbdmFsdWVdKSwgZnVuY3Rpb24oc2luaykge1xuXHQgICAgICBzaW5rKHRvRXZlbnQodmFsdWUpKTtcblx0ICAgICAgc2luayhlbmRFdmVudCgpKTtcblx0ICAgICAgcmV0dXJuIG5vcDtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5jb25jYXQgPSBmdW5jdGlvbihyaWdodCkge1xuXHQgICAgdmFyIGxlZnQ7XG5cdCAgICBsZWZ0ID0gdGhpcztcblx0ICAgIHJldHVybiBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2MobGVmdCwgXCJjb25jYXRcIiwgW3JpZ2h0XSksIGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgdmFyIHVuc3ViTGVmdCwgdW5zdWJSaWdodDtcblx0ICAgICAgdW5zdWJSaWdodCA9IG5vcDtcblx0ICAgICAgdW5zdWJMZWZ0ID0gbGVmdC5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgaWYgKGUuaXNFbmQoKSkge1xuXHQgICAgICAgICAgcmV0dXJuIHVuc3ViUmlnaHQgPSByaWdodC5kaXNwYXRjaGVyLnN1YnNjcmliZShzaW5rKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHNpbmsoZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHVuc3ViTGVmdCgpO1xuXHQgICAgICAgIHJldHVybiB1bnN1YlJpZ2h0KCk7XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gZmxhdE1hcF8odGhpcywgbWFrZVNwYXduZXIoYXJndW1lbnRzKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcEZpcnN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gZmxhdE1hcF8odGhpcywgbWFrZVNwYXduZXIoYXJndW1lbnRzKSwgdHJ1ZSk7XG5cdCAgfTtcblx0XG5cdCAgZmxhdE1hcF8gPSBmdW5jdGlvbihyb290LCBmLCBmaXJzdE9ubHksIGxpbWl0KSB7XG5cdCAgICB2YXIgY2hpbGREZXBzLCByZXN1bHQsIHJvb3REZXA7XG5cdCAgICByb290RGVwID0gW3Jvb3RdO1xuXHQgICAgY2hpbGREZXBzID0gW107XG5cdCAgICByZXN1bHQgPSBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2Mocm9vdCwgXCJmbGF0TWFwXCIgKyAoZmlyc3RPbmx5ID8gXCJGaXJzdFwiIDogXCJcIiksIFtmXSksIGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgdmFyIGNoZWNrRW5kLCBjaGVja1F1ZXVlLCBjb21wb3NpdGUsIHF1ZXVlLCBzcGF3bjtcblx0ICAgICAgY29tcG9zaXRlID0gbmV3IENvbXBvc2l0ZVVuc3Vic2NyaWJlKCk7XG5cdCAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgIHNwYXduID0gZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICB2YXIgY2hpbGQ7XG5cdCAgICAgICAgY2hpbGQgPSBtYWtlT2JzZXJ2YWJsZShmKGV2ZW50LnZhbHVlKCkpKTtcblx0ICAgICAgICBjaGlsZERlcHMucHVzaChjaGlsZCk7XG5cdCAgICAgICAgcmV0dXJuIGNvbXBvc2l0ZS5hZGQoZnVuY3Rpb24odW5zdWJBbGwsIHVuc3ViTWUpIHtcblx0ICAgICAgICAgIHJldHVybiBjaGlsZC5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgICB2YXIgcmVwbHk7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgICAgICAgXy5yZW1vdmUoY2hpbGQsIGNoaWxkRGVwcyk7XG5cdCAgICAgICAgICAgICAgY2hlY2tRdWV1ZSgpO1xuXHQgICAgICAgICAgICAgIGNoZWNrRW5kKHVuc3ViTWUpO1xuXHQgICAgICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgSW5pdGlhbCkge1xuXHQgICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudC50b05leHQoKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmVwbHkgPSBzaW5rKGV2ZW50KTtcblx0ICAgICAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSkge1xuXHQgICAgICAgICAgICAgICAgdW5zdWJBbGwoKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHJlcGx5O1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfTtcblx0ICAgICAgY2hlY2tRdWV1ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBldmVudDtcblx0ICAgICAgICBldmVudCA9IHF1ZXVlLnNoaWZ0KCk7XG5cdCAgICAgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgICAgICByZXR1cm4gc3Bhd24oZXZlbnQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgY2hlY2tFbmQgPSBmdW5jdGlvbih1bnN1Yikge1xuXHQgICAgICAgIHVuc3ViKCk7XG5cdCAgICAgICAgaWYgKGNvbXBvc2l0ZS5lbXB0eSgpKSB7XG5cdCAgICAgICAgICByZXR1cm4gc2luayhlbmRFdmVudCgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIGNvbXBvc2l0ZS5hZGQoZnVuY3Rpb24oX18sIHVuc3ViUm9vdCkge1xuXHQgICAgICAgIHJldHVybiByb290LmRpc3BhdGNoZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gY2hlY2tFbmQodW5zdWJSb290KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNFcnJvcigpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBzaW5rKGV2ZW50KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RPbmx5ICYmIGNvbXBvc2l0ZS5jb3VudCgpID4gMSkge1xuXHQgICAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmIChjb21wb3NpdGUudW5zdWJzY3JpYmVkKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIEJhY29uLm5vTW9yZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAobGltaXQgJiYgY29tcG9zaXRlLmNvdW50KCkgPiBsaW1pdCkge1xuXHQgICAgICAgICAgICAgIHJldHVybiBxdWV1ZS5wdXNoKGV2ZW50KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gc3Bhd24oZXZlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gY29tcG9zaXRlLnVuc3Vic2NyaWJlO1xuXHQgICAgfSk7XG5cdCAgICByZXN1bHQuaW50ZXJuYWxEZXBzID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIGlmIChjaGlsZERlcHMubGVuZ3RoKSB7XG5cdCAgICAgICAgcmV0dXJuIHJvb3REZXAuY29uY2F0KGNoaWxkRGVwcyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHJvb3REZXA7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdFxuXHQgIG1ha2VTcGF3bmVyID0gZnVuY3Rpb24oYXJncykge1xuXHQgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIGlzT2JzZXJ2YWJsZShhcmdzWzBdKSkge1xuXHQgICAgICByZXR1cm4gXy5hbHdheXMoYXJnc1swXSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gbWFrZUZ1bmN0aW9uQXJncyhhcmdzKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBtYWtlT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uKHgpIHtcblx0ICAgIGlmIChpc09ic2VydmFibGUoeCkpIHtcblx0ICAgICAgcmV0dXJuIHg7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gQmFjb24ub25jZSh4KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwV2l0aENvbmN1cnJlbmN5TGltaXQgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzLCBsaW1pdDtcblx0ICAgIGxpbWl0ID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJmbGF0TWFwV2l0aENvbmN1cnJlbmN5TGltaXRcIiwgW2xpbWl0XS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpLCBmbGF0TWFwXyh0aGlzLCBtYWtlU3Bhd25lcihhcmdzKSwgZmFsc2UsIGxpbWl0KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcENvbmNhdCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZmxhdE1hcENvbmNhdFwiLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKSwgdGhpcy5mbGF0TWFwV2l0aENvbmN1cnJlbmN5TGltaXQuYXBwbHkodGhpcywgWzFdLmNvbmNhdChzbGljZS5jYWxsKGFyZ3VtZW50cykpKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24ubGF0ZXIgPSBmdW5jdGlvbihkZWxheSwgdmFsdWUpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJsYXRlclwiLCBbZGVsYXksIHZhbHVlXSksIEJhY29uLmZyb21CaW5kZXIoZnVuY3Rpb24oc2luaykge1xuXHQgICAgICB2YXIgaWQsIHNlbmRlcjtcblx0ICAgICAgc2VuZGVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHNpbmsoW3ZhbHVlLCBlbmRFdmVudCgpXSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGlkID0gQmFjb24uc2NoZWR1bGVyLnNldFRpbWVvdXQoc2VuZGVyLCBkZWxheSk7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gQmFjb24uc2NoZWR1bGVyLmNsZWFyVGltZW91dChpZCk7XG5cdCAgICAgIH07XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyaW5nVGhyb3R0bGUgPSBmdW5jdGlvbihtaW5pbXVtSW50ZXJ2YWwpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlcmluZ1Rocm90dGxlXCIsIFttaW5pbXVtSW50ZXJ2YWxdKSwgdGhpcy5mbGF0TWFwQ29uY2F0KGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLm9uY2UoeCkuY29uY2F0KEJhY29uLmxhdGVyKG1pbmltdW1JbnRlcnZhbCkuZmlsdGVyKGZhbHNlKSk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLmJ1ZmZlcmluZ1Rocm90dGxlID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyaW5nVGhyb3R0bGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS50b1Byb3BlcnR5KCk7XG5cdCAgfTtcblx0XG5cdCAgQnVzID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcblx0ICAgIGV4dGVuZChCdXMsIHN1cGVyQ2xhc3MpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIEJ1cygpIHtcblx0ICAgICAgdGhpcy5ndWFyZGVkU2luayA9IGJpbmQodGhpcy5ndWFyZGVkU2luaywgdGhpcyk7XG5cdCAgICAgIHRoaXMuc3Vic2NyaWJlQWxsID0gYmluZCh0aGlzLnN1YnNjcmliZUFsbCwgdGhpcyk7XG5cdCAgICAgIHRoaXMudW5zdWJBbGwgPSBiaW5kKHRoaXMudW5zdWJBbGwsIHRoaXMpO1xuXHQgICAgICB0aGlzLnNpbmsgPSB2b2lkIDA7XG5cdCAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuXHQgICAgICB0aGlzLmVuZGVkID0gZmFsc2U7XG5cdCAgICAgIEJ1cy5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJCdXNcIiwgW10pLCB0aGlzLnN1YnNjcmliZUFsbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgQnVzLnByb3RvdHlwZS51bnN1YkFsbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgaiwgbGVuMSwgcmVmLCBzdWI7XG5cdCAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcblx0ICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHJlZi5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICBzdWIgPSByZWZbal07XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzdWIudW5zdWIgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgc3ViLnVuc3ViKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2b2lkIDA7XG5cdCAgICB9O1xuXHRcblx0ICAgIEJ1cy5wcm90b3R5cGUuc3Vic2NyaWJlQWxsID0gZnVuY3Rpb24obmV3U2luaykge1xuXHQgICAgICB2YXIgaiwgbGVuMSwgcmVmLCBzdWJzY3JpcHRpb247XG5cdCAgICAgIGlmICh0aGlzLmVuZGVkKSB7XG5cdCAgICAgICAgbmV3U2luayhlbmRFdmVudCgpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnNpbmsgPSBuZXdTaW5rO1xuXHQgICAgICAgIHJlZiA9IGNsb25lQXJyYXkodGhpcy5zdWJzY3JpcHRpb25zKTtcblx0ICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICAgICAgc3Vic2NyaXB0aW9uID0gcmVmW2pdO1xuXHQgICAgICAgICAgdGhpcy5zdWJzY3JpYmVJbnB1dChzdWJzY3JpcHRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy51bnN1YkFsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgQnVzLnByb3RvdHlwZS5ndWFyZGVkU2luayA9IGZ1bmN0aW9uKGlucHV0KSB7XG5cdCAgICAgIHJldHVybiAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgICAgIF90aGlzLnVuc3Vic2NyaWJlSW5wdXQoaW5wdXQpO1xuXHQgICAgICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgIH0pKHRoaXMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBCdXMucHJvdG90eXBlLnN1YnNjcmliZUlucHV0ID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XG5cdCAgICAgIHJldHVybiBzdWJzY3JpcHRpb24udW5zdWIgPSBzdWJzY3JpcHRpb24uaW5wdXQuZGlzcGF0Y2hlci5zdWJzY3JpYmUodGhpcy5ndWFyZGVkU2luayhzdWJzY3JpcHRpb24uaW5wdXQpKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQnVzLnByb3RvdHlwZS51bnN1YnNjcmliZUlucHV0ID0gZnVuY3Rpb24oaW5wdXQpIHtcblx0ICAgICAgdmFyIGksIGosIGxlbjEsIHJlZiwgc3ViO1xuXHQgICAgICByZWYgPSB0aGlzLnN1YnNjcmlwdGlvbnM7XG5cdCAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4xID0gcmVmLmxlbmd0aDsgaiA8IGxlbjE7IGkgPSArK2opIHtcblx0ICAgICAgICBzdWIgPSByZWZbaV07XG5cdCAgICAgICAgaWYgKHN1Yi5pbnB1dCA9PT0gaW5wdXQpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2Ygc3ViLnVuc3ViID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgICAgICAgc3ViLnVuc3ViKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBCdXMucHJvdG90eXBlLnBsdWcgPSBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgICB2YXIgc3ViO1xuXHQgICAgICBhc3NlcnRPYnNlcnZhYmxlKGlucHV0KTtcblx0ICAgICAgaWYgKHRoaXMuZW5kZWQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgc3ViID0ge1xuXHQgICAgICAgIGlucHV0OiBpbnB1dFxuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWIpO1xuXHQgICAgICBpZiAoKHRoaXMuc2luayAhPSBudWxsKSkge1xuXHQgICAgICAgIHRoaXMuc3Vic2NyaWJlSW5wdXQoc3ViKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gKGZ1bmN0aW9uKF90aGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgcmV0dXJuIF90aGlzLnVuc3Vic2NyaWJlSW5wdXQoaW5wdXQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0pKHRoaXMpO1xuXHQgICAgfTtcblx0XG5cdCAgICBCdXMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy51bnN1YkFsbCgpO1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuc2luayA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5zaW5rKGVuZEV2ZW50KCkpIDogdm9pZCAwO1xuXHQgICAgfTtcblx0XG5cdCAgICBCdXMucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICBpZiAoIXRoaXMuZW5kZWQpIHtcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuc2luayA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5zaW5rKG5leHRFdmVudCh2YWx1ZSkpIDogdm9pZCAwO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIEJ1cy5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlcnJvcikge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuc2luayA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5zaW5rKG5ldyBFcnJvcihlcnJvcikpIDogdm9pZCAwO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQnVzO1xuXHRcblx0ICB9KShFdmVudFN0cmVhbSk7XG5cdFxuXHQgIEJhY29uLkJ1cyA9IEJ1cztcblx0XG5cdCAgbGlmdENhbGxiYWNrID0gZnVuY3Rpb24oZGVzYywgd3JhcHBlZCkge1xuXHQgICAgcmV0dXJuIHdpdGhNZXRob2RDYWxsU3VwcG9ydChmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFyZ3MsIGYsIHN0cmVhbTtcblx0ICAgICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuXHQgICAgICBzdHJlYW0gPSBwYXJ0aWFsbHlBcHBsaWVkKHdyYXBwZWQsIFtcblx0ICAgICAgICBmdW5jdGlvbih2YWx1ZXMsIGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICByZXR1cm4gZi5hcHBseShudWxsLCBzbGljZS5jYWxsKHZhbHVlcykuY29uY2F0KFtjYWxsYmFja10pKTtcblx0ICAgICAgICB9XG5cdCAgICAgIF0pO1xuXHQgICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIGRlc2MsIFtmXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpLCBCYWNvbi5jb21iaW5lQXNBcnJheShhcmdzKS5mbGF0TWFwKHN0cmVhbSkpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uZnJvbUNhbGxiYWNrID0gbGlmdENhbGxiYWNrKFwiZnJvbUNhbGxiYWNrXCIsIGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3MsIGY7XG5cdCAgICBmID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG5cdCAgICByZXR1cm4gQmFjb24uZnJvbUJpbmRlcihmdW5jdGlvbihoYW5kbGVyKSB7XG5cdCAgICAgIG1ha2VGdW5jdGlvbihmLCBhcmdzKShoYW5kbGVyKTtcblx0ICAgICAgcmV0dXJuIG5vcDtcblx0ICAgIH0sIChmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gW3ZhbHVlLCBlbmRFdmVudCgpXTtcblx0ICAgIH0pKTtcblx0ICB9KTtcblx0XG5cdCAgQmFjb24uZnJvbU5vZGVDYWxsYmFjayA9IGxpZnRDYWxsYmFjayhcImZyb21Ob2RlQ2FsbGJhY2tcIiwgZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncywgZjtcblx0ICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIHJldHVybiBCYWNvbi5mcm9tQmluZGVyKGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgbWFrZUZ1bmN0aW9uKGYsIGFyZ3MpKGhhbmRsZXIpO1xuXHQgICAgICByZXR1cm4gbm9wO1xuXHQgICAgfSwgZnVuY3Rpb24oZXJyb3IsIHZhbHVlKSB7XG5cdCAgICAgIGlmIChlcnJvcikge1xuXHQgICAgICAgIHJldHVybiBbbmV3IEVycm9yKGVycm9yKSwgZW5kRXZlbnQoKV07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIFt2YWx1ZSwgZW5kRXZlbnQoKV07XG5cdCAgICB9KTtcblx0ICB9KTtcblx0XG5cdCAgYWRkUHJvcGVydHlJbml0VmFsdWVUb1N0cmVhbSA9IGZ1bmN0aW9uKHByb3BlcnR5LCBzdHJlYW0pIHtcblx0ICAgIHZhciBqdXN0SW5pdFZhbHVlO1xuXHQgICAganVzdEluaXRWYWx1ZSA9IG5ldyBFdmVudFN0cmVhbShkZXNjcmliZShwcm9wZXJ0eSwgXCJqdXN0SW5pdFZhbHVlXCIpLCBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHZhciB1bnN1YiwgdmFsdWU7XG5cdCAgICAgIHZhbHVlID0gdm9pZCAwO1xuXHQgICAgICB1bnN1YiA9IHByb3BlcnR5LmRpc3BhdGNoZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKCFldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9IGV2ZW50O1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuXHQgICAgICB9KTtcblx0ICAgICAgVXBkYXRlQmFycmllci53aGVuRG9uZVdpdGgoanVzdEluaXRWYWx1ZSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcblx0ICAgICAgICAgIHNpbmsodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gc2luayhlbmRFdmVudCgpKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiB1bnN1Yjtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGp1c3RJbml0VmFsdWUuY29uY2F0KHN0cmVhbSkudG9Qcm9wZXJ0eSgpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLm1hcEVuZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGY7XG5cdCAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwibWFwRW5kXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmlzRW5kKCkpIHtcblx0ICAgICAgICB0aGlzLnB1c2gobmV4dEV2ZW50KGYoZXZlbnQpKSk7XG5cdCAgICAgICAgdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuXHQgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwRXJyb3JzID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwRXJyb3JzXCIsIFtdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAoZXZlbnQuaXNFcnJvcigpKSB7XG5cdCAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUudGFrZVVudGlsID0gZnVuY3Rpb24oc3RvcHBlcikge1xuXHQgICAgdmFyIGVuZE1hcmtlcjtcblx0ICAgIGVuZE1hcmtlciA9IHt9O1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidGFrZVVudGlsXCIsIFtzdG9wcGVyXSksIEJhY29uLmdyb3VwU2ltdWx0YW5lb3VzKHRoaXMubWFwRW5kKGVuZE1hcmtlciksIHN0b3BwZXIuc2tpcEVycm9ycygpKS53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICB2YXIgZGF0YSwgaiwgbGVuMSwgcmVmLCByZXBseSwgdmFsdWU7XG5cdCAgICAgIGlmICghZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZiA9IGV2ZW50LnZhbHVlKCksIGRhdGEgPSByZWZbMF0sIHN0b3BwZXIgPSByZWZbMV07XG5cdCAgICAgICAgaWYgKHN0b3BwZXIubGVuZ3RoKSB7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG5cdCAgICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gZGF0YS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcblx0ICAgICAgICAgICAgdmFsdWUgPSBkYXRhW2pdO1xuXHQgICAgICAgICAgICBpZiAodmFsdWUgPT09IGVuZE1hcmtlcikge1xuXHQgICAgICAgICAgICAgIHJlcGx5ID0gdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIHJlcGx5ID0gdGhpcy5wdXNoKG5leHRFdmVudCh2YWx1ZSkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICByZXR1cm4gcmVwbHk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLnRha2VVbnRpbCA9IGZ1bmN0aW9uKHN0b3BwZXIpIHtcblx0ICAgIHZhciBjaGFuZ2VzO1xuXHQgICAgY2hhbmdlcyA9IHRoaXMuY2hhbmdlcygpLnRha2VVbnRpbChzdG9wcGVyKTtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRha2VVbnRpbFwiLCBbc3RvcHBlcl0pLCBhZGRQcm9wZXJ0eUluaXRWYWx1ZVRvU3RyZWFtKHRoaXMsIGNoYW5nZXMpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwTGF0ZXN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgZiwgc3RyZWFtO1xuXHQgICAgZiA9IG1ha2VTcGF3bmVyKGFyZ3VtZW50cyk7XG5cdCAgICBzdHJlYW0gPSB0aGlzLnRvRXZlbnRTdHJlYW0oKTtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImZsYXRNYXBMYXRlc3RcIiwgW2ZdKSwgc3RyZWFtLmZsYXRNYXAoZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIG1ha2VPYnNlcnZhYmxlKGYodmFsdWUpKS50YWtlVW50aWwoc3RyZWFtKTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuZGVsYXlDaGFuZ2VzID0gZnVuY3Rpb24oZGVzYywgZikge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKGRlc2MsIGFkZFByb3BlcnR5SW5pdFZhbHVlVG9TdHJlYW0odGhpcywgZih0aGlzLmNoYW5nZXMoKSkpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbihkZWxheSkge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVsYXlcIiwgW2RlbGF5XSksIHRoaXMuZmxhdE1hcChmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gQmFjb24ubGF0ZXIoZGVsYXksIHZhbHVlKTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuZGVsYXkgPSBmdW5jdGlvbihkZWxheSkge1xuXHQgICAgcmV0dXJuIHRoaXMuZGVsYXlDaGFuZ2VzKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVsYXlcIiwgW2RlbGF5XSksIGZ1bmN0aW9uKGNoYW5nZXMpIHtcblx0ICAgICAgcmV0dXJuIGNoYW5nZXMuZGVsYXkoZGVsYXkpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmRlYm91bmNlID0gZnVuY3Rpb24oZGVsYXkpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImRlYm91bmNlXCIsIFtkZWxheV0pLCB0aGlzLmZsYXRNYXBMYXRlc3QoZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLmxhdGVyKGRlbGF5LCB2YWx1ZSk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLmRlYm91bmNlID0gZnVuY3Rpb24oZGVsYXkpIHtcblx0ICAgIHJldHVybiB0aGlzLmRlbGF5Q2hhbmdlcyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImRlYm91bmNlXCIsIFtkZWxheV0pLCBmdW5jdGlvbihjaGFuZ2VzKSB7XG5cdCAgICAgIHJldHVybiBjaGFuZ2VzLmRlYm91bmNlKGRlbGF5KTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5kZWJvdW5jZUltbWVkaWF0ZSA9IGZ1bmN0aW9uKGRlbGF5KSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkZWJvdW5jZUltbWVkaWF0ZVwiLCBbZGVsYXldKSwgdGhpcy5mbGF0TWFwRmlyc3QoZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLm9uY2UodmFsdWUpLmNvbmNhdChCYWNvbi5sYXRlcihkZWxheSkuZmlsdGVyKGZhbHNlKSk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2NhbiA9IGZ1bmN0aW9uKHNlZWQsIGYpIHtcblx0ICAgIHZhciBhY2MsIHJlc3VsdFByb3BlcnR5LCBzdWJzY3JpYmU7XG5cdCAgICBmID0gdG9Db21iaW5hdG9yKGYpO1xuXHQgICAgYWNjID0gdG9PcHRpb24oc2VlZCk7XG5cdCAgICBzdWJzY3JpYmUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNpbmspIHtcblx0ICAgICAgICB2YXIgaW5pdFNlbnQsIHJlcGx5LCBzZW5kSW5pdCwgdW5zdWI7XG5cdCAgICAgICAgaW5pdFNlbnQgPSBmYWxzZTtcblx0ICAgICAgICB1bnN1YiA9IG5vcDtcblx0ICAgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG5cdCAgICAgICAgc2VuZEluaXQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmICghaW5pdFNlbnQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGFjYy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgaW5pdFNlbnQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgIHJlcGx5ID0gc2luayhuZXcgSW5pdGlhbChmdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICAgIHVuc3ViKCk7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gdW5zdWIgPSBub3A7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHVuc3ViID0gX3RoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgIHZhciBuZXh0LCBwcmV2O1xuXHQgICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICAgICAgaWYgKGluaXRTZW50ICYmIGV2ZW50LmlzSW5pdGlhbCgpKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgaWYgKCFldmVudC5pc0luaXRpYWwoKSkge1xuXHQgICAgICAgICAgICAgICAgc2VuZEluaXQoKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgaW5pdFNlbnQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgIHByZXYgPSBhY2MuZ2V0T3JFbHNlKHZvaWQgMCk7XG5cdCAgICAgICAgICAgICAgbmV4dCA9IGYocHJldiwgZXZlbnQudmFsdWUoKSk7XG5cdCAgICAgICAgICAgICAgYWNjID0gbmV3IFNvbWUobmV4dCk7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQuYXBwbHkoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcblx0ICAgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG5cdCAgICAgICAgICAgICAgcmVwbHkgPSBzZW5kSW5pdCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmIChyZXBseSAhPT0gQmFjb24ubm9Nb3JlKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgVXBkYXRlQmFycmllci53aGVuRG9uZVdpdGgocmVzdWx0UHJvcGVydHksIHNlbmRJbml0KTtcblx0ICAgICAgICByZXR1cm4gdW5zdWI7XG5cdCAgICAgIH07XG5cdCAgICB9KSh0aGlzKTtcblx0ICAgIHJldHVybiByZXN1bHRQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eShuZXcgQmFjb24uRGVzYyh0aGlzLCBcInNjYW5cIiwgW3NlZWQsIGZdKSwgc3Vic2NyaWJlKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kaWZmID0gZnVuY3Rpb24oc3RhcnQsIGYpIHtcblx0ICAgIGYgPSB0b0NvbWJpbmF0b3IoZik7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkaWZmXCIsIFtzdGFydCwgZl0pLCB0aGlzLnNjYW4oW3N0YXJ0XSwgZnVuY3Rpb24ocHJldlR1cGxlLCBuZXh0KSB7XG5cdCAgICAgIHJldHVybiBbbmV4dCwgZihwcmV2VHVwbGVbMF0sIG5leHQpXTtcblx0ICAgIH0pLmZpbHRlcihmdW5jdGlvbih0dXBsZSkge1xuXHQgICAgICByZXR1cm4gdHVwbGUubGVuZ3RoID09PSAyO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uKHR1cGxlKSB7XG5cdCAgICAgIHJldHVybiB0dXBsZVsxXTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kb0FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGY7XG5cdCAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZG9BY3Rpb25cIiwgW2ZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAoZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgIGYoZXZlbnQudmFsdWUoKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZG9FcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGY7XG5cdCAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZG9FcnJvclwiLCBbZl0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcblx0ICAgICAgICBmKGV2ZW50LmVycm9yKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kb0xvZyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3M7XG5cdCAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkb0xvZ1wiLCBhcmdzKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgc2xpY2UuY2FsbChhcmdzKS5jb25jYXQoW2V2ZW50LmxvZygpXSkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5lbmRPbkVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncywgZjtcblx0ICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIGlmIChmID09IG51bGwpIHtcblx0ICAgICAgZiA9IHRydWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY29udmVydEFyZ3NUb0Z1bmN0aW9uKHRoaXMsIGYsIGFyZ3MsIGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZW5kT25FcnJvclwiLCBbXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICBpZiAoZXZlbnQuaXNFcnJvcigpICYmIGYoZXZlbnQuZXJyb3IpKSB7XG5cdCAgICAgICAgICB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChlbmRFdmVudCgpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBPYnNlcnZhYmxlLnByb3RvdHlwZS5lcnJvcnMgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImVycm9yc1wiLCBbXSksIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgdmFsdWVBbmRFbmQgPSAoZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJldHVybiBbdmFsdWUsIGVuZEV2ZW50KCldO1xuXHQgIH0pO1xuXHRcblx0ICBCYWNvbi5mcm9tUHJvbWlzZSA9IGZ1bmN0aW9uKHByb21pc2UsIGFib3J0LCBldmVudFRyYW5zZm9ybWVyKSB7XG5cdCAgICBpZiAoZXZlbnRUcmFuc2Zvcm1lciA9PSBudWxsKSB7XG5cdCAgICAgIGV2ZW50VHJhbnNmb3JtZXIgPSB2YWx1ZUFuZEVuZDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tUHJvbWlzZVwiLCBbcHJvbWlzZV0pLCBCYWNvbi5mcm9tQmluZGVyKGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgdmFyIHJlZjtcblx0ICAgICAgaWYgKChyZWYgPSBwcm9taXNlLnRoZW4oaGFuZGxlciwgZnVuY3Rpb24oZSkge1xuXHQgICAgICAgIHJldHVybiBoYW5kbGVyKG5ldyBFcnJvcihlKSk7XG5cdCAgICAgIH0pKSAhPSBudWxsKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiByZWYuZG9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdCAgICAgICAgICByZWYuZG9uZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgaWYgKGFib3J0KSB7XG5cdCAgICAgICAgICByZXR1cm4gdHlwZW9mIHByb21pc2UuYWJvcnQgPT09IFwiZnVuY3Rpb25cIiA/IHByb21pc2UuYWJvcnQoKSA6IHZvaWQgMDtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9LCBldmVudFRyYW5zZm9ybWVyKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwRXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBmO1xuXHQgICAgZiA9IG1ha2VGdW5jdGlvbkFyZ3MoYXJndW1lbnRzKTtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcIm1hcEVycm9yXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnB1c2gobmV4dEV2ZW50KGYoZXZlbnQuZXJyb3IpKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwRXJyb3IgPSBmdW5jdGlvbihmbikge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZmxhdE1hcEVycm9yXCIsIFtmbl0pLCB0aGlzLm1hcEVycm9yKGZ1bmN0aW9uKGVycikge1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKGVycik7XG5cdCAgICB9KS5mbGF0TWFwKGZ1bmN0aW9uKHgpIHtcblx0ICAgICAgaWYgKHggaW5zdGFuY2VvZiBFcnJvcikge1xuXHQgICAgICAgIHJldHVybiBmbih4LmVycm9yKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gQmFjb24ub25jZSh4KTtcblx0ICAgICAgfVxuXHQgICAgfSkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5zYW1wbGVkQnkgPSBmdW5jdGlvbihzYW1wbGVyLCBjb21iaW5hdG9yKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJzYW1wbGVkQnlcIiwgW3NhbXBsZXIsIGNvbWJpbmF0b3JdKSwgdGhpcy50b1Byb3BlcnR5KCkuc2FtcGxlZEJ5KHNhbXBsZXIsIGNvbWJpbmF0b3IpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuc2FtcGxlZEJ5ID0gZnVuY3Rpb24oc2FtcGxlciwgY29tYmluYXRvcikge1xuXHQgICAgdmFyIGxhenksIHJlc3VsdCwgc2FtcGxlclNvdXJjZSwgc3RyZWFtLCB0aGlzU291cmNlO1xuXHQgICAgaWYgKGNvbWJpbmF0b3IgIT0gbnVsbCkge1xuXHQgICAgICBjb21iaW5hdG9yID0gdG9Db21iaW5hdG9yKGNvbWJpbmF0b3IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGF6eSA9IHRydWU7XG5cdCAgICAgIGNvbWJpbmF0b3IgPSBmdW5jdGlvbihmKSB7XG5cdCAgICAgICAgcmV0dXJuIGYudmFsdWUoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICAgIHRoaXNTb3VyY2UgPSBuZXcgU291cmNlKHRoaXMsIGZhbHNlLCBsYXp5KTtcblx0ICAgIHNhbXBsZXJTb3VyY2UgPSBuZXcgU291cmNlKHNhbXBsZXIsIHRydWUsIGxhenkpO1xuXHQgICAgc3RyZWFtID0gQmFjb24ud2hlbihbdGhpc1NvdXJjZSwgc2FtcGxlclNvdXJjZV0sIGNvbWJpbmF0b3IpO1xuXHQgICAgcmVzdWx0ID0gc2FtcGxlciBpbnN0YW5jZW9mIFByb3BlcnR5ID8gc3RyZWFtLnRvUHJvcGVydHkoKSA6IHN0cmVhbTtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInNhbXBsZWRCeVwiLCBbc2FtcGxlciwgY29tYmluYXRvcl0pLCByZXN1bHQpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLlByb3BlcnR5LnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihpbnRlcnZhbCkge1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic2FtcGxlXCIsIFtpbnRlcnZhbF0pLCB0aGlzLnNhbXBsZWRCeShCYWNvbi5pbnRlcnZhbChpbnRlcnZhbCwge30pKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncywgcDtcblx0ICAgIHAgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIGlmIChwIGluc3RhbmNlb2YgUHJvcGVydHkpIHtcblx0ICAgICAgcmV0dXJuIHAuc2FtcGxlZEJ5KHRoaXMsIGZvcm1lcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gY29udmVydEFyZ3NUb0Z1bmN0aW9uKHRoaXMsIHAsIGFyZ3MsIGZ1bmN0aW9uKGYpIHtcblx0ICAgICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJtYXBcIiwgW2ZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudC5mbWFwKGYpKTtcblx0ICAgICAgICB9KSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZvbGQgPSBmdW5jdGlvbihzZWVkLCBmKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJmb2xkXCIsIFtzZWVkLCBmXSksIHRoaXMuc2NhbihzZWVkLCBmKS5zYW1wbGVkQnkodGhpcy5maWx0ZXIoZmFsc2UpLm1hcEVuZCgpLnRvUHJvcGVydHkoKSkpO1xuXHQgIH07XG5cdFxuXHQgIE9ic2VydmFibGUucHJvdG90eXBlLnJlZHVjZSA9IE9ic2VydmFibGUucHJvdG90eXBlLmZvbGQ7XG5cdFxuXHQgIEJhY29uLmZyb21Qb2xsID0gZnVuY3Rpb24oZGVsYXksIHBvbGwpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tUG9sbFwiLCBbZGVsYXksIHBvbGxdKSwgQmFjb24uZnJvbUJpbmRlcigoZnVuY3Rpb24oaGFuZGxlcikge1xuXHQgICAgICB2YXIgaWQ7XG5cdCAgICAgIGlkID0gQmFjb24uc2NoZWR1bGVyLnNldEludGVydmFsKGhhbmRsZXIsIGRlbGF5KTtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBCYWNvbi5zY2hlZHVsZXIuY2xlYXJJbnRlcnZhbChpZCk7XG5cdCAgICAgIH07XG5cdCAgICB9KSwgcG9sbCkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLmZyb21BcnJheSA9IGZ1bmN0aW9uKHZhbHVlcykge1xuXHQgICAgdmFyIGk7XG5cdCAgICBhc3NlcnRBcnJheSh2YWx1ZXMpO1xuXHQgICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG5cdCAgICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tQXJyYXlcIiwgdmFsdWVzKSwgQmFjb24ubmV2ZXIoKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpID0gMDtcblx0ICAgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tQXJyYXlcIiwgW3ZhbHVlc10pLCBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgICAgdmFyIHB1c2gsIHB1c2hOZWVkZWQsIHB1c2hpbmcsIHJlcGx5LCB1bnN1YmQ7XG5cdCAgICAgICAgdW5zdWJkID0gZmFsc2U7XG5cdCAgICAgICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuXHQgICAgICAgIHB1c2hpbmcgPSBmYWxzZTtcblx0ICAgICAgICBwdXNoTmVlZGVkID0gZmFsc2U7XG5cdCAgICAgICAgcHVzaCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICAgICAgcHVzaE5lZWRlZCA9IHRydWU7XG5cdCAgICAgICAgICBpZiAocHVzaGluZykge1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBwdXNoaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgIHdoaWxlIChwdXNoTmVlZGVkKSB7XG5cdCAgICAgICAgICAgIHB1c2hOZWVkZWQgPSBmYWxzZTtcblx0ICAgICAgICAgICAgaWYgKChyZXBseSAhPT0gQmFjb24ubm9Nb3JlKSAmJiAhdW5zdWJkKSB7XG5cdCAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNbaSsrXTtcblx0ICAgICAgICAgICAgICByZXBseSA9IHNpbmsodG9FdmVudCh2YWx1ZSkpO1xuXHQgICAgICAgICAgICAgIGlmIChyZXBseSAhPT0gQmFjb24ubm9Nb3JlKSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoaSA9PT0gdmFsdWVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICBzaW5rKGVuZEV2ZW50KCkpO1xuXHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgVXBkYXRlQmFycmllci5hZnRlclRyYW5zYWN0aW9uKHB1c2gpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIHB1c2hpbmcgPSBmYWxzZTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHB1c2goKTtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gdW5zdWJkID0gdHJ1ZTtcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuaG9sZFdoZW4gPSBmdW5jdGlvbih2YWx2ZSkge1xuXHQgICAgdmFyIGJ1ZmZlcmVkVmFsdWVzLCBjb21wb3NpdGUsIG9uSG9sZCwgc3JjLCBzdWJzY3JpYmVkO1xuXHQgICAgY29tcG9zaXRlID0gbmV3IENvbXBvc2l0ZVVuc3Vic2NyaWJlKCk7XG5cdCAgICBvbkhvbGQgPSBmYWxzZTtcblx0ICAgIGJ1ZmZlcmVkVmFsdWVzID0gW107XG5cdCAgICBzdWJzY3JpYmVkID0gZmFsc2U7XG5cdCAgICBzcmMgPSB0aGlzO1xuXHQgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyh0aGlzLCBcImhvbGRXaGVuXCIsIFt2YWx2ZV0pLCBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHZhciBlbmRJZkJvdGhFbmRlZDtcblx0ICAgICAgZW5kSWZCb3RoRW5kZWQgPSBmdW5jdGlvbih1bnN1Yikge1xuXHQgICAgICAgIGlmICh0eXBlb2YgdW5zdWIgPT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgICAgICAgdW5zdWIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGNvbXBvc2l0ZS5lbXB0eSgpICYmIHN1YnNjcmliZWQpIHtcblx0ICAgICAgICAgIHJldHVybiBzaW5rKGVuZEV2ZW50KCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgY29tcG9zaXRlLmFkZChmdW5jdGlvbih1bnN1YkFsbCwgdW5zdWJNZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx2ZS5zdWJzY3JpYmVJbnRlcm5hbChmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgdmFyIGosIGxlbjEsIHJlc3VsdHMsIHRvU2VuZCwgdmFsdWU7XG5cdCAgICAgICAgICBpZiAoZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgICAgICBvbkhvbGQgPSBldmVudC52YWx1ZSgpO1xuXHQgICAgICAgICAgICBpZiAoIW9uSG9sZCkge1xuXHQgICAgICAgICAgICAgIHRvU2VuZCA9IGJ1ZmZlcmVkVmFsdWVzO1xuXHQgICAgICAgICAgICAgIGJ1ZmZlcmVkVmFsdWVzID0gW107XG5cdCAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuXHQgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB0b1NlbmQubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICB2YWx1ZSA9IHRvU2VuZFtqXTtcblx0ICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChzaW5rKG5leHRFdmVudCh2YWx1ZSkpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICAgICAgICByZXR1cm4gZW5kSWZCb3RoRW5kZWQodW5zdWJNZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gc2luayhldmVudCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBjb21wb3NpdGUuYWRkKGZ1bmN0aW9uKHVuc3ViQWxsLCB1bnN1Yk1lKSB7XG5cdCAgICAgICAgcmV0dXJuIHNyYy5zdWJzY3JpYmVJbnRlcm5hbChmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgICAgaWYgKG9uSG9sZCAmJiBldmVudC5oYXNWYWx1ZSgpKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBidWZmZXJlZFZhbHVlcy5wdXNoKGV2ZW50LnZhbHVlKCkpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc0VuZCgpICYmIGJ1ZmZlcmVkVmFsdWVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICByZXR1cm4gZW5kSWZCb3RoRW5kZWQodW5zdWJNZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gc2luayhldmVudCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzdWJzY3JpYmVkID0gdHJ1ZTtcblx0ICAgICAgZW5kSWZCb3RoRW5kZWQoKTtcblx0ICAgICAgcmV0dXJuIGNvbXBvc2l0ZS51bnN1YnNjcmliZTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLmludGVydmFsID0gZnVuY3Rpb24oZGVsYXksIHZhbHVlKSB7XG5cdCAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgICB2YWx1ZSA9IHt9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImludGVydmFsXCIsIFtkZWxheSwgdmFsdWVdKSwgQmFjb24uZnJvbVBvbGwoZGVsYXksIGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gbmV4dEV2ZW50KHZhbHVlKTtcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi4kID0ge307XG5cdFxuXHQgIEJhY29uLiQuYXNFdmVudFN0cmVhbSA9IGZ1bmN0aW9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIGV2ZW50VHJhbnNmb3JtZXIpIHtcblx0ICAgIHZhciByZWY7XG5cdCAgICBpZiAoXy5pc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuXHQgICAgICByZWYgPSBbc2VsZWN0b3IsIHZvaWQgMF0sIGV2ZW50VHJhbnNmb3JtZXIgPSByZWZbMF0sIHNlbGVjdG9yID0gcmVmWzFdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMuc2VsZWN0b3IgfHwgdGhpcywgXCJhc0V2ZW50U3RyZWFtXCIsIFtldmVudE5hbWVdKSwgQmFjb24uZnJvbUJpbmRlcigoZnVuY3Rpb24oX3RoaXMpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKGhhbmRsZXIpIHtcblx0ICAgICAgICBfdGhpcy5vbihldmVudE5hbWUsIHNlbGVjdG9yLCBoYW5kbGVyKTtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gX3RoaXMub2ZmKGV2ZW50TmFtZSwgc2VsZWN0b3IsIGhhbmRsZXIpO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH07XG5cdCAgICB9KSh0aGlzKSwgZXZlbnRUcmFuc2Zvcm1lcikpO1xuXHQgIH07XG5cdFxuXHQgIGlmICgocmVmID0gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkgIT09IG51bGwgPyBqUXVlcnkgOiB0eXBlb2YgWmVwdG8gIT09IFwidW5kZWZpbmVkXCIgJiYgWmVwdG8gIT09IG51bGwgPyBaZXB0byA6IHZvaWQgMCkgIT0gbnVsbCkge1xuXHQgICAgcmVmLmZuLmFzRXZlbnRTdHJlYW0gPSBCYWNvbi4kLmFzRXZlbnRTdHJlYW07XG5cdCAgfVxuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzO1xuXHQgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwgPyB0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiA/IGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIHNsaWNlLmNhbGwoYXJncykuY29uY2F0KFtldmVudC5sb2coKV0pKSA6IHZvaWQgMCA6IHZvaWQgMDtcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLm1lcmdlID0gZnVuY3Rpb24ocmlnaHQpIHtcblx0ICAgIHZhciBsZWZ0O1xuXHQgICAgYXNzZXJ0RXZlbnRTdHJlYW0ocmlnaHQpO1xuXHQgICAgbGVmdCA9IHRoaXM7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MobGVmdCwgXCJtZXJnZVwiLCBbcmlnaHRdKSwgQmFjb24ubWVyZ2VBbGwodGhpcywgcmlnaHQpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5tZXJnZUFsbCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHN0cmVhbXM7XG5cdCAgICBzdHJlYW1zID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICBpZiAoaXNBcnJheShzdHJlYW1zWzBdKSkge1xuXHQgICAgICBzdHJlYW1zID0gc3RyZWFtc1swXTtcblx0ICAgIH1cblx0ICAgIGlmIChzdHJlYW1zLmxlbmd0aCkge1xuXHQgICAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcIm1lcmdlQWxsXCIsIHN0cmVhbXMpLCBmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgICAgdmFyIGVuZHMsIHNpbmtzLCBzbWFydFNpbms7XG5cdCAgICAgICAgZW5kcyA9IDA7XG5cdCAgICAgICAgc21hcnRTaW5rID0gZnVuY3Rpb24ob2JzKSB7XG5cdCAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odW5zdWJCb3RoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYnMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgICB2YXIgcmVwbHk7XG5cdCAgICAgICAgICAgICAgaWYgKGV2ZW50LmlzRW5kKCkpIHtcblx0ICAgICAgICAgICAgICAgIGVuZHMrKztcblx0ICAgICAgICAgICAgICAgIGlmIChlbmRzID09PSBzdHJlYW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gc2luayhlbmRFdmVudCgpKTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBCYWNvbi5tb3JlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZXBseSA9IHNpbmsoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcblx0ICAgICAgICAgICAgICAgICAgdW5zdWJCb3RoKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gcmVwbHk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBzaW5rcyA9IF8ubWFwKHNtYXJ0U2luaywgc3RyZWFtcyk7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBCYWNvbi5Db21wb3NpdGVVbnN1YnNjcmliZShzaW5rcykudW5zdWJzY3JpYmU7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgQmFjb24ucmVwZWF0ZWRseSA9IGZ1bmN0aW9uKGRlbGF5LCB2YWx1ZXMpIHtcblx0ICAgIHZhciBpbmRleDtcblx0ICAgIGluZGV4ID0gMDtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJyZXBlYXRlZGx5XCIsIFtkZWxheSwgdmFsdWVzXSksIEJhY29uLmZyb21Qb2xsKGRlbGF5LCBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlc1tpbmRleCsrICUgdmFsdWVzLmxlbmd0aF07XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24ucmVwZWF0ID0gZnVuY3Rpb24oZ2VuZXJhdG9yKSB7XG5cdCAgICB2YXIgaW5kZXg7XG5cdCAgICBpbmRleCA9IDA7XG5cdCAgICByZXR1cm4gQmFjb24uZnJvbUJpbmRlcihmdW5jdGlvbihzaW5rKSB7XG5cdCAgICAgIHZhciBmbGFnLCBoYW5kbGVFdmVudCwgcmVwbHksIHN1YnNjcmliZU5leHQsIHVuc3ViO1xuXHQgICAgICBmbGFnID0gZmFsc2U7XG5cdCAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcblx0ICAgICAgdW5zdWIgPSBmdW5jdGlvbigpIHt9O1xuXHQgICAgICBoYW5kbGVFdmVudCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKGV2ZW50LmlzRW5kKCkpIHtcblx0ICAgICAgICAgIGlmICghZmxhZykge1xuXHQgICAgICAgICAgICByZXR1cm4gZmxhZyA9IHRydWU7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlTmV4dCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVwbHkgPSBzaW5rKGV2ZW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIHN1YnNjcmliZU5leHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgbmV4dDtcblx0ICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgICB3aGlsZSAoZmxhZyAmJiByZXBseSAhPT0gQmFjb24ubm9Nb3JlKSB7XG5cdCAgICAgICAgICBuZXh0ID0gZ2VuZXJhdG9yKGluZGV4KyspO1xuXHQgICAgICAgICAgZmxhZyA9IGZhbHNlO1xuXHQgICAgICAgICAgaWYgKG5leHQpIHtcblx0ICAgICAgICAgICAgdW5zdWIgPSBuZXh0LnN1YnNjcmliZUludGVybmFsKGhhbmRsZUV2ZW50KTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBmbGFnID0gdHJ1ZTtcblx0ICAgICAgfTtcblx0ICAgICAgc3Vic2NyaWJlTmV4dCgpO1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHVuc3ViKCk7XG5cdCAgICAgIH07XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5yZXRyeSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIHZhciBkZWxheSwgZXJyb3IsIGZpbmlzaGVkLCBpc1JldHJ5YWJsZSwgbWF4UmV0cmllcywgcmV0cmllcywgc291cmNlO1xuXHQgICAgaWYgKCFfLmlzRnVuY3Rpb24ob3B0aW9ucy5zb3VyY2UpKSB7XG5cdCAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCInc291cmNlJyBvcHRpb24gaGFzIHRvIGJlIGEgZnVuY3Rpb25cIik7XG5cdCAgICB9XG5cdCAgICBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZTtcblx0ICAgIHJldHJpZXMgPSBvcHRpb25zLnJldHJpZXMgfHwgMDtcblx0ICAgIG1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgfHwgcmV0cmllcztcblx0ICAgIGRlbGF5ID0gb3B0aW9ucy5kZWxheSB8fCBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIDA7XG5cdCAgICB9O1xuXHQgICAgaXNSZXRyeWFibGUgPSBvcHRpb25zLmlzUmV0cnlhYmxlIHx8IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH07XG5cdCAgICBmaW5pc2hlZCA9IGZhbHNlO1xuXHQgICAgZXJyb3IgPSBudWxsO1xuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcInJldHJ5XCIsIFtvcHRpb25zXSksIEJhY29uLnJlcGVhdChmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGNvbnRleHQsIHBhdXNlLCB2YWx1ZVN0cmVhbTtcblx0ICAgICAgaWYgKGZpbmlzaGVkKSB7XG5cdCAgICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsdWVTdHJlYW0gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHJldHVybiBzb3VyY2UoKS5lbmRPbkVycm9yKCkud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcblx0ICAgICAgICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuXHQgICAgICAgICAgICAgIGVycm9yID0gZXZlbnQ7XG5cdCAgICAgICAgICAgICAgaWYgKGlzUmV0cnlhYmxlKGVycm9yLmVycm9yKSAmJiByZXRyaWVzID4gMCkge1xuXHRcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgZmluaXNoZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGlmIChldmVudC5oYXNWYWx1ZSgpKSB7XG5cdCAgICAgICAgICAgICAgICBlcnJvciA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICBmaW5pc2hlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGlmIChlcnJvcikge1xuXHQgICAgICAgICAgY29udGV4dCA9IHtcblx0ICAgICAgICAgICAgZXJyb3I6IGVycm9yLmVycm9yLFxuXHQgICAgICAgICAgICByZXRyaWVzRG9uZTogbWF4UmV0cmllcyAtIHJldHJpZXNcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgICBwYXVzZSA9IEJhY29uLmxhdGVyKGRlbGF5KGNvbnRleHQpKS5maWx0ZXIoZmFsc2UpO1xuXHQgICAgICAgICAgcmV0cmllcyA9IHJldHJpZXMgLSAxO1xuXHQgICAgICAgICAgcmV0dXJuIHBhdXNlLmNvbmNhdChCYWNvbi5vbmNlKCkuZmxhdE1hcCh2YWx1ZVN0cmVhbSkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gdmFsdWVTdHJlYW0oKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5zZXF1ZW50aWFsbHkgPSBmdW5jdGlvbihkZWxheSwgdmFsdWVzKSB7XG5cdCAgICB2YXIgaW5kZXg7XG5cdCAgICBpbmRleCA9IDA7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwic2VxdWVudGlhbGx5XCIsIFtkZWxheSwgdmFsdWVzXSksIEJhY29uLmZyb21Qb2xsKGRlbGF5LCBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHZhbHVlO1xuXHQgICAgICB2YWx1ZSA9IHZhbHVlc1tpbmRleCsrXTtcblx0ICAgICAgaWYgKGluZGV4IDwgdmFsdWVzLmxlbmd0aCkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gdmFsdWVzLmxlbmd0aCkge1xuXHQgICAgICAgIHJldHVybiBbdmFsdWUsIGVuZEV2ZW50KCldO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBlbmRFdmVudCgpO1xuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2tpcCA9IGZ1bmN0aW9uKGNvdW50KSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwXCIsIFtjb3VudF0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgIGlmICghZXZlbnQuaGFzVmFsdWUoKSkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICB9IGVsc2UgaWYgKGNvdW50ID4gMCkge1xuXHQgICAgICAgIGNvdW50LS07XG5cdCAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlID0gZnVuY3Rpb24oY291bnQpIHtcblx0ICAgIGlmIChjb3VudCA8PSAwKSB7XG5cdCAgICAgIHJldHVybiBCYWNvbi5uZXZlcigpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidGFrZVwiLCBbY291bnRdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICBpZiAoIWV2ZW50Lmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb3VudC0tO1xuXHQgICAgICAgIGlmIChjb3VudCA+IDApIHtcblx0ICAgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcblx0ICAgICAgICAgICAgdGhpcy5wdXNoKGV2ZW50KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHRoaXMucHVzaChlbmRFdmVudCgpKTtcblx0ICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLnNraXBVbnRpbCA9IGZ1bmN0aW9uKHN0YXJ0ZXIpIHtcblx0ICAgIHZhciBzdGFydGVkO1xuXHQgICAgc3RhcnRlZCA9IHN0YXJ0ZXIudGFrZSgxKS5tYXAodHJ1ZSkudG9Qcm9wZXJ0eShmYWxzZSk7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwVW50aWxcIiwgW3N0YXJ0ZXJdKSwgdGhpcy5maWx0ZXIoc3RhcnRlZCkpO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5za2lwV2hpbGUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzLCBmLCBvaztcblx0ICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5KGYpO1xuXHQgICAgb2sgPSBmYWxzZTtcblx0ICAgIHJldHVybiBjb252ZXJ0QXJnc1RvRnVuY3Rpb24odGhpcywgZiwgYXJncywgZnVuY3Rpb24oZikge1xuXHQgICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwV2hpbGVcIiwgW2ZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuXHQgICAgICAgIGlmIChvayB8fCAhZXZlbnQuaGFzVmFsdWUoKSB8fCAhZihldmVudC52YWx1ZSgpKSkge1xuXHQgICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICAgICAgb2sgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBCYWNvbi5tb3JlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSkpO1xuXHQgICAgfSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc2xpZGluZ1dpbmRvdyA9IGZ1bmN0aW9uKG4sIG1pblZhbHVlcykge1xuXHQgICAgaWYgKG1pblZhbHVlcyA9PSBudWxsKSB7XG5cdCAgICAgIG1pblZhbHVlcyA9IDA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJzbGlkaW5nV2luZG93XCIsIFtuLCBtaW5WYWx1ZXNdKSwgdGhpcy5zY2FuKFtdLCAoZnVuY3Rpb24od2luZG93LCB2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gd2luZG93LmNvbmNhdChbdmFsdWVdKS5zbGljZSgtbik7XG5cdCAgICB9KSkuZmlsdGVyKChmdW5jdGlvbih2YWx1ZXMpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPj0gbWluVmFsdWVzO1xuXHQgICAgfSkpKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi5zcHkgPSBmdW5jdGlvbihzcHkpIHtcblx0ICAgIHJldHVybiBzcHlzLnB1c2goc3B5KTtcblx0ICB9O1xuXHRcblx0ICBzcHlzID0gW107XG5cdFxuXHQgIHJlZ2lzdGVyT2JzID0gZnVuY3Rpb24ob2JzKSB7XG5cdCAgICB2YXIgaiwgbGVuMSwgc3B5O1xuXHQgICAgaWYgKHNweXMubGVuZ3RoKSB7XG5cdCAgICAgIGlmICghcmVnaXN0ZXJPYnMucnVubmluZykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZWdpc3Rlck9icy5ydW5uaW5nID0gdHJ1ZTtcblx0ICAgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBzcHlzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuXHQgICAgICAgICAgICBzcHkgPSBzcHlzW2pdO1xuXHQgICAgICAgICAgICBzcHkob2JzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGZpbmFsbHkge1xuXHQgICAgICAgICAgZGVsZXRlIHJlZ2lzdGVyT2JzLnJ1bm5pbmc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm9pZCAwO1xuXHQgIH07XG5cdFxuXHQgIEJhY29uLlByb3BlcnR5LnByb3RvdHlwZS5zdGFydFdpdGggPSBmdW5jdGlvbihzZWVkKSB7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJzdGFydFdpdGhcIiwgW3NlZWRdKSwgdGhpcy5zY2FuKHNlZWQsIGZ1bmN0aW9uKHByZXYsIG5leHQpIHtcblx0ICAgICAgcmV0dXJuIG5leHQ7XG5cdCAgICB9KSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLnN0YXJ0V2l0aCA9IGZ1bmN0aW9uKHNlZWQpIHtcblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInN0YXJ0V2l0aFwiLCBbc2VlZF0pLCBCYWNvbi5vbmNlKHNlZWQpLmNvbmNhdCh0aGlzKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUudGFrZVdoaWxlID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncywgZjtcblx0ICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5KGYpO1xuXHQgICAgcmV0dXJuIGNvbnZlcnRBcmdzVG9GdW5jdGlvbih0aGlzLCBmLCBhcmdzLCBmdW5jdGlvbihmKSB7XG5cdCAgICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRha2VXaGlsZVwiLCBbZl0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKGV2ZW50LmZpbHRlcihmKSkge1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMucHVzaChlbmRFdmVudCgpKTtcblx0ICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KSk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi51cGRhdGUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpLCBpbml0aWFsLCBsYXRlQmluZEZpcnN0LCBwYXR0ZXJucztcblx0ICAgIGluaXRpYWwgPSBhcmd1bWVudHNbMF0sIHBhdHRlcm5zID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG5cdCAgICBsYXRlQmluZEZpcnN0ID0gZnVuY3Rpb24oZikge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGFyZ3M7XG5cdCAgICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbihpKSB7XG5cdCAgICAgICAgICByZXR1cm4gZi5hcHBseShudWxsLCBbaV0uY29uY2F0KGFyZ3MpKTtcblx0ICAgICAgICB9O1xuXHQgICAgICB9O1xuXHQgICAgfTtcblx0ICAgIGkgPSBwYXR0ZXJucy5sZW5ndGggLSAxO1xuXHQgICAgd2hpbGUgKGkgPiAwKSB7XG5cdCAgICAgIGlmICghKHBhdHRlcm5zW2ldIGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XG5cdCAgICAgICAgcGF0dGVybnNbaV0gPSAoZnVuY3Rpb24oeCkge1xuXHQgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICByZXR1cm4geDtcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSkocGF0dGVybnNbaV0pO1xuXHQgICAgICB9XG5cdCAgICAgIHBhdHRlcm5zW2ldID0gbGF0ZUJpbmRGaXJzdChwYXR0ZXJuc1tpXSk7XG5cdCAgICAgIGkgPSBpIC0gMjtcblx0ICAgIH1cblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJ1cGRhdGVcIiwgW2luaXRpYWxdLmNvbmNhdChzbGljZS5jYWxsKHBhdHRlcm5zKSkpLCBCYWNvbi53aGVuLmFwcGx5KEJhY29uLCBwYXR0ZXJucykuc2Nhbihpbml0aWFsLCAoZnVuY3Rpb24oeCwgZikge1xuXHQgICAgICByZXR1cm4gZih4KTtcblx0ICAgIH0pKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uemlwQXNBcnJheSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHN0cmVhbXM7XG5cdCAgICBzdHJlYW1zID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICBpZiAoaXNBcnJheShzdHJlYW1zWzBdKSkge1xuXHQgICAgICBzdHJlYW1zID0gc3RyZWFtc1swXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJ6aXBBc0FycmF5XCIsIHN0cmVhbXMpLCBCYWNvbi56aXBXaXRoKHN0cmVhbXMsIGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgeHM7XG5cdCAgICAgIHhzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG5cdCAgICAgIHJldHVybiB4cztcblx0ICAgIH0pKTtcblx0ICB9O1xuXHRcblx0ICBCYWNvbi56aXBXaXRoID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgZiwgcmVmMSwgc3RyZWFtcztcblx0ICAgIGYgPSBhcmd1bWVudHNbMF0sIHN0cmVhbXMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcblx0ICAgIGlmICghXy5pc0Z1bmN0aW9uKGYpKSB7XG5cdCAgICAgIHJlZjEgPSBbZiwgc3RyZWFtc1swXV0sIHN0cmVhbXMgPSByZWYxWzBdLCBmID0gcmVmMVsxXTtcblx0ICAgIH1cblx0ICAgIHN0cmVhbXMgPSBfLm1hcCgoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gcy50b0V2ZW50U3RyZWFtKCk7XG5cdCAgICB9KSwgc3RyZWFtcyk7XG5cdCAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiemlwV2l0aFwiLCBbZl0uY29uY2F0KHNsaWNlLmNhbGwoc3RyZWFtcykpKSwgQmFjb24ud2hlbihzdHJlYW1zLCBmKSk7XG5cdCAgfTtcblx0XG5cdCAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwID0gZnVuY3Rpb24ob3RoZXIsIGYpIHtcblx0ICAgIGlmIChmID09IG51bGwpIHtcblx0ICAgICAgZiA9IEFycmF5O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiemlwXCIsIFtvdGhlcl0pLCBCYWNvbi56aXBXaXRoKFt0aGlzLCBvdGhlcl0sIGYpKTtcblx0ICB9O1xuXHRcblx0ICBcblx0XG5cdEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImZpcnN0XCIsIFtdKSwgdGhpcy50YWtlKDEpKTtcblx0fTtcblx0XG5cdEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmxhc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGxhc3RFdmVudDtcblx0XG5cdCAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwibGFzdFwiLCBbXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuXHQgICAgICBpZiAobGFzdEV2ZW50KSB7XG5cdCAgICAgICAgdGhpcy5wdXNoKGxhc3RFdmVudCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuXHQgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGFzdEV2ZW50ID0gZXZlbnQ7XG5cdCAgICB9XG5cdCAgfSkpO1xuXHR9O1xuXHRcblx0QmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLnRocm90dGxlID0gZnVuY3Rpb24gKGRlbGF5KSB7XG5cdCAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidGhyb3R0bGVcIiwgW2RlbGF5XSksIHRoaXMuYnVmZmVyV2l0aFRpbWUoZGVsYXkpLm1hcChmdW5jdGlvbiAodmFsdWVzKSB7XG5cdCAgICByZXR1cm4gdmFsdWVzW3ZhbHVlcy5sZW5ndGggLSAxXTtcblx0ICB9KSk7XG5cdH07XG5cdFxuXHRCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUudGhyb3R0bGUgPSBmdW5jdGlvbiAoZGVsYXkpIHtcblx0ICByZXR1cm4gdGhpcy5kZWxheUNoYW5nZXMobmV3IEJhY29uLkRlc2ModGhpcywgXCJ0aHJvdHRsZVwiLCBbZGVsYXldKSwgZnVuY3Rpb24gKGNoYW5nZXMpIHtcblx0ICAgIHJldHVybiBjaGFuZ2VzLnRocm90dGxlKGRlbGF5KTtcblx0ICB9KTtcblx0fTtcblx0XG5cdE9ic2VydmFibGUucHJvdG90eXBlLmZpcnN0VG9Qcm9taXNlID0gZnVuY3Rpb24gKFByb21pc2VDdHIpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICBpZiAodHlwZW9mIFByb21pc2VDdHIgIT09IFwiZnVuY3Rpb25cIikge1xuXHQgICAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcblx0ICAgICAgUHJvbWlzZUN0ciA9IFByb21pc2U7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlcmUgaXNuJ3QgZGVmYXVsdCBQcm9taXNlLCB1c2Ugc2hpbSBvciBwYXJhbWV0ZXJcIik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3IFByb21pc2VDdHIoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcblx0ICAgICAgICByZXNvbHZlKGV2ZW50LnZhbHVlKCkpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcblx0ICAgICAgICByZWplY3QoZXZlbnQuZXJyb3IpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuXHQgICAgfSk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRPYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAoUHJvbWlzZUN0cikge1xuXHQgIHJldHVybiB0aGlzLmxhc3QoKS5maXJzdFRvUHJvbWlzZShQcm9taXNlQ3RyKTtcblx0fTtcblx0XG5cdGlmICgoXCJmdW5jdGlvblwiICE9PSBcInVuZGVmaW5lZFwiICYmIF9fd2VicGFja19yZXF1aXJlX18oNzcpICE9PSBudWxsKSAmJiAoX193ZWJwYWNrX3JlcXVpcmVfXyg3OCkgIT0gbnVsbCkpIHtcblx0ICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtdLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gQmFjb247XG5cdCAgICB9LmFwcGx5KGV4cG9ydHMsIF9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18pLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgICB0aGlzLkJhY29uID0gQmFjb247XG5cdCAgfSBlbHNlIGlmICgodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpICYmIChtb2R1bGUuZXhwb3J0cyAhPSBudWxsKSkge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBCYWNvbjtcblx0ICAgIEJhY29uLkJhY29uID0gQmFjb247XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMuQmFjb24gPSBCYWNvbjtcblx0ICB9XG5cdFxuXHR9KS5jYWxsKHRoaXMpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTcpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYCBbc3BlY2lhbCBjaGFyYWN0ZXJzXShodHRwOi8vd3d3LnJlZ3VsYXItZXhwcmVzc2lvbnMuaW5mby9jaGFyYWN0ZXJzLmh0bWwjc3BlY2lhbCkuXG5cdCAqIEluIGFkZGl0aW9uIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgZm9yd2FyZCBzbGFzaCBpcyBlc2NhcGVkIHRvIGFsbG93IGZvclxuXHQgKiBlYXNpZXIgYGV2YWxgIHVzZSBhbmQgYEZ1bmN0aW9uYCBjb21waWxhdGlvbi5cblx0ICovXG5cdHZhciByZVJlZ0V4cENoYXJzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nLFxuXHQgICAgcmVIYXNSZWdFeHBDaGFycyA9IFJlZ0V4cChyZVJlZ0V4cENoYXJzLnNvdXJjZSk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xuXHR2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG5cdCAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG5cdHZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG5cdHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG5cdCAgZXNjYXBlUmVnRXhwKGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkpXG5cdCAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG5cdCk7XG5cdFxuXHQvKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcblx0ICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHR2YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKF8pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcblx0ICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAob2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZykge1xuXHQgICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcblx0ICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBTdHJpbmdcblx0ICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG5cdCAqIC8vID0+ICdcXFtsb2Rhc2hcXF1cXChodHRwczpcXC9cXC9sb2Rhc2hcXC5jb21cXC9cXCknXG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG5cdCAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG5cdCAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG5cdCAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuXHQgICAgOiBzdHJpbmc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0dmFyIEJJUkRfUkFESVVTID0gNTtcblx0ZXhwb3J0cy5CSVJEX1JBRElVUyA9IEJJUkRfUkFESVVTO1xuXHR2YXIgRlJBTUVfUkFURSA9IDEwMDAgLyA2MDtcblx0ZXhwb3J0cy5GUkFNRV9SQVRFID0gRlJBTUVfUkFURTtcblx0dmFyIEdST1VORF9IRUlHSFQgPSAyMDtcblx0ZXhwb3J0cy5HUk9VTkRfSEVJR0hUID0gR1JPVU5EX0hFSUdIVDtcblx0dmFyIEhPTEVfSEVJR0hUID0gNTA7XG5cdGV4cG9ydHMuSE9MRV9IRUlHSFQgPSBIT0xFX0hFSUdIVDtcblx0dmFyIFBBVVNFX0tFWSA9IDgwO1xuXHRleHBvcnRzLlBBVVNFX0tFWSA9IFBBVVNFX0tFWTtcblx0dmFyIFNQQUNFX0tFWSA9IDMyO1xuXHRleHBvcnRzLlNQQUNFX0tFWSA9IFNQQUNFX0tFWTtcblx0dmFyIFBJUEVfRElTVEFOQ0UgPSAxMDA7XG5cdGV4cG9ydHMuUElQRV9ESVNUQU5DRSA9IFBJUEVfRElTVEFOQ0U7XG5cdHZhciBQSVBFX1dJRFRIID0gMjI7XG5cdGV4cG9ydHMuUElQRV9XSURUSCA9IFBJUEVfV0lEVEg7XG5cdHZhciBXT1JMRF9IRUlHSFQgPSAyMDA7XG5cdGV4cG9ydHMuV09STERfSEVJR0hUID0gV09STERfSEVJR0hUO1xuXHR2YXIgR1JBVklUWSA9IDAuMjtcblx0ZXhwb3J0cy5HUkFWSVRZID0gR1JBVklUWTtcblx0dmFyIFBJUEVfT0ZGU0VUID0gV09STERfSEVJR0hUICogMC40O1xuXHRleHBvcnRzLlBJUEVfT0ZGU0VUID0gUElQRV9PRkZTRVQ7XG5cdFxuXHQvKiBIT1QgUEFUQ0ggTE9BREVSICovIHZhciBfX21vZHVsZUJpbmRpbmdzID0gW107IGlmKGZhbHNlKSB7XG5cdCAgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24oZXJyKSB7XG5cdCAgICBjb25zb2xlLmxvZygnW0hNUl0gRXJyb3IgYWNjZXB0aW5nOiAnICsgZXJyKTtcblx0ICB9KTtcblx0ICB2YXIgZ2V0RXZhbFNvdXJjZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0ICAgIHZhciBjb2RlID0gZnVuYy50b1N0cmluZygpO1xuXHQgICAgdmFyIG0gPSBjb2RlLm1hdGNoKC9eZnVuY3Rpb25cXHMrX19ldmFsXFxzKlxcKCguKilcXClcXHMqXFx7KFtcXHNcXFNdKilcXH0kL2kpO1xuXHQgICAgaWYoIW0pIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgYXJncyA9IG1bMV07XG5cdCAgICB2YXIgYm9keSA9IG1bMl07XG5cdCAgICB2YXIgc2NvcGUgPSB7fTtcblxuXHQgICAgaWYoYXJncy50cmltKCkpIHtcblx0ICAgICAgYXJncy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnLmluZGV4T2YoJz0nKSAhPT0gLTEpIHtcblx0ICAgICAgICAgIHZhciBwID0gYXJnLnNwbGl0KCc9Jyk7XG5cdCAgICAgICAgICBzY29wZVtwWzBdLnRyaW0oKV0gPSBKU09OLnBhcnNlKHBbMV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgIHNjb3BlW2FyZy50cmltKCldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiB7IGJvZHk6IGJvZHksIHNjb3BlOiBzY29wZSB9O1xuXHQgIH1cblxuXHQgIHZhciBpbmplY3RTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBjb2RlKSB7XG5cdCAgICAvLyBUYWtlIGFuIGV4cGxpY2l0IHNjb3BlIG9iamVjdCBhbmQgaW5qZWN0IGl0IHNvIHRoYXRcblx0ICAgIC8vIGBjb2RlYCBydW5zIGluIGNvbnRleHQgb2YgaXRcblx0ICAgIHZhciBpbmplY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ3ZhciAnICsgYmluZGluZyArICcgPSBldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnOydcblx0ICAgIH0pLmpvaW4oJyAnKTtcblxuXHQgICAgLy8gVXBkYXRlIG91ciBzY29wZSBvYmplY3Qgd2l0aCBhbnkgbW9kaWZpY2F0aW9uc1xuXHQgICAgdmFyIGV4dHJhY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ2V2YWxTY29wZS4nICsgYmluZGluZyArICcgPSAnICsgYmluZGluZyArICc7Jztcblx0ICAgIH0pLmpvaW4oJyAnKTtcblx0ICAgIHJldHVybiBpbmplY3RlZCArIGNvZGUgKyBleHRyYWN0ZWQ7XG5cdCAgfVxuXG5cdCAgdmFyIGJpbmRpbmdzID0gX19tb2R1bGVCaW5kaW5ncztcblxuXHQgIGlmKCFtb2R1bGUuaG90LmRhdGEpIHtcblx0ICAgIC8vIEZpcnN0IHRpbWUgbG9hZGluZy4gVHJ5IGFuZCBwYXRjaCBzb21ldGhpbmcuXG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0ge307XG5cdCAgICB2YXIgZXZhbFNjb3BlID0ge307XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsV2l0aFNjb3BlID0gZnVuY3Rpb24oZnJhbWUpIHtcblx0ICAgICAgLy8gVXBkYXRlIHRoZSBzY29wZSB0byByZWZsZWN0IG9ubHkgdGhlIHZhbHVlcyBzcGVjaWZpZWQgYXNcblx0ICAgICAgLy8gYXJndW1lbnRzIHRvIHRoZSBfX2V2YWwgZnVuY3Rpb24uIENvcHkgb3ZlciB2YWx1ZXMgZnJvbSB0aGVcblx0ICAgICAgLy8gZXhpc3Rpbmcgc2NvcGUgYW5kIGlnbm9yZSB0aGUgcmVzdC5cblx0ICAgICAgT2JqZWN0LmtleXMoZXZhbFNjb3BlKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZyBpbiBmcmFtZS5zY29wZSkge1xuXHQgICAgICAgICAgZnJhbWUuc2NvcGVbYXJnXSA9IGV2YWxTY29wZVthcmddO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGV2YWxTY29wZSA9IGZyYW1lLnNjb3BlO1xuXG5cdCAgICAgIHZhciBjb2RlID0gaW5qZWN0U2NvcGUoZXZhbFNjb3BlLCBmcmFtZS5ib2R5KTtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsID0gZnVuY3Rpb24oY29kZSkge1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIHZhciBwYXRjaGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZihwYXRjaGVkQmluZGluZ3NbYmluZGluZ10pIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBwYXRjaGVkLnByb3RvdHlwZSA9IGYucHJvdG90eXBlO1xuXG5cdCAgICAgICAgZXZhbChiaW5kaW5nICsgJyA9IHBhdGNoZWQ7XFxuJyk7XG5cblx0ICAgICAgICBpZihtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgbW9kdWxlLmV4cG9ydHNbYmluZGluZ10gPSBwYXRjaGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IG1vZHVsZS5ob3QuZGF0YS5wYXRjaGVkQmluZGluZ3M7XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICAvLyBXZSBuZWVkIHRvIHJlaWZ5IHRoZSBmdW5jdGlvbiBpbiB0aGUgb3JpZ2luYWwgbW9kdWxlIHNvXG5cdCAgICAgICAgLy8gaXQgcmVmZXJlbmNlcyBhbnkgb2YgdGhlIG9yaWdpbmFsIHN0YXRlLiBTdHJpcCB0aGUgbmFtZVxuXHQgICAgICAgIC8vIGFuZCBzaW1wbHkgZXZhbCBpdC5cblx0ICAgICAgICB2YXIgZnVuY0NvZGUgPSAoXG5cdCAgICAgICAgICAnKCcgKyBmLnRvU3RyaW5nKCkucmVwbGFjZSgvXmZ1bmN0aW9uIFxcdytcXCgvLCAnZnVuY3Rpb24gKCcpICsgJyknXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10gPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbChmdW5jQ29kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBpZih0eXBlb2YgX19ldmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUoZ2V0RXZhbFNvdXJjZShfX2V2YWwpKTtcblx0ICAgICAgfVxuXHQgICAgICBjYXRjaChlKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGV2YWxpbmc6ICcgKyBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgW3NwZWNpYWwgY2hhcmFjdGVyc10oaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vY2hhcmFjdGVycy5odG1sI3NwZWNpYWwpLlxuXHQgKiBJbiBhZGRpdGlvbiB0byBzcGVjaWFsIGNoYXJhY3RlcnMgdGhlIGZvcndhcmQgc2xhc2ggaXMgZXNjYXBlZCB0byBhbGxvdyBmb3Jcblx0ICogZWFzaWVyIGBldmFsYCB1c2UgYW5kIGBGdW5jdGlvbmAgY29tcGlsYXRpb24uXG5cdCAqL1xuXHR2YXIgcmVSZWdFeHBDaGFycyA9IC9bLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZyxcblx0ICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkgPiA1KS4gKi9cblx0dmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuXHR2YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuXHQgIGVzY2FwZVJlZ0V4cChmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpKVxuXHQgIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuXHQpO1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUlzQXJyYXkgPSBnZXROYXRpdmUoQXJyYXksICdpc0FycmF5Jyk7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICByZXR1cm4gaXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheVRhZztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc05hdGl2ZShfKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG5cdCAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgaWYgKG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWcpIHtcblx0ICAgIHJldHVybiByZUlzTmF0aXZlLnRlc3QoZm5Ub1N0cmluZy5jYWxsKHZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVzY2FwZXMgdGhlIGBSZWdFeHBgIHNwZWNpYWwgY2hhcmFjdGVycyBcIlxcXCIsIFwiL1wiLCBcIl5cIiwgXCIkXCIsIFwiLlwiLCBcInxcIiwgXCI/XCIsXG5cdCAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgU3RyaW5nXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuXHQgKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6XFwvXFwvbG9kYXNoXFwuY29tXFwvXFwpJ1xuXHQgKi9cblx0ZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuXHQgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuXHQgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhcnMudGVzdChzdHJpbmcpKVxuXHQgICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcblx0ICAgIDogc3RyaW5nO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cdFxuXHR2YXIgQmFjb24gPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cdFxuXHR2YXIgYnVzID0gbmV3IEJhY29uLkJ1cygpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGJ1cy5wdXNoLmJpbmQoYnVzKTtcblx0bW9kdWxlLmV4cG9ydHMucmVwbGFjZU5vdGlmaWVyJCA9IGJ1cy5zdGFydFdpdGgoKS5kZWxheSgxKTtcblx0XG5cdC8qIEhPVCBQQVRDSCBMT0FERVIgKi8gdmFyIF9fbW9kdWxlQmluZGluZ3MgPSBbXTsgaWYoZmFsc2UpIHtcblx0ICBtb2R1bGUuaG90LmFjY2VwdChmdW5jdGlvbihlcnIpIHtcblx0ICAgIGNvbnNvbGUubG9nKCdbSE1SXSBFcnJvciBhY2NlcHRpbmc6ICcgKyBlcnIpO1xuXHQgIH0pO1xuXHQgIHZhciBnZXRFdmFsU291cmNlID0gZnVuY3Rpb24oZnVuYykge1xuXHQgICAgdmFyIGNvZGUgPSBmdW5jLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgbSA9IGNvZGUubWF0Y2goL15mdW5jdGlvblxccytfX2V2YWxcXHMqXFwoKC4qKVxcKVxccypcXHsoW1xcc1xcU10qKVxcfSQvaSk7XG5cdCAgICBpZighbSkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBhcmdzID0gbVsxXTtcblx0ICAgIHZhciBib2R5ID0gbVsyXTtcblx0ICAgIHZhciBzY29wZSA9IHt9O1xuXG5cdCAgICBpZihhcmdzLnRyaW0oKSkge1xuXHQgICAgICBhcmdzLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcuaW5kZXhPZignPScpICE9PSAtMSkge1xuXHQgICAgICAgICAgdmFyIHAgPSBhcmcuc3BsaXQoJz0nKTtcblx0ICAgICAgICAgIHNjb3BlW3BbMF0udHJpbSgpXSA9IEpTT04ucGFyc2UocFsxXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgc2NvcGVbYXJnLnRyaW0oKV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHsgYm9keTogYm9keSwgc2NvcGU6IHNjb3BlIH07XG5cdCAgfVxuXG5cdCAgdmFyIGluamVjdFNjb3BlID0gZnVuY3Rpb24oc2NvcGUsIGNvZGUpIHtcblx0ICAgIC8vIFRha2UgYW4gZXhwbGljaXQgc2NvcGUgb2JqZWN0IGFuZCBpbmplY3QgaXQgc28gdGhhdFxuXHQgICAgLy8gYGNvZGVgIHJ1bnMgaW4gY29udGV4dCBvZiBpdFxuXHQgICAgdmFyIGluamVjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAndmFyICcgKyBiaW5kaW5nICsgJyA9IGV2YWxTY29wZS4nICsgYmluZGluZyArICc7J1xuXHQgICAgfSkuam9pbignICcpO1xuXG5cdCAgICAvLyBVcGRhdGUgb3VyIHNjb3BlIG9iamVjdCB3aXRoIGFueSBtb2RpZmljYXRpb25zXG5cdCAgICB2YXIgZXh0cmFjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAnZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJyA9ICcgKyBiaW5kaW5nICsgJzsnO1xuXHQgICAgfSkuam9pbignICcpO1xuXHQgICAgcmV0dXJuIGluamVjdGVkICsgY29kZSArIGV4dHJhY3RlZDtcblx0ICB9XG5cblx0ICB2YXIgYmluZGluZ3MgPSBfX21vZHVsZUJpbmRpbmdzO1xuXG5cdCAgaWYoIW1vZHVsZS5ob3QuZGF0YSkge1xuXHQgICAgLy8gRmlyc3QgdGltZSBsb2FkaW5nLiBUcnkgYW5kIHBhdGNoIHNvbWV0aGluZy5cblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSB7fTtcblx0ICAgIHZhciBldmFsU2NvcGUgPSB7fTtcblxuXHQgICAgdmFyIG1vZHVsZUV2YWxXaXRoU2NvcGUgPSBmdW5jdGlvbihmcmFtZSkge1xuXHQgICAgICAvLyBVcGRhdGUgdGhlIHNjb3BlIHRvIHJlZmxlY3Qgb25seSB0aGUgdmFsdWVzIHNwZWNpZmllZCBhc1xuXHQgICAgICAvLyBhcmd1bWVudHMgdG8gdGhlIF9fZXZhbCBmdW5jdGlvbi4gQ29weSBvdmVyIHZhbHVlcyBmcm9tIHRoZVxuXHQgICAgICAvLyBleGlzdGluZyBzY29wZSBhbmQgaWdub3JlIHRoZSByZXN0LlxuXHQgICAgICBPYmplY3Qua2V5cyhldmFsU2NvcGUpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnIGluIGZyYW1lLnNjb3BlKSB7XG5cdCAgICAgICAgICBmcmFtZS5zY29wZVthcmddID0gZXZhbFNjb3BlW2FyZ107XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgZXZhbFNjb3BlID0gZnJhbWUuc2NvcGU7XG5cblx0ICAgICAgdmFyIGNvZGUgPSBpbmplY3RTY29wZShldmFsU2NvcGUsIGZyYW1lLmJvZHkpO1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIG1vZHVsZUV2YWwgPSBmdW5jdGlvbihjb2RlKSB7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgdmFyIHBhdGNoZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmKHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgICByZXR1cm4gcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHBhdGNoZWQucHJvdG90eXBlID0gZi5wcm90b3R5cGU7XG5cblx0ICAgICAgICBldmFsKGJpbmRpbmcgKyAnID0gcGF0Y2hlZDtcXG4nKTtcblxuXHQgICAgICAgIGlmKG1vZHVsZS5leHBvcnRzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICBtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSA9IHBhdGNoZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgZWxzZSB7XG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0gbW9kdWxlLmhvdC5kYXRhLnBhdGNoZWRCaW5kaW5ncztcblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVpZnkgdGhlIGZ1bmN0aW9uIGluIHRoZSBvcmlnaW5hbCBtb2R1bGUgc29cblx0ICAgICAgICAvLyBpdCByZWZlcmVuY2VzIGFueSBvZiB0aGUgb3JpZ2luYWwgc3RhdGUuIFN0cmlwIHRoZSBuYW1lXG5cdCAgICAgICAgLy8gYW5kIHNpbXBseSBldmFsIGl0LlxuXHQgICAgICAgIHZhciBmdW5jQ29kZSA9IChcblx0ICAgICAgICAgICcoJyArIGYudG9TdHJpbmcoKS5yZXBsYWNlKC9eZnVuY3Rpb24gXFx3K1xcKC8sICdmdW5jdGlvbiAoJykgKyAnKSdcblx0ICAgICAgICApO1xuXHQgICAgICAgIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsKGZ1bmNDb2RlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIGlmKHR5cGVvZiBfX2V2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZShnZXRFdmFsU291cmNlKF9fZXZhbCkpO1xuXHQgICAgICB9XG5cdCAgICAgIGNhdGNoKGUpIHtcblx0ICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZXZhbGluZzogJyArIGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciB1bmRlZmluZWQ7XG5cdFxuXHR2YXIgaXNBcnJheSA9IGZ1bmN0aW9uIGlzQXJyYXkoYXJyKSB7XG5cdFx0aWYgKHR5cGVvZiBBcnJheS5pc0FycmF5ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpO1xuXHRcdH1cblx0XG5cdFx0cmV0dXJuIHRvU3RyLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fTtcblx0XG5cdHZhciBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0aWYgKCFvYmogfHwgdG9TdHIuY2FsbChvYmopICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0dmFyIGhhc19vd25fY29uc3RydWN0b3IgPSBoYXNPd24uY2FsbChvYmosICdjb25zdHJ1Y3RvcicpO1xuXHRcdHZhciBoYXNfaXNfcHJvcGVydHlfb2ZfbWV0aG9kID0gb2JqLmNvbnN0cnVjdG9yICYmIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgJiYgaGFzT3duLmNhbGwob2JqLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2lzUHJvdG90eXBlT2YnKTtcblx0XHQvLyBOb3Qgb3duIGNvbnN0cnVjdG9yIHByb3BlcnR5IG11c3QgYmUgT2JqZWN0XG5cdFx0aWYgKG9iai5jb25zdHJ1Y3RvciAmJiAhaGFzX293bl9jb25zdHJ1Y3RvciAmJiAhaGFzX2lzX3Byb3BlcnR5X29mX21ldGhvZCkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XG5cdFx0Ly8gT3duIHByb3BlcnRpZXMgYXJlIGVudW1lcmF0ZWQgZmlyc3RseSwgc28gdG8gc3BlZWQgdXAsXG5cdFx0Ly8gaWYgbGFzdCBvbmUgaXMgb3duLCB0aGVuIGFsbCBwcm9wZXJ0aWVzIGFyZSBvd24uXG5cdFx0dmFyIGtleTtcblx0XHRmb3IgKGtleSBpbiBvYmopIHt9XG5cdFxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbChvYmosIGtleSk7XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCgpIHtcblx0XHQndXNlIHN0cmljdCc7XG5cdFx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdLFxuXHRcdFx0aSA9IDEsXG5cdFx0XHRsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHRcdFx0ZGVlcCA9IGZhbHNlO1xuXHRcblx0XHQvLyBIYW5kbGUgYSBkZWVwIGNvcHkgc2l0dWF0aW9uXG5cdFx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdib29sZWFuJykge1xuXHRcdFx0ZGVlcCA9IHRhcmdldDtcblx0XHRcdHRhcmdldCA9IGFyZ3VtZW50c1sxXSB8fCB7fTtcblx0XHRcdC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHRcdGkgPSAyO1xuXHRcdH0gZWxzZSBpZiAoKHR5cGVvZiB0YXJnZXQgIT09ICdvYmplY3QnICYmIHR5cGVvZiB0YXJnZXQgIT09ICdmdW5jdGlvbicpIHx8IHRhcmdldCA9PSBudWxsKSB7XG5cdFx0XHR0YXJnZXQgPSB7fTtcblx0XHR9XG5cdFxuXHRcdGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0XHRcdG9wdGlvbnMgPSBhcmd1bWVudHNbaV07XG5cdFx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRpZiAob3B0aW9ucyAhPSBudWxsKSB7XG5cdFx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdFx0Zm9yIChuYW1lIGluIG9wdGlvbnMpIHtcblx0XHRcdFx0XHRzcmMgPSB0YXJnZXRbbmFtZV07XG5cdFx0XHRcdFx0Y29weSA9IG9wdGlvbnNbbmFtZV07XG5cdFxuXHRcdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0XHRpZiAodGFyZ2V0ID09PSBjb3B5KSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRcdGlmIChkZWVwICYmIGNvcHkgJiYgKGlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0gaXNBcnJheShjb3B5KSkpKSB7XG5cdFx0XHRcdFx0XHRpZiAoY29weUlzQXJyYXkpIHtcblx0XHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBpc1BsYWluT2JqZWN0KHNyYykgPyBzcmMgOiB7fTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSk7XG5cdFxuXHRcdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGNvcHkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W25hbWVdID0gY29weTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFxuXHRcdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdFx0cmV0dXJuIHRhcmdldDtcblx0fTtcblx0XG5cblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4wLjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjcuMCA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byBpdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgVXRpbGl0eVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG5cdCAqIC8vID0+IHRydWVcblx0ICovXG5cdGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlkZW50aXR5O1xuXG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMS4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ0KSxcblx0ICAgIGlzQXJndW1lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cdFxuXHQvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUtleXMgPSBnZXROYXRpdmUoT2JqZWN0LCAna2V5cycpO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuXHQgKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuXHQgKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuXHQgKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuXHQgIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcblx0ICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cdCAgcmV0dXJuIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGg7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgT2JqZWN0LmtleXNgIHdoaWNoIGNyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlXG5cdCAqIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdCAqL1xuXHRmdW5jdGlvbiBzaGltS2V5cyhvYmplY3QpIHtcblx0ICB2YXIgcHJvcHMgPSBrZXlzSW4ob2JqZWN0KSxcblx0ICAgICAgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGgsXG5cdCAgICAgIGxlbmd0aCA9IHByb3BzTGVuZ3RoICYmIG9iamVjdC5sZW5ndGg7XG5cdFxuXHQgIHZhciBhbGxvd0luZGV4ZXMgPSAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG5cdCAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gW107XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgcHJvcHNMZW5ndGgpIHtcblx0ICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cdCAgICBpZiAoKGFsbG93SW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgfHwgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcblx0ICAgICAgcmVzdWx0LnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuXHQgKiBbRVMgc3BlY10oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5rZXlzKVxuXHQgKiBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBmdW5jdGlvbiBGb28oKSB7XG5cdCAqICAgdGhpcy5hID0gMTtcblx0ICogICB0aGlzLmIgPSAyO1xuXHQgKiB9XG5cdCAqXG5cdCAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG5cdCAqXG5cdCAqIF8ua2V5cyhuZXcgRm9vKTtcblx0ICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuXHQgKlxuXHQgKiBfLmtleXMoJ2hpJyk7XG5cdCAqIC8vID0+IFsnMCcsICcxJ11cblx0ICovXG5cdHZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgIHZhciBDdG9yID0gb2JqZWN0ID09IG51bGwgPyBudWxsIDogb2JqZWN0LmNvbnN0cnVjdG9yO1xuXHQgIGlmICgodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0KSB8fFxuXHQgICAgICAodHlwZW9mIG9iamVjdCAhPSAnZnVuY3Rpb24nICYmIGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG5cdCAgICByZXR1cm4gc2hpbUtleXMob2JqZWN0KTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgPyBuYXRpdmVLZXlzKG9iamVjdCkgOiBbXTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogZnVuY3Rpb24gRm9vKCkge1xuXHQgKiAgIHRoaXMuYSA9IDE7XG5cdCAqICAgdGhpcy5iID0gMjtcblx0ICogfVxuXHQgKlxuXHQgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuXHQgKlxuXHQgKiBfLmtleXNJbihuZXcgRm9vKTtcblx0ICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdCAqL1xuXHRmdW5jdGlvbiBrZXlzSW4ob2JqZWN0KSB7XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gW107XG5cdCAgfVxuXHQgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuXHQgICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG5cdCAgfVxuXHQgIHZhciBsZW5ndGggPSBvYmplY3QubGVuZ3RoO1xuXHQgIGxlbmd0aCA9IChsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSAmJiBsZW5ndGgpIHx8IDA7XG5cdFxuXHQgIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuXHQgICAgICBpbmRleCA9IC0xLFxuXHQgICAgICBpc1Byb3RvID0gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0LFxuXHQgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpLFxuXHQgICAgICBza2lwSW5kZXhlcyA9IGxlbmd0aCA+IDA7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICByZXN1bHRbaW5kZXhdID0gKGluZGV4ICsgJycpO1xuXHQgIH1cblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG5cdCAgICBpZiAoIShza2lwSW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgJiZcblx0ICAgICAgICAhKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG5cdCAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0ga2V5cztcblxuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjEuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OCksXG5cdCAgICBpc0FyZ3VtZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdHZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVLZXlzID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2tleXMnKTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5Milcblx0ICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cblx0ICovXG5cdHZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcblx0ICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG5cdCAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXHQgIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYE9iamVjdC5rZXlzYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mIHRoZVxuXHQgKiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuXHQgKi9cblx0ZnVuY3Rpb24gc2hpbUtleXMob2JqZWN0KSB7XG5cdCAgdmFyIHByb3BzID0ga2V5c0luKG9iamVjdCksXG5cdCAgICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuXHQgICAgICBsZW5ndGggPSBwcm9wc0xlbmd0aCAmJiBvYmplY3QubGVuZ3RoO1xuXHRcblx0ICB2YXIgYWxsb3dJbmRleGVzID0gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblx0XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IFtdO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IHByb3BzTGVuZ3RoKSB7XG5cdCAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuXHQgICAgaWYgKChhbGxvd0luZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpIHx8IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG5cdCAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcblx0ICogW0VTIHNwZWNdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3Qua2V5cylcblx0ICogZm9yIG1vcmUgZGV0YWlscy5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogZnVuY3Rpb24gRm9vKCkge1xuXHQgKiAgIHRoaXMuYSA9IDE7XG5cdCAqICAgdGhpcy5iID0gMjtcblx0ICogfVxuXHQgKlxuXHQgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuXHQgKlxuXHQgKiBfLmtleXMobmV3IEZvbyk7XG5cdCAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcblx0ICpcblx0ICogXy5rZXlzKCdoaScpO1xuXHQgKiAvLyA9PiBbJzAnLCAnMSddXG5cdCAqL1xuXHR2YXIga2V5cyA9ICFuYXRpdmVLZXlzID8gc2hpbUtleXMgOiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICB2YXIgQ3RvciA9IG9iamVjdCA9PSBudWxsID8gbnVsbCA6IG9iamVjdC5jb25zdHJ1Y3Rvcjtcblx0ICBpZiAoKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCkgfHxcblx0ICAgICAgKHR5cGVvZiBvYmplY3QgIT0gJ2Z1bmN0aW9uJyAmJiBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuXHQgICAgcmV0dXJuIHNoaW1LZXlzKG9iamVjdCk7XG5cdCAgfVxuXHQgIHJldHVybiBpc09iamVjdChvYmplY3QpID8gbmF0aXZlS2V5cyhvYmplY3QpIDogW107XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIGZ1bmN0aW9uIEZvbygpIHtcblx0ICogICB0aGlzLmEgPSAxO1xuXHQgKiAgIHRoaXMuYiA9IDI7XG5cdCAqIH1cblx0ICpcblx0ICogRm9vLnByb3RvdHlwZS5jID0gMztcblx0ICpcblx0ICogXy5rZXlzSW4obmV3IEZvbyk7XG5cdCAqIC8vID0+IFsnYScsICdiJywgJ2MnXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuXHQgKi9cblx0ZnVuY3Rpb24ga2V5c0luKG9iamVjdCkge1xuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIFtdO1xuXHQgIH1cblx0ICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcblx0ICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuXHQgIH1cblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDtcblx0ICBsZW5ndGggPSAobGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcblx0ICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkgJiYgbGVuZ3RoKSB8fCAwO1xuXHRcblx0ICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3Rvcixcblx0ICAgICAgaW5kZXggPSAtMSxcblx0ICAgICAgaXNQcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcblx0ICAgICAgc2tpcEluZGV4ZXMgPSBsZW5ndGggPiAwO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgcmVzdWx0W2luZGV4XSA9IChpbmRleCArICcnKTtcblx0ICB9XG5cdCAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuXHQgICAgaWYgKCEoc2tpcEluZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpICYmXG5cdCAgICAgICAgIShrZXkgPT0gJ2NvbnN0cnVjdG9yJyAmJiAoaXNQcm90byB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpKSkge1xuXHQgICAgICByZXN1bHQucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS43LjAgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgaW50ZXJuYWwgYXJndW1lbnQgcGxhY2Vob2xkZXIuICovXG5cdHZhciBQTEFDRUhPTERFUiA9ICdfX2xvZGFzaF9wbGFjZWhvbGRlcl9fJztcblx0XG5cdC8qKlxuXHQgKiBSZXBsYWNlcyBhbGwgYHBsYWNlaG9sZGVyYCBlbGVtZW50cyBpbiBgYXJyYXlgIHdpdGggYW4gaW50ZXJuYWwgcGxhY2Vob2xkZXJcblx0ICogYW5kIHJldHVybnMgYW4gYXJyYXkgb2YgdGhlaXIgaW5kZXhlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIG1vZGlmeS5cblx0ICogQHBhcmFtIHsqfSBwbGFjZWhvbGRlciBUaGUgcGxhY2Vob2xkZXIgdG8gcmVwbGFjZS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGxhY2Vob2xkZXIgaW5kZXhlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHJlcGxhY2VIb2xkZXJzKGFycmF5LCBwbGFjZWhvbGRlcikge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIHJlc0luZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IFtdO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgaWYgKGFycmF5W2luZGV4XSA9PT0gcGxhY2Vob2xkZXIpIHtcblx0ICAgICAgYXJyYXlbaW5kZXhdID0gUExBQ0VIT0xERVI7XG5cdCAgICAgIHJlc3VsdFsrK3Jlc0luZGV4XSA9IGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHJlcGxhY2VIb2xkZXJzO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYCBbc3BlY2lhbCBjaGFyYWN0ZXJzXShodHRwOi8vd3d3LnJlZ3VsYXItZXhwcmVzc2lvbnMuaW5mby9jaGFyYWN0ZXJzLmh0bWwjc3BlY2lhbCkuXG5cdCAqIEluIGFkZGl0aW9uIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgZm9yd2FyZCBzbGFzaCBpcyBlc2NhcGVkIHRvIGFsbG93IGZvclxuXHQgKiBlYXNpZXIgYGV2YWxgIHVzZSBhbmQgYEZ1bmN0aW9uYCBjb21waWxhdGlvbi5cblx0ICovXG5cdHZhciByZVJlZ0V4cENoYXJzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nLFxuXHQgICAgcmVIYXNSZWdFeHBDaGFycyA9IFJlZ0V4cChyZVJlZ0V4cENoYXJzLnNvdXJjZSk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xuXHR2YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG5cdCAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG5cdHZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG5cdHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG5cdCAgZXNjYXBlUmVnRXhwKGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkpXG5cdCAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG5cdCk7XG5cdFxuXHQvKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcblx0ICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHR2YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKF8pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcblx0ICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAob2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZykge1xuXHQgICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcblx0ICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBTdHJpbmdcblx0ICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG5cdCAqIC8vID0+ICdcXFtsb2Rhc2hcXF1cXChodHRwczpcXC9cXC9sb2Rhc2hcXC5jb21cXC9cXCknXG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG5cdCAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG5cdCAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG5cdCAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuXHQgICAgOiBzdHJpbmc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cdFxuXHR2YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgdmFyIF9hcnIgPSBbXTsgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lOykgeyBfYXJyLnB1c2goX3N0ZXAudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gcmV0dXJuIF9hcnI7IH0gZWxzZSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpOyB9IH07XG5cdFxuXHRleHBvcnRzLnVwZGF0ZUJpcmQgPSB1cGRhdGVCaXJkO1xuXHRleHBvcnRzLmJpcmRUb3VjaGVzUGlwZSA9IGJpcmRUb3VjaGVzUGlwZTtcblx0ZXhwb3J0cy5iaXJkVG91Y2hlc0dyb3VuZCA9IGJpcmRUb3VjaGVzR3JvdW5kO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBzb21lID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNTApKTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBXT1JMRF9IRUlHSFQgPSBfY29uc3RhbnRzLldPUkxEX0hFSUdIVDtcblx0dmFyIEdST1VORF9IRUlHSFQgPSBfY29uc3RhbnRzLkdST1VORF9IRUlHSFQ7XG5cdHZhciBIT0xFX0hFSUdIVCA9IF9jb25zdGFudHMuSE9MRV9IRUlHSFQ7XG5cdHZhciBQSVBFX1dJRFRIID0gX2NvbnN0YW50cy5QSVBFX1dJRFRIO1xuXHR2YXIgQklSRF9SQURJVVMgPSBfY29uc3RhbnRzLkJJUkRfUkFESVVTO1xuXHR2YXIgR1JBVklUWSA9IF9jb25zdGFudHMuR1JBVklUWTtcblx0dmFyIGluaXRpYWxCaXJkID0ge1xuXHQgIHJhZGl1czogV09STERfSEVJR0hULFxuXHQgIHg6IDAsXG5cdCAgdng6IDIsXG5cdCAgeTogV09STERfSEVJR0hUIC8gMiAtIEJJUkRfUkFESVVTIC8gMixcblx0ICB2eTogMCxcblx0ICB0b3VjaGVzR3JvdW5kOiBmYWxzZSxcblx0ICBncm91bmRUb3VjaFRpbWU6IDBcblx0fTtcblx0XG5cdGV4cG9ydHMuaW5pdGlhbEJpcmQgPSBpbml0aWFsQmlyZDtcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUJpcmQoYmlyZCwgX3JlZikge1xuXHQgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpO1xuXHRcblx0ICB2YXIgX3JlZjIkMCA9IF9zbGljZWRUb0FycmF5KF9yZWYyWzBdLCAyKTtcblx0XG5cdCAgdmFyIGlucHV0ID0gX3JlZjIkMFswXTtcblx0ICB2YXIgb3V0cHV0ID0gX3JlZjIkMFsxXTtcblx0ICB2YXIgd29ybGQgPSBfcmVmMlsxXTtcblx0XG5cdCAgaWYgKCF3b3JsZC5ydW5uaW5nKSB7XG5cdCAgICByZXR1cm4gaW5pdGlhbEJpcmQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgbmV3QmlyZCA9IHtcblx0ICAgIHg6IGJpcmQueCArIGJpcmQudngsXG5cdCAgICAvLyBUT0RPIHZ4OiBvdXRwdXQuYmlyZFRvdWNoZWRQaXBlID8gMCA6IGJpcmQudngsXG5cdCAgICB2eDogb3V0cHV0LmJpcmRUb3VjaGVkUGlwZSA/IDAgOiBNYXRoLm1pbihiaXJkLnZ4ICsgMC4xLCAyKSxcblx0ICAgIHk6IGJpcmQueSArIGJpcmQudnksXG5cdCAgICB2eTogYmlyZC52eSAtIEdSQVZJVFksXG5cdCAgICB0b3VjaGVzR3JvdW5kOiBmYWxzZSxcblx0ICAgIGdyb3VuZFRvdWNoVGltZTogYmlyZC50b3VjaGVzR3JvdW5kID8gYmlyZC5ncm91bmRUb3VjaFRpbWUgKyAxIDogMFxuXHQgIH07XG5cdFxuXHQgIHZhciBiaXJkQm90dG9tID0gbmV3QmlyZC55IC0gQklSRF9SQURJVVMgKiAyO1xuXHRcblx0ICBpZiAoYmlyZEJvdHRvbSA8PSBHUk9VTkRfSEVJR0hUKSB7XG5cdCAgICBuZXdCaXJkLnkgPSBHUk9VTkRfSEVJR0hUICsgQklSRF9SQURJVVMgKiAyO1xuXHQgICAgbmV3QmlyZC52eSA9IDA7XG5cdCAgICBuZXdCaXJkLnRvdWNoZXNHcm91bmQgPSB0cnVlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGlucHV0LmNsaWNrcy5sZW5ndGggPiAwICYmICFuZXdCaXJkLnRvdWNoZXNHcm91bmQpIHtcblx0ICAgIG5ld0JpcmQudnkgPSAzO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG5ld0JpcmQ7XG5cdH1cblx0XG5cdDtcblx0XG5cdGZ1bmN0aW9uIGJpcmRUb3VjaGVzUGlwZShfcmVmKSB7XG5cdCAgdmFyIGJpcmQgPSBfcmVmLmJpcmQ7XG5cdCAgdmFyIHBpcGVzID0gX3JlZi5waXBlcztcblx0XG5cdCAgcmV0dXJuIHNvbWUocGlwZXMsIGZ1bmN0aW9uIChwaXBlKSB7XG5cdCAgICAvLyBIb3Jpem9udGFsIGNoZWNrXG5cdCAgICBpZiAoIShiaXJkLnggKyBCSVJEX1JBRElVUyAqIDIgPiBwaXBlLnggJiYgYmlyZC54IDwgcGlwZS54ICsgUElQRV9XSURUSCkpIHJldHVybiBmYWxzZTtcblx0XG5cdCAgICAvLyBCaXJkIG5vdCB2ZXJ0aWNhbGx5IGluc2lkZSB0aGUgaG9sZVxuXHQgICAgcmV0dXJuICEoYmlyZC55IDwgcGlwZS55ICYmIGJpcmQueSAtIEJJUkRfUkFESVVTICogMiA+IHBpcGUueSAtIEhPTEVfSEVJR0hUKTtcblx0ICB9KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmlyZFRvdWNoZXNHcm91bmQoX3JlZikge1xuXHQgIHZhciBiaXJkID0gX3JlZi5iaXJkO1xuXHRcblx0ICByZXR1cm4gYmlyZC55IC0gQklSRF9SQURJVVMgKiAyIDw9IEdST1VORF9IRUlHSFQ7XG5cdH1cblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNSkoKTtcblx0XG5cdC8qIEhPVCBQQVRDSCBMT0FERVIgKi8gdmFyIF9fbW9kdWxlQmluZGluZ3MgPSBbXCJ1cGRhdGVCaXJkXCIsXCJiaXJkVG91Y2hlc1BpcGVcIixcImJpcmRUb3VjaGVzR3JvdW5kXCJdOyBpZihmYWxzZSkge1xuXHQgIG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uKGVycikge1xuXHQgICAgY29uc29sZS5sb2coJ1tITVJdIEVycm9yIGFjY2VwdGluZzogJyArIGVycik7XG5cdCAgfSk7XG5cdCAgdmFyIGdldEV2YWxTb3VyY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgY29kZSA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICAgIHZhciBtID0gY29kZS5tYXRjaCgvXmZ1bmN0aW9uXFxzK19fZXZhbFxccypcXCgoLiopXFwpXFxzKlxceyhbXFxzXFxTXSopXFx9JC9pKTtcblx0ICAgIGlmKCFtKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGFyZ3MgPSBtWzFdO1xuXHQgICAgdmFyIGJvZHkgPSBtWzJdO1xuXHQgICAgdmFyIHNjb3BlID0ge307XG5cblx0ICAgIGlmKGFyZ3MudHJpbSgpKSB7XG5cdCAgICAgIGFyZ3Muc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZy5pbmRleE9mKCc9JykgIT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgcCA9IGFyZy5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgc2NvcGVbcFswXS50cmltKCldID0gSlNPTi5wYXJzZShwWzFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBzY29wZVthcmcudHJpbSgpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geyBib2R5OiBib2R5LCBzY29wZTogc2NvcGUgfTtcblx0ICB9XG5cblx0ICB2YXIgaW5qZWN0U2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY29kZSkge1xuXHQgICAgLy8gVGFrZSBhbiBleHBsaWNpdCBzY29wZSBvYmplY3QgYW5kIGluamVjdCBpdCBzbyB0aGF0XG5cdCAgICAvLyBgY29kZWAgcnVucyBpbiBjb250ZXh0IG9mIGl0XG5cdCAgICB2YXIgaW5qZWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICd2YXIgJyArIGJpbmRpbmcgKyAnID0gZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJzsnXG5cdCAgICB9KS5qb2luKCcgJyk7XG5cblx0ICAgIC8vIFVwZGF0ZSBvdXIgc2NvcGUgb2JqZWN0IHdpdGggYW55IG1vZGlmaWNhdGlvbnNcblx0ICAgIHZhciBleHRyYWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICdldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnID0gJyArIGJpbmRpbmcgKyAnOyc7XG5cdCAgICB9KS5qb2luKCcgJyk7XG5cdCAgICByZXR1cm4gaW5qZWN0ZWQgKyBjb2RlICsgZXh0cmFjdGVkO1xuXHQgIH1cblxuXHQgIHZhciBiaW5kaW5ncyA9IF9fbW9kdWxlQmluZGluZ3M7XG5cblx0ICBpZighbW9kdWxlLmhvdC5kYXRhKSB7XG5cdCAgICAvLyBGaXJzdCB0aW1lIGxvYWRpbmcuIFRyeSBhbmQgcGF0Y2ggc29tZXRoaW5nLlxuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IHt9O1xuXHQgICAgdmFyIGV2YWxTY29wZSA9IHt9O1xuXG5cdCAgICB2YXIgbW9kdWxlRXZhbFdpdGhTY29wZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgc2NvcGUgdG8gcmVmbGVjdCBvbmx5IHRoZSB2YWx1ZXMgc3BlY2lmaWVkIGFzXG5cdCAgICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgX19ldmFsIGZ1bmN0aW9uLiBDb3B5IG92ZXIgdmFsdWVzIGZyb20gdGhlXG5cdCAgICAgIC8vIGV4aXN0aW5nIHNjb3BlIGFuZCBpZ25vcmUgdGhlIHJlc3QuXG5cdCAgICAgIE9iamVjdC5rZXlzKGV2YWxTY29wZSkuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcgaW4gZnJhbWUuc2NvcGUpIHtcblx0ICAgICAgICAgIGZyYW1lLnNjb3BlW2FyZ10gPSBldmFsU2NvcGVbYXJnXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBldmFsU2NvcGUgPSBmcmFtZS5zY29wZTtcblxuXHQgICAgICB2YXIgY29kZSA9IGluamVjdFNjb3BlKGV2YWxTY29wZSwgZnJhbWUuYm9keSk7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgbW9kdWxlRXZhbCA9IGZ1bmN0aW9uKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYocGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcGF0Y2hlZC5wcm90b3R5cGUgPSBmLnByb3RvdHlwZTtcblxuXHQgICAgICAgIGV2YWwoYmluZGluZyArICcgPSBwYXRjaGVkO1xcbicpO1xuXG5cdCAgICAgICAgaWYobW9kdWxlLmV4cG9ydHNbYmluZGluZ10pIHtcblx0ICAgICAgICAgIG1vZHVsZS5leHBvcnRzW2JpbmRpbmddID0gcGF0Y2hlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSBtb2R1bGUuaG90LmRhdGEucGF0Y2hlZEJpbmRpbmdzO1xuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgLy8gV2UgbmVlZCB0byByZWlmeSB0aGUgZnVuY3Rpb24gaW4gdGhlIG9yaWdpbmFsIG1vZHVsZSBzb1xuXHQgICAgICAgIC8vIGl0IHJlZmVyZW5jZXMgYW55IG9mIHRoZSBvcmlnaW5hbCBzdGF0ZS4gU3RyaXAgdGhlIG5hbWVcblx0ICAgICAgICAvLyBhbmQgc2ltcGx5IGV2YWwgaXQuXG5cdCAgICAgICAgdmFyIGZ1bmNDb2RlID0gKFxuXHQgICAgICAgICAgJygnICsgZi50b1N0cmluZygpLnJlcGxhY2UoL15mdW5jdGlvbiBcXHcrXFwoLywgJ2Z1bmN0aW9uICgnKSArICcpJ1xuXHQgICAgICAgICk7XG5cdCAgICAgICAgcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWwoZnVuY0NvZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgaWYodHlwZW9mIF9fZXZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlKGdldEV2YWxTb3VyY2UoX19ldmFsKSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2F0Y2goZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBldmFsaW5nOiAnICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblx0XG5cdHZhciBfc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyB2YXIgX2FyciA9IFtdOyBmb3IgKHZhciBfaXRlcmF0b3IgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmU7KSB7IF9hcnIucHVzaChfc3RlcC52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSByZXR1cm4gX2FycjsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTtcblx0XG5cdGV4cG9ydHMudXBkYXRlUGlwZXMgPSB1cGRhdGVQaXBlcztcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgZXh0ZW5kID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNikpO1xuXHRcblx0dmFyIHJhbmRvbSA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpLnJhbmRvbTtcblx0XG5cdHZhciBpbml0aWFsUGlwZXMgPSBbXTtcblx0XG5cdGV4cG9ydHMuaW5pdGlhbFBpcGVzID0gaW5pdGlhbFBpcGVzO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIFdPUkxEX0hFSUdIVCA9IF9jb25zdGFudHMuV09STERfSEVJR0hUO1xuXHR2YXIgUElQRV9ESVNUQU5DRSA9IF9jb25zdGFudHMuUElQRV9ESVNUQU5DRTtcblx0dmFyIFBJUEVfT0ZGU0VUID0gX2NvbnN0YW50cy5QSVBFX09GRlNFVDtcblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVBpcGVzKHBpcGVzLCBfcmVmKSB7XG5cdCAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7XG5cdFxuXHQgIHZhciB3b3JsZCA9IF9yZWYyWzBdO1xuXHQgIHZhciBiaXJkID0gX3JlZjJbMV07XG5cdFxuXHQgIGlmICghd29ybGQucnVubmluZykge1xuXHQgICAgcmV0dXJuIGluaXRpYWxQaXBlcztcblx0ICB9XG5cdFxuXHQgIHZhciBuZXdQaXBlcyA9IHBpcGVzLnNsaWNlKDApLm1hcChmdW5jdGlvbiAocGlwZSkge1xuXHQgICAgcmV0dXJuIGV4dGVuZCh7fSwgcGlwZSk7XG5cdCAgfSk7XG5cdFxuXHQgIGlmIChuZXdQaXBlcy5sZW5ndGggPiAyNSkge1xuXHQgICAgbmV3UGlwZXMuc2hpZnQoKTtcblx0ICB9XG5cdFxuXHQgIHZhciBsYXN0UGlwZSA9IG5ld1BpcGVzW25ld1BpcGVzLmxlbmd0aCAtIDFdO1xuXHRcblx0ICBpZiAobmV3UGlwZXMubGVuZ3RoID09PSAwIHx8IGJpcmQueCArIFBJUEVfRElTVEFOQ0UgKiA1ID4gbGFzdFBpcGUueCArIFBJUEVfRElTVEFOQ0UpIHtcblx0ICAgIG5ld1BpcGVzLnB1c2goe1xuXHQgICAgICB4OiBiaXJkLnggKyBQSVBFX0RJU1RBTkNFICogNSxcblx0ICAgICAgeTogcmFuZG9tKFBJUEVfT0ZGU0VULCBXT1JMRF9IRUlHSFQgLSBXT1JMRF9IRUlHSFQgLyA4KVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbmV3UGlwZXM7XG5cdH1cblx0XG5cdDtcblx0XG5cdC8qIEhPVCBQQVRDSCBMT0FERVIgKi8gdmFyIF9fbW9kdWxlQmluZGluZ3MgPSBbXCJ1cGRhdGVQaXBlc1wiXTsgaWYoZmFsc2UpIHtcblx0ICBtb2R1bGUuaG90LmFjY2VwdChmdW5jdGlvbihlcnIpIHtcblx0ICAgIGNvbnNvbGUubG9nKCdbSE1SXSBFcnJvciBhY2NlcHRpbmc6ICcgKyBlcnIpO1xuXHQgIH0pO1xuXHQgIHZhciBnZXRFdmFsU291cmNlID0gZnVuY3Rpb24oZnVuYykge1xuXHQgICAgdmFyIGNvZGUgPSBmdW5jLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgbSA9IGNvZGUubWF0Y2goL15mdW5jdGlvblxccytfX2V2YWxcXHMqXFwoKC4qKVxcKVxccypcXHsoW1xcc1xcU10qKVxcfSQvaSk7XG5cdCAgICBpZighbSkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBhcmdzID0gbVsxXTtcblx0ICAgIHZhciBib2R5ID0gbVsyXTtcblx0ICAgIHZhciBzY29wZSA9IHt9O1xuXG5cdCAgICBpZihhcmdzLnRyaW0oKSkge1xuXHQgICAgICBhcmdzLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcuaW5kZXhPZignPScpICE9PSAtMSkge1xuXHQgICAgICAgICAgdmFyIHAgPSBhcmcuc3BsaXQoJz0nKTtcblx0ICAgICAgICAgIHNjb3BlW3BbMF0udHJpbSgpXSA9IEpTT04ucGFyc2UocFsxXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgc2NvcGVbYXJnLnRyaW0oKV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHsgYm9keTogYm9keSwgc2NvcGU6IHNjb3BlIH07XG5cdCAgfVxuXG5cdCAgdmFyIGluamVjdFNjb3BlID0gZnVuY3Rpb24oc2NvcGUsIGNvZGUpIHtcblx0ICAgIC8vIFRha2UgYW4gZXhwbGljaXQgc2NvcGUgb2JqZWN0IGFuZCBpbmplY3QgaXQgc28gdGhhdFxuXHQgICAgLy8gYGNvZGVgIHJ1bnMgaW4gY29udGV4dCBvZiBpdFxuXHQgICAgdmFyIGluamVjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAndmFyICcgKyBiaW5kaW5nICsgJyA9IGV2YWxTY29wZS4nICsgYmluZGluZyArICc7J1xuXHQgICAgfSkuam9pbignICcpO1xuXG5cdCAgICAvLyBVcGRhdGUgb3VyIHNjb3BlIG9iamVjdCB3aXRoIGFueSBtb2RpZmljYXRpb25zXG5cdCAgICB2YXIgZXh0cmFjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAnZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJyA9ICcgKyBiaW5kaW5nICsgJzsnO1xuXHQgICAgfSkuam9pbignICcpO1xuXHQgICAgcmV0dXJuIGluamVjdGVkICsgY29kZSArIGV4dHJhY3RlZDtcblx0ICB9XG5cblx0ICB2YXIgYmluZGluZ3MgPSBfX21vZHVsZUJpbmRpbmdzO1xuXG5cdCAgaWYoIW1vZHVsZS5ob3QuZGF0YSkge1xuXHQgICAgLy8gRmlyc3QgdGltZSBsb2FkaW5nLiBUcnkgYW5kIHBhdGNoIHNvbWV0aGluZy5cblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSB7fTtcblx0ICAgIHZhciBldmFsU2NvcGUgPSB7fTtcblxuXHQgICAgdmFyIG1vZHVsZUV2YWxXaXRoU2NvcGUgPSBmdW5jdGlvbihmcmFtZSkge1xuXHQgICAgICAvLyBVcGRhdGUgdGhlIHNjb3BlIHRvIHJlZmxlY3Qgb25seSB0aGUgdmFsdWVzIHNwZWNpZmllZCBhc1xuXHQgICAgICAvLyBhcmd1bWVudHMgdG8gdGhlIF9fZXZhbCBmdW5jdGlvbi4gQ29weSBvdmVyIHZhbHVlcyBmcm9tIHRoZVxuXHQgICAgICAvLyBleGlzdGluZyBzY29wZSBhbmQgaWdub3JlIHRoZSByZXN0LlxuXHQgICAgICBPYmplY3Qua2V5cyhldmFsU2NvcGUpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnIGluIGZyYW1lLnNjb3BlKSB7XG5cdCAgICAgICAgICBmcmFtZS5zY29wZVthcmddID0gZXZhbFNjb3BlW2FyZ107XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgZXZhbFNjb3BlID0gZnJhbWUuc2NvcGU7XG5cblx0ICAgICAgdmFyIGNvZGUgPSBpbmplY3RTY29wZShldmFsU2NvcGUsIGZyYW1lLmJvZHkpO1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIG1vZHVsZUV2YWwgPSBmdW5jdGlvbihjb2RlKSB7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgdmFyIHBhdGNoZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmKHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgICByZXR1cm4gcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHBhdGNoZWQucHJvdG90eXBlID0gZi5wcm90b3R5cGU7XG5cblx0ICAgICAgICBldmFsKGJpbmRpbmcgKyAnID0gcGF0Y2hlZDtcXG4nKTtcblxuXHQgICAgICAgIGlmKG1vZHVsZS5leHBvcnRzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICBtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSA9IHBhdGNoZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgZWxzZSB7XG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0gbW9kdWxlLmhvdC5kYXRhLnBhdGNoZWRCaW5kaW5ncztcblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVpZnkgdGhlIGZ1bmN0aW9uIGluIHRoZSBvcmlnaW5hbCBtb2R1bGUgc29cblx0ICAgICAgICAvLyBpdCByZWZlcmVuY2VzIGFueSBvZiB0aGUgb3JpZ2luYWwgc3RhdGUuIFN0cmlwIHRoZSBuYW1lXG5cdCAgICAgICAgLy8gYW5kIHNpbXBseSBldmFsIGl0LlxuXHQgICAgICAgIHZhciBmdW5jQ29kZSA9IChcblx0ICAgICAgICAgICcoJyArIGYudG9TdHJpbmcoKS5yZXBsYWNlKC9eZnVuY3Rpb24gXFx3K1xcKC8sICdmdW5jdGlvbiAoJykgKyAnKSdcblx0ICAgICAgICApO1xuXHQgICAgICAgIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsKGZ1bmNDb2RlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIGlmKHR5cGVvZiBfX2V2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZShnZXRFdmFsU291cmNlKF9fZXZhbCkpO1xuXHQgICAgICB9XG5cdCAgICAgIGNhdGNoKGUpIHtcblx0ICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZXZhbGluZzogJyArIGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cdFxuXHR2YXIgcmFkaWFucyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSk7XG5cdFxuXHR2YXIgZXh0ZW5kID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNikpO1xuXHRcblx0dmFyIHJhbmdlID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNDYpKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNzUpO1xuXHRcblx0dmFyIF9jb25zdGFudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIEZSQU1FX1JBVEUgPSBfY29uc3RhbnRzLkZSQU1FX1JBVEU7XG5cdHZhciBXT1JMRF9IRUlHSFQgPSBfY29uc3RhbnRzLldPUkxEX0hFSUdIVDtcblx0dmFyIEJJUkRfSEVJR0hUID0gX2NvbnN0YW50cy5CSVJEX0hFSUdIVDtcblx0dmFyIEhPTEVfSEVJR0hUID0gX2NvbnN0YW50cy5IT0xFX0hFSUdIVDtcblx0dmFyIFBJUEVfV0lEVEggPSBfY29uc3RhbnRzLlBJUEVfV0lEVEg7XG5cdHZhciBHUk9VTkRfSEVJR0hUID0gX2NvbnN0YW50cy5HUk9VTkRfSEVJR0hUO1xuXHR2YXIgQklSRF9SQURJVVMgPSBfY29uc3RhbnRzLkJJUkRfUkFESVVTO1xuXHRcblx0dmFyIF9jYW52YXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKTtcblx0XG5cdHZhciBjYW52YXMgPSBfY2FudmFzLmNhbnZhcztcblx0dmFyIGN0eCA9IF9jYW52YXMuY3R4O1xuXHRcblx0dmFyIHNwcml0ZXMgPSB7XG5cdCAgYmFja2dyb3VuZDogeyB4OiAwLCB5OiAwLCB3OiAxNDQsIGg6IDI1NiB9LFxuXHQgIGdyb3VuZDogeyB4OiAxNDYsIHk6IDAsIHc6IDE1MywgaDogNTYgfSxcblx0ICBzY29yZTogeyB4OiAxNDYsIHk6IDU4LCB3OiAxMTMsIGg6IDU4IH0sXG5cdCAgYmlyZDogW3sgeDogMjIzLCB5OiAxMjQsIHc6IDE3LCBoOiAxMiB9LCB7IHg6IDI2NCwgeTogOTAsIHc6IDE3LCBoOiAxMiB9LCB7IHg6IDI2NCwgeTogNjMsIHc6IDE3LCBoOiAxMiB9XSxcblx0ICBwaXBlOiB7IHg6IDMzMCwgeTogMCwgdzogMjYsIGg6IDEyMSB9LFxuXHQgIHBpcGUyOiB7IHg6IDMwMiwgeTogMCwgdzogMjYsIGg6IDEzNSB9LFxuXHQgIHBpcGUzOiB7IHg6IDMwMiwgeTogMCwgdzogMjYsIGg6IDEwMCB9XG5cdH07XG5cdFxuXHR2YXIgYXRsYXMgPSBuZXcgSW1hZ2UoKTtcblx0YXRsYXMuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdFxuXHRmdW5jdGlvbiBkcmF3U3ByaXRlKGNvbnRleHQsIHNwcml0ZSwgeCwgeSwgdywgaCkge1xuXHQgIGNvbnRleHQuZHJhd0ltYWdlKGF0bGFzLCBzcHJpdGUueCwgc3ByaXRlLnksIHNwcml0ZS53LCBzcHJpdGUuaCwgeCwgeSwgdywgaCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNjYWxlKHkpIHtcblx0ICByZXR1cm4gY2FudmFzLmhlaWdodCAvIFdPUkxEX0hFSUdIVCAqIHk7XG5cdH1cblx0XG5cdHZhciBydW5uaW5nID0gZmFsc2U7XG5cdGZ1bmN0aW9uIHVwZGF0ZVJ1bm5pbmdDbGFzcyhydW5uaW5nKSB7XG5cdCAgdmFyIGNsYXNzTGlzdCA9IGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0O1xuXHRcblx0ICBydW5uaW5nID8gY2xhc3NMaXN0LmFkZChcInJ1bm5pbmdcIikgOiBjbGFzc0xpc3QucmVtb3ZlKFwicnVubmluZ1wiKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RnJhbWUoc3ByaXRlcywgdGljaykge1xuXHQgIHJldHVybiBzcHJpdGVzW01hdGguZmxvb3IodGljayAvIHNwcml0ZXMubGVuZ3RoKSAlIHNwcml0ZXMubGVuZ3RoXTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVuZGVyQmlyZCh3b3JsZCwgYmlyZCkge1xuXHQgIGN0eC5zYXZlKCk7XG5cdFxuXHQgIC8vY29uc29sZS5sb2coc2NhbGUoYmlyZC55KSwgYmlyZC55KTtcblx0ICB2YXIgcmFkaXVzID0gc2NhbGUoQklSRF9SQURJVVMpO1xuXHQgIHZhciBkaXZpZGVyID0gcmFkaXVzICogMjtcblx0XG5cdCAgY3R4LnRyYW5zbGF0ZShjYW52YXMud2lkdGggLyAyIC0gcmFkaXVzLCBjYW52YXMuaGVpZ2h0IC0gc2NhbGUoYmlyZC55KSArIHJhZGl1cyk7XG5cdFxuXHQgIGN0eC5yb3RhdGUocmFkaWFucygtYmlyZC52eSAqIDcgKyBiaXJkLmdyb3VuZFRvdWNoVGltZSAqIDQpKTtcblx0XG5cdCAgY3R4LnRyYW5zbGF0ZSgtcmFkaXVzLCAtcmFkaXVzKTtcblx0ICAvL2N0eC5maWxsUmVjdCgwLCAwLCBzY2FsZShCSVJEX1JBRElVUyAqIDIpLCBzY2FsZShCSVJEX1JBRElVUyAqIDIpKVxuXHRcblx0ICB2YXIgc3ByaXRlID0gYmlyZC52eSA+IDAgPyBnZXRGcmFtZShzcHJpdGVzLmJpcmQsIHdvcmxkLnRpY2spIDogc3ByaXRlcy5iaXJkWzBdO1xuXHRcblx0ICB2YXIgcmF0aW8gPSBzcHJpdGUudyAvIHNwcml0ZS5oO1xuXHRcblx0ICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCAwLCAwLCBkaXZpZGVyICogcmF0aW8sIGRpdmlkZXIpO1xuXHRcblx0ICBjdHgucmVzdG9yZSgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW5kZXJHcm91bmQoYmlyZCkge1xuXHQgIHZhciBzcHJpdGUgPSBzcHJpdGVzLmdyb3VuZDtcblx0ICB2YXIgc3ByaXRlV2lkdGggPSBzY2FsZShzcHJpdGUudyk7XG5cdCAgdmFyIHNwcml0ZUhlaWdodCA9IHNjYWxlKHNwcml0ZS5oKTtcblx0XG5cdCAgY3R4LnNhdmUoKTtcblx0XG5cdCAgdmFyIG1vdmVtZW50ID0gc2NhbGUoYmlyZC54KSAlIHNwcml0ZVdpZHRoICogLTE7XG5cdFxuXHQgIGN0eC50cmFuc2xhdGUoMCArIG1vdmVtZW50LCBjYW52YXMuaGVpZ2h0IC0gc2NhbGUoR1JPVU5EX0hFSUdIVCkgKiAxLjI1KTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLmNlaWwoY2FudmFzLndpZHRoIC8gc3ByaXRlV2lkdGgpICsgMTsgaSsrKSB7XG5cdCAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCAwLCAwLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KTtcblx0ICAgIGN0eC50cmFuc2xhdGUoc3ByaXRlV2lkdGgsIDApO1xuXHQgIH1cblx0XG5cdCAgY3R4LnJlc3RvcmUoKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVuZGVyQmFja2dyb3VuZCh3b3JsZCkge1xuXHQgIHZhciBzcHJpdGUgPSBzcHJpdGVzLmJhY2tncm91bmQ7XG5cdFxuXHQgIHZhciBzcHJpdGVXaWR0aCA9IHNjYWxlKHNwcml0ZS53KTtcblx0ICB2YXIgc3ByaXRlSGVpZ2h0ID0gc2NhbGUoc3ByaXRlLmgpO1xuXHRcblx0ICBjdHguc2F2ZSgpO1xuXHRcblx0ICBjdHgudHJhbnNsYXRlKDAsIC1zY2FsZShzcHJpdGUuaCkgKiAwLjI1KTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBNYXRoLmNlaWwoY2FudmFzLndpZHRoIC8gc3ByaXRlV2lkdGgpICsgMTsgaSsrKSB7XG5cdCAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCAwLCAwLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KTtcblx0ICAgIGN0eC50cmFuc2xhdGUoc3ByaXRlV2lkdGgsIDApO1xuXHQgIH1cblx0XG5cdCAgY3R4LnJlc3RvcmUoKTtcblx0fVxuXHRcblx0Ly8gVE9ETyByZWZhY3RvclxuXHRmdW5jdGlvbiByZW5kZXJQaXBlcyhwaXBlcywgYmlyZCkge1xuXHQgIHZhciBzcHJpdGUgPSBzcHJpdGVzLnBpcGU7XG5cdCAgdmFyIHNwcml0ZTIgPSBzcHJpdGVzLnBpcGUyO1xuXHRcblx0ICB2YXIgcGlwZVdpZHRoID0gc2NhbGUoUElQRV9XSURUSCk7XG5cdCAgdmFyIHJhdGlvID0gc3ByaXRlLncgLyBwaXBlV2lkdGg7XG5cdFxuXHQgIHZhciBzcHJpdGVXaWR0aCA9IHNjYWxlKHNwcml0ZS53KTtcblx0ICB2YXIgc3ByaXRlSGVpZ2h0ID0gc2NhbGUoc3ByaXRlLmgpICogcmF0aW87XG5cdFxuXHQgIHZhciBzcHJpdGUyV2lkdGggPSBzY2FsZShzcHJpdGUyLncpO1xuXHQgIHZhciBzcHJpdGUySGVpZ2h0ID0gc2NhbGUoc3ByaXRlMi5oKSAqIHJhdGlvO1xuXHQgIHZhciBzaGFmdEhlaWdodCA9IHNjYWxlKHNwcml0ZXMucGlwZTMuaCkgKiByYXRpbztcblx0XG5cdCAgcGlwZXMuZm9yRWFjaChmdW5jdGlvbiAocGlwZSkge1xuXHQgICAgdmFyIHggPSBjYW52YXMud2lkdGggLyAyIC0gc2NhbGUoQklSRF9SQURJVVMpIC0gKHNjYWxlKGJpcmQueCkgLSBzY2FsZShwaXBlLngpKTtcblx0ICAgIHZhciB5ID0gY2FudmFzLmhlaWdodCAtIHNjYWxlKHBpcGUueSkgKyBzY2FsZShIT0xFX0hFSUdIVCk7XG5cdFxuXHQgICAgdmFyIGJvdHRvbVBpcGVCb3R0b20gPSBjYW52YXMuaGVpZ2h0IC0gKHkgKyBzcHJpdGVIZWlnaHQpO1xuXHRcblx0ICAgIGlmIChib3R0b21QaXBlQm90dG9tID4gc2NhbGUoR1JPVU5EX0hFSUdIVCkpIHtcblx0XG5cdCAgICAgIHJhbmdlKE1hdGguY2VpbCgoYm90dG9tUGlwZUJvdHRvbSAtIHNjYWxlKEdST1VORF9IRUlHSFQpKSAvIHNoYWZ0SGVpZ2h0KSkuZm9yRWFjaChmdW5jdGlvbiAoaSkge1xuXHQgICAgICAgIGN0eC5zYXZlKCk7XG5cdCAgICAgICAgY3R4LnRyYW5zbGF0ZSh4LCB5ICsgc3ByaXRlSGVpZ2h0ICsgc2hhZnRIZWlnaHQgKiBpKTtcblx0XG5cdCAgICAgICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZXMucGlwZTMsIDAsIDAsIHBpcGVXaWR0aCwgc2hhZnRIZWlnaHQpO1xuXHQgICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGN0eC5zYXZlKCk7XG5cdCAgICBjdHgudHJhbnNsYXRlKHgsIHkpO1xuXHQgICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZSwgMCwgMCwgcGlwZVdpZHRoLCBzcHJpdGVIZWlnaHQpO1xuXHQgICAgY3R4LnJlc3RvcmUoKTtcblx0XG5cdCAgICBjdHguc2F2ZSgpO1xuXHRcblx0ICAgIHkgPSBjYW52YXMuaGVpZ2h0IC0gc2NhbGUocGlwZS55KSAtIHNwcml0ZTJIZWlnaHQ7XG5cdFxuXHQgICAgaWYgKHkgPiAwKSB7XG5cdCAgICAgIHJhbmdlKE1hdGguY2VpbCh5IC8gc2hhZnRIZWlnaHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7XG5cdCAgICAgICAgY3R4LnNhdmUoKTtcblx0ICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkgLSBpICogc2hhZnRIZWlnaHQgLSBzaGFmdEhlaWdodCk7XG5cdCAgICAgICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZXMucGlwZTMsIDAsIDAsIHBpcGVXaWR0aCwgc2hhZnRIZWlnaHQpO1xuXHQgICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7XG5cdCAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlMiwgMCwgMCwgcGlwZVdpZHRoLCBzcHJpdGUySGVpZ2h0KTtcblx0ICAgIGN0eC5yZXN0b3JlKCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlbmRlcihfcmVmKSB7XG5cdCAgdmFyIHdvcmxkID0gX3JlZi53b3JsZDtcblx0ICB2YXIgYmlyZCA9IF9yZWYuYmlyZDtcblx0ICB2YXIgcGlwZXMgPSBfcmVmLnBpcGVzO1xuXHRcblx0ICBpZiAod29ybGQucnVubmluZyAhPT0gcnVubmluZykge1xuXHQgICAgdXBkYXRlUnVubmluZ0NsYXNzKHdvcmxkLnJ1bm5pbmcpO1xuXHQgICAgcnVubmluZyA9IHdvcmxkLnJ1bm5pbmc7XG5cdCAgfVxuXHRcblx0ICBjdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cdCAgcmVuZGVyQmFja2dyb3VuZCh3b3JsZCk7XG5cdCAgcmVuZGVyUGlwZXMocGlwZXMsIGJpcmQpO1xuXHQgIHJlbmRlckdyb3VuZChiaXJkKTtcblx0ICByZW5kZXJCaXJkKHdvcmxkLCBiaXJkKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVuZGVyRnV0dXJlKGZ1dHVyZSwgX3JlZikge1xuXHQgIHZhciBiaXJkID0gX3JlZi5iaXJkO1xuXHRcblx0ICBjdHguc2F2ZSgpO1xuXHQgIGN0eC5nbG9iYWxBbHBoYSA9IDAuMztcblx0XG5cdCAgY3R4LnRyYW5zbGF0ZShzY2FsZShmdXR1cmUuYmlyZC54IC0gYmlyZC54KSwgMCk7XG5cdCAgcmVuZGVyQmlyZChmdXR1cmUud29ybGQsIGZ1dHVyZS5iaXJkKTtcblx0XG5cdCAgY3R4LnJlc3RvcmUoKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSByZW5kZXI7XG5cdG1vZHVsZS5leHBvcnRzLnJlbmRlckZ1dHVyZSA9IHJlbmRlckZ1dHVyZTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNSkoKTtcblx0XG5cdC8qIEhPVCBQQVRDSCBMT0FERVIgKi8gdmFyIF9fbW9kdWxlQmluZGluZ3MgPSBbXCJkcmF3U3ByaXRlXCIsXCJzY2FsZVwiLFwidXBkYXRlUnVubmluZ0NsYXNzXCIsXCJnZXRGcmFtZVwiLFwicmVuZGVyQmlyZFwiLFwicmVuZGVyR3JvdW5kXCIsXCJyZW5kZXJCYWNrZ3JvdW5kXCIsXCJyZW5kZXJQaXBlc1wiLFwicmVuZGVyXCIsXCJyZW5kZXJGdXR1cmVcIl07IGlmKGZhbHNlKSB7XG5cdCAgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24oZXJyKSB7XG5cdCAgICBjb25zb2xlLmxvZygnW0hNUl0gRXJyb3IgYWNjZXB0aW5nOiAnICsgZXJyKTtcblx0ICB9KTtcblx0ICB2YXIgZ2V0RXZhbFNvdXJjZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0ICAgIHZhciBjb2RlID0gZnVuYy50b1N0cmluZygpO1xuXHQgICAgdmFyIG0gPSBjb2RlLm1hdGNoKC9eZnVuY3Rpb25cXHMrX19ldmFsXFxzKlxcKCguKilcXClcXHMqXFx7KFtcXHNcXFNdKilcXH0kL2kpO1xuXHQgICAgaWYoIW0pIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgYXJncyA9IG1bMV07XG5cdCAgICB2YXIgYm9keSA9IG1bMl07XG5cdCAgICB2YXIgc2NvcGUgPSB7fTtcblxuXHQgICAgaWYoYXJncy50cmltKCkpIHtcblx0ICAgICAgYXJncy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnLmluZGV4T2YoJz0nKSAhPT0gLTEpIHtcblx0ICAgICAgICAgIHZhciBwID0gYXJnLnNwbGl0KCc9Jyk7XG5cdCAgICAgICAgICBzY29wZVtwWzBdLnRyaW0oKV0gPSBKU09OLnBhcnNlKHBbMV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgIHNjb3BlW2FyZy50cmltKCldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiB7IGJvZHk6IGJvZHksIHNjb3BlOiBzY29wZSB9O1xuXHQgIH1cblxuXHQgIHZhciBpbmplY3RTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBjb2RlKSB7XG5cdCAgICAvLyBUYWtlIGFuIGV4cGxpY2l0IHNjb3BlIG9iamVjdCBhbmQgaW5qZWN0IGl0IHNvIHRoYXRcblx0ICAgIC8vIGBjb2RlYCBydW5zIGluIGNvbnRleHQgb2YgaXRcblx0ICAgIHZhciBpbmplY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ3ZhciAnICsgYmluZGluZyArICcgPSBldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnOydcblx0ICAgIH0pLmpvaW4oJyAnKTtcblxuXHQgICAgLy8gVXBkYXRlIG91ciBzY29wZSBvYmplY3Qgd2l0aCBhbnkgbW9kaWZpY2F0aW9uc1xuXHQgICAgdmFyIGV4dHJhY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ2V2YWxTY29wZS4nICsgYmluZGluZyArICcgPSAnICsgYmluZGluZyArICc7Jztcblx0ICAgIH0pLmpvaW4oJyAnKTtcblx0ICAgIHJldHVybiBpbmplY3RlZCArIGNvZGUgKyBleHRyYWN0ZWQ7XG5cdCAgfVxuXG5cdCAgdmFyIGJpbmRpbmdzID0gX19tb2R1bGVCaW5kaW5ncztcblxuXHQgIGlmKCFtb2R1bGUuaG90LmRhdGEpIHtcblx0ICAgIC8vIEZpcnN0IHRpbWUgbG9hZGluZy4gVHJ5IGFuZCBwYXRjaCBzb21ldGhpbmcuXG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0ge307XG5cdCAgICB2YXIgZXZhbFNjb3BlID0ge307XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsV2l0aFNjb3BlID0gZnVuY3Rpb24oZnJhbWUpIHtcblx0ICAgICAgLy8gVXBkYXRlIHRoZSBzY29wZSB0byByZWZsZWN0IG9ubHkgdGhlIHZhbHVlcyBzcGVjaWZpZWQgYXNcblx0ICAgICAgLy8gYXJndW1lbnRzIHRvIHRoZSBfX2V2YWwgZnVuY3Rpb24uIENvcHkgb3ZlciB2YWx1ZXMgZnJvbSB0aGVcblx0ICAgICAgLy8gZXhpc3Rpbmcgc2NvcGUgYW5kIGlnbm9yZSB0aGUgcmVzdC5cblx0ICAgICAgT2JqZWN0LmtleXMoZXZhbFNjb3BlKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZyBpbiBmcmFtZS5zY29wZSkge1xuXHQgICAgICAgICAgZnJhbWUuc2NvcGVbYXJnXSA9IGV2YWxTY29wZVthcmddO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGV2YWxTY29wZSA9IGZyYW1lLnNjb3BlO1xuXG5cdCAgICAgIHZhciBjb2RlID0gaW5qZWN0U2NvcGUoZXZhbFNjb3BlLCBmcmFtZS5ib2R5KTtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsID0gZnVuY3Rpb24oY29kZSkge1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIHZhciBwYXRjaGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZihwYXRjaGVkQmluZGluZ3NbYmluZGluZ10pIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBwYXRjaGVkLnByb3RvdHlwZSA9IGYucHJvdG90eXBlO1xuXG5cdCAgICAgICAgZXZhbChiaW5kaW5nICsgJyA9IHBhdGNoZWQ7XFxuJyk7XG5cblx0ICAgICAgICBpZihtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgbW9kdWxlLmV4cG9ydHNbYmluZGluZ10gPSBwYXRjaGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IG1vZHVsZS5ob3QuZGF0YS5wYXRjaGVkQmluZGluZ3M7XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICAvLyBXZSBuZWVkIHRvIHJlaWZ5IHRoZSBmdW5jdGlvbiBpbiB0aGUgb3JpZ2luYWwgbW9kdWxlIHNvXG5cdCAgICAgICAgLy8gaXQgcmVmZXJlbmNlcyBhbnkgb2YgdGhlIG9yaWdpbmFsIHN0YXRlLiBTdHJpcCB0aGUgbmFtZVxuXHQgICAgICAgIC8vIGFuZCBzaW1wbHkgZXZhbCBpdC5cblx0ICAgICAgICB2YXIgZnVuY0NvZGUgPSAoXG5cdCAgICAgICAgICAnKCcgKyBmLnRvU3RyaW5nKCkucmVwbGFjZSgvXmZ1bmN0aW9uIFxcdytcXCgvLCAnZnVuY3Rpb24gKCcpICsgJyknXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10gPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbChmdW5jQ29kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBpZih0eXBlb2YgX19ldmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUoZ2V0RXZhbFNvdXJjZShfX2V2YWwpKTtcblx0ICAgICAgfVxuXHQgICAgICBjYXRjaChlKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGV2YWxpbmc6ICcgKyBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXHRcblx0dmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKGFyciwgaSkgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IHJldHVybiBhcnI7IH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7IHZhciBfYXJyID0gW107IGZvciAodmFyIF9pdGVyYXRvciA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZTspIHsgX2Fyci5wdXNoKF9zdGVwLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IHJldHVybiBfYXJyOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9O1xuXHRcblx0ZXhwb3J0cy51cGRhdGVXb3JsZCA9IHVwZGF0ZVdvcmxkO1xuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBleHRlbmQgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cdFxuXHR2YXIgc2V0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNDgpKTtcblx0XG5cdHZhciBXT1JMRF9IRUlHSFQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpLldPUkxEX0hFSUdIVDtcblx0XG5cdHZhciBpbml0aWFsV29ybGQgPSB7XG5cdCAgcnVubmluZzogZmFsc2UsXG5cdCAgdGljazogMFxuXHR9O1xuXHRcblx0ZXhwb3J0cy5pbml0aWFsV29ybGQgPSBpbml0aWFsV29ybGQ7XG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVXb3JsZCh3b3JsZCwgX3JlZikge1xuXHQgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpO1xuXHRcblx0ICB2YXIgaW5wdXQgPSBfcmVmMlswXTtcblx0ICB2YXIgb3V0cHV0ID0gX3JlZjJbMV07XG5cdFxuXHQgIHZhciBuZXdXb3JsZCA9IHtcblx0ICAgIHJ1bm5pbmc6IHdvcmxkLnJ1bm5pbmcsXG5cdCAgICB0aWNrOiB3b3JsZC50aWNrICsgMVxuXHQgIH07XG5cdFxuXHQgIGlmICghbmV3V29ybGQucnVubmluZyAmJiBpbnB1dC5jbGlja3MubGVuZ3RoID4gMCkge1xuXHQgICAgbmV3V29ybGQucnVubmluZyA9IHRydWU7XG5cdCAgfVxuXHRcblx0ICBpZiAobmV3V29ybGQucnVubmluZyAmJiBvdXRwdXQuZ2FtZUVuZHMpIHtcblx0ICAgIG5ld1dvcmxkLnJ1bm5pbmcgPSBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBuZXdXb3JsZDtcblx0fVxuXHRcblx0O1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXyg1KSgpO1xuXHRcblx0LyogSE9UIFBBVENIIExPQURFUiAqLyB2YXIgX19tb2R1bGVCaW5kaW5ncyA9IFtcInVwZGF0ZVdvcmxkXCJdOyBpZihmYWxzZSkge1xuXHQgIG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uKGVycikge1xuXHQgICAgY29uc29sZS5sb2coJ1tITVJdIEVycm9yIGFjY2VwdGluZzogJyArIGVycik7XG5cdCAgfSk7XG5cdCAgdmFyIGdldEV2YWxTb3VyY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgY29kZSA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICAgIHZhciBtID0gY29kZS5tYXRjaCgvXmZ1bmN0aW9uXFxzK19fZXZhbFxccypcXCgoLiopXFwpXFxzKlxceyhbXFxzXFxTXSopXFx9JC9pKTtcblx0ICAgIGlmKCFtKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGFyZ3MgPSBtWzFdO1xuXHQgICAgdmFyIGJvZHkgPSBtWzJdO1xuXHQgICAgdmFyIHNjb3BlID0ge307XG5cblx0ICAgIGlmKGFyZ3MudHJpbSgpKSB7XG5cdCAgICAgIGFyZ3Muc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZy5pbmRleE9mKCc9JykgIT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgcCA9IGFyZy5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgc2NvcGVbcFswXS50cmltKCldID0gSlNPTi5wYXJzZShwWzFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBzY29wZVthcmcudHJpbSgpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geyBib2R5OiBib2R5LCBzY29wZTogc2NvcGUgfTtcblx0ICB9XG5cblx0ICB2YXIgaW5qZWN0U2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY29kZSkge1xuXHQgICAgLy8gVGFrZSBhbiBleHBsaWNpdCBzY29wZSBvYmplY3QgYW5kIGluamVjdCBpdCBzbyB0aGF0XG5cdCAgICAvLyBgY29kZWAgcnVucyBpbiBjb250ZXh0IG9mIGl0XG5cdCAgICB2YXIgaW5qZWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICd2YXIgJyArIGJpbmRpbmcgKyAnID0gZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJzsnXG5cdCAgICB9KS5qb2luKCcgJyk7XG5cblx0ICAgIC8vIFVwZGF0ZSBvdXIgc2NvcGUgb2JqZWN0IHdpdGggYW55IG1vZGlmaWNhdGlvbnNcblx0ICAgIHZhciBleHRyYWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICdldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnID0gJyArIGJpbmRpbmcgKyAnOyc7XG5cdCAgICB9KS5qb2luKCcgJyk7XG5cdCAgICByZXR1cm4gaW5qZWN0ZWQgKyBjb2RlICsgZXh0cmFjdGVkO1xuXHQgIH1cblxuXHQgIHZhciBiaW5kaW5ncyA9IF9fbW9kdWxlQmluZGluZ3M7XG5cblx0ICBpZighbW9kdWxlLmhvdC5kYXRhKSB7XG5cdCAgICAvLyBGaXJzdCB0aW1lIGxvYWRpbmcuIFRyeSBhbmQgcGF0Y2ggc29tZXRoaW5nLlxuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IHt9O1xuXHQgICAgdmFyIGV2YWxTY29wZSA9IHt9O1xuXG5cdCAgICB2YXIgbW9kdWxlRXZhbFdpdGhTY29wZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgc2NvcGUgdG8gcmVmbGVjdCBvbmx5IHRoZSB2YWx1ZXMgc3BlY2lmaWVkIGFzXG5cdCAgICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgX19ldmFsIGZ1bmN0aW9uLiBDb3B5IG92ZXIgdmFsdWVzIGZyb20gdGhlXG5cdCAgICAgIC8vIGV4aXN0aW5nIHNjb3BlIGFuZCBpZ25vcmUgdGhlIHJlc3QuXG5cdCAgICAgIE9iamVjdC5rZXlzKGV2YWxTY29wZSkuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcgaW4gZnJhbWUuc2NvcGUpIHtcblx0ICAgICAgICAgIGZyYW1lLnNjb3BlW2FyZ10gPSBldmFsU2NvcGVbYXJnXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBldmFsU2NvcGUgPSBmcmFtZS5zY29wZTtcblxuXHQgICAgICB2YXIgY29kZSA9IGluamVjdFNjb3BlKGV2YWxTY29wZSwgZnJhbWUuYm9keSk7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgbW9kdWxlRXZhbCA9IGZ1bmN0aW9uKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYocGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcGF0Y2hlZC5wcm90b3R5cGUgPSBmLnByb3RvdHlwZTtcblxuXHQgICAgICAgIGV2YWwoYmluZGluZyArICcgPSBwYXRjaGVkO1xcbicpO1xuXG5cdCAgICAgICAgaWYobW9kdWxlLmV4cG9ydHNbYmluZGluZ10pIHtcblx0ICAgICAgICAgIG1vZHVsZS5leHBvcnRzW2JpbmRpbmddID0gcGF0Y2hlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSBtb2R1bGUuaG90LmRhdGEucGF0Y2hlZEJpbmRpbmdzO1xuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgLy8gV2UgbmVlZCB0byByZWlmeSB0aGUgZnVuY3Rpb24gaW4gdGhlIG9yaWdpbmFsIG1vZHVsZSBzb1xuXHQgICAgICAgIC8vIGl0IHJlZmVyZW5jZXMgYW55IG9mIHRoZSBvcmlnaW5hbCBzdGF0ZS4gU3RyaXAgdGhlIG5hbWVcblx0ICAgICAgICAvLyBhbmQgc2ltcGx5IGV2YWwgaXQuXG5cdCAgICAgICAgdmFyIGZ1bmNDb2RlID0gKFxuXHQgICAgICAgICAgJygnICsgZi50b1N0cmluZygpLnJlcGxhY2UoL15mdW5jdGlvbiBcXHcrXFwoLywgJ2Z1bmN0aW9uICgnKSArICcpJ1xuXHQgICAgICAgICk7XG5cdCAgICAgICAgcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWwoZnVuY0NvZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgaWYodHlwZW9mIF9fZXZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlKGdldEV2YWxTb3VyY2UoX19ldmFsKSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2F0Y2goZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBldmFsaW5nOiAnICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKEJ1ZmZlcikgey8qIVxuXHQgKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cblx0ICpcblx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG5cdCAqIEBsaWNlbnNlICBNSVRcblx0ICovXG5cdFxuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Nylcblx0dmFyIGllZWU3NTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KVxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpXG5cdFxuXHRleHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuXHRleHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5cdGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXHRCdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblx0XG5cdHZhciBrTWF4TGVuZ3RoID0gMHgzZmZmZmZmZlxuXHR2YXIgcm9vdFBhcmVudCA9IHt9XG5cdFxuXHQvKipcblx0ICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcblx0ICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcblx0ICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuXHQgKlxuXHQgKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG5cdCAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cblx0ICpcblx0ICogTm90ZTpcblx0ICpcblx0ICogLSBJbXBsZW1lbnRhdGlvbiBtdXN0IHN1cHBvcnQgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMuXG5cdCAqICAgRmlyZWZveCA0LTI5IGxhY2tlZCBzdXBwb3J0LCBmaXhlZCBpbiBGaXJlZm94IDMwKy5cblx0ICogICBTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOC5cblx0ICpcblx0ICogIC0gQ2hyb21lIDktMTAgaXMgbWlzc2luZyB0aGUgYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbi5cblx0ICpcblx0ICogIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuXHQgKiAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblx0ICpcblx0ICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXkgd2lsbFxuXHQgKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCB3aWxsIHdvcmsgY29ycmVjdGx5LlxuXHQgKi9cblx0QnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKDApXG5cdCAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuXHQgICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cblx0ICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG5cdCAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcblx0ICAgICAgICBuZXcgVWludDhBcnJheSgxKS5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9KSgpXG5cdFxuXHQvKipcblx0ICogQ2xhc3M6IEJ1ZmZlclxuXHQgKiA9PT09PT09PT09PT09XG5cdCAqXG5cdCAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgYXJlIGF1Z21lbnRlZFxuXHQgKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2Vcblx0ICogYFVpbnQ4QXJyYXlgIHNvIHRoYXQgc3F1YXJlIGJyYWNrZXQgbm90YXRpb24gd29ya3MgYXMgZXhwZWN0ZWQgLS0gaXQgcmV0dXJuc1xuXHQgKiBhIHNpbmdsZSBvY3RldC5cblx0ICpcblx0ICogQnkgYXVnbWVudGluZyB0aGUgaW5zdGFuY2VzLCB3ZSBjYW4gYXZvaWQgbW9kaWZ5aW5nIHRoZSBgVWludDhBcnJheWBcblx0ICogcHJvdG90eXBlLlxuXHQgKi9cblx0ZnVuY3Rpb24gQnVmZmVyIChhcmcpIHtcblx0ICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuXHQgICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHJldHVybiBuZXcgQnVmZmVyKGFyZywgYXJndW1lbnRzWzFdKVxuXHQgICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnKVxuXHQgIH1cblx0XG5cdCAgdGhpcy5sZW5ndGggPSAwXG5cdCAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcblx0XG5cdCAgLy8gQ29tbW9uIGNhc2UuXG5cdCAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpXG5cdCAgfVxuXHRcblx0ICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLlxuXHQgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIGZyb21TdHJpbmcodGhpcywgYXJnLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICd1dGY4Jylcblx0ICB9XG5cdFxuXHQgIC8vIFVudXN1YWwuXG5cdCAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHtcblx0ICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdGhhdFtpXSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgZW5jb2RpbmcgPSAndXRmOCdcblx0XG5cdCAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLlxuXHQgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuXHQgIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cdFxuXHQgIHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcblx0ICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdClcblx0XG5cdCAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpXG5cdFxuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgb2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG5cdCAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuXHQgIH1cblx0XG5cdCAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblx0XG5cdCAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG5cdCAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0Ly8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5cdGZ1bmN0aW9uIGZyb21UeXBlZEFycmF5ICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICAvLyBUcnVuY2F0aW5nIHRoZSBlbGVtZW50cyBpcyBwcm9iYWJseSBub3Qgd2hhdCBwZW9wbGUgZXhwZWN0IGZyb20gdHlwZWRcblx0ICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuXHQgIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcblx0ICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuXHQgIH1cblx0ICByZXR1cm4gdGhhdFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG5cdCAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcblx0ICB9XG5cdCAgcmV0dXJuIHRoYXRcblx0fVxuXHRcblx0Ly8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC5cblx0Ly8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cblx0ZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuXHQgIHZhciBhcnJheVxuXHQgIHZhciBsZW5ndGggPSAwXG5cdFxuXHQgIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHtcblx0ICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcblx0ICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcblx0ICB9XG5cdCAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuXHQgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG5cdCAgfVxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuXHQgICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG5cdCAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuXHQgICAgdGhhdC5faXNCdWZmZXIgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICB2YXIgZnJvbVBvb2wgPSBsZW5ndGggIT09IDAgJiYgbGVuZ3RoIDw9IEJ1ZmZlci5wb29sU2l6ZSA+Pj4gMVxuXHQgIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cdFxuXHQgIHJldHVybiB0aGF0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuXHQgIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cblx0ICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcblx0ICBpZiAobGVuZ3RoID49IGtNYXhMZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtICcgK1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG5cdCAgfVxuXHQgIHJldHVybiBsZW5ndGggfCAwXG5cdH1cblx0XG5cdGZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7XG5cdCAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNsb3dCdWZmZXIpKSByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG5cdFxuXHQgIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXHQgIGRlbGV0ZSBidWYucGFyZW50XG5cdCAgcmV0dXJuIGJ1ZlxuXHR9XG5cdFxuXHRCdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuXHQgIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG5cdH1cblx0XG5cdEJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuXHQgIH1cblx0XG5cdCAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cdFxuXHQgIHZhciB4ID0gYS5sZW5ndGhcblx0ICB2YXIgeSA9IGIubGVuZ3RoXG5cdFxuXHQgIHZhciBpID0gMFxuXHQgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXHQgIHdoaWxlIChpIDwgbGVuKSB7XG5cdCAgICBpZiAoYVtpXSAhPT0gYltpXSkgYnJlYWtcblx0XG5cdCAgICArK2lcblx0ICB9XG5cdFxuXHQgIGlmIChpICE9PSBsZW4pIHtcblx0ICAgIHggPSBhW2ldXG5cdCAgICB5ID0gYltpXVxuXHQgIH1cblx0XG5cdCAgaWYgKHggPCB5KSByZXR1cm4gLTFcblx0ICBpZiAoeSA8IHgpIHJldHVybiAxXG5cdCAgcmV0dXJuIDBcblx0fVxuXHRcblx0QnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuXHQgIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG5cdCAgICBjYXNlICdoZXgnOlxuXHQgICAgY2FzZSAndXRmOCc6XG5cdCAgICBjYXNlICd1dGYtOCc6XG5cdCAgICBjYXNlICdhc2NpaSc6XG5cdCAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgIGNhc2UgJ3Jhdyc6XG5cdCAgICBjYXNlICd1Y3MyJzpcblx0ICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgIGNhc2UgJ3V0ZjE2bGUnOlxuXHQgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgfVxuXHR9XG5cdFxuXHRCdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcblx0ICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpXG5cdFxuXHQgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuXHQgICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcblx0ICB9IGVsc2UgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG5cdCAgICByZXR1cm4gbGlzdFswXVxuXHQgIH1cblx0XG5cdCAgdmFyIGlcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIGxlbmd0aCA9IDBcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuXHQgIHZhciBwb3MgPSAwXG5cdCAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBpdGVtID0gbGlzdFtpXVxuXHQgICAgaXRlbS5jb3B5KGJ1ZiwgcG9zKVxuXHQgICAgcG9zICs9IGl0ZW0ubGVuZ3RoXG5cdCAgfVxuXHQgIHJldHVybiBidWZcblx0fVxuXHRcblx0ZnVuY3Rpb24gYnl0ZUxlbmd0aCAoc3RyaW5nLCBlbmNvZGluZykge1xuXHQgIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgc3RyaW5nID0gU3RyaW5nKHN0cmluZylcblx0XG5cdCAgaWYgKHN0cmluZy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cdFxuXHQgIHN3aXRjaCAoZW5jb2RpbmcgfHwgJ3V0ZjgnKSB7XG5cdCAgICBjYXNlICdhc2NpaSc6XG5cdCAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgY2FzZSAncmF3Jzpcblx0ICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcblx0ICAgIGNhc2UgJ3VjczInOlxuXHQgICAgY2FzZSAndWNzLTInOlxuXHQgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICBjYXNlICd1dGYtMTZsZSc6XG5cdCAgICAgIHJldHVybiBzdHJpbmcubGVuZ3RoICogMlxuXHQgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGggPj4+IDFcblx0ICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcblx0ICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuXHQgIH1cblx0fVxuXHRCdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblx0XG5cdC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG5cdEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG5cdEJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG5cdFxuXHQvLyB0b1N0cmluZyhlbmNvZGluZywgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5cdEJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHRcblx0ICBzdGFydCA9IHN0YXJ0IHwgMFxuXHQgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblx0XG5cdCAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblx0ICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKGVuZCA8PSBzdGFydCkgcmV0dXJuICcnXG5cdFxuXHQgIHdoaWxlICh0cnVlKSB7XG5cdCAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG5cdCAgICAgIGNhc2UgJ2hleCc6XG5cdCAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1dGY4Jzpcblx0ICAgICAgY2FzZSAndXRmLTgnOlxuXHQgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2FzY2lpJzpcblx0ICAgICAgICByZXR1cm4gYXNjaWlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXHRcblx0ICAgICAgY2FzZSAnYmluYXJ5Jzpcblx0ICAgICAgICByZXR1cm4gYmluYXJ5U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGNhc2UgJ2Jhc2U2NCc6XG5cdCAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cdFxuXHQgICAgICBjYXNlICd1Y3MyJzpcblx0ICAgICAgY2FzZSAndWNzLTInOlxuXHQgICAgICBjYXNlICd1dGYxNmxlJzpcblx0ICAgICAgY2FzZSAndXRmLTE2bGUnOlxuXHQgICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblx0XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG5cdCAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuXHQgICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcblx0ICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG5cdCAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG5cdCAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuXHQgIHZhciBzdHIgPSAnJ1xuXHQgIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG5cdCAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuXHQgICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcblx0ICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcblx0ICB9XG5cdCAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikge1xuXHQgIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcblx0ICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcblx0ICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7XG5cdCAgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxuXHQgIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG5cdCAgYnl0ZU9mZnNldCA+Pj0gMFxuXHRcblx0ICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXHQgIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTFcblx0XG5cdCAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuXHQgIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMClcblx0XG5cdCAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlsc1xuXHQgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcblx0ICB9XG5cdCAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG5cdCAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG5cdCAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcblx0ICAgIH1cblx0ICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgWyB2YWwgXSwgYnl0ZU9mZnNldClcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQpIHtcblx0ICAgIHZhciBmb3VuZEluZGV4ID0gLTFcblx0ICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICBpZiAoYXJyW2J5dGVPZmZzZXQgKyBpXSA9PT0gdmFsW2ZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4XSkge1xuXHQgICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcblx0ICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXhcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3VuZEluZGV4ID0gLTFcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIC0xXG5cdCAgfVxuXHRcblx0ICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxuXHR9XG5cdFxuXHQvLyBgZ2V0YCB3aWxsIGJlIHJlbW92ZWQgaW4gTm9kZSAwLjEzK1xuXHRCdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG5cdCAgY29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG5cdCAgcmV0dXJuIHRoaXMucmVhZFVJbnQ4KG9mZnNldClcblx0fVxuXHRcblx0Ly8gYHNldGAgd2lsbCBiZSByZW1vdmVkIGluIE5vZGUgMC4xMytcblx0QnVmZmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQgKHYsIG9mZnNldCkge1xuXHQgIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuXHQgIHJldHVybiB0aGlzLndyaXRlVUludDgodiwgb2Zmc2V0KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuXHQgIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuXHQgIH0gZWxzZSB7XG5cdCAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuXHQgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuXHQgICAgICBsZW5ndGggPSByZW1haW5pbmdcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG5cdCAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcblx0ICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXHRcblx0ICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuXHQgICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuXHQgIH1cblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuXHQgICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuXHQgIH1cblx0ICByZXR1cm4gaVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuXHQgIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcblx0ICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuXHQgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgZW5jb2RpbmcgPSAndXRmOCdcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cdCAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuXHQgICAgZW5jb2RpbmcgPSBvZmZzZXRcblx0ICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG5cdCAgICBvZmZzZXQgPSAwXG5cdCAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcblx0ICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcblx0ICAgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG5cdCAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcblx0ICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbmNvZGluZyA9IGxlbmd0aFxuXHQgICAgICBsZW5ndGggPSB1bmRlZmluZWRcblx0ICAgIH1cblx0ICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzd2FwID0gZW5jb2Rpbmdcblx0ICAgIGVuY29kaW5nID0gb2Zmc2V0XG5cdCAgICBvZmZzZXQgPSBsZW5ndGggfCAwXG5cdCAgICBsZW5ndGggPSBzd2FwXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcblx0ICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblx0XG5cdCAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG5cdCAgfVxuXHRcblx0ICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXHRcblx0ICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXHQgIGZvciAoOzspIHtcblx0ICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcblx0ICAgICAgY2FzZSAnaGV4Jzpcblx0ICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblx0XG5cdCAgICAgIGNhc2UgJ3V0ZjgnOlxuXHQgICAgICBjYXNlICd1dGYtOCc6XG5cdCAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYXNjaWknOlxuXHQgICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBjYXNlICdiaW5hcnknOlxuXHQgICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAnYmFzZTY0Jzpcblx0ICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuXHQgICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXHRcblx0ICAgICAgY2FzZSAndWNzMic6XG5cdCAgICAgIGNhc2UgJ3Vjcy0yJzpcblx0ICAgICAgY2FzZSAndXRmMTZsZSc6XG5cdCAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcblx0ICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cdFxuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuXHQgICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcblx0ICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgdHlwZTogJ0J1ZmZlcicsXG5cdCAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmVzID0gJydcblx0ICB2YXIgdG1wID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICBpZiAoYnVmW2ldIDw9IDB4N0YpIHtcblx0ICAgICAgcmVzICs9IGRlY29kZVV0ZjhDaGFyKHRtcCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcblx0ICAgICAgdG1wID0gJydcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRtcCArPSAnJScgKyBidWZbaV0udG9TdHJpbmcoMTYpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzICsgZGVjb2RlVXRmOENoYXIodG1wKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuXHQgIH1cblx0ICByZXR1cm4gcmV0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcblx0ICB2YXIgcmV0ID0gJydcblx0ICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cdFxuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG5cdCAgfVxuXHQgIHJldHVybiByZXRcblx0fVxuXHRcblx0ZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cdFxuXHQgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cdFxuXHQgIHZhciBvdXQgPSAnJ1xuXHQgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuXHQgIH1cblx0ICByZXR1cm4gb3V0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG5cdCAgdmFyIHJlcyA9ICcnXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuXHQgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG5cdCAgfVxuXHQgIHJldHVybiByZXNcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG5cdCAgc3RhcnQgPSB+fnN0YXJ0XG5cdCAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXHRcblx0ICBpZiAoc3RhcnQgPCAwKSB7XG5cdCAgICBzdGFydCArPSBsZW5cblx0ICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuXHQgIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcblx0ICAgIHN0YXJ0ID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlblxuXHQgICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcblx0ICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuXHQgICAgZW5kID0gbGVuXG5cdCAgfVxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cdFxuXHQgIHZhciBuZXdCdWZcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIG5ld0J1ZiA9IEJ1ZmZlci5fYXVnbWVudCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpKVxuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuXHQgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG5cdCAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKG5ld0J1Zi5sZW5ndGgpIG5ld0J1Zi5wYXJlbnQgPSB0aGlzLnBhcmVudCB8fCB0aGlzXG5cdFxuXHQgIHJldHVybiBuZXdCdWZcblx0fVxuXHRcblx0Lypcblx0ICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuXHQgIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHZhbFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdCAgfVxuXHRcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG5cdCAgdmFyIG11bCA9IDFcblx0ICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcblx0ICB9XG5cdFxuXHQgIHJldHVybiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblx0XG5cdCAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcblx0ICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG5cdCAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG5cdCAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcblx0ICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF1cblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBpID0gMFxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aFxuXHQgIHZhciBtdWwgPSAxXG5cdCAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuXHQgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuXHQgIH1cblx0ICBtdWwgKj0gMHg4MFxuXHRcblx0ICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXHRcblx0ICByZXR1cm4gdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG5cdCAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuXHQgIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuXHQgIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuXHQgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcblx0ICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcblx0ICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdFxuXHQgIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG5cdCAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuXHQgICAgKHRoaXNbb2Zmc2V0ICsgM10pXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cdCAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXHQgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcblx0ICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuXHQgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblx0XG5cdCAgdmFyIG11bCA9IDFcblx0ICB2YXIgaSA9IDBcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuXHQgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpLCAwKVxuXHRcblx0ICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG5cdCAgdmFyIG11bCA9IDFcblx0ICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG5cdCAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50OCA9IGZ1bmN0aW9uIHdyaXRlVUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcblx0ICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG5cdCAgdGhpc1tvZmZzZXRdID0gdmFsdWVcblx0ICByZXR1cm4gb2Zmc2V0ICsgMVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQxNiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSAmICgweGZmIDw8ICg4ICogKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkpKSkgPj4+XG5cdCAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuXHQgIH1cblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuXHQgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDJcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWVcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuXHQgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgNCk7IGkgPCBqOyBpKyspIHtcblx0ICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcblx0ICB9XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG5cdCAgdmFsdWUgPSArdmFsdWVcblx0ICBvZmZzZXQgPSBvZmZzZXQgfCAwXG5cdCAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuXHQgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcblx0ICB9XG5cdCAgcmV0dXJuIG9mZnNldCArIDRcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cdFxuXHQgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDBcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuXHQgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuXHQgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG5cdCAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIHtcblx0ICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblx0XG5cdCAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcblx0ICB9XG5cdFxuXHQgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcblx0ICB2YXIgbXVsID0gMVxuXHQgIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuXHQgIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcblx0ICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcblx0ICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcblx0ICB9XG5cdFxuXHQgIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuXHQgIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcblx0ICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuXHQgIHJldHVybiBvZmZzZXQgKyAxXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgMlxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG5cdCAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gdmFsdWVcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyAyXG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHZhbHVlID0gK3ZhbHVlXG5cdCAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuXHQgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuXHQgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuXHQgICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuXHQgIH1cblx0ICByZXR1cm4gb2Zmc2V0ICsgNFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICB2YWx1ZSA9ICt2YWx1ZVxuXHQgIG9mZnNldCA9IG9mZnNldCB8IDBcblx0ICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcblx0ICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcblx0ICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG5cdCAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcblx0ICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG5cdCAgICB0aGlzW29mZnNldCArIDNdID0gdmFsdWVcblx0ICB9IGVsc2Uge1xuXHQgICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG5cdCAgfVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG5cdCAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG5cdCAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxuXHQgIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG5cdCAgaWYgKCFub0Fzc2VydCkge1xuXHQgICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgNCwgMy40MDI4MjM0NjYzODUyODg2ZSszOCwgLTMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgpXG5cdCAgfVxuXHQgIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuXHQgIHJldHVybiBvZmZzZXQgKyA0XG5cdH1cblx0XG5cdEJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFID0gZnVuY3Rpb24gd3JpdGVGbG9hdExFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcblx0ICBpZiAoIW5vQXNzZXJ0KSB7XG5cdCAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuXHQgIH1cblx0ICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcblx0ICByZXR1cm4gb2Zmc2V0ICsgOFxuXHR9XG5cdFxuXHRCdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuXHQgIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcblx0fVxuXHRcblx0QnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcblx0ICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxuXHR9XG5cdFxuXHQvLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5cdEJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcblx0ICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcblx0ICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG5cdCAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuXHQgIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuXHQgIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXHRcblx0ICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcblx0ICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblx0XG5cdCAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuXHQgIGlmICh0YXJnZXRTdGFydCA8IDApIHtcblx0ICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcblx0ICB9XG5cdCAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuXHQgIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXHRcblx0ICAvLyBBcmUgd2Ugb29iP1xuXHQgIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcblx0ICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcblx0ICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG5cdCAgfVxuXHRcblx0ICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcblx0XG5cdCAgaWYgKGxlbiA8IDEwMDAgfHwgIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5fc2V0KHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0U3RhcnQpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbGVuXG5cdH1cblx0XG5cdC8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKVxuXHRCdWZmZXIucHJvdG90eXBlLmZpbGwgPSBmdW5jdGlvbiBmaWxsICh2YWx1ZSwgc3RhcnQsIGVuZCkge1xuXHQgIGlmICghdmFsdWUpIHZhbHVlID0gMFxuXHQgIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuXHQgIGlmICghZW5kKSBlbmQgPSB0aGlzLmxlbmd0aFxuXHRcblx0ICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cdFxuXHQgIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuXHQgIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cblx0ICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVyblxuXHRcblx0ICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG5cdCAgaWYgKGVuZCA8IDAgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgb3V0IG9mIGJvdW5kcycpXG5cdFxuXHQgIHZhciBpXG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcblx0ICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcblx0ICAgICAgdGhpc1tpXSA9IHZhbHVlXG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG5cdCAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXG5cdCAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG5cdCAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHRoaXNcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cblx0ICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG5cdCAqL1xuXHRCdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcblx0ICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcblx0ICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheSh0aGlzLmxlbmd0aClcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuXHQgICAgICAgIGJ1ZltpXSA9IHRoaXNbaV1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBIRUxQRVIgRlVOQ1RJT05TXG5cdC8vID09PT09PT09PT09PT09PT1cblx0XG5cdHZhciBCUCA9IEJ1ZmZlci5wcm90b3R5cGVcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGEgVWludDhBcnJheSAqaW5zdGFuY2UqIChub3QgdGhlIFVpbnQ4QXJyYXkgY2xhc3MhKSB3aXRoIEJ1ZmZlciBtZXRob2RzXG5cdCAqL1xuXHRCdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG5cdCAgYXJyLmNvbnN0cnVjdG9yID0gQnVmZmVyXG5cdCAgYXJyLl9pc0J1ZmZlciA9IHRydWVcblx0XG5cdCAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgVWludDhBcnJheSBzZXQgbWV0aG9kIGJlZm9yZSBvdmVyd3JpdGluZ1xuXHQgIGFyci5fc2V0ID0gYXJyLnNldFxuXHRcblx0ICAvLyBkZXByZWNhdGVkLCB3aWxsIGJlIHJlbW92ZWQgaW4gbm9kZSAwLjEzK1xuXHQgIGFyci5nZXQgPSBCUC5nZXRcblx0ICBhcnIuc2V0ID0gQlAuc2V0XG5cdFxuXHQgIGFyci53cml0ZSA9IEJQLndyaXRlXG5cdCAgYXJyLnRvU3RyaW5nID0gQlAudG9TdHJpbmdcblx0ICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuXHQgIGFyci50b0pTT04gPSBCUC50b0pTT05cblx0ICBhcnIuZXF1YWxzID0gQlAuZXF1YWxzXG5cdCAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG5cdCAgYXJyLmluZGV4T2YgPSBCUC5pbmRleE9mXG5cdCAgYXJyLmNvcHkgPSBCUC5jb3B5XG5cdCAgYXJyLnNsaWNlID0gQlAuc2xpY2Vcblx0ICBhcnIucmVhZFVJbnRMRSA9IEJQLnJlYWRVSW50TEVcblx0ICBhcnIucmVhZFVJbnRCRSA9IEJQLnJlYWRVSW50QkVcblx0ICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG5cdCAgYXJyLnJlYWRVSW50MTZMRSA9IEJQLnJlYWRVSW50MTZMRVxuXHQgIGFyci5yZWFkVUludDE2QkUgPSBCUC5yZWFkVUludDE2QkVcblx0ICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG5cdCAgYXJyLnJlYWRVSW50MzJCRSA9IEJQLnJlYWRVSW50MzJCRVxuXHQgIGFyci5yZWFkSW50TEUgPSBCUC5yZWFkSW50TEVcblx0ICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG5cdCAgYXJyLnJlYWRJbnQ4ID0gQlAucmVhZEludDhcblx0ICBhcnIucmVhZEludDE2TEUgPSBCUC5yZWFkSW50MTZMRVxuXHQgIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG5cdCAgYXJyLnJlYWRJbnQzMkxFID0gQlAucmVhZEludDMyTEVcblx0ICBhcnIucmVhZEludDMyQkUgPSBCUC5yZWFkSW50MzJCRVxuXHQgIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG5cdCAgYXJyLnJlYWRGbG9hdEJFID0gQlAucmVhZEZsb2F0QkVcblx0ICBhcnIucmVhZERvdWJsZUxFID0gQlAucmVhZERvdWJsZUxFXG5cdCAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuXHQgIGFyci53cml0ZVVJbnQ4ID0gQlAud3JpdGVVSW50OFxuXHQgIGFyci53cml0ZVVJbnRMRSA9IEJQLndyaXRlVUludExFXG5cdCAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcblx0ICBhcnIud3JpdGVVSW50MTZMRSA9IEJQLndyaXRlVUludDE2TEVcblx0ICBhcnIud3JpdGVVSW50MTZCRSA9IEJQLndyaXRlVUludDE2QkVcblx0ICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcblx0ICBhcnIud3JpdGVVSW50MzJCRSA9IEJQLndyaXRlVUludDMyQkVcblx0ICBhcnIud3JpdGVJbnRMRSA9IEJQLndyaXRlSW50TEVcblx0ICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcblx0ICBhcnIud3JpdGVJbnQ4ID0gQlAud3JpdGVJbnQ4XG5cdCAgYXJyLndyaXRlSW50MTZMRSA9IEJQLndyaXRlSW50MTZMRVxuXHQgIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcblx0ICBhcnIud3JpdGVJbnQzMkxFID0gQlAud3JpdGVJbnQzMkxFXG5cdCAgYXJyLndyaXRlSW50MzJCRSA9IEJQLndyaXRlSW50MzJCRVxuXHQgIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcblx0ICBhcnIud3JpdGVGbG9hdEJFID0gQlAud3JpdGVGbG9hdEJFXG5cdCAgYXJyLndyaXRlRG91YmxlTEUgPSBCUC53cml0ZURvdWJsZUxFXG5cdCAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG5cdCAgYXJyLmZpbGwgPSBCUC5maWxsXG5cdCAgYXJyLmluc3BlY3QgPSBCUC5pbnNwZWN0XG5cdCAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cdFxuXHQgIHJldHVybiBhcnJcblx0fVxuXHRcblx0dmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtelxcLV0vZ1xuXHRcblx0ZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuXHQgIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuXHQgIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcblx0ICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG5cdCAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcblx0ICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3Rcblx0ICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcblx0ICAgIHN0ciA9IHN0ciArICc9J1xuXHQgIH1cblx0ICByZXR1cm4gc3RyXG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuXHQgIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b0hleCAobikge1xuXHQgIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuXHQgIHJldHVybiBuLnRvU3RyaW5nKDE2KVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuXHQgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcblx0ICB2YXIgY29kZVBvaW50XG5cdCAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcblx0ICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICB2YXIgYnl0ZXMgPSBbXVxuXHQgIHZhciBpID0gMFxuXHRcblx0ICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXHRcblx0ICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcblx0ICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG5cdCAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG5cdCAgICAgIGlmIChsZWFkU3Vycm9nYXRlKSB7XG5cdCAgICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuXHQgICAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcblx0ICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuXHQgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXHQgICAgICAgICAgY29udGludWVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcblx0ICAgICAgICAgIGNvZGVQb2ludCA9IGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDAgfCAweDEwMDAwXG5cdCAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBubyBsZWFkIHlldFxuXHRcblx0ICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG5cdCAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG5cdCAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG5cdCAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG5cdCAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHZhbGlkIGxlYWRcblx0ICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblx0ICAgICAgICAgIGNvbnRpbnVlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcblx0ICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuXHQgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcblx0ICAgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblx0ICAgIH1cblx0XG5cdCAgICAvLyBlbmNvZGUgdXRmOFxuXHQgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuXHQgICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuXHQgICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblx0ICAgICAgYnl0ZXMucHVzaChcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcblx0ICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuXHQgICAgICApXG5cdCAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuXHQgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG5cdCAgICAgIClcblx0ICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgyMDAwMDApIHtcblx0ICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG5cdCAgICAgIGJ5dGVzLnB1c2goXG5cdCAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuXHQgICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcblx0ICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG5cdCAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcblx0ICAgICAgKVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJ5dGVzXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG5cdCAgdmFyIGJ5dGVBcnJheSA9IFtdXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblx0ICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuXHQgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuXHQgIH1cblx0ICByZXR1cm4gYnl0ZUFycmF5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG5cdCAgdmFyIGMsIGhpLCBsb1xuXHQgIHZhciBieXRlQXJyYXkgPSBbXVxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblx0XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcblx0ICAgIGhpID0gYyA+PiA4XG5cdCAgICBsbyA9IGMgJSAyNTZcblx0ICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuXHQgICAgYnl0ZUFycmF5LnB1c2goaGkpXG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYnl0ZUFycmF5XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuXHQgIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcblx0fVxuXHRcblx0ZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuXHQgICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG5cdCAgfVxuXHQgIHJldHVybiBpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRlY29kZVV0ZjhDaGFyIChzdHIpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpXG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgweEZGRkQpIC8vIFVURiA4IGludmFsaWQgY2hhclxuXHQgIH1cblx0fVxuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTYpLkJ1ZmZlcikpXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfSxcbi8qIDE4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9BUlJBWV9fLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7KGZ1bmN0aW9uKCl7XG5cdCAgdmFyIGluaXQsIEJhY29uO1xuXHQgIGluaXQgPSBmdW5jdGlvbihCYWNvbil7XG5cdCAgICB2YXIgY2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsIHNjaGVkdWxlRnJhbWU7XG5cdCAgICBjYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbigpe1xuXHQgICAgICByZXR1cm4gd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1vekNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cub0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubXNDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgY2xlYXJUaW1lb3V0O1xuXHQgICAgfSgpO1xuXHQgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oKXtcblx0ICAgICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbihjYil7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoY2IsIDEwMDAgLyA2MCk7XG5cdCAgICAgIH07XG5cdCAgICB9KCk7XG5cdCAgICBzY2hlZHVsZUZyYW1lID0gZnVuY3Rpb24oY2Ipe1xuXHQgICAgICByZXR1cm4gKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgZnVuY3Rpb24gYW5pbUxvb3AoeSl7XG5cdCAgICAgICAgICBjYih5KTtcblx0ICAgICAgICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oeCl7XG5cdCAgICAgICAgICAgIHJldHVybiBhbmltTG9vcCh4KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gYW5pbUxvb3A7XG5cdCAgICAgIH0oKSkoKTtcblx0ICAgIH07XG5cdCAgICBCYWNvbi5zY2hlZHVsZUFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oKXtcblx0ICAgICAgcmV0dXJuIEJhY29uLmZyb21CaW5kZXIoZnVuY3Rpb24oaGFuZGxlcil7XG5cdCAgICAgICAgdmFyIGlkO1xuXHQgICAgICAgIGlkID0gc2NoZWR1bGVGcmFtZShoYW5kbGVyKTtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIHJldHVybiBjYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUoaWQpO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIEJhY29uLnJlcGVhdGVkbHlPbkZyYW1lID0gZnVuY3Rpb24odmFsdWVzLCBkaXZpc29yKXtcblx0ICAgICAgdmFyIGluZGV4O1xuXHQgICAgICBkaXZpc29yID09IG51bGwgJiYgKGRpdmlzb3IgPSAxKTtcblx0ICAgICAgaW5kZXggPSAwO1xuXHQgICAgICByZXR1cm4gQmFjb24uc2NoZWR1bGVBbmltYXRpb25GcmFtZSgpLnNjYW4oMCwgKGZ1bmN0aW9uKGl0KXtcblx0ICAgICAgICByZXR1cm4gaXQgKyAxO1xuXHQgICAgICB9KSkuZmlsdGVyKGZ1bmN0aW9uKHRpY2spe1xuXHQgICAgICAgIHJldHVybiAhKHRpY2sgJSBkaXZpc29yKTtcblx0ICAgICAgfSkubWFwKGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlc1tpbmRleCsrICUgdmFsdWVzLmxlbmd0aF07XG5cdCAgICAgIH0pLnRvRXZlbnRTdHJlYW0oKTtcblx0ICAgIH07XG5cdCAgICByZXR1cm4gQmFjb247XG5cdCAgfTtcblx0ICBpZiAodHlwZW9mIG1vZHVsZSAhPSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09IG51bGwpIHtcblx0ICAgIEJhY29uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gaW5pdChCYWNvbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0cnVlKSB7XG5cdCAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXyA9IFtfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KV0sIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9IChpbml0KSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSAodHlwZW9mIF9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyA9PT0gJ2Z1bmN0aW9uJyA/IChfX1dFQlBBQ0tfQU1EX0RFRklORV9GQUNUT1JZX18uYXBwbHkoZXhwb3J0cywgX19XRUJQQUNLX0FNRF9ERUZJTkVfQVJSQVlfXykpIDogX19XRUJQQUNLX0FNRF9ERUZJTkVfRkFDVE9SWV9fKSwgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gIT09IHVuZGVmaW5lZCAmJiAobW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaW5pdCh0aGlzLkJhY29uKTtcblx0ICAgIH1cblx0ICB9XG5cdH0pLmNhbGwodGhpcyk7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxNykobW9kdWxlKSkpXG5cbi8qKiovIH0sXG4vKiAxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0KGZ1bmN0aW9uKCl7XG5cdCAgICB2YXIgYmFjb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0ICAgIFxuXHQgICAgZXhwb3J0cy51c2luZyA9IGJhY29uLnVzaW5nO1xuXHQgICAgZXhwb3J0cy50byA9IGJhY29uLnRvO1xuXHRcblx0fSkoKTtcblxuXG4vKioqLyB9LFxuLyogMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihCdWZmZXIpIHsoZnVuY3Rpb24oKSB7XG5cdFxuXHQgICAgdmFyIF9pbmRleE9mID0gZnVuY3Rpb24oYnVmZmVyLCBwYXR0ZXJuLCBpKSB7XG5cdFx0dmFyIGxlbmd0aCwgZ29vZDtcblx0XG5cdFx0aWYgKCAhQnVmZmVyLmlzQnVmZmVyKHBhdHRlcm4pICkgIHBhdHRlcm4gPSBuZXcoQnVmZmVyKShwYXR0ZXJuKTtcblx0XHRpZiAoIHR5cGVvZiBpID09ICd1bmRlZmluZWQnICkgaSA9IDA7XG5cdFxuXHRcdHZhciBsZW5ndGggPSBidWZmZXIubGVuZ3RoIC0gcGF0dGVybi5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpIDw9IGxlbmd0aCApIHtcblx0XHQgICAgZ29vZCA9IHRydWU7XG5cdFx0ICAgIFxuXHRcdCAgICBmb3IgKCB2YXIgaiA9IDA7IGogPCBwYXR0ZXJuLmxlbmd0aDsgaisrICkge1xuXHRcdFx0aWYgKCBidWZmZXJbaStqIF0gIT09IHBhdHRlcm5bal0gKSB7XG5cdFx0XHQgICAgZ29vZCA9IGZhbHNlO1xuXHRcdFx0ICAgIGJyZWFrO1xuXHRcdFx0fVxuXHRcdCAgICB9XG5cdFx0ICAgIFxuXHRcdCAgICBpZiAoIGdvb2QgKSByZXR1cm4gaTtcblx0XHQgICAgaSsrO1xuXHRcdH1cblx0XHRcblx0XHRyZXR1cm4gLTE7XG5cdFxuXHQgICAgfTtcblx0XG5cdFxuXHQgICAgdmFyIF9jb25jYXQgPSBmdW5jdGlvbihidWZmZXJzKSB7XG5cdFx0dmFyIF9idWZmZXJzID0gW107XG5cdFx0YnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHRcdCAgICBpZiAoICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSApIHtcblx0XHRcdGJ1ZmZlciA9IG5ldyhCdWZmZXIpKGJ1ZmZlcik7XG5cdFx0ICAgIH1cblx0XG5cdFx0ICAgIF9idWZmZXJzLnB1c2goYnVmZmVyKTtcblx0XG5cdFx0fSk7XG5cdFxuXHRcdHJldHVybiBCdWZmZXIuY29uY2F0KF9idWZmZXJzKTtcblx0XG5cdCAgICB9O1xuXHRcblx0ICAgIFxuXHQgICAgdmFyIHRvID0gZnVuY3Rpb24ob2JqKSB7IFxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkob2JqKSApIHtcblx0XHQgICAgb2JqID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHR9XG5cdFxuXHRcdHJldHVybiBuZXcgdG9fd3JhcHBlcihvYmopOyBcblx0XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciB0b193cmFwcGVyID0gZnVuY3Rpb24ob2JqKSB7IHRoaXMuX3dyYXBwZWQgPSBvYmo7IH07XG5cdFxuXHQgICAgdG9fd3JhcHBlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oYnVmZmVycykge1xuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoYnVmZmVycykgKSB7XG5cdFx0ICAgIGJ1ZmZlcnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcdH1cblx0XG5cdFx0dmFyIF9idWZmZXJzID0gW107XG5cdFx0dGhpcy5fd3JhcHBlZC5mb3JFYWNoKGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHRcdCAgICBfYnVmZmVycy5wdXNoKF9jb25jYXQoW2J1ZmZlcl0uY29uY2F0KGJ1ZmZlcnMpKSk7XG5cdFxuXHRcdH0pO1xuXHRcblx0XHRyZXR1cm4gX2J1ZmZlcnM7XG5cdFxuXHQgICAgfTtcblx0XG5cdFxuXHQgICAgdG9fd3JhcHBlci5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uKGJ1ZmZlcnMpIHtcblx0XHRpZiAoICFBcnJheS5pc0FycmF5KGJ1ZmZlcnMpICkge1xuXHRcdCAgICBidWZmZXJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0XHR9XG5cdFxuXHRcdHZhciBfYnVmZmVycyA9IFtdO1xuXHRcdHRoaXMuX3dyYXBwZWQuZm9yRWFjaChmdW5jdGlvbihidWZmZXIpIHtcblx0XHQgICAgX2J1ZmZlcnMucHVzaChfY29uY2F0KGJ1ZmZlcnMuY29uY2F0KGJ1ZmZlcikpKTtcblx0XG5cdFx0fSk7XG5cdFxuXHRcdHJldHVybiBfYnVmZmVycztcblx0XG5cdCAgICB9O1xuXHRcblx0XG5cdCAgICB2YXIgdXNpbmcgPSBmdW5jdGlvbihvYmopIHtcblx0XHRyZXR1cm4gbmV3IHVzaW5nX3dyYXBwZXIob2JqKTtcblx0ICAgIH07XG5cdFxuXHRcblx0ICAgIHZhciB1c2luZ193cmFwcGVyID0gZnVuY3Rpb24ob2JqKSB7IHRoaXMuX3dyYXBwZWQgPSBvYmo7IH07XG5cdFxuXHQgICAgdXNpbmdfd3JhcHBlci5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbihidWZmZXIpIHtcblx0XHR2YXIgcGF0dGVybiA9IHRoaXMuX3dyYXBwZWQsIGJ1ZmZlcnMgPSBbXTtcblx0XHR2YXIgX2J1ZmZlciwgaSA9IDAsIGogPSAwO1xuXHRcblx0XHRpZiAoICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSApIHtcblx0XHQgICAgYnVmZmVyID0gbmV3KEJ1ZmZlcikoYnVmZmVyKTtcblx0XHR9XG5cdFxuXHRcdHdoaWxlICggaSA+IC0xICkge1xuXHRcdCAgICBpID0gX2luZGV4T2YoYnVmZmVyLCBwYXR0ZXJuLCBqKTtcblx0XHQgICAgaWYgKCBpID09IC0xICkge1xuXHRcdFx0YnVmZmVycy5wdXNoKGJ1ZmZlci5zbGljZShqKSk7XG5cdFx0XHRicmVhaztcblx0XHQgICAgfSBcblx0XG5cdFx0ICAgIF9idWZmZXIgPSBidWZmZXIuc2xpY2UoaiwgaSk7XG5cdFx0ICAgIGJ1ZmZlcnMucHVzaChfYnVmZmVyKTtcblx0XHQgICAgaiArPSAoX2J1ZmZlci5sZW5ndGgrcGF0dGVybi5sZW5ndGgpO1xuXHRcblx0XHR9XG5cdFxuXHRcdHJldHVybiAoIGJ1ZmZlcnMubGVuZ3RoID4gMCApPyBidWZmZXJzIDogW2J1ZmZlcl07XG5cdFxuXHQgICAgfTtcblx0XG5cdCAgICB1c2luZ193cmFwcGVyLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24oYnVmZmVycykge1xuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoYnVmZmVycykgKSB7XG5cdFx0ICAgIGJ1ZmZlcnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHRcdH1cblx0XHRcblx0XHR2YXIgZ2x1ZSA9IHRoaXMuX3dyYXBwZWQsIF9idWZmZXJzID0gW107XG5cdFx0YnVmZmVycy5mb3JFYWNoKGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHRcdCAgICBfYnVmZmVycy5wdXNoKGJ1ZmZlcik7XG5cdFx0ICAgIGlmICggX2J1ZmZlcnMubGVuZ3RoIDwgYnVmZmVycy5sZW5ndGgrKGJ1ZmZlcnMubGVuZ3RoLTEpICl7XG5cdFx0XHRfYnVmZmVycy5wdXNoKGdsdWUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdCAgICB9XG5cdFxuXHRcdH0pO1xuXHRcblx0XHRyZXR1cm4gX2NvbmNhdChfYnVmZmVycyk7XG5cdCAgICB9O1xuXHQgICAgXG5cdFxuXHQgICAgZXhwb3J0cy51c2luZyA9IHVzaW5nO1xuXHQgICAgZXhwb3J0cy50byA9IHRvO1xuXHRcblx0fSkoKTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTYpLkJ1ZmZlcikpXG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBsaXN0ID0gW107XHJcblx0XHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHRcdHZhciByZXN1bHQgPSBbXTtcclxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdFx0aWYoaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChpdGVtWzFdKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHJlc3VsdC5qb2luKFwiXCIpO1xyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH1cblxuLyoqKi8gfSxcbi8qIDIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKSgpO1xuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJodG1sLGJvZHksI2FwcCwjZ2FtZXt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO21hcmdpbjowO292ZXJmbG93OmhpZGRlbn0jYXBwe2JveC1zaXppbmc6Ym9yZGVyLWJveDtwYWRkaW5nLWJvdHRvbToxMDBweH0jY29udHJvbHN7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwcHg7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOjA7bGVmdDowfWNhbnZhc3tkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDAlfWNhbnZhcywjZnV0dXJlLXNsaWRlcnt3aWR0aDoxMDAlfS5mdXR1cmUtc2xpZGVye21hcmdpbi10b3A6LTlweH1cIiwgXCJcIl0pO1xuXG4vKioqLyB9LFxuLyogMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBNb2R1bGUgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0XG5cdHZhciBhc3NlcnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGRlZ3JlZXMgdG8gcmFkaWFucy5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRlZ3JlZXNcblx0ICogQHJldHVybiB7TnVtYmVyfVxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGVncmVlcykge1xuXHQgIGFzc2VydCgnbnVtYmVyJyA9PSB0eXBlb2YgZGVncmVlcywgJ0RlZ3JlZXMgc2hvdWxkIGJlIGEgbnVtYmVyJyk7XG5cdCAgcmV0dXJuIGRlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCk7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy43LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGJhc2VHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KSxcblx0ICAgIHRvUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBvbiBgb2JqZWN0YC4gSWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzXG5cdCAqIGB1bmRlZmluZWRgIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGB1bmRlZmluZWRgLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICdhJzogW3sgJ2InOiB7ICdjJzogMyB9IH1dIH07XG5cdCAqXG5cdCAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuXHQgKiAvLyA9PiAnZGVmYXVsdCdcblx0ICovXG5cdGZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuXHQgIHZhciByZXN1bHQgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGJhc2VHZXQob2JqZWN0LCB0b1BhdGgocGF0aCksIHBhdGggKyAnJyk7XG5cdCAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdFZhbHVlIDogcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldDtcblxuXG4vKioqLyB9LFxuLyogMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy43LjIgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0cmluZyBwYXRoc1xuXHQgKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW3BhdGhLZXldIFRoZSBrZXkgcmVwcmVzZW50YXRpb24gb2YgcGF0aC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgsIHBhdGhLZXkpIHtcblx0ICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcblx0ICAgIHBhdGggPSBbcGF0aEtleV07XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IDAsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIG9iamVjdCA9IG9iamVjdFtwYXRoW2luZGV4KytdXTtcblx0ICB9XG5cdCAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy44LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0IGlzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0IGlzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgYmFzZVRvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcblx0ICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvUGF0aDtcblxuXG4vKioqLyB9LFxuLyogMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgW3NwZWNpYWwgY2hhcmFjdGVyc10oaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vY2hhcmFjdGVycy5odG1sI3NwZWNpYWwpLlxuXHQgKiBJbiBhZGRpdGlvbiB0byBzcGVjaWFsIGNoYXJhY3RlcnMgdGhlIGZvcndhcmQgc2xhc2ggaXMgZXNjYXBlZCB0byBhbGxvdyBmb3Jcblx0ICogZWFzaWVyIGBldmFsYCB1c2UgYW5kIGBGdW5jdGlvbmAgY29tcGlsYXRpb24uXG5cdCAqL1xuXHR2YXIgcmVSZWdFeHBDaGFycyA9IC9bLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZyxcblx0ICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkgPiA1KS4gKi9cblx0dmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuXHR2YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuXHQgIGVzY2FwZVJlZ0V4cChmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpKVxuXHQgIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuXHQpO1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUlzQXJyYXkgPSBnZXROYXRpdmUoQXJyYXksICdpc0FycmF5Jyk7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICByZXR1cm4gaXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheVRhZztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc05hdGl2ZShfKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG5cdCAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgaWYgKG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWcpIHtcblx0ICAgIHJldHVybiByZUlzTmF0aXZlLnRlc3QoZm5Ub1N0cmluZy5jYWxsKHZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEVzY2FwZXMgdGhlIGBSZWdFeHBgIHNwZWNpYWwgY2hhcmFjdGVycyBcIlxcXCIsIFwiL1wiLCBcIl5cIiwgXCIkXCIsIFwiLlwiLCBcInxcIiwgXCI/XCIsXG5cdCAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgU3RyaW5nXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuXHQgKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6XFwvXFwvbG9kYXNoXFwuY29tXFwvXFwpJ1xuXHQgKi9cblx0ZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuXHQgIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuXHQgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhcnMudGVzdChzdHJpbmcpKVxuXHQgICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcblx0ICAgIDogc3RyaW5nO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMS4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjIgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBjcmVhdGVXcmFwcGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSksXG5cdCAgICByZXBsYWNlSG9sZGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMTApLFxuXHQgICAgcmVzdFBhcmFtID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB3cmFwcGVyIG1ldGFkYXRhLiAqL1xuXHR2YXIgUEFSVElBTF9SSUdIVF9GTEFHID0gNjQ7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGBfLnBhcnRpYWxgIG9yIGBfLnBhcnRpYWxSaWdodGAgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyBUaGUgcGFydGlhbCBiaXQgZmxhZy5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgcGFydGlhbCBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZVBhcnRpYWwoZmxhZykge1xuXHQgIHZhciBwYXJ0aWFsRnVuYyA9IHJlc3RQYXJhbShmdW5jdGlvbihmdW5jLCBwYXJ0aWFscykge1xuXHQgICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgcGFydGlhbEZ1bmMucGxhY2Vob2xkZXIpO1xuXHQgICAgcmV0dXJuIGNyZWF0ZVdyYXBwZXIoZnVuYywgZmxhZywgbnVsbCwgcGFydGlhbHMsIGhvbGRlcnMpO1xuXHQgIH0pO1xuXHQgIHJldHVybiBwYXJ0aWFsRnVuYztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8ucGFydGlhbGAgZXhjZXB0IHRoYXQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzXG5cdCAqIGFyZSBhcHBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBUaGUgYF8ucGFydGlhbFJpZ2h0LnBsYWNlaG9sZGVyYCB2YWx1ZSwgd2hpY2ggZGVmYXVsdHMgdG8gYF9gIGluIG1vbm9saXRoaWNcblx0ICogYnVpbGRzLCBtYXkgYmUgdXNlZCBhcyBhIHBsYWNlaG9sZGVyIGZvciBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBkb2VzIG5vdCBzZXQgdGhlIGBsZW5ndGhgIHByb3BlcnR5IG9mIHBhcnRpYWxseVxuXHQgKiBhcHBsaWVkIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cblx0ICogQHBhcmFtIHsuLi4qfSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkge1xuXHQgKiAgIHJldHVybiBncmVldGluZyArICcgJyArIG5hbWU7XG5cdCAqIH07XG5cdCAqXG5cdCAqIHZhciBncmVldEZyZWQgPSBfLnBhcnRpYWxSaWdodChncmVldCwgJ2ZyZWQnKTtcblx0ICogZ3JlZXRGcmVkKCdoaScpO1xuXHQgKiAvLyA9PiAnaGkgZnJlZCdcblx0ICpcblx0ICogLy8gdXNpbmcgcGxhY2Vob2xkZXJzXG5cdCAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdoZWxsbycsIF8pO1xuXHQgKiBzYXlIZWxsb1RvKCdmcmVkJyk7XG5cdCAqIC8vID0+ICdoZWxsbyBmcmVkJ1xuXHQgKi9cblx0dmFyIHBhcnRpYWxSaWdodCA9IGNyZWF0ZVBhcnRpYWwoUEFSVElBTF9SSUdIVF9GTEFHKTtcblx0XG5cdC8vIEFzc2lnbiBkZWZhdWx0IHBsYWNlaG9sZGVycy5cblx0cGFydGlhbFJpZ2h0LnBsYWNlaG9sZGVyID0ge307XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHBhcnRpYWxSaWdodDtcblxuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsvKipcblx0ICogbG9kYXNoIDMuMC42IChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBhcnJheUNvcHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSxcblx0ICAgIGJhc2VDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSxcblx0ICAgIHJlcGxhY2VIb2xkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB3cmFwcGVyIG1ldGFkYXRhLiAqL1xuXHR2YXIgQklORF9GTEFHID0gMSxcblx0ICAgIEJJTkRfS0VZX0ZMQUcgPSAyLFxuXHQgICAgQ1VSUllfQk9VTkRfRkxBRyA9IDQsXG5cdCAgICBDVVJSWV9GTEFHID0gOCxcblx0ICAgIENVUlJZX1JJR0hUX0ZMQUcgPSAxNixcblx0ICAgIFBBUlRJQUxfRkxBRyA9IDMyLFxuXHQgICAgUEFSVElBTF9SSUdIVF9GTEFHID0gNjQsXG5cdCAgICBBUllfRkxBRyA9IDEyODtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdHZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuXHQgICAgbmF0aXZlTWluID0gTWF0aC5taW47XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBwYXJ0aWFsbHkgYXBwbGllZCBhcmd1bWVudHMsXG5cdCAqIHBsYWNlaG9sZGVycywgYW5kIHByb3ZpZGVkIGFyZ3VtZW50cyBpbnRvIGEgc2luZ2xlIGFycmF5IG9mIGFyZ3VtZW50cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGFyZ3MgVGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cblx0ICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBob2xkZXJzIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGNvbXBvc2VkIGFyZ3VtZW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIGNvbXBvc2VBcmdzKGFyZ3MsIHBhcnRpYWxzLCBob2xkZXJzKSB7XG5cdCAgdmFyIGhvbGRlcnNMZW5ndGggPSBob2xkZXJzLmxlbmd0aCxcblx0ICAgICAgYXJnc0luZGV4ID0gLTEsXG5cdCAgICAgIGFyZ3NMZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBob2xkZXJzTGVuZ3RoLCAwKSxcblx0ICAgICAgbGVmdEluZGV4ID0gLTEsXG5cdCAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KGFyZ3NMZW5ndGggKyBsZWZ0TGVuZ3RoKTtcblx0XG5cdCAgd2hpbGUgKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge1xuXHQgICAgcmVzdWx0W2xlZnRJbmRleF0gPSBwYXJ0aWFsc1tsZWZ0SW5kZXhdO1xuXHQgIH1cblx0ICB3aGlsZSAoKythcmdzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG5cdCAgICByZXN1bHRbaG9sZGVyc1thcmdzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4XTtcblx0ICB9XG5cdCAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuXHQgICAgcmVzdWx0W2xlZnRJbmRleCsrXSA9IGFyZ3NbYXJnc0luZGV4KytdO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBjb21wb3NlQXJnc2AgZXhjZXB0IHRoYXQgdGhlIGFyZ3VtZW50cyBjb21wb3NpdGlvblxuXHQgKiBpcyB0YWlsb3JlZCBmb3IgYF8ucGFydGlhbFJpZ2h0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IGFyZ3MgVGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cblx0ICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2UgcHJvdmlkZWQuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhvbGRlcnMgVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tcG9zZWQgYXJndW1lbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFscywgaG9sZGVycykge1xuXHQgIHZhciBob2xkZXJzSW5kZXggPSAtMSxcblx0ICAgICAgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuXHQgICAgICBhcmdzSW5kZXggPSAtMSxcblx0ICAgICAgYXJnc0xlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIGhvbGRlcnNMZW5ndGgsIDApLFxuXHQgICAgICByaWdodEluZGV4ID0gLTEsXG5cdCAgICAgIHJpZ2h0TGVuZ3RoID0gcGFydGlhbHMubGVuZ3RoLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShhcmdzTGVuZ3RoICsgcmlnaHRMZW5ndGgpO1xuXHRcblx0ICB3aGlsZSAoKythcmdzSW5kZXggPCBhcmdzTGVuZ3RoKSB7XG5cdCAgICByZXN1bHRbYXJnc0luZGV4XSA9IGFyZ3NbYXJnc0luZGV4XTtcblx0ICB9XG5cdCAgdmFyIG9mZnNldCA9IGFyZ3NJbmRleDtcblx0ICB3aGlsZSAoKytyaWdodEluZGV4IDwgcmlnaHRMZW5ndGgpIHtcblx0ICAgIHJlc3VsdFtvZmZzZXQgKyByaWdodEluZGV4XSA9IHBhcnRpYWxzW3JpZ2h0SW5kZXhdO1xuXHQgIH1cblx0ICB3aGlsZSAoKytob2xkZXJzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG5cdCAgICByZXN1bHRbb2Zmc2V0ICsgaG9sZGVyc1tob2xkZXJzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4KytdO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIGB0aGlzYFxuXHQgKiBiaW5kaW5nIG9mIGB0aGlzQXJnYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cblx0ICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVCaW5kV3JhcHBlcihmdW5jLCB0aGlzQXJnKSB7XG5cdCAgdmFyIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblx0XG5cdCAgZnVuY3Rpb24gd3JhcHBlcigpIHtcblx0ICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IGdsb2JhbCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuXHQgIH1cblx0ICByZXR1cm4gd3JhcHBlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHByb2R1Y2VzIGFuIGluc3RhbmNlIG9mIGBDdG9yYCByZWdhcmRsZXNzIG9mXG5cdCAqIHdoZXRoZXIgaXQgd2FzIGludm9rZWQgYXMgcGFydCBvZiBhIGBuZXdgIGV4cHJlc3Npb24gb3IgYnkgYGNhbGxgIG9yIGBhcHBseWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IEN0b3IgVGhlIGNvbnN0cnVjdG9yIHRvIHdyYXAuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVDdG9yV3JhcHBlcihDdG9yKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgLy8gVXNlIGEgYHN3aXRjaGAgc3RhdGVtZW50IHRvIHdvcmsgd2l0aCBjbGFzcyBjb25zdHJ1Y3RvcnMuXG5cdCAgICAvLyBTZWUgaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWVjbWFzY3JpcHQtZnVuY3Rpb24tb2JqZWN0cy1jYWxsLXRoaXNhcmd1bWVudC1hcmd1bWVudHNsaXN0XG5cdCAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG5cdCAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDdG9yO1xuXHQgICAgICBjYXNlIDE6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdKTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSk7XG5cdCAgICAgIGNhc2UgMzogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgICAgICBjYXNlIDQ6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTtcblx0ICAgICAgY2FzZSA1OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XSk7XG5cdCAgICB9XG5cdCAgICB2YXIgdGhpc0JpbmRpbmcgPSBiYXNlQ3JlYXRlKEN0b3IucHJvdG90eXBlKSxcblx0ICAgICAgICByZXN1bHQgPSBDdG9yLmFwcGx5KHRoaXNCaW5kaW5nLCBhcmdzKTtcblx0XG5cdCAgICAvLyBNaW1pYyB0aGUgY29uc3RydWN0b3IncyBgcmV0dXJuYCBiZWhhdmlvci5cblx0ICAgIC8vIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxMy4yLjIgZm9yIG1vcmUgZGV0YWlscy5cblx0ICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCBhbmQgaW52b2tlcyBpdCB3aXRoIG9wdGlvbmFsIGB0aGlzYFxuXHQgKiBiaW5kaW5nIG9mLCBwYXJ0aWFsIGFwcGxpY2F0aW9uLCBhbmQgY3VycnlpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLiBTZWUgYGNyZWF0ZVdyYXBwZXJgIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNSaWdodF0gVGhlIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cblx0ICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNSaWdodF0gVGhlIGBwYXJ0aWFsc1JpZ2h0YCBwbGFjZWhvbGRlciBpbmRleGVzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbYXJ5XSBUaGUgYXJpdHkgY2FwIG9mIGBmdW5jYC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZUh5YnJpZFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG5cdCAgdmFyIGlzQXJ5ID0gYml0bWFzayAmIEFSWV9GTEFHLFxuXHQgICAgICBpc0JpbmQgPSBiaXRtYXNrICYgQklORF9GTEFHLFxuXHQgICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRyxcblx0ICAgICAgaXNDdXJyeSA9IGJpdG1hc2sgJiBDVVJSWV9GTEFHLFxuXHQgICAgICBpc0N1cnJ5Qm91bmQgPSBiaXRtYXNrICYgQ1VSUllfQk9VTkRfRkxBRyxcblx0ICAgICAgaXNDdXJyeVJpZ2h0ID0gYml0bWFzayAmIENVUlJZX1JJR0hUX0ZMQUcsXG5cdCAgICAgIEN0b3IgPSBpc0JpbmRLZXkgPyBudWxsIDogY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG5cdFxuXHQgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG5cdCAgICAvLyBBdm9pZCBgYXJndW1lbnRzYCBvYmplY3QgdXNlIGRpc3F1YWxpZnlpbmcgb3B0aW1pemF0aW9ucyBieVxuXHQgICAgLy8gY29udmVydGluZyBpdCB0byBhbiBhcnJheSBiZWZvcmUgcHJvdmlkaW5nIGl0IHRvIG90aGVyIGZ1bmN0aW9ucy5cblx0ICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHQgICAgICAgIGluZGV4ID0gbGVuZ3RoLFxuXHQgICAgICAgIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuXHRcblx0ICAgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICAgIGFyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTtcblx0ICAgIH1cblx0ICAgIGlmIChwYXJ0aWFscykge1xuXHQgICAgICBhcmdzID0gY29tcG9zZUFyZ3MoYXJncywgcGFydGlhbHMsIGhvbGRlcnMpO1xuXHQgICAgfVxuXHQgICAgaWYgKHBhcnRpYWxzUmlnaHQpIHtcblx0ICAgICAgYXJncyA9IGNvbXBvc2VBcmdzUmlnaHQoYXJncywgcGFydGlhbHNSaWdodCwgaG9sZGVyc1JpZ2h0KTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0N1cnJ5IHx8IGlzQ3VycnlSaWdodCkge1xuXHQgICAgICB2YXIgcGxhY2Vob2xkZXIgPSB3cmFwcGVyLnBsYWNlaG9sZGVyLFxuXHQgICAgICAgICAgYXJnc0hvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhhcmdzLCBwbGFjZWhvbGRlcik7XG5cdFxuXHQgICAgICBsZW5ndGggLT0gYXJnc0hvbGRlcnMubGVuZ3RoO1xuXHQgICAgICBpZiAobGVuZ3RoIDwgYXJpdHkpIHtcblx0ICAgICAgICB2YXIgbmV3QXJnUG9zID0gYXJnUG9zID8gYXJyYXlDb3B5KGFyZ1BvcykgOiBudWxsLFxuXHQgICAgICAgICAgICBuZXdBcml0eSA9IG5hdGl2ZU1heChhcml0eSAtIGxlbmd0aCwgMCksXG5cdCAgICAgICAgICAgIG5ld3NIb2xkZXJzID0gaXNDdXJyeSA/IGFyZ3NIb2xkZXJzIDogbnVsbCxcblx0ICAgICAgICAgICAgbmV3SG9sZGVyc1JpZ2h0ID0gaXNDdXJyeSA/IG51bGwgOiBhcmdzSG9sZGVycyxcblx0ICAgICAgICAgICAgbmV3UGFydGlhbHMgPSBpc0N1cnJ5ID8gYXJncyA6IG51bGwsXG5cdCAgICAgICAgICAgIG5ld1BhcnRpYWxzUmlnaHQgPSBpc0N1cnJ5ID8gbnVsbCA6IGFyZ3M7XG5cdFxuXHQgICAgICAgIGJpdG1hc2sgfD0gKGlzQ3VycnkgPyBQQVJUSUFMX0ZMQUcgOiBQQVJUSUFMX1JJR0hUX0ZMQUcpO1xuXHQgICAgICAgIGJpdG1hc2sgJj0gfihpc0N1cnJ5ID8gUEFSVElBTF9SSUdIVF9GTEFHIDogUEFSVElBTF9GTEFHKTtcblx0XG5cdCAgICAgICAgaWYgKCFpc0N1cnJ5Qm91bmQpIHtcblx0ICAgICAgICAgIGJpdG1hc2sgJj0gfihCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgbmV3UGFydGlhbHMsIG5ld3NIb2xkZXJzLCBuZXdQYXJ0aWFsc1JpZ2h0LCBuZXdIb2xkZXJzUmlnaHQsIG5ld0FyZ1BvcywgYXJ5LCBuZXdBcml0eSk7XG5cdFxuXHQgICAgICAgIHJlc3VsdC5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuXHQgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciB0aGlzQmluZGluZyA9IGlzQmluZCA/IHRoaXNBcmcgOiB0aGlzLFxuXHQgICAgICAgIGZuID0gaXNCaW5kS2V5ID8gdGhpc0JpbmRpbmdbZnVuY10gOiBmdW5jO1xuXHRcblx0ICAgIGlmIChhcmdQb3MpIHtcblx0ICAgICAgYXJncyA9IHJlb3JkZXIoYXJncywgYXJnUG9zKTtcblx0ICAgIH1cblx0ICAgIGlmIChpc0FyeSAmJiBhcnkgPCBhcmdzLmxlbmd0aCkge1xuXHQgICAgICBhcmdzLmxlbmd0aCA9IGFyeTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzICYmIHRoaXMgIT09IGdsb2JhbCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikge1xuXHQgICAgICBmbiA9IEN0b3IgfHwgY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm4uYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuXHQgIH1cblx0ICByZXR1cm4gd3JhcHBlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdyYXBzIGBmdW5jYCBhbmQgaW52b2tlcyBpdCB3aXRoIHRoZSBvcHRpb25hbCBgdGhpc2Bcblx0ICogYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBgcGFydGlhbHNgIHByZXBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0b1xuXHQgKiB0aGUgd3JhcHBlci5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcGFydGlhbGx5IGFwcGx5IGFyZ3VtZW50cyB0by5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgZmxhZ3MuIFNlZSBgY3JlYXRlV3JhcHBlcmAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHBhcnRpYWxzIFRoZSBhcmd1bWVudHMgdG8gcHJlcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBib3VuZCBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZVBhcnRpYWxXcmFwcGVyKGZ1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzKSB7XG5cdCAgdmFyIGlzQmluZCA9IGJpdG1hc2sgJiBCSU5EX0ZMQUcsXG5cdCAgICAgIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblx0XG5cdCAgZnVuY3Rpb24gd3JhcHBlcigpIHtcblx0ICAgIC8vIEF2b2lkIGBhcmd1bWVudHNgIG9iamVjdCB1c2UgZGlzcXVhbGlmeWluZyBvcHRpbWl6YXRpb25zIGJ5XG5cdCAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgYGZ1bmNgLlxuXHQgICAgdmFyIGFyZ3NJbmRleCA9IC0xLFxuXHQgICAgICAgIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuXHQgICAgICAgIGxlZnRJbmRleCA9IC0xLFxuXHQgICAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG5cdCAgICAgICAgYXJncyA9IEFycmF5KGFyZ3NMZW5ndGggKyBsZWZ0TGVuZ3RoKTtcblx0XG5cdCAgICB3aGlsZSAoKytsZWZ0SW5kZXggPCBsZWZ0TGVuZ3RoKSB7XG5cdCAgICAgIGFyZ3NbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07XG5cdCAgICB9XG5cdCAgICB3aGlsZSAoYXJnc0xlbmd0aC0tKSB7XG5cdCAgICAgIGFyZ3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzWysrYXJnc0luZGV4XTtcblx0ICAgIH1cblx0ICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IGdsb2JhbCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcblx0ICAgIHJldHVybiBmbi5hcHBseShpc0JpbmQgPyB0aGlzQXJnIDogdGhpcywgYXJncyk7XG5cdCAgfVxuXHQgIHJldHVybiB3cmFwcGVyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2Agd2l0aCBvcHRpb25hbFxuXHQgKiBgdGhpc2AgYmluZGluZyBhbmQgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufHN0cmluZ30gZnVuYyBUaGUgZnVuY3Rpb24gb3IgbWV0aG9kIG5hbWUgdG8gcmVmZXJlbmNlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy5cblx0ICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuXHQgKiAgICAgMSAtIGBfLmJpbmRgXG5cdCAqICAgICAyIC0gYF8uYmluZEtleWBcblx0ICogICAgIDQgLSBgXy5jdXJyeWAgb3IgYF8uY3VycnlSaWdodGAgb2YgYSBib3VuZCBmdW5jdGlvblxuXHQgKiAgICAgOCAtIGBfLmN1cnJ5YFxuXHQgKiAgICAxNiAtIGBfLmN1cnJ5UmlnaHRgXG5cdCAqICAgIDMyIC0gYF8ucGFydGlhbGBcblx0ICogICAgNjQgLSBgXy5wYXJ0aWFsUmlnaHRgXG5cdCAqICAgMTI4IC0gYF8ucmVhcmdgXG5cdCAqICAgMjU2IC0gYF8uYXJ5YFxuXHQgKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbcGFydGlhbHNdIFRoZSBhcmd1bWVudHMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJnUG9zXSBUaGUgYXJndW1lbnQgcG9zaXRpb25zIG9mIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbYXJ5XSBUaGUgYXJpdHkgY2FwIG9mIGBmdW5jYC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgd3JhcHBlZCBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuXHQgIHZhciBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRztcblx0ICBpZiAoIWlzQmluZEtleSAmJiB0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHZhciBsZW5ndGggPSBwYXJ0aWFscyA/IHBhcnRpYWxzLmxlbmd0aCA6IDA7XG5cdCAgaWYgKCFsZW5ndGgpIHtcblx0ICAgIGJpdG1hc2sgJj0gfihQQVJUSUFMX0ZMQUcgfCBQQVJUSUFMX1JJR0hUX0ZMQUcpO1xuXHQgICAgcGFydGlhbHMgPSBob2xkZXJzID0gbnVsbDtcblx0ICB9XG5cdCAgbGVuZ3RoIC09IChob2xkZXJzID8gaG9sZGVycy5sZW5ndGggOiAwKTtcblx0ICBpZiAoYml0bWFzayAmIFBBUlRJQUxfUklHSFRfRkxBRykge1xuXHQgICAgdmFyIHBhcnRpYWxzUmlnaHQgPSBwYXJ0aWFscyxcblx0ICAgICAgICBob2xkZXJzUmlnaHQgPSBob2xkZXJzO1xuXHRcblx0ICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IG51bGw7XG5cdCAgfVxuXHQgIHZhciBuZXdEYXRhID0gW2Z1bmMsIGJpdG1hc2ssIHRoaXNBcmcsIHBhcnRpYWxzLCBob2xkZXJzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQsIGFyZ1BvcywgYXJ5LCBhcml0eV07XG5cdFxuXHQgIG5ld0RhdGFbOV0gPSBhcml0eSA9PSBudWxsXG5cdCAgICA/IChpc0JpbmRLZXkgPyAwIDogZnVuYy5sZW5ndGgpXG5cdCAgICA6IChuYXRpdmVNYXgoYXJpdHkgLSBsZW5ndGgsIDApIHx8IDApO1xuXHRcblx0ICBpZiAoYml0bWFzayA9PSBCSU5EX0ZMQUcpIHtcblx0ICAgIHZhciByZXN1bHQgPSBjcmVhdGVCaW5kV3JhcHBlcihuZXdEYXRhWzBdLCBuZXdEYXRhWzJdKTtcblx0ICB9IGVsc2UgaWYgKChiaXRtYXNrID09IFBBUlRJQUxfRkxBRyB8fCBiaXRtYXNrID09IChCSU5EX0ZMQUcgfCBQQVJUSUFMX0ZMQUcpKSAmJiAhbmV3RGF0YVs0XS5sZW5ndGgpIHtcblx0ICAgIHJlc3VsdCA9IGNyZWF0ZVBhcnRpYWxXcmFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJlc3VsdCA9IGNyZWF0ZUh5YnJpZFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuXHQgIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcblx0ICByZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlb3JkZXIgYGFycmF5YCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBpbmRleGVzIHdoZXJlIHRoZSBlbGVtZW50IGF0XG5cdCAqIHRoZSBmaXJzdCBpbmRleCBpcyBhc3NpZ25lZCBhcyB0aGUgZmlyc3QgZWxlbWVudCwgdGhlIGVsZW1lbnQgYXRcblx0ICogdGhlIHNlY29uZCBpbmRleCBpcyBhc3NpZ25lZCBhcyB0aGUgc2Vjb25kIGVsZW1lbnQsIGFuZCBzbyBvbi5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHJlb3JkZXIuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGluZGV4ZXMgVGhlIGFycmFuZ2VkIGFycmF5IGluZGV4ZXMuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuXHQgKi9cblx0ZnVuY3Rpb24gcmVvcmRlcihhcnJheSwgaW5kZXhlcykge1xuXHQgIHZhciBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIGxlbmd0aCA9IG5hdGl2ZU1pbihpbmRleGVzLmxlbmd0aCwgYXJyTGVuZ3RoKSxcblx0ICAgICAgb2xkQXJyYXkgPSBhcnJheUNvcHkoYXJyYXkpO1xuXHRcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIHZhciBpbmRleCA9IGluZGV4ZXNbbGVuZ3RoXTtcblx0ICAgIGFycmF5W2xlbmd0aF0gPSBpc0luZGV4KGluZGV4LCBhcnJMZW5ndGgpID8gb2xkQXJyYXlbaW5kZXhdIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICByZXR1cm4gYXJyYXk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY3JlYXRlV3JhcHBlcjtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS43LjAgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKipcblx0ICogQ29waWVzIHRoZSB2YWx1ZXMgb2YgYHNvdXJjZWAgdG8gYGFycmF5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gc291cmNlIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyBmcm9tLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyB0by5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcnJheUNvcHkoc291cmNlLCBhcnJheSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBzb3VyY2UubGVuZ3RoO1xuXHRcblx0ICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgYXJyYXlbaW5kZXhdID0gc291cmNlW2luZGV4XTtcblx0ICB9XG5cdCAgcmV0dXJuIGFycmF5O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFycmF5Q29weTtcblxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4wLjIgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG5cdCAqIHByb3BlcnRpZXMgdG8gdGhlIGNyZWF0ZWQgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBvYmplY3QgdG8gaW5oZXJpdCBmcm9tLlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuXHQgKi9cblx0dmFyIGJhc2VDcmVhdGUgPSAoZnVuY3Rpb24oKSB7XG5cdCAgZnVuY3Rpb24gb2JqZWN0KCkge31cblx0ICByZXR1cm4gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG5cdCAgICBpZiAoaXNPYmplY3QocHJvdG90eXBlKSkge1xuXHQgICAgICBvYmplY3QucHJvdG90eXBlID0gcHJvdG90eXBlO1xuXHQgICAgICB2YXIgcmVzdWx0ID0gbmV3IG9iamVjdDtcblx0ICAgICAgb2JqZWN0LnByb3RvdHlwZSA9IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0IHx8IHt9O1xuXHQgIH07XG5cdH0oKSk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cblx0ICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdCgxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cblx0ICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VDcmVhdGU7XG5cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuNi4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuXHQgKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXMgYW4gYXJyYXkuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGUgW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9GdW5jdGlvbnMvcmVzdF9wYXJhbWV0ZXJzKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHNheSA9IF8ucmVzdFBhcmFtKGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG5cdCAqICAgcmV0dXJuIHdoYXQgKyAnICcgKyBfLmluaXRpYWwobmFtZXMpLmpvaW4oJywgJykgK1xuXHQgKiAgICAgKF8uc2l6ZShuYW1lcykgPiAxID8gJywgJiAnIDogJycpICsgXy5sYXN0KG5hbWVzKTtcblx0ICogfSk7XG5cdCAqXG5cdCAqIHNheSgnaGVsbG8nLCAnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcycpO1xuXHQgKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG5cdCAqL1xuXHRmdW5jdGlvbiByZXN0UGFyYW0oZnVuYywgc3RhcnQpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiAoK3N0YXJ0IHx8IDApLCAwKTtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBpbmRleCA9IC0xLFxuXHQgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcblx0ICAgICAgICByZXN0ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgICByZXN0W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG5cdCAgICB9XG5cdCAgICBzd2l0Y2ggKHN0YXJ0KSB7XG5cdCAgICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCByZXN0KTtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIHJlc3QpO1xuXHQgICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgcmVzdCk7XG5cdCAgICB9XG5cdCAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcblx0ICAgIGluZGV4ID0gLTE7XG5cdCAgICB3aGlsZSAoKytpbmRleCA8IHN0YXJ0KSB7XG5cdCAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcblx0ICAgIH1cblx0ICAgIG90aGVyQXJnc1tzdGFydF0gPSByZXN0O1xuXHQgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgb3RoZXJBcmdzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHJlc3RQYXJhbTtcblxuXG4vKioqLyB9LFxuLyogMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4xLjIgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGJhc2VHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KSxcblx0ICAgIHRvUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMiksXG5cdCAgICBtYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdCAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC87XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcblx0ICB2YXIgcGF0aEtleSA9IChwYXRoICsgJycpO1xuXHQgIHBhdGggPSB0b1BhdGgocGF0aCk7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgaWYgKCh0eXBlID09ICdzdHJpbmcnICYmIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkpIHx8IHR5cGUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIHJlc3VsdCB8fCAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gdG9PYmplY3Qob2JqZWN0KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBmcm9tIGFsbCBlbGVtZW50cyBpbiBgY29sbGVjdGlvbmAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IENvbGxlY3Rpb25cblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHBsdWNrLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlcy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHVzZXJzID0gW1xuXHQgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sXG5cdCAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLnBsdWNrKHVzZXJzLCAndXNlcicpO1xuXHQgKiAvLyA9PiBbJ2Jhcm5leScsICdmcmVkJ11cblx0ICpcblx0ICogdmFyIHVzZXJJbmRleCA9IF8uaW5kZXhCeSh1c2VycywgJ3VzZXInKTtcblx0ICogXy5wbHVjayh1c2VySW5kZXgsICdhZ2UnKTtcblx0ICogLy8gPT4gWzM2LCA0MF0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcblx0ICovXG5cdGZ1bmN0aW9uIHBsdWNrKGNvbGxlY3Rpb24sIHBhdGgpIHtcblx0ICByZXR1cm4gbWFwKGNvbGxlY3Rpb24sIHByb3BlcnR5KHBhdGgpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBgcGF0aGAgb24gYVxuXHQgKiBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxpdHlcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3RzID0gW1xuXHQgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDIgfSB9IH0sXG5cdCAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMSB9IH0gfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmIuYycpKTtcblx0ICogLy8gPT4gWzIsIDFdXG5cdCAqXG5cdCAqIF8ucGx1Y2soXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYicsICdjJ10pKSwgJ2EuYi5jJyk7XG5cdCAqIC8vID0+IFsxLCAyXVxuXHQgKi9cblx0ZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuXHQgIHJldHVybiBpc0tleShwYXRoKSA/IGJhc2VQcm9wZXJ0eShwYXRoKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcGx1Y2s7XG5cblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuNy4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBzdHJpbmcgcGF0aHNcblx0ICogYW5kIGRlZmF1bHQgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtwYXRoS2V5XSBUaGUga2V5IHJlcHJlc2VudGF0aW9uIG9mIHBhdGguXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KSB7XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChwYXRoS2V5ICE9PSB1bmRlZmluZWQgJiYgcGF0aEtleSBpbiB0b09iamVjdChvYmplY3QpKSB7XG5cdCAgICBwYXRoID0gW3BhdGhLZXldO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSAwLFxuXHQgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG5cdCAgfVxuXHQgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9PYmplY3QodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cblx0ICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdCgxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cblx0ICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuOC4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0IGlzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0IGlzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgYmFzZVRvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcblx0ICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvUGF0aDtcblxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4xLjQgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGFycmF5TWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyksXG5cdCAgICBiYXNlQ2FsbGJhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSxcblx0ICAgIGJhc2VFYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXBgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuXHQgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VNYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBBcnJheShjb2xsZWN0aW9uLmxlbmd0aCkgOiBbXTtcblx0XG5cdCAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbGVjdGlvbikge1xuXHQgICAgcmVzdWx0WysraW5kZXhdID0gaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuXHQgKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiB2YWx1ZXMgYnkgcnVubmluZyBlYWNoIGVsZW1lbnQgaW4gYGNvbGxlY3Rpb25gIHRocm91Z2hcblx0ICogYGl0ZXJhdGVlYC4gVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWVcblx0ICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG5cdCAqXG5cdCAqIElmIGEgcHJvcGVydHkgbmFtZSBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcblx0ICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcblx0ICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG5cdCAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG5cdCAqXG5cdCAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuXHQgKiBjYWxsYmFjayByZXR1cm5zIGB0cnVlYCBmb3IgZWxlbWVudHMgdGhhdCBoYXZlIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBnaXZlblxuXHQgKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICpcblx0ICogTWFueSBsb2Rhc2ggbWV0aG9kcyBhcmUgZ3VhcmRlZCB0byB3b3JrIGFzIGl0ZXJhdGVlcyBmb3IgbWV0aG9kcyBsaWtlXG5cdCAqIGBfLmV2ZXJ5YCwgYF8uZmlsdGVyYCwgYF8ubWFwYCwgYF8ubWFwVmFsdWVzYCwgYF8ucmVqZWN0YCwgYW5kIGBfLnNvbWVgLlxuXHQgKlxuXHQgKiBUaGUgZ3VhcmRlZCBtZXRob2RzIGFyZTpcblx0ICogYGFyeWAsIGBjYWxsYmFja2AsIGBjaHVua2AsIGBjbG9uZWAsIGBjcmVhdGVgLCBgY3VycnlgLCBgY3VycnlSaWdodGAsXG5cdCAqIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBldmVyeWAsIGBmaWxsYCwgYGZsYXR0ZW5gLCBgaW52ZXJ0YCwgYG1heGAsIGBtaW5gLFxuXHQgKiBgcGFyc2VJbnRgLCBgc2xpY2VgLCBgc29ydEJ5YCwgYHRha2VgLCBgdGFrZVJpZ2h0YCwgYHRlbXBsYXRlYCwgYHRyaW1gLFxuXHQgKiBgdHJpbUxlZnRgLCBgdHJpbVJpZ2h0YCwgYHRydW5jYCwgYHJhbmRvbWAsIGByYW5nZWAsIGBzYW1wbGVgLCBgc29tZWAsXG5cdCAqIGBzdW1gLCBgdW5pcWAsIGFuZCBgd29yZHNgXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGFsaWFzIGNvbGxlY3Rcblx0ICogQGNhdGVnb3J5IENvbGxlY3Rpb25cblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcblx0ICogIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIGZ1bmN0aW9uIHRpbWVzVGhyZWUobikge1xuXHQgKiAgIHJldHVybiBuICogMztcblx0ICogfVxuXHQgKlxuXHQgKiBfLm1hcChbMSwgMl0sIHRpbWVzVGhyZWUpO1xuXHQgKiAvLyA9PiBbMywgNl1cblx0ICpcblx0ICogXy5tYXAoeyAnYSc6IDEsICdiJzogMiB9LCB0aW1lc1RocmVlKTtcblx0ICogLy8gPT4gWzMsIDZdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdCAqXG5cdCAqIHZhciB1c2VycyA9IFtcblx0ICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcblx0ICogICB7ICd1c2VyJzogJ2ZyZWQnIH1cblx0ICogXTtcblx0ICpcblx0ICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcblx0ICogXy5tYXAodXNlcnMsICd1c2VyJyk7XG5cdCAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG5cdCAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlNYXAgOiBiYXNlTWFwO1xuXHQgIGl0ZXJhdGVlID0gYmFzZUNhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKTtcblx0ICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwO1xuXG5cbi8qKiovIH0sXG4vKiAzNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuNy4wIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5tYXBgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuXHQgKiBzaG9ydGhhbmRzIG9yIGB0aGlzYCBiaW5kaW5nLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBtYXBwZWQgYXJyYXkuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcnJheU1hcChhcnJheSwgaXRlcmF0ZWUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhcnJheU1hcDtcblxuXG4vKioqLyB9LFxuLyogMzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4zLjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSksXG5cdCAgICBiaW5kQ2FsbGJhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLFxuXHQgICAgcGFpcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdCAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG5cdCAgICByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcblxcXFxdfFxcXFwuKSo/KVxcMilcXF0vZztcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xuXHR2YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY2FsbGJhY2tgIHdoaWNoIHN1cHBvcnRzIHNwZWNpZnlpbmcgdGhlXG5cdCAqIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gW2Z1bmM9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYSBjYWxsYmFjay5cblx0ICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiBmdW5jO1xuXHQgIGlmICh0eXBlID09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiB0aGlzQXJnID09PSB1bmRlZmluZWRcblx0ICAgICAgPyBmdW5jXG5cdCAgICAgIDogYmluZENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcblx0ICB9XG5cdCAgaWYgKGZ1bmMgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGlkZW50aXR5O1xuXHQgIH1cblx0ICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIGJhc2VNYXRjaGVzKGZ1bmMpO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG5cdCAgICA/IHByb3BlcnR5KGZ1bmMpXG5cdCAgICA6IGJhc2VNYXRjaGVzUHJvcGVydHkoZnVuYywgdGhpc0FyZyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0cmluZyBwYXRoc1xuXHQgKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW3BhdGhLZXldIFRoZSBrZXkgcmVwcmVzZW50YXRpb24gb2YgcGF0aC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgsIHBhdGhLZXkpIHtcblx0ICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcblx0ICAgIHBhdGggPSBbcGF0aEtleV07XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IDAsXG5cdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIG9iamVjdCA9IG9iamVjdFtwYXRoW2luZGV4KytdXTtcblx0ICB9XG5cdCAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuXHQgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVyeSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgb2JqZWN0YCBpcyBhIG1hdGNoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSwgY3VzdG9taXplcikge1xuXHQgIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG5cdCAgICAgIGxlbmd0aCA9IGluZGV4LFxuXHQgICAgICBub0N1c3RvbWl6ZXIgPSAhY3VzdG9taXplcjtcblx0XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gIWxlbmd0aDtcblx0ICB9XG5cdCAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAgdmFyIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuXHQgICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcblx0ICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG5cdCAgICAgICAgICA6ICEoZGF0YVswXSBpbiBvYmplY3QpXG5cdCAgICAgICAgKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuXHQgICAgdmFyIGtleSA9IGRhdGFbMF0sXG5cdCAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBzcmNWYWx1ZSA9IGRhdGFbMV07XG5cdFxuXHQgICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG5cdCAgICAgIGlmIChvYmpWYWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCB0cnVlKSA6IHJlc3VsdCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2VzIG5vdCBjbG9uZSBgc291cmNlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcblx0ICB2YXIgbWF0Y2hEYXRhID0gZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7XG5cdCAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcblx0ICAgIHZhciBrZXkgPSBtYXRjaERhdGFbMF1bMF0sXG5cdCAgICAgICAgdmFsdWUgPSBtYXRjaERhdGFbMF1bMV07XG5cdFxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSB2YWx1ZSAmJiAodmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIHRvT2JqZWN0KG9iamVjdCkpKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lcyBub3Qgd2hpY2ggZG9lc1xuXHQgKiBub3QgY2xvbmUgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG5cdCAgdmFyIGlzQXJyID0gaXNBcnJheShwYXRoKSxcblx0ICAgICAgaXNDb21tb24gPSBpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpLFxuXHQgICAgICBwYXRoS2V5ID0gKHBhdGggKyAnJyk7XG5cdFxuXHQgIHBhdGggPSB0b1BhdGgocGF0aCk7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBrZXkgPSBwYXRoS2V5O1xuXHQgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblx0ICAgIGlmICgoaXNBcnIgfHwgIWlzQ29tbW9uKSAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG5cdCAgICAgIG9iamVjdCA9IHBhdGgubGVuZ3RoID09IDEgPyBvYmplY3QgOiBiYXNlR2V0KG9iamVjdCwgYmFzZVNsaWNlKHBhdGgsIDAsIC0xKSk7XG5cdCAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBrZXkgPSBsYXN0KHBhdGgpO1xuXHQgICAgICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZVxuXHQgICAgICA/IChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gb2JqZWN0KSlcblx0ICAgICAgOiBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqZWN0W2tleV0sIHVuZGVmaW5lZCwgdHJ1ZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUHJvcGVydHlgIHdoaWNoIHN1cHBvcnRzIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5RGVlcChwYXRoKSB7XG5cdCAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcblx0ICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNsaWNlYCB3aXRob3V0IGFuIGl0ZXJhdGVlIGNhbGwgZ3VhcmQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzbGljZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbZW5kPWFycmF5Lmxlbmd0aF0gVGhlIGVuZCBwb3NpdGlvbi5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBzbGljZSBvZiBgYXJyYXlgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVNsaWNlKGFycmF5LCBzdGFydCwgZW5kKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0XG5cdCAgc3RhcnQgPSBzdGFydCA9PSBudWxsID8gMCA6ICgrc3RhcnQgfHwgMCk7XG5cdCAgaWYgKHN0YXJ0IDwgMCkge1xuXHQgICAgc3RhcnQgPSAtc3RhcnQgPiBsZW5ndGggPyAwIDogKGxlbmd0aCArIHN0YXJ0KTtcblx0ICB9XG5cdCAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiAoK2VuZCB8fCAwKTtcblx0ICBpZiAoZW5kIDwgMCkge1xuXHQgICAgZW5kICs9IGxlbmd0aDtcblx0ICB9XG5cdCAgbGVuZ3RoID0gc3RhcnQgPiBlbmQgPyAwIDogKChlbmQgLSBzdGFydCkgPj4+IDApO1xuXHQgIHN0YXJ0ID4+Pj0gMDtcblx0XG5cdCAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuXHQgIHZhciByZXN1bHQgPSBwYWlycyhvYmplY3QpLFxuXHQgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAobGVuZ3RoLS0pIHtcblx0ICAgIHJlc3VsdFtsZW5ndGhdWzJdID0gaXNTdHJpY3RDb21wYXJhYmxlKHJlc3VsdFtsZW5ndGhdWzFdKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIGlmICgodHlwZSA9PSAnc3RyaW5nJyAmJiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpKSB8fCB0eXBlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiByZXN1bHQgfHwgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIHRvT2JqZWN0KG9iamVjdCkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3Rcblx0ICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gcHJvcGVydHkgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgYmFzZVRvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcblx0ICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IEFycmF5XG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBxdWVyeS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmxhc3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gM1xuXHQgKi9cblx0ZnVuY3Rpb24gbGFzdChhcnJheSkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cdCAgcmV0dXJuIGxlbmd0aCA/IGFycmF5W2xlbmd0aCAtIDFdIDogdW5kZWZpbmVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cblx0ICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdCgxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cblx0ICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxpdHlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG5cdCAqXG5cdCAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBgcGF0aGAgb24gYVxuXHQgKiBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxpdHlcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3RzID0gW1xuXHQgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDIgfSB9IH0sXG5cdCAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMSB9IH0gfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmIuYycpKTtcblx0ICogLy8gPT4gWzIsIDFdXG5cdCAqXG5cdCAqIF8ucGx1Y2soXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYicsICdjJ10pKSwgJ2EuYi5jJyk7XG5cdCAqIC8vID0+IFsxLCAyXVxuXHQgKi9cblx0ZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuXHQgIHJldHVybiBpc0tleShwYXRoKSA/IGJhc2VQcm9wZXJ0eShwYXRoKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUNhbGxiYWNrO1xuXG5cbi8qKiovIH0sXG4vKiAzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuNyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMiksXG5cdCAgICBpc1R5cGVkQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKSxcblx0ICAgIGtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcblx0ICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG5cdCAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcblx0ICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2l0aG91dCBzdXBwb3J0IGZvciBgdGhpc2AgYmluZGluZ1xuXHQgKiBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuXHQgKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG5cdCAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG5cdCAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuXHQgICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuXHQgICAgICBvYmpUYWcgPSBhcnJheVRhZyxcblx0ICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cdFxuXHQgIGlmICghb2JqSXNBcnIpIHtcblx0ICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcblx0ICAgIGlmIChvYmpUYWcgPT0gYXJnc1RhZykge1xuXHQgICAgICBvYmpUYWcgPSBvYmplY3RUYWc7XG5cdCAgICB9IGVsc2UgaWYgKG9ialRhZyAhPSBvYmplY3RUYWcpIHtcblx0ICAgICAgb2JqSXNBcnIgPSBpc1R5cGVkQXJyYXkob2JqZWN0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFvdGhJc0Fycikge1xuXHQgICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG5cdCAgICBpZiAob3RoVGFnID09IGFyZ3NUYWcpIHtcblx0ICAgICAgb3RoVGFnID0gb2JqZWN0VGFnO1xuXHQgICAgfSBlbHNlIGlmIChvdGhUYWcgIT0gb2JqZWN0VGFnKSB7XG5cdCAgICAgIG90aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcblx0ICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnLFxuXHQgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXHRcblx0ICBpZiAoaXNTYW1lVGFnICYmICEob2JqSXNBcnIgfHwgb2JqSXNPYmopKSB7XG5cdCAgICByZXR1cm4gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcpO1xuXHQgIH1cblx0ICBpZiAoIWlzTG9vc2UpIHtcblx0ICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG5cdCAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cdFxuXHQgICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcblx0ICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghaXNTYW1lVGFnKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cblx0ICAvLyBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBkZXRlY3RpbmcgY2lyY3VsYXIgcmVmZXJlbmNlcyBzZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyNKTy5cblx0ICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcblx0ICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblx0XG5cdCAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG5cdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gb2JqZWN0KSB7XG5cdCAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PSBvdGhlcjtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cblx0ICBzdGFja0EucHVzaChvYmplY3QpO1xuXHQgIHN0YWNrQi5wdXNoKG90aGVyKTtcblx0XG5cdCAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblx0XG5cdCAgc3RhY2tBLnBvcCgpO1xuXHQgIHN0YWNrQi5wb3AoKTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3Jcblx0ICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIGFycmF5cy5cblx0ICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdCAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblx0XG5cdCAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuXHQgIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG5cdCAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG5cdCAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG5cdCAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogYXJyVmFsdWUsIGlzTG9vc2UgPyBhcnJWYWx1ZSA6IG90aFZhbHVlLCBpbmRleCkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChyZXN1bHQpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKGlzTG9vc2UpIHtcblx0ICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHQgICAgICAgICAgfSkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuXHQgKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG5cdCAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsdWUgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcpIHtcblx0ICBzd2l0Y2ggKHRhZykge1xuXHQgICAgY2FzZSBib29sVGFnOlxuXHQgICAgY2FzZSBkYXRlVGFnOlxuXHQgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcblx0ICAgICAgLy8gdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXMgbm90IGVxdWFsLlxuXHQgICAgICByZXR1cm4gK29iamVjdCA9PSArb3RoZXI7XG5cdFxuXHQgICAgY2FzZSBlcnJvclRhZzpcblx0ICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblx0XG5cdCAgICBjYXNlIG51bWJlclRhZzpcblx0ICAgICAgLy8gVHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsLlxuXHQgICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KVxuXHQgICAgICAgID8gb3RoZXIgIT0gK290aGVyXG5cdCAgICAgICAgOiBvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgcmVnZXhwVGFnOlxuXHQgICAgY2FzZSBzdHJpbmdUYWc6XG5cdCAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MgcHJpbWl0aXZlcyBhbmQgc3RyaW5nXG5cdCAgICAgIC8vIG9iamVjdHMgYXMgZXF1YWwuIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4xMC42LjQgZm9yIG1vcmUgZGV0YWlscy5cblx0ICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG5cdCAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cblx0ICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIHZhciBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuXHQgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cdFxuXHQgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc0xvb3NlKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IG9iakxlbmd0aDtcblx0ICB3aGlsZSAoaW5kZXgtLSkge1xuXHQgICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0ICAgIGlmICghKGlzTG9vc2UgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcblx0ICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0ICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuXHQgICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XSxcblx0ICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBvYmpWYWx1ZSwgaXNMb29zZT8gb2JqVmFsdWUgOiBvdGhWYWx1ZSwga2V5KSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG5cdCAgfVxuXHQgIGlmICghc2tpcEN0b3IpIHtcblx0ICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuXHQgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3Rvcjtcblx0XG5cdCAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cblx0ICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcblx0ICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcblx0ICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcblx0ICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuLyoqKi8gfSxcbi8qIDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG5cdCAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG5cdCAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuXHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0ICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcblx0ICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuXHQgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG5cdCAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcblx0ICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuXHQgICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblx0XG5cdHZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG5cdCAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG5cdCAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG5cdCAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG5cdCAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcblx0ICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuXHQgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG5cdCAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuXHQgICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcblx0ICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cdFxuXHQvKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG5cdHZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xuXHR0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xuXHR0eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9IHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkoW10pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlQ2FsbGJhY2tgIHdoaWNoIG9ubHkgc3VwcG9ydHMgYHRoaXNgIGJpbmRpbmdcblx0ICogYW5kIHNwZWNpZnlpbmcgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG5cdCAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cblx0ICovXG5cdGZ1bmN0aW9uIGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gaWRlbnRpdHk7XG5cdCAgfVxuXHQgIGlmICh0aGlzQXJnID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiBmdW5jO1xuXHQgIH1cblx0ICBzd2l0Y2ggKGFyZ0NvdW50KSB7XG5cdCAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuXHQgICAgfTtcblx0ICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDU6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxpdHlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG5cdCAqXG5cdCAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiaW5kQ2FsbGJhY2s7XG5cblxuLyoqKi8gfSxcbi8qIDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIGtleS12YWx1ZSBwYWlycyBmb3IgYG9iamVjdGAsXG5cdCAqIGUuZy4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJzLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnBhaXJzKHsgJ2Jhcm5leSc6IDM2LCAnZnJlZCc6IDQwIH0pO1xuXHQgKiAvLyA9PiBbWydiYXJuZXknLCAzNl0sIFsnZnJlZCcsIDQwXV0gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcblx0ICovXG5cdGZ1bmN0aW9uIHBhaXJzKG9iamVjdCkge1xuXHQgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG5cdFxuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBwcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcblx0ICAgIHJlc3VsdFtpbmRleF0gPSBba2V5LCBvYmplY3Rba2V5XV07XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcGFpcnM7XG5cblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC40IChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG5cdCAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG5cdCAqL1xuXHR2YXIgYmFzZUVhY2ggPSBjcmVhdGVCYXNlRWFjaChiYXNlRm9yT3duKTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYmFzZUZvckluYCBhbmQgYGJhc2VGb3JPd25gIHdoaWNoIGl0ZXJhdGVzXG5cdCAqIG92ZXIgYG9iamVjdGAgcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGludm9raW5nIGBpdGVyYXRlZWAgZm9yXG5cdCAqIGVhY2ggcHJvcGVydHkuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseVxuXHQgKiByZXR1cm5pbmcgYGZhbHNlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cblx0ICovXG5cdHZhciBiYXNlRm9yID0gY3JlYXRlQmFzZUZvcigpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93bmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuXHQgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuXHQgIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgYGJhc2VFYWNoYCBvciBgYmFzZUVhY2hSaWdodGAgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24oY29sbGVjdGlvbiwgaXRlcmF0ZWUpIHtcblx0ICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcblx0ICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuXHQgICAgICByZXR1cm4gZWFjaEZ1bmMoY29sbGVjdGlvbiwgaXRlcmF0ZWUpO1xuXHQgICAgfVxuXHQgICAgdmFyIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG5cdCAgICAgICAgaXRlcmFibGUgPSB0b09iamVjdChjb2xsZWN0aW9uKTtcblx0XG5cdCAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuXHQgICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVbaW5kZXhdLCBpbmRleCwgaXRlcmFibGUpID09PSBmYWxzZSkge1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gY29sbGVjdGlvbjtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGJhc2UgZnVuY3Rpb24gZm9yIGBfLmZvckluYCBvciBgXy5mb3JJblJpZ2h0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVCYXNlRm9yKGZyb21SaWdodCkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzRnVuYykge1xuXHQgICAgdmFyIGl0ZXJhYmxlID0gdG9PYmplY3Qob2JqZWN0KSxcblx0ICAgICAgICBwcm9wcyA9IGtleXNGdW5jKG9iamVjdCksXG5cdCAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuXHQgICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cdFxuXHQgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcblx0ICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcblx0ICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2tleV0sIGtleSwgaXRlcmFibGUpID09PSBmYWxzZSkge1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqZWN0O1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG5cdCAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG5cdCAqL1xuXHR2YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUVhY2g7XG5cblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuOS4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzcGVjaWFsIGNoYXJhY3RlcnNdKGh0dHA6Ly93d3cucmVndWxhci1leHByZXNzaW9ucy5pbmZvL2NoYXJhY3RlcnMuaHRtbCNzcGVjaWFsKS5cblx0ICogSW4gYWRkaXRpb24gdG8gc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBmb3J3YXJkIHNsYXNoIGlzIGVzY2FwZWQgdG8gYWxsb3cgZm9yXG5cdCAqIGVhc2llciBgZXZhbGAgdXNlIGFuZCBgRnVuY3Rpb25gIGNvbXBpbGF0aW9uLlxuXHQgKi9cblx0dmFyIHJlUmVnRXhwQ2hhcnMgPSAvWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csXG5cdCAgICByZUhhc1JlZ0V4cENoYXJzID0gUmVnRXhwKHJlUmVnRXhwQ2hhcnMuc291cmNlKTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG5cdHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcblx0ICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cblx0dmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcblx0ICBlc2NhcGVSZWdFeHAoZm5Ub1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KSlcblx0ICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcblx0KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcblx0ICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKF8pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcblx0ICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAob2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZykge1xuXHQgICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcblx0ICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBTdHJpbmdcblx0ICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG5cdCAqIC8vID0+ICdcXFtsb2Rhc2hcXF1cXChodHRwczpcXC9cXC9sb2Rhc2hcXC5jb21cXC9cXCknXG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG5cdCAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG5cdCAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG5cdCAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuXHQgICAgOiBzdHJpbmc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG5cdCAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG5cdCAqL1xuXHR2YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cbi8qKiovIH0sXG4vKiA0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuNy4wIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHR2YXIgaXNJdGVyYXRlZUNhbGwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KTtcblx0XG5cdC8qKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBjZWlsID0gTWF0aC5jZWlsO1xuXHRcblx0LyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgbnVtYmVycyAocG9zaXRpdmUgYW5kL29yIG5lZ2F0aXZlKSBwcm9ncmVzc2luZyBmcm9tXG5cdCAqIGBzdGFydGAgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC4gSWYgYHN0YXJ0YCBpcyBsZXNzIHRoYW4gYGVuZGAgYVxuXHQgKiB6ZXJvLWxlbmd0aCByYW5nZSBpcyBjcmVhdGVkIHVubGVzcyBhIG5lZ2F0aXZlIGBzdGVwYCBpcyBzcGVjaWZpZWQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IFV0aWxpdHlcblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZW5kIFRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW3N0ZXA9MV0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBvciBkZWNyZW1lbnQgYnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIG51bWJlcnMuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8ucmFuZ2UoNCk7XG5cdCAqIC8vID0+IFswLCAxLCAyLCAzXVxuXHQgKlxuXHQgKiBfLnJhbmdlKDEsIDUpO1xuXHQgKiAvLyA9PiBbMSwgMiwgMywgNF1cblx0ICpcblx0ICogXy5yYW5nZSgwLCAyMCwgNSk7XG5cdCAqIC8vID0+IFswLCA1LCAxMCwgMTVdXG5cdCAqXG5cdCAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcblx0ICogLy8gPT4gWzAsIC0xLCAtMiwgLTNdXG5cdCAqXG5cdCAqIF8ucmFuZ2UoMSwgNCwgMCk7XG5cdCAqIC8vID0+IFsxLCAxLCAxXVxuXHQgKlxuXHQgKiBfLnJhbmdlKDApO1xuXHQgKiAvLyA9PiBbXVxuXHQgKi9cblx0ZnVuY3Rpb24gcmFuZ2Uoc3RhcnQsIGVuZCwgc3RlcCkge1xuXHQgIGlmIChzdGVwICYmIGlzSXRlcmF0ZWVDYWxsKHN0YXJ0LCBlbmQsIHN0ZXApKSB7XG5cdCAgICBlbmQgPSBzdGVwID0gbnVsbDtcblx0ICB9XG5cdCAgc3RhcnQgPSArc3RhcnQgfHwgMDtcblx0ICBzdGVwID0gc3RlcCA9PSBudWxsID8gMSA6ICgrc3RlcCB8fCAwKTtcblx0XG5cdCAgaWYgKGVuZCA9PSBudWxsKSB7XG5cdCAgICBlbmQgPSBzdGFydDtcblx0ICAgIHN0YXJ0ID0gMDtcblx0ICB9IGVsc2Uge1xuXHQgICAgZW5kID0gK2VuZCB8fCAwO1xuXHQgIH1cblx0ICAvLyBVc2UgYEFycmF5KGxlbmd0aClgIHNvIGVuZ2luZXMgbGlrZSBDaGFrcmEgYW5kIFY4IGF2b2lkIHNsb3dlciBtb2Rlcy5cblx0ICAvLyBTZWUgaHR0cHM6Ly95b3V0dS5iZS9YQXFJcEdVOFpaayN0PTE3bTI1cyBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoY2VpbCgoZW5kIC0gc3RhcnQpIC8gKHN0ZXAgfHwgMSkpLCAwKSxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHJlc3VsdFtpbmRleF0gPSBzdGFydDtcblx0ICAgIHN0YXJ0ICs9IHN0ZXA7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcmFuZ2U7XG5cblxuLyoqKi8gfSxcbi8qIDQ3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMC45IChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdHZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuXHQgKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuXHQgKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuXHQgKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuXHQgIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcblx0ICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cdCAgcmV0dXJuIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGg7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7Kn0gaW5kZXggVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBpbmRleCBvciBrZXkgYXJndW1lbnQuXG5cdCAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuXHQgIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcblx0ICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuXHQgICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuXHQgICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdCkpIHtcblx0ICAgIHZhciBvdGhlciA9IG9iamVjdFtpbmRleF07XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gKHZhbHVlID09PSBvdGhlcikgOiAob3RoZXIgIT09IG90aGVyKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0l0ZXJhdGVlQ2FsbDtcblxuXG4vKioqLyB9LFxuLyogNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy43LjQgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIHRvUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xuXHR2YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcblx0ICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcblx0ICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG5cdCAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXHQgIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgaWYgKCh0eXBlID09ICdzdHJpbmcnICYmIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkpIHx8IHR5cGUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSk7XG5cdCAgcmV0dXJuIHJlc3VsdCB8fCAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gdG9PYmplY3Qob2JqZWN0KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cblx0ICovXG5cdGZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBvbiBgb2JqZWN0YC4gSWYgYSBwb3J0aW9uIG9mIGBwYXRoYFxuXHQgKiBkb2VzIG5vdCBleGlzdCBpdCBpcyBjcmVhdGVkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGF1Z21lbnQuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBzZXQuXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcblx0ICpcblx0ICogXy5zZXQob2JqZWN0LCAnYVswXS5iLmMnLCA0KTtcblx0ICogY29uc29sZS5sb2cob2JqZWN0LmFbMF0uYi5jKTtcblx0ICogLy8gPT4gNFxuXHQgKlxuXHQgKiBfLnNldChvYmplY3QsICd4WzBdLnkueicsIDUpO1xuXHQgKiBjb25zb2xlLmxvZyhvYmplY3QueFswXS55LnopO1xuXHQgKiAvLyA9PiA1XG5cdCAqL1xuXHRmdW5jdGlvbiBzZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSkge1xuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIG9iamVjdDtcblx0ICB9XG5cdCAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcblx0ICBwYXRoID0gKG9iamVjdFtwYXRoS2V5XSAhPSBudWxsIHx8IGlzS2V5KHBhdGgsIG9iamVjdCkpID8gW3BhdGhLZXldIDogdG9QYXRoKHBhdGgpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG5cdCAgICAgIGxhc3RJbmRleCA9IGxlbmd0aCAtIDEsXG5cdCAgICAgIG5lc3RlZCA9IG9iamVjdDtcblx0XG5cdCAgd2hpbGUgKG5lc3RlZCAhPSBudWxsICYmICsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBrZXkgPSBwYXRoW2luZGV4XTtcblx0ICAgIGlmIChpc09iamVjdChuZXN0ZWQpKSB7XG5cdCAgICAgIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcblx0ICAgICAgICBuZXN0ZWRba2V5XSA9IHZhbHVlO1xuXHQgICAgICB9IGVsc2UgaWYgKG5lc3RlZFtrZXldID09IG51bGwpIHtcblx0ICAgICAgICBuZXN0ZWRba2V5XSA9IGlzSW5kZXgocGF0aFtpbmRleCArIDFdKSA/IFtdIDoge307XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIG5lc3RlZCA9IG5lc3RlZFtrZXldO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqZWN0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNldDtcblxuXG4vKioqLyB9LFxuLyogNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy44LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXHRcblx0LyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0IGlzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuXHQgKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0IGlzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgYmFzZVRvU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcblx0ICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvUGF0aDtcblxuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4yLjIgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGJhc2VDYWxsYmFjayA9IF9fd2VicGFja19yZXF1aXJlX18oNTEpLFxuXHQgICAgYmFzZUVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KSxcblx0ICAgIGlzSXRlcmF0ZWVDYWxsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NyksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG5cdCAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnNvbWVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2sgc2hvcnRoYW5kc1xuXHQgKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlU29tZShjb2xsZWN0aW9uLCBwcmVkaWNhdGUpIHtcblx0ICB2YXIgcmVzdWx0O1xuXHRcblx0ICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcblx0ICAgIHJlc3VsdCA9IHByZWRpY2F0ZSh2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuXHQgICAgcmV0dXJuICFyZXN1bHQ7XG5cdCAgfSk7XG5cdCAgcmV0dXJuICEhcmVzdWx0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gLlxuXHQgKiBUaGUgZnVuY3Rpb24gcmV0dXJucyBhcyBzb29uIGFzIGl0IGZpbmRzIGEgcGFzc2luZyB2YWx1ZSBhbmQgZG9lcyBub3QgaXRlcmF0ZVxuXHQgKiBvdmVyIHRoZSBlbnRpcmUgY29sbGVjdGlvbi4gVGhlIHByZWRpY2F0ZSBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcblx0ICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cblx0ICpcblx0ICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgcHJlZGljYXRlYCB0aGUgY3JlYXRlZCBgXy5wcm9wZXJ0eWBcblx0ICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIElmIGEgdmFsdWUgaXMgYWxzbyBwcm92aWRlZCBmb3IgYHRoaXNBcmdgIHRoZSBjcmVhdGVkIGBfLm1hdGNoZXNQcm9wZXJ0eWBcblx0ICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG5cdCAqIHZhbHVlLCBlbHNlIGBmYWxzZWAuXG5cdCAqXG5cdCAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcblx0ICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cblx0ICogb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGFsaWFzIGFueVxuXHQgKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuXHQgKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcblx0ICogIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgcHJlZGljYXRlYC5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnNvbWUoW251bGwsIDAsICd5ZXMnLCBmYWxzZV0sIEJvb2xlYW4pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIHZhciB1c2VycyA9IFtcblx0ICogICB7ICd1c2VyJzogJ2Jhcm5leScsICdhY3RpdmUnOiB0cnVlIH0sXG5cdCAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWN0aXZlJzogZmFsc2UgfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG5cdCAqIF8uc29tZSh1c2VycywgeyAndXNlcic6ICdiYXJuZXknLCAnYWN0aXZlJzogZmFsc2UgfSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIC8vIHVzaW5nIHRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuXHQgKiBfLnNvbWUodXNlcnMsICdhY3RpdmUnLCBmYWxzZSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogLy8gdXNpbmcgdGhlIGBfLnByb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcblx0ICogXy5zb21lKHVzZXJzLCAnYWN0aXZlJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICovXG5cdGZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG5cdCAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlTb21lIDogYmFzZVNvbWU7XG5cdCAgaWYgKHRoaXNBcmcgJiYgaXNJdGVyYXRlZUNhbGwoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSkge1xuXHQgICAgcHJlZGljYXRlID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBwcmVkaWNhdGUgIT0gJ2Z1bmN0aW9uJyB8fCB0aGlzQXJnICE9PSB1bmRlZmluZWQpIHtcblx0ICAgIHByZWRpY2F0ZSA9IGJhc2VDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuYyhjb2xsZWN0aW9uLCBwcmVkaWNhdGUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHNvbWU7XG5cblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuMy4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdHZhciBiYXNlSXNFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpLFxuXHQgICAgYmluZENhbGxiYWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NCksXG5cdCAgICBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIHBhaXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSk7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdHZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXG5cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuXHQgICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvLFxuXHQgICAgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcblx0ICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNhbGxiYWNrYCB3aGljaCBzdXBwb3J0cyBzcGVjaWZ5aW5nIHRoZVxuXHQgKiBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IFtmdW5jPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGEgY2FsbGJhY2suXG5cdCAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgZnVuYztcblx0ICBpZiAodHlwZSA9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG5cdCAgICAgID8gZnVuY1xuXHQgICAgICA6IGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCk7XG5cdCAgfVxuXHQgIGlmIChmdW5jID09IG51bGwpIHtcblx0ICAgIHJldHVybiBpZGVudGl0eTtcblx0ICB9XG5cdCAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBiYXNlTWF0Y2hlcyhmdW5jKTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXNBcmcgPT09IHVuZGVmaW5lZFxuXHQgICAgPyBwcm9wZXJ0eShmdW5jKVxuXHQgICAgOiBiYXNlTWF0Y2hlc1Byb3BlcnR5KGZ1bmMsIHRoaXNBcmcpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBzdHJpbmcgcGF0aHNcblx0ICogYW5kIGRlZmF1bHQgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtwYXRoS2V5XSBUaGUga2V5IHJlcHJlc2VudGF0aW9uIG9mIHBhdGguXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KSB7XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChwYXRoS2V5ICE9PSB1bmRlZmluZWQgJiYgcGF0aEtleSBpbiB0b09iamVjdChvYmplY3QpKSB7XG5cdCAgICBwYXRoID0gW3BhdGhLZXldO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSAwLFxuXHQgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG5cdCAgfVxuXHQgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcblx0ICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuXHQgKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcblx0ICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuXHQgICAgICBsZW5ndGggPSBpbmRleCxcblx0ICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cdFxuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICFsZW5ndGg7XG5cdCAgfVxuXHQgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG5cdCAgd2hpbGUgKGluZGV4LS0pIHtcblx0ICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIGlmICgobm9DdXN0b21pemVyICYmIGRhdGFbMl0pXG5cdCAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuXHQgICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuXHQgICAgICAgICkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIHZhciBrZXkgPSBkYXRhWzBdLFxuXHQgICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXHRcblx0ICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuXHQgICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXkpIDogdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgdHJ1ZSkgOiByZXN1bHQpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lcyBub3QgY2xvbmUgYHNvdXJjZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG5cdCAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuXHQgIGlmIChtYXRjaERhdGEubGVuZ3RoID09IDEgJiYgbWF0Y2hEYXRhWzBdWzJdKSB7XG5cdCAgICB2YXIga2V5ID0gbWF0Y2hEYXRhWzBdWzBdLFxuXHQgICAgICAgIHZhbHVlID0gbWF0Y2hEYXRhWzBdWzFdO1xuXHRcblx0ICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gdmFsdWUgJiYgKHZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiB0b09iamVjdChvYmplY3QpKSk7XG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXMgbm90IHdoaWNoIGRvZXNcblx0ICogbm90IGNsb25lIGB2YWx1ZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuXHQgIHZhciBpc0FyciA9IGlzQXJyYXkocGF0aCksXG5cdCAgICAgIGlzQ29tbW9uID0gaXNLZXkocGF0aCkgJiYgaXNTdHJpY3RDb21wYXJhYmxlKHNyY1ZhbHVlKSxcblx0ICAgICAgcGF0aEtleSA9IChwYXRoICsgJycpO1xuXHRcblx0ICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIga2V5ID0gcGF0aEtleTtcblx0ICAgIG9iamVjdCA9IHRvT2JqZWN0KG9iamVjdCk7XG5cdCAgICBpZiAoKGlzQXJyIHx8ICFpc0NvbW1vbikgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuXHQgICAgICBvYmplY3QgPSBwYXRoLmxlbmd0aCA9PSAxID8gb2JqZWN0IDogYmFzZUdldChvYmplY3QsIGJhc2VTbGljZShwYXRoLCAwLCAtMSkpO1xuXHQgICAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAga2V5ID0gbGFzdChwYXRoKTtcblx0ICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWVcblx0ICAgICAgPyAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIG9iamVjdCkpXG5cdCAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9iamVjdFtrZXldLCB1bmRlZmluZWQsIHRydWUpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHQgIHZhciBwYXRoS2V5ID0gKHBhdGggKyAnJyk7XG5cdCAgcGF0aCA9IHRvUGF0aChwYXRoKTtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgsIHBhdGhLZXkpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zbGljZWAgd2l0aG91dCBhbiBpdGVyYXRlZSBjYWxsIGd1YXJkLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2xpY2UuXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9MF0gVGhlIHN0YXJ0IHBvc2l0aW9uLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgc2xpY2Ugb2YgYGFycmF5YC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFxuXHQgIHN0YXJ0ID0gc3RhcnQgPT0gbnVsbCA/IDAgOiAoK3N0YXJ0IHx8IDApO1xuXHQgIGlmIChzdGFydCA8IDApIHtcblx0ICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG5cdCAgfVxuXHQgIGVuZCA9IChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiBsZW5ndGgpID8gbGVuZ3RoIDogKCtlbmQgfHwgMCk7XG5cdCAgaWYgKGVuZCA8IDApIHtcblx0ICAgIGVuZCArPSBsZW5ndGg7XG5cdCAgfVxuXHQgIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6ICgoZW5kIC0gc3RhcnQpID4+PiAwKTtcblx0ICBzdGFydCA+Pj49IDA7XG5cdFxuXHQgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICByZXN1bHRbaW5kZXhdID0gYXJyYXlbaW5kZXggKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBwcm9wZXJ5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcblx0ICB2YXIgcmVzdWx0ID0gcGFpcnMob2JqZWN0KSxcblx0ICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICByZXN1bHRbbGVuZ3RoXVsyXSA9IGlzU3RyaWN0Q29tcGFyYWJsZShyZXN1bHRbbGVuZ3RoXVsxXSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICBpZiAoKHR5cGUgPT0gJ3N0cmluZycgJiYgcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSkgfHwgdHlwZSA9PSAnbnVtYmVyJykge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgcmVzdWx0ID0gIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gcmVzdWx0IHx8IChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiB0b09iamVjdChvYmplY3QpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpZiBzdWl0YWJsZSBmb3Igc3RyaWN0XG5cdCAqICBlcXVhbGl0eSBjb21wYXJpc29ucywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSAmJiAhaXNPYmplY3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIHByb3BlcnR5IHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1BhdGgodmFsdWUpIHtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIGJhc2VUb1N0cmluZyh2YWx1ZSkucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG5cdCAgICByZXN1bHQucHVzaChxdW90ZSA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKSk7XG5cdCAgfSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBBcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgYGFycmF5YC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5sYXN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IDNcblx0ICovXG5cdGZ1bmN0aW9uIGxhc3QoYXJyYXkpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXHQgIHJldHVybiBsZW5ndGggPyBhcnJheVtsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG5cdCAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc09iamVjdCh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoMSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHQgIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG5cdCAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBVdGlsaXR5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdDtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYHBhdGhgIG9uIGFcblx0ICogZ2l2ZW4gb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBVdGlsaXR5XG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0cyA9IFtcblx0ICogICB7ICdhJzogeyAnYic6IHsgJ2MnOiAyIH0gfSB9LFxuXHQgKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDEgfSB9IH1cblx0ICogXTtcblx0ICpcblx0ICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iLmMnKSk7XG5cdCAqIC8vID0+IFsyLCAxXVxuXHQgKlxuXHQgKiBfLnBsdWNrKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InLCAnYyddKSksICdhLmIuYycpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICovXG5cdGZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcblx0ICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkocGF0aCkgOiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VDYWxsYmFjaztcblxuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBsb2Rhc2ggMy4wLjcgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG5cdCAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2Bcblx0ICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cblx0ICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cblx0ICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuXHQgKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuXHQgKi9cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNUeXBlZEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MyksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcblx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG5cdCAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYHRoaXNgIGJpbmRpbmdcblx0ICogYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cblx0ICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcblx0ICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuXHQgIH1cblx0ICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcblx0ICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuXHQgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgb2JqZWN0cy5cblx0ICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuXHQgIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcblx0ICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcblx0ICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG5cdCAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXHRcblx0ICBpZiAoIW9iaklzQXJyKSB7XG5cdCAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG5cdCAgICBpZiAob2JqVGFnID09IGFyZ3NUYWcpIHtcblx0ICAgICAgb2JqVGFnID0gb2JqZWN0VGFnO1xuXHQgICAgfSBlbHNlIGlmIChvYmpUYWcgIT0gb2JqZWN0VGFnKSB7XG5cdCAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghb3RoSXNBcnIpIHtcblx0ICAgIG90aFRhZyA9IG9ialRvU3RyaW5nLmNhbGwob3RoZXIpO1xuXHQgICAgaWYgKG90aFRhZyA9PSBhcmdzVGFnKSB7XG5cdCAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcblx0ICAgIH0gZWxzZSBpZiAob3RoVGFnICE9IG9iamVjdFRhZykge1xuXHQgICAgICBvdGhJc0FyciA9IGlzVHlwZWRBcnJheShvdGhlcik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG5cdCAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcblx0ICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblx0XG5cdCAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuXHQgICAgcmV0dXJuIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnKTtcblx0ICB9XG5cdCAgaWYgKCFpc0xvb3NlKSB7XG5cdCAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuXHQgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXHRcblx0ICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG5cdCAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWlzU2FtZVRhZykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG5cdCAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG5cdCAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cdFxuXHQgIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoO1xuXHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IG9iamVjdCkge1xuXHQgICAgICByZXR1cm4gc3RhY2tCW2xlbmd0aF0gPT0gb3RoZXI7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIEFkZCBgb2JqZWN0YCBhbmQgYG90aGVyYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG5cdCAgc3RhY2tBLnB1c2gob2JqZWN0KTtcblx0ICBzdGFja0IucHVzaChvdGhlcik7XG5cdFxuXHQgIHZhciByZXN1bHQgPSAob2JqSXNBcnIgPyBlcXVhbEFycmF5cyA6IGVxdWFsT2JqZWN0cykob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cdFxuXHQgIHN0YWNrQS5wb3AoKTtcblx0ICBzdGFja0IucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG5cdCAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBhcnJheXMuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cblx0ICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cdFxuXHQgIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNMb29zZSAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cblx0ICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuXHQgICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuXHQgICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdLFxuXHQgICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IGFyclZhbHVlLCBpc0xvb3NlID8gYXJyVmFsdWUgOiBvdGhWYWx1ZSwgaW5kZXgpIDogdW5kZWZpbmVkO1xuXHRcblx0ICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgIGlmIChpc0xvb3NlKSB7XG5cdCAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSkge1xuXHQgICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblx0ICAgICAgICAgIH0pKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2Zcblx0ICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuXHQgKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG5cdCAgc3dpdGNoICh0YWcpIHtcblx0ICAgIGNhc2UgYm9vbFRhZzpcblx0ICAgIGNhc2UgZGF0ZVRhZzpcblx0ICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIGJvb2xlYW5zXG5cdCAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbC5cblx0ICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgZXJyb3JUYWc6XG5cdCAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cdFxuXHQgICAgY2FzZSBudW1iZXJUYWc6XG5cdCAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cblx0ICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdClcblx0ICAgICAgICA/IG90aGVyICE9ICtvdGhlclxuXHQgICAgICAgIDogb2JqZWN0ID09ICtvdGhlcjtcblx0XG5cdCAgICBjYXNlIHJlZ2V4cFRhZzpcblx0ICAgIGNhc2Ugc3RyaW5nVGFnOlxuXHQgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzIHByaW1pdGl2ZXMgYW5kIHN0cmluZ1xuXHQgICAgICAvLyBvYmplY3RzIGFzIGVxdWFsLiBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40IGZvciBtb3JlIGRldGFpbHMuXG5cdCAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cblx0ICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcblx0ICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcblx0ICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcblx0ICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXHRcblx0ICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG5cdCAgd2hpbGUgKGluZGV4LS0pIHtcblx0ICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG5cdCAgICBpZiAoIShpc0xvb3NlID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgc2tpcEN0b3IgPSBpc0xvb3NlO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG5cdCAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG5cdCAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogb2JqVmFsdWUsIGlzTG9vc2U/IG9ialZhbHVlIDogb3RoVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG5cdCAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuXHQgIH1cblx0ICBpZiAoIXNraXBDdG9yKSB7XG5cdCAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3Rvcixcblx0ICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cdFxuXHQgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG5cdCAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG5cdCAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG5cdCAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG5cdCAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cblx0ICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdCgxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cblx0ICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuXG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMiAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcblx0ICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG5cdCAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG5cdCAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcblx0ICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cdFxuXHR2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuXHQgICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuXHQgICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuXHQgICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuXHQgICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG5cdCAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcblx0ICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuXHQgICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcblx0ICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG5cdCAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXHRcblx0LyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xuXHR2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcblx0dHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcblx0dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNUeXBlZEFycmF5KFtdKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmpUb1N0cmluZy5jYWxsKHZhbHVlKV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuXG5cbi8qKiovIH0sXG4vKiA1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUNhbGxiYWNrYCB3aGljaCBvbmx5IHN1cHBvcnRzIGB0aGlzYCBiaW5kaW5nXG5cdCAqIGFuZCBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuXHQgKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG5cdCAqL1xuXHRmdW5jdGlvbiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGlkZW50aXR5O1xuXHQgIH1cblx0ICBpZiAodGhpc0FyZyA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gZnVuYztcblx0ICB9XG5cdCAgc3dpdGNoIChhcmdDb3VudCkge1xuXHQgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG5cdCAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcblx0ICAgIH07XG5cdCAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG5cdCAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG5cdCAgICB9O1xuXHQgICAgY2FzZSA1OiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKSB7XG5cdCAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKTtcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBVdGlsaXR5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdDtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmluZENhbGxiYWNrO1xuXG5cbi8qKiovIH0sXG4vKiA1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHR2YXIga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgdHdvIGRpbWVuc2lvbmFsIGFycmF5IG9mIHRoZSBrZXktdmFsdWUgcGFpcnMgZm9yIGBvYmplY3RgLFxuXHQgKiBlLmcuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGtleS12YWx1ZSBwYWlycy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5wYWlycyh7ICdiYXJuZXknOiAzNiwgJ2ZyZWQnOiA0MCB9KTtcblx0ICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdCAqL1xuXHRmdW5jdGlvbiBwYWlycyhvYmplY3QpIHtcblx0ICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cdCAgICByZXN1bHRbaW5kZXhdID0gW2tleSwgb2JqZWN0W2tleV1dO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHBhaXJzO1xuXG5cbi8qKiovIH0sXG4vKiA1NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuNCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHR2YXIga2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yRWFjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuXHQgKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0ICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuXHQgKi9cblx0dmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGJhc2VGb3JJbmAgYW5kIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlc1xuXHQgKiBvdmVyIGBvYmplY3RgIHByb3BlcnRpZXMgcmV0dXJuZWQgYnkgYGtleXNGdW5jYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvclxuXHQgKiBlYWNoIHByb3BlcnR5LiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHlcblx0ICogcmV0dXJuaW5nIGBmYWxzZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG5cdCAqL1xuXHR2YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcblx0ICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlRm9yT3duKG9iamVjdCwgaXRlcmF0ZWUpIHtcblx0ICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGBiYXNlRWFjaGAgb3IgYGJhc2VFYWNoUmlnaHRgIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlYWNoRnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGEgY29sbGVjdGlvbi5cblx0ICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG5cdCAgICB2YXIgbGVuZ3RoID0gY29sbGVjdGlvbiA/IGdldExlbmd0aChjb2xsZWN0aW9uKSA6IDA7XG5cdCAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcblx0ICAgICAgcmV0dXJuIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcblx0ICAgIH1cblx0ICAgIHZhciBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xLFxuXHQgICAgICAgIGl0ZXJhYmxlID0gdG9PYmplY3QoY29sbGVjdGlvbik7XG5cdFxuXHQgICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcblx0ICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGNvbGxlY3Rpb247XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHtcblx0ICAgIHZhciBpdGVyYWJsZSA9IHRvT2JqZWN0KG9iamVjdCksXG5cdCAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuXHQgICAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcblx0ICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXHRcblx0ICAgIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG5cdCAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG5cdCAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdDtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuXHQgKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9PYmplY3QodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cblx0ICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdCgxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cblx0ICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cblx0ICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VFYWNoO1xuXG5cbi8qKiovIH0sXG4vKiA1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuOSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc1VpbnQgPSAvXlxcZCskLztcblx0XG5cdC8qKlxuXHQgKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcblx0ICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cblx0ICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5Milcblx0ICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cblx0ICovXG5cdHZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcblx0ICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG5cdCAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXHQgIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuXHQgKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcblx0ICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgaW5kZXg7XG5cdCAgaWYgKHR5cGUgPT0gJ251bWJlcidcblx0ICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcblx0ICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpKSB7XG5cdCAgICB2YXIgb3RoZXIgPSBvYmplY3RbaW5kZXhdO1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gb3RoZXIpIDogKG90aGVyICE9PSBvdGhlcik7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuXHQgKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcblx0ICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuXHQgIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNJdGVyYXRlZUNhbGw7XG5cblxuLyoqKi8gfSxcbi8qIDU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogbG9kYXNoIDMuOS4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuXHQgKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG5cdCAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG5cdCAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG5cdCAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcblx0ICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cblx0ICovXG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzcGVjaWFsIGNoYXJhY3RlcnNdKGh0dHA6Ly93d3cucmVndWxhci1leHByZXNzaW9ucy5pbmZvL2NoYXJhY3RlcnMuaHRtbCNzcGVjaWFsKS5cblx0ICogSW4gYWRkaXRpb24gdG8gc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBmb3J3YXJkIHNsYXNoIGlzIGVzY2FwZWQgdG8gYWxsb3cgZm9yXG5cdCAqIGVhc2llciBgZXZhbGAgdXNlIGFuZCBgRnVuY3Rpb25gIGNvbXBpbGF0aW9uLlxuXHQgKi9cblx0dmFyIHJlUmVnRXhwQ2hhcnMgPSAvWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csXG5cdCAgICByZUhhc1JlZ0V4cENoYXJzID0gUmVnRXhwKHJlUmVnRXhwQ2hhcnMuc291cmNlKTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG5cdHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcblx0ICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cblx0dmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcblx0ICBlc2NhcGVSZWdFeHAoZm5Ub1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KSlcblx0ICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcblx0KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcblx0ICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzTmF0aXZlKF8pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcblx0ICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBpZiAob2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZykge1xuXHQgICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgcmVJc0hvc3RDdG9yLnRlc3QodmFsdWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcblx0ICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBTdHJpbmdcblx0ICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG5cdCAqIC8vID0+ICdcXFtsb2Rhc2hcXF1cXChodHRwczpcXC9cXC9sb2Rhc2hcXC5jb21cXC9cXCknXG5cdCAqL1xuXHRmdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG5cdCAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG5cdCAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG5cdCAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuXHQgICAgOiBzdHJpbmc7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cblx0ICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuXHQgKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuXHQgKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuXHQgKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG5cdCAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG5cdCAqL1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG5cdCAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG5cdCAqL1xuXHR2YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG5cdCAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG5cdCAqL1xuXHR2YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cbi8qKiovIH0sXG4vKiA2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblx0XG5cdHZhciBCYWNvbiA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblx0XG5cdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI0Nzc0Mjc2XG5cdEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5idWZmZXJVbnRpbFZhbHVlID0gZnVuY3Rpb24gKHZhbHZlKSB7XG5cdCAgICB2YXIgdmFsdmVfID0gdmFsdmUuc3RhcnRXaXRoKGZhbHNlKTtcblx0XG5cdCAgICByZXR1cm4gdGhpcy5maWx0ZXIoZmFsc2UpLm1lcmdlKHZhbHZlXy5mbGF0TWFwQ29uY2F0KChmdW5jdGlvbiAoX3RoaXMpIHtcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2NhbihbXSwgZnVuY3Rpb24gKHhzLCB4KSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4geHMuY29uY2F0KHgpO1xuXHQgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICBlYWdlcjogdHJ1ZVxuXHQgICAgICAgICAgICB9KS5zYW1wbGVkQnkodmFsdmUpLnRha2UoMSk7XG5cdCAgICAgICAgfTtcblx0ICAgIH0pKHRoaXMpKSk7XG5cdH07XG5cdFxuXHQvKiBIT1QgUEFUQ0ggTE9BREVSICovIHZhciBfX21vZHVsZUJpbmRpbmdzID0gW107IGlmKGZhbHNlKSB7XG5cdCAgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24oZXJyKSB7XG5cdCAgICBjb25zb2xlLmxvZygnW0hNUl0gRXJyb3IgYWNjZXB0aW5nOiAnICsgZXJyKTtcblx0ICB9KTtcblx0ICB2YXIgZ2V0RXZhbFNvdXJjZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0ICAgIHZhciBjb2RlID0gZnVuYy50b1N0cmluZygpO1xuXHQgICAgdmFyIG0gPSBjb2RlLm1hdGNoKC9eZnVuY3Rpb25cXHMrX19ldmFsXFxzKlxcKCguKilcXClcXHMqXFx7KFtcXHNcXFNdKilcXH0kL2kpO1xuXHQgICAgaWYoIW0pIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgYXJncyA9IG1bMV07XG5cdCAgICB2YXIgYm9keSA9IG1bMl07XG5cdCAgICB2YXIgc2NvcGUgPSB7fTtcblxuXHQgICAgaWYoYXJncy50cmltKCkpIHtcblx0ICAgICAgYXJncy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnLmluZGV4T2YoJz0nKSAhPT0gLTEpIHtcblx0ICAgICAgICAgIHZhciBwID0gYXJnLnNwbGl0KCc9Jyk7XG5cdCAgICAgICAgICBzY29wZVtwWzBdLnRyaW0oKV0gPSBKU09OLnBhcnNlKHBbMV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgIHNjb3BlW2FyZy50cmltKCldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiB7IGJvZHk6IGJvZHksIHNjb3BlOiBzY29wZSB9O1xuXHQgIH1cblxuXHQgIHZhciBpbmplY3RTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBjb2RlKSB7XG5cdCAgICAvLyBUYWtlIGFuIGV4cGxpY2l0IHNjb3BlIG9iamVjdCBhbmQgaW5qZWN0IGl0IHNvIHRoYXRcblx0ICAgIC8vIGBjb2RlYCBydW5zIGluIGNvbnRleHQgb2YgaXRcblx0ICAgIHZhciBpbmplY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ3ZhciAnICsgYmluZGluZyArICcgPSBldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnOydcblx0ICAgIH0pLmpvaW4oJyAnKTtcblxuXHQgICAgLy8gVXBkYXRlIG91ciBzY29wZSBvYmplY3Qgd2l0aCBhbnkgbW9kaWZpY2F0aW9uc1xuXHQgICAgdmFyIGV4dHJhY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ2V2YWxTY29wZS4nICsgYmluZGluZyArICcgPSAnICsgYmluZGluZyArICc7Jztcblx0ICAgIH0pLmpvaW4oJyAnKTtcblx0ICAgIHJldHVybiBpbmplY3RlZCArIGNvZGUgKyBleHRyYWN0ZWQ7XG5cdCAgfVxuXG5cdCAgdmFyIGJpbmRpbmdzID0gX19tb2R1bGVCaW5kaW5ncztcblxuXHQgIGlmKCFtb2R1bGUuaG90LmRhdGEpIHtcblx0ICAgIC8vIEZpcnN0IHRpbWUgbG9hZGluZy4gVHJ5IGFuZCBwYXRjaCBzb21ldGhpbmcuXG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0ge307XG5cdCAgICB2YXIgZXZhbFNjb3BlID0ge307XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsV2l0aFNjb3BlID0gZnVuY3Rpb24oZnJhbWUpIHtcblx0ICAgICAgLy8gVXBkYXRlIHRoZSBzY29wZSB0byByZWZsZWN0IG9ubHkgdGhlIHZhbHVlcyBzcGVjaWZpZWQgYXNcblx0ICAgICAgLy8gYXJndW1lbnRzIHRvIHRoZSBfX2V2YWwgZnVuY3Rpb24uIENvcHkgb3ZlciB2YWx1ZXMgZnJvbSB0aGVcblx0ICAgICAgLy8gZXhpc3Rpbmcgc2NvcGUgYW5kIGlnbm9yZSB0aGUgcmVzdC5cblx0ICAgICAgT2JqZWN0LmtleXMoZXZhbFNjb3BlKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZyBpbiBmcmFtZS5zY29wZSkge1xuXHQgICAgICAgICAgZnJhbWUuc2NvcGVbYXJnXSA9IGV2YWxTY29wZVthcmddO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGV2YWxTY29wZSA9IGZyYW1lLnNjb3BlO1xuXG5cdCAgICAgIHZhciBjb2RlID0gaW5qZWN0U2NvcGUoZXZhbFNjb3BlLCBmcmFtZS5ib2R5KTtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsID0gZnVuY3Rpb24oY29kZSkge1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIHZhciBwYXRjaGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZihwYXRjaGVkQmluZGluZ3NbYmluZGluZ10pIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBwYXRjaGVkLnByb3RvdHlwZSA9IGYucHJvdG90eXBlO1xuXG5cdCAgICAgICAgZXZhbChiaW5kaW5nICsgJyA9IHBhdGNoZWQ7XFxuJyk7XG5cblx0ICAgICAgICBpZihtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgbW9kdWxlLmV4cG9ydHNbYmluZGluZ10gPSBwYXRjaGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IG1vZHVsZS5ob3QuZGF0YS5wYXRjaGVkQmluZGluZ3M7XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICAvLyBXZSBuZWVkIHRvIHJlaWZ5IHRoZSBmdW5jdGlvbiBpbiB0aGUgb3JpZ2luYWwgbW9kdWxlIHNvXG5cdCAgICAgICAgLy8gaXQgcmVmZXJlbmNlcyBhbnkgb2YgdGhlIG9yaWdpbmFsIHN0YXRlLiBTdHJpcCB0aGUgbmFtZVxuXHQgICAgICAgIC8vIGFuZCBzaW1wbHkgZXZhbCBpdC5cblx0ICAgICAgICB2YXIgZnVuY0NvZGUgPSAoXG5cdCAgICAgICAgICAnKCcgKyBmLnRvU3RyaW5nKCkucmVwbGFjZSgvXmZ1bmN0aW9uIFxcdytcXCgvLCAnZnVuY3Rpb24gKCcpICsgJyknXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10gPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbChmdW5jQ29kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBpZih0eXBlb2YgX19ldmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUoZ2V0RXZhbFNvdXJjZShfX2V2YWwpKTtcblx0ICAgICAgfVxuXHQgICAgICBjYXRjaChlKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGV2YWxpbmc6ICcgKyBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHR2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XG5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZVwiKS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXHRcblx0ZnVuY3Rpb24gcmVzaXplKCkge1xuXHQgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5vZmZzZXRXaWR0aDtcblx0ICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzLm9mZnNldEhlaWdodDtcblx0fVxuXHRcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgcmVzaXplKTtcblx0cmVzaXplKCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHsgY2FudmFzOiBjYW52YXMsIGN0eDogY3R4IH07XG5cdFxuXHQvKiBIT1QgUEFUQ0ggTE9BREVSICovIHZhciBfX21vZHVsZUJpbmRpbmdzID0gW1wicmVzaXplXCJdOyBpZihmYWxzZSkge1xuXHQgIG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uKGVycikge1xuXHQgICAgY29uc29sZS5sb2coJ1tITVJdIEVycm9yIGFjY2VwdGluZzogJyArIGVycik7XG5cdCAgfSk7XG5cdCAgdmFyIGdldEV2YWxTb3VyY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgY29kZSA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICAgIHZhciBtID0gY29kZS5tYXRjaCgvXmZ1bmN0aW9uXFxzK19fZXZhbFxccypcXCgoLiopXFwpXFxzKlxceyhbXFxzXFxTXSopXFx9JC9pKTtcblx0ICAgIGlmKCFtKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGFyZ3MgPSBtWzFdO1xuXHQgICAgdmFyIGJvZHkgPSBtWzJdO1xuXHQgICAgdmFyIHNjb3BlID0ge307XG5cblx0ICAgIGlmKGFyZ3MudHJpbSgpKSB7XG5cdCAgICAgIGFyZ3Muc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZy5pbmRleE9mKCc9JykgIT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgcCA9IGFyZy5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgc2NvcGVbcFswXS50cmltKCldID0gSlNPTi5wYXJzZShwWzFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBzY29wZVthcmcudHJpbSgpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geyBib2R5OiBib2R5LCBzY29wZTogc2NvcGUgfTtcblx0ICB9XG5cblx0ICB2YXIgaW5qZWN0U2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY29kZSkge1xuXHQgICAgLy8gVGFrZSBhbiBleHBsaWNpdCBzY29wZSBvYmplY3QgYW5kIGluamVjdCBpdCBzbyB0aGF0XG5cdCAgICAvLyBgY29kZWAgcnVucyBpbiBjb250ZXh0IG9mIGl0XG5cdCAgICB2YXIgaW5qZWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICd2YXIgJyArIGJpbmRpbmcgKyAnID0gZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJzsnXG5cdCAgICB9KS5qb2luKCcgJyk7XG5cblx0ICAgIC8vIFVwZGF0ZSBvdXIgc2NvcGUgb2JqZWN0IHdpdGggYW55IG1vZGlmaWNhdGlvbnNcblx0ICAgIHZhciBleHRyYWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICdldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnID0gJyArIGJpbmRpbmcgKyAnOyc7XG5cdCAgICB9KS5qb2luKCcgJyk7XG5cdCAgICByZXR1cm4gaW5qZWN0ZWQgKyBjb2RlICsgZXh0cmFjdGVkO1xuXHQgIH1cblxuXHQgIHZhciBiaW5kaW5ncyA9IF9fbW9kdWxlQmluZGluZ3M7XG5cblx0ICBpZighbW9kdWxlLmhvdC5kYXRhKSB7XG5cdCAgICAvLyBGaXJzdCB0aW1lIGxvYWRpbmcuIFRyeSBhbmQgcGF0Y2ggc29tZXRoaW5nLlxuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IHt9O1xuXHQgICAgdmFyIGV2YWxTY29wZSA9IHt9O1xuXG5cdCAgICB2YXIgbW9kdWxlRXZhbFdpdGhTY29wZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgc2NvcGUgdG8gcmVmbGVjdCBvbmx5IHRoZSB2YWx1ZXMgc3BlY2lmaWVkIGFzXG5cdCAgICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgX19ldmFsIGZ1bmN0aW9uLiBDb3B5IG92ZXIgdmFsdWVzIGZyb20gdGhlXG5cdCAgICAgIC8vIGV4aXN0aW5nIHNjb3BlIGFuZCBpZ25vcmUgdGhlIHJlc3QuXG5cdCAgICAgIE9iamVjdC5rZXlzKGV2YWxTY29wZSkuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcgaW4gZnJhbWUuc2NvcGUpIHtcblx0ICAgICAgICAgIGZyYW1lLnNjb3BlW2FyZ10gPSBldmFsU2NvcGVbYXJnXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBldmFsU2NvcGUgPSBmcmFtZS5zY29wZTtcblxuXHQgICAgICB2YXIgY29kZSA9IGluamVjdFNjb3BlKGV2YWxTY29wZSwgZnJhbWUuYm9keSk7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgbW9kdWxlRXZhbCA9IGZ1bmN0aW9uKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYocGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcGF0Y2hlZC5wcm90b3R5cGUgPSBmLnByb3RvdHlwZTtcblxuXHQgICAgICAgIGV2YWwoYmluZGluZyArICcgPSBwYXRjaGVkO1xcbicpO1xuXG5cdCAgICAgICAgaWYobW9kdWxlLmV4cG9ydHNbYmluZGluZ10pIHtcblx0ICAgICAgICAgIG1vZHVsZS5leHBvcnRzW2JpbmRpbmddID0gcGF0Y2hlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSBtb2R1bGUuaG90LmRhdGEucGF0Y2hlZEJpbmRpbmdzO1xuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgLy8gV2UgbmVlZCB0byByZWlmeSB0aGUgZnVuY3Rpb24gaW4gdGhlIG9yaWdpbmFsIG1vZHVsZSBzb1xuXHQgICAgICAgIC8vIGl0IHJlZmVyZW5jZXMgYW55IG9mIHRoZSBvcmlnaW5hbCBzdGF0ZS4gU3RyaXAgdGhlIG5hbWVcblx0ICAgICAgICAvLyBhbmQgc2ltcGx5IGV2YWwgaXQuXG5cdCAgICAgICAgdmFyIGZ1bmNDb2RlID0gKFxuXHQgICAgICAgICAgJygnICsgZi50b1N0cmluZygpLnJlcGxhY2UoL15mdW5jdGlvbiBcXHcrXFwoLywgJ2Z1bmN0aW9uICgnKSArICcpJ1xuXHQgICAgICAgICk7XG5cdCAgICAgICAgcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWwoZnVuY0NvZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgaWYodHlwZW9mIF9fZXZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlKGdldEV2YWxTb3VyY2UoX19ldmFsKSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2F0Y2goZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBldmFsaW5nOiAnICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblx0XG5cdC8vIEdhbWUgd29ybGQgdXBkYXRlXG5cdG1vZHVsZS5leHBvcnRzID0gZ2FtZUxvb3A7XG5cdFxuXHR2YXIgaWRlbnRpdHkgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg3KSk7XG5cdFxuXHR2YXIgQmFjb24gPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cdFxuXHR2YXIgX2JpcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdHZhciB1cGRhdGVCaXJkID0gX2JpcmQudXBkYXRlQmlyZDtcblx0dmFyIGJpcmRUb3VjaGVzUGlwZSA9IF9iaXJkLmJpcmRUb3VjaGVzUGlwZTtcblx0dmFyIGJpcmRUb3VjaGVzR3JvdW5kID0gX2JpcmQuYmlyZFRvdWNoZXNHcm91bmQ7XG5cdFxuXHR2YXIgdXBkYXRlV29ybGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KS51cGRhdGVXb3JsZDtcblx0XG5cdHZhciB1cGRhdGVQaXBlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpLnVwZGF0ZVBpcGVzO1xuXHRcblx0ZnVuY3Rpb24gZ2FtZUxvb3AoaW5wdXQsIGluaXRpYWxzKSB7XG5cdCAgdmFyIGdhbWVPdXRwdXQgPSBuZXcgQmFjb24uQnVzKCk7XG5cdFxuXHQgIHZhciBiaXJkVG91Y2hlZEdyb3VuZCA9IGdhbWVPdXRwdXQuZmxhdE1hcChiaXJkVG91Y2hlc0dyb3VuZCk7XG5cdCAgdmFyIGJpcmRUb3VjaGVkUGlwZSA9IGdhbWVPdXRwdXQubWFwKGJpcmRUb3VjaGVzUGlwZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQgPSBCYWNvbi56aXBXaXRoKGZ1bmN0aW9uIChiaXJkVG91Y2hlZEdyb3VuZCwgYmlyZFRvdWNoZWRQaXBlKSB7XG5cdCAgICByZXR1cm4geyBiaXJkVG91Y2hlZEdyb3VuZDogYmlyZFRvdWNoZWRHcm91bmQsIGJpcmRUb3VjaGVkUGlwZTogYmlyZFRvdWNoZWRQaXBlIH07XG5cdCAgfSwgYmlyZFRvdWNoZWRHcm91bmQuc3RhcnRXaXRoKGZhbHNlKSwgYmlyZFRvdWNoZWRQaXBlLnN0YXJ0V2l0aChmYWxzZSkpO1xuXHRcblx0ICB2YXIgaW8gPSBCYWNvbi56aXBBc0FycmF5KGlucHV0LCBvdXRwdXQpO1xuXHRcblx0ICB2YXIgdXBkYXRlZFdvcmxkID0gaW8uc2Nhbihpbml0aWFscy53b3JsZCwgdXBkYXRlV29ybGQpLnNraXAoMSk7XG5cdFxuXHQgIHZhciB1cGRhdGVkQmlyZCA9IEJhY29uLnppcEFzQXJyYXkoaW8sIHVwZGF0ZWRXb3JsZCkuc2Nhbihpbml0aWFscy5iaXJkLCB1cGRhdGVCaXJkKS5za2lwKDEpO1xuXHRcblx0ICB2YXIgdXBkYXRlZFBpcGVzID0gQmFjb24uemlwQXNBcnJheSh1cGRhdGVkV29ybGQsIHVwZGF0ZWRCaXJkKS5zY2FuKGluaXRpYWxzLnBpcGVzLCB1cGRhdGVQaXBlcykuc2tpcCgxKTtcblx0XG5cdCAgdmFyIGdhbWUgPSBCYWNvbi56aXBXaXRoKGZ1bmN0aW9uICh3b3JsZCwgYmlyZCwgcGlwZXMpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHdvcmxkOiB3b3JsZCxcblx0ICAgICAgYmlyZDogYmlyZCxcblx0ICAgICAgcGlwZXM6IHBpcGVzXG5cdCAgICB9O1xuXHQgIH0sIHVwZGF0ZWRXb3JsZCwgdXBkYXRlZEJpcmQsIHVwZGF0ZWRQaXBlcyk7XG5cdFxuXHQgIGdhbWUub25WYWx1ZShnYW1lT3V0cHV0LnB1c2guYmluZChnYW1lT3V0cHV0KSk7XG5cdFxuXHQgIHJldHVybiBnYW1lO1xuXHR9XG5cblx0LyogSE9UIFBBVENIIExPQURFUiAqLyB2YXIgX19tb2R1bGVCaW5kaW5ncyA9IFtcImdhbWVMb29wXCJdOyBpZihmYWxzZSkge1xuXHQgIG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uKGVycikge1xuXHQgICAgY29uc29sZS5sb2coJ1tITVJdIEVycm9yIGFjY2VwdGluZzogJyArIGVycik7XG5cdCAgfSk7XG5cdCAgdmFyIGdldEV2YWxTb3VyY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgY29kZSA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICAgIHZhciBtID0gY29kZS5tYXRjaCgvXmZ1bmN0aW9uXFxzK19fZXZhbFxccypcXCgoLiopXFwpXFxzKlxceyhbXFxzXFxTXSopXFx9JC9pKTtcblx0ICAgIGlmKCFtKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGFyZ3MgPSBtWzFdO1xuXHQgICAgdmFyIGJvZHkgPSBtWzJdO1xuXHQgICAgdmFyIHNjb3BlID0ge307XG5cblx0ICAgIGlmKGFyZ3MudHJpbSgpKSB7XG5cdCAgICAgIGFyZ3Muc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZy5pbmRleE9mKCc9JykgIT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgcCA9IGFyZy5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgc2NvcGVbcFswXS50cmltKCldID0gSlNPTi5wYXJzZShwWzFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBzY29wZVthcmcudHJpbSgpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geyBib2R5OiBib2R5LCBzY29wZTogc2NvcGUgfTtcblx0ICB9XG5cblx0ICB2YXIgaW5qZWN0U2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY29kZSkge1xuXHQgICAgLy8gVGFrZSBhbiBleHBsaWNpdCBzY29wZSBvYmplY3QgYW5kIGluamVjdCBpdCBzbyB0aGF0XG5cdCAgICAvLyBgY29kZWAgcnVucyBpbiBjb250ZXh0IG9mIGl0XG5cdCAgICB2YXIgaW5qZWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICd2YXIgJyArIGJpbmRpbmcgKyAnID0gZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJzsnXG5cdCAgICB9KS5qb2luKCcgJyk7XG5cblx0ICAgIC8vIFVwZGF0ZSBvdXIgc2NvcGUgb2JqZWN0IHdpdGggYW55IG1vZGlmaWNhdGlvbnNcblx0ICAgIHZhciBleHRyYWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICdldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnID0gJyArIGJpbmRpbmcgKyAnOyc7XG5cdCAgICB9KS5qb2luKCcgJyk7XG5cdCAgICByZXR1cm4gaW5qZWN0ZWQgKyBjb2RlICsgZXh0cmFjdGVkO1xuXHQgIH1cblxuXHQgIHZhciBiaW5kaW5ncyA9IF9fbW9kdWxlQmluZGluZ3M7XG5cblx0ICBpZighbW9kdWxlLmhvdC5kYXRhKSB7XG5cdCAgICAvLyBGaXJzdCB0aW1lIGxvYWRpbmcuIFRyeSBhbmQgcGF0Y2ggc29tZXRoaW5nLlxuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IHt9O1xuXHQgICAgdmFyIGV2YWxTY29wZSA9IHt9O1xuXG5cdCAgICB2YXIgbW9kdWxlRXZhbFdpdGhTY29wZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgc2NvcGUgdG8gcmVmbGVjdCBvbmx5IHRoZSB2YWx1ZXMgc3BlY2lmaWVkIGFzXG5cdCAgICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgX19ldmFsIGZ1bmN0aW9uLiBDb3B5IG92ZXIgdmFsdWVzIGZyb20gdGhlXG5cdCAgICAgIC8vIGV4aXN0aW5nIHNjb3BlIGFuZCBpZ25vcmUgdGhlIHJlc3QuXG5cdCAgICAgIE9iamVjdC5rZXlzKGV2YWxTY29wZSkuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcgaW4gZnJhbWUuc2NvcGUpIHtcblx0ICAgICAgICAgIGZyYW1lLnNjb3BlW2FyZ10gPSBldmFsU2NvcGVbYXJnXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBldmFsU2NvcGUgPSBmcmFtZS5zY29wZTtcblxuXHQgICAgICB2YXIgY29kZSA9IGluamVjdFNjb3BlKGV2YWxTY29wZSwgZnJhbWUuYm9keSk7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgbW9kdWxlRXZhbCA9IGZ1bmN0aW9uKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYocGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcGF0Y2hlZC5wcm90b3R5cGUgPSBmLnByb3RvdHlwZTtcblxuXHQgICAgICAgIGV2YWwoYmluZGluZyArICcgPSBwYXRjaGVkO1xcbicpO1xuXG5cdCAgICAgICAgaWYobW9kdWxlLmV4cG9ydHNbYmluZGluZ10pIHtcblx0ICAgICAgICAgIG1vZHVsZS5leHBvcnRzW2JpbmRpbmddID0gcGF0Y2hlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSBtb2R1bGUuaG90LmRhdGEucGF0Y2hlZEJpbmRpbmdzO1xuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgLy8gV2UgbmVlZCB0byByZWlmeSB0aGUgZnVuY3Rpb24gaW4gdGhlIG9yaWdpbmFsIG1vZHVsZSBzb1xuXHQgICAgICAgIC8vIGl0IHJlZmVyZW5jZXMgYW55IG9mIHRoZSBvcmlnaW5hbCBzdGF0ZS4gU3RyaXAgdGhlIG5hbWVcblx0ICAgICAgICAvLyBhbmQgc2ltcGx5IGV2YWwgaXQuXG5cdCAgICAgICAgdmFyIGZ1bmNDb2RlID0gKFxuXHQgICAgICAgICAgJygnICsgZi50b1N0cmluZygpLnJlcGxhY2UoL15mdW5jdGlvbiBcXHcrXFwoLywgJ2Z1bmN0aW9uICgnKSArICcpJ1xuXHQgICAgICAgICk7XG5cdCAgICAgICAgcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWwoZnVuY0NvZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgaWYodHlwZW9mIF9fZXZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlKGdldEV2YWxTb3VyY2UoX19ldmFsKSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2F0Y2goZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBldmFsaW5nOiAnICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblx0XG5cdHZhciBpZGVudGl0eSA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKTtcblx0XG5cdHZhciBCYWNvbiA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKTtcblx0XG5cdHZhciBfY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBGUkFNRV9SQVRFID0gX2NvbnN0YW50cy5GUkFNRV9SQVRFO1xuXHR2YXIgU1BBQ0VfS0VZID0gX2NvbnN0YW50cy5TUEFDRV9LRVk7XG5cdFxuXHR2YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdFxuXHR2YXIgcmVjb3JkID0gX3N0b3JlLnJlY29yZDtcblx0dmFyIHNlbGVjdGVkU3RhdGUkID0gX3N0b3JlLnNlbGVjdGVkU3RhdGUkO1xuXHR2YXIgaXNSdW5uaW5nJCA9IF9zdG9yZS5pc1J1bm5pbmckO1xuXHR2YXIgZnV0dXJlSW5wdXQkID0gX3N0b3JlLmZ1dHVyZUlucHV0JDtcblx0XG5cdHZhciBnYW1lTG9vcCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKSk7XG5cdFxuXHR2YXIgaW5pdGlhbEJpcmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKS5pbml0aWFsQmlyZDtcblx0XG5cdHZhciBpbml0aWFsV29ybGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KS5pbml0aWFsV29ybGQ7XG5cdFxuXHR2YXIgaW5pdGlhbFBpcGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMykuaW5pdGlhbFBpcGVzO1xuXHRcblx0Ly8gVXNlciBldmVudHNcblx0dmFyIHNwYWNlUHJlc3NlZCA9IEJhY29uLmZyb21FdmVudCh3aW5kb3csIFwia2V5ZG93blwiKS5tYXAoXCIua2V5Q29kZVwiKS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcblx0ICByZXR1cm4geCA9PT0gU1BBQ0VfS0VZO1xuXHR9KTtcblx0dmFyIG1vdXNlQ2xpY2tlZCA9IEJhY29uLmZyb21FdmVudCh3aW5kb3csIFwiY2xpY2tcIik7XG5cdFxuXHQvLyBHYW1lIHRpY2tcblx0dmFyIHRpY2sgPSBCYWNvbi5zY2hlZHVsZUFuaW1hdGlvbkZyYW1lKCkuYnVmZmVyV2l0aFRpbWUoRlJBTUVfUkFURSkuZmlsdGVyKGlzUnVubmluZyQpO1xuXHRcblx0dmFyIHVzZXJDbGlja3NGb3JGcmFtZSA9IG1vdXNlQ2xpY2tlZC5tZXJnZShzcGFjZVByZXNzZWQpLmJ1ZmZlclVudGlsVmFsdWUodGljayk7XG5cdFxuXHQvLyBJbnB1dCBjYXVzZWQgYnkgZ2FtZSBzdGF0ZVxuXHR2YXIgaSA9IDA7XG5cdHZhciBpbnB1dCA9IEJhY29uLnppcFdpdGgoZnVuY3Rpb24gKGNsaWNrcykge1xuXHQgIHJldHVybiB7IGNsaWNrczogY2xpY2tzLCB0aWNrOiArK2kgfTtcblx0fSwgdXNlckNsaWNrc0ZvckZyYW1lXG5cdC8vIFBvc3NpYmx5IG1vcmUgY29taW5nXG5cdCk7XG5cdFxuXHR2YXIgZnV0dXJlcyQgPSBCYWNvbi56aXBXaXRoKGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGZ1dHVyZUlucHV0KSB7XG5cdCAgLy8gY29uc29sZS5sb2coaW5pdGlhbFN0YXRlLCBmdXR1cmVJbnB1dCk7XG5cdCAgcmV0dXJuIGdhbWVMb29wKEJhY29uLmZyb21BcnJheShmdXR1cmVJbnB1dCksIGluaXRpYWxTdGF0ZSk7XG5cdH0sIHNlbGVjdGVkU3RhdGUkLCBmdXR1cmVJbnB1dCQpLmZsYXRNYXAoaWRlbnRpdHkpO1xuXHRcblx0Ly8gZnV0dXJlcyQubG9nKClcblx0XG5cdEJhY29uLmNvbWJpbmVBc0FycmF5KGZ1dHVyZXMkLCBzZWxlY3RlZFN0YXRlJCkub25WYWx1ZXMoX193ZWJwYWNrX3JlcXVpcmVfXygxNCkucmVuZGVyRnV0dXJlKTtcblx0XG5cdHZhciBnYW1lID0gZ2FtZUxvb3AoaW5wdXQuZmlsdGVyKGlzUnVubmluZyQpLCB7XG5cdCAgYmlyZDogaW5pdGlhbEJpcmQsXG5cdCAgcGlwZXM6IGluaXRpYWxQaXBlcyxcblx0ICB3b3JsZDogaW5pdGlhbFdvcmxkXG5cdH0pO1xuXHRcblx0QmFjb24uemlwV2l0aChmdW5jdGlvbiAoc3RhdGUsIGlucHV0KSB7XG5cdCAgcmV0dXJuIHsgc3RhdGU6IHN0YXRlLCBpbnB1dDogaW5wdXQgfTtcblx0fSwgZ2FtZSwgaW5wdXQpLmZpbHRlcihpc1J1bm5pbmckKS5vblZhbHVlKHJlY29yZCk7XG5cdFxuXHQvLyBSZW5kZXJpbmdcblx0Z2FtZS5tZXJnZShzZWxlY3RlZFN0YXRlJCkub25WYWx1ZShfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KSk7XG5cdFxuXHQvKiBIT1QgUEFUQ0ggTE9BREVSICovIHZhciBfX21vZHVsZUJpbmRpbmdzID0gW107IGlmKGZhbHNlKSB7XG5cdCAgbW9kdWxlLmhvdC5hY2NlcHQoZnVuY3Rpb24oZXJyKSB7XG5cdCAgICBjb25zb2xlLmxvZygnW0hNUl0gRXJyb3IgYWNjZXB0aW5nOiAnICsgZXJyKTtcblx0ICB9KTtcblx0ICB2YXIgZ2V0RXZhbFNvdXJjZSA9IGZ1bmN0aW9uKGZ1bmMpIHtcblx0ICAgIHZhciBjb2RlID0gZnVuYy50b1N0cmluZygpO1xuXHQgICAgdmFyIG0gPSBjb2RlLm1hdGNoKC9eZnVuY3Rpb25cXHMrX19ldmFsXFxzKlxcKCguKilcXClcXHMqXFx7KFtcXHNcXFNdKilcXH0kL2kpO1xuXHQgICAgaWYoIW0pIHtcblx0ICAgICAgcmV0dXJuIG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgYXJncyA9IG1bMV07XG5cdCAgICB2YXIgYm9keSA9IG1bMl07XG5cdCAgICB2YXIgc2NvcGUgPSB7fTtcblxuXHQgICAgaWYoYXJncy50cmltKCkpIHtcblx0ICAgICAgYXJncy5zcGxpdCgnLCcpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnLmluZGV4T2YoJz0nKSAhPT0gLTEpIHtcblx0ICAgICAgICAgIHZhciBwID0gYXJnLnNwbGl0KCc9Jyk7XG5cdCAgICAgICAgICBzY29wZVtwWzBdLnRyaW0oKV0gPSBKU09OLnBhcnNlKHBbMV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgIHNjb3BlW2FyZy50cmltKCldID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIHJldHVybiB7IGJvZHk6IGJvZHksIHNjb3BlOiBzY29wZSB9O1xuXHQgIH1cblxuXHQgIHZhciBpbmplY3RTY29wZSA9IGZ1bmN0aW9uKHNjb3BlLCBjb2RlKSB7XG5cdCAgICAvLyBUYWtlIGFuIGV4cGxpY2l0IHNjb3BlIG9iamVjdCBhbmQgaW5qZWN0IGl0IHNvIHRoYXRcblx0ICAgIC8vIGBjb2RlYCBydW5zIGluIGNvbnRleHQgb2YgaXRcblx0ICAgIHZhciBpbmplY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ3ZhciAnICsgYmluZGluZyArICcgPSBldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnOydcblx0ICAgIH0pLmpvaW4oJyAnKTtcblxuXHQgICAgLy8gVXBkYXRlIG91ciBzY29wZSBvYmplY3Qgd2l0aCBhbnkgbW9kaWZpY2F0aW9uc1xuXHQgICAgdmFyIGV4dHJhY3RlZCA9IE9iamVjdC5rZXlzKHNjb3BlKS5tYXAoZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICByZXR1cm4gJ2V2YWxTY29wZS4nICsgYmluZGluZyArICcgPSAnICsgYmluZGluZyArICc7Jztcblx0ICAgIH0pLmpvaW4oJyAnKTtcblx0ICAgIHJldHVybiBpbmplY3RlZCArIGNvZGUgKyBleHRyYWN0ZWQ7XG5cdCAgfVxuXG5cdCAgdmFyIGJpbmRpbmdzID0gX19tb2R1bGVCaW5kaW5ncztcblxuXHQgIGlmKCFtb2R1bGUuaG90LmRhdGEpIHtcblx0ICAgIC8vIEZpcnN0IHRpbWUgbG9hZGluZy4gVHJ5IGFuZCBwYXRjaCBzb21ldGhpbmcuXG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0ge307XG5cdCAgICB2YXIgZXZhbFNjb3BlID0ge307XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsV2l0aFNjb3BlID0gZnVuY3Rpb24oZnJhbWUpIHtcblx0ICAgICAgLy8gVXBkYXRlIHRoZSBzY29wZSB0byByZWZsZWN0IG9ubHkgdGhlIHZhbHVlcyBzcGVjaWZpZWQgYXNcblx0ICAgICAgLy8gYXJndW1lbnRzIHRvIHRoZSBfX2V2YWwgZnVuY3Rpb24uIENvcHkgb3ZlciB2YWx1ZXMgZnJvbSB0aGVcblx0ICAgICAgLy8gZXhpc3Rpbmcgc2NvcGUgYW5kIGlnbm9yZSB0aGUgcmVzdC5cblx0ICAgICAgT2JqZWN0LmtleXMoZXZhbFNjb3BlKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZyBpbiBmcmFtZS5zY29wZSkge1xuXHQgICAgICAgICAgZnJhbWUuc2NvcGVbYXJnXSA9IGV2YWxTY29wZVthcmddO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGV2YWxTY29wZSA9IGZyYW1lLnNjb3BlO1xuXG5cdCAgICAgIHZhciBjb2RlID0gaW5qZWN0U2NvcGUoZXZhbFNjb3BlLCBmcmFtZS5ib2R5KTtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIHZhciBtb2R1bGVFdmFsID0gZnVuY3Rpb24oY29kZSkge1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIHZhciBwYXRjaGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZihwYXRjaGVkQmluZGluZ3NbYmluZGluZ10pIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBwYXRjaGVkLnByb3RvdHlwZSA9IGYucHJvdG90eXBlO1xuXG5cdCAgICAgICAgZXZhbChiaW5kaW5nICsgJyA9IHBhdGNoZWQ7XFxuJyk7XG5cblx0ICAgICAgICBpZihtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgbW9kdWxlLmV4cG9ydHNbYmluZGluZ10gPSBwYXRjaGVkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGVsc2Uge1xuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IG1vZHVsZS5ob3QuZGF0YS5wYXRjaGVkQmluZGluZ3M7XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICAvLyBXZSBuZWVkIHRvIHJlaWZ5IHRoZSBmdW5jdGlvbiBpbiB0aGUgb3JpZ2luYWwgbW9kdWxlIHNvXG5cdCAgICAgICAgLy8gaXQgcmVmZXJlbmNlcyBhbnkgb2YgdGhlIG9yaWdpbmFsIHN0YXRlLiBTdHJpcCB0aGUgbmFtZVxuXHQgICAgICAgIC8vIGFuZCBzaW1wbHkgZXZhbCBpdC5cblx0ICAgICAgICB2YXIgZnVuY0NvZGUgPSAoXG5cdCAgICAgICAgICAnKCcgKyBmLnRvU3RyaW5nKCkucmVwbGFjZSgvXmZ1bmN0aW9uIFxcdytcXCgvLCAnZnVuY3Rpb24gKCcpICsgJyknXG5cdCAgICAgICAgKTtcblx0ICAgICAgICBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10gPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbChmdW5jQ29kZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBpZih0eXBlb2YgX19ldmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUoZ2V0RXZhbFNvdXJjZShfX2V2YWwpKTtcblx0ICAgICAgfVxuXHQgICAgICBjYXRjaChlKSB7XG5cdCAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGV2YWxpbmc6ICcgKyBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXHRcblx0dmFyIEJhY29uID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXHRcblx0dmFyIHBsdWNrID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMzMpKTtcblx0XG5cdHZhciBnZXQgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygyNCkpO1xuXHRcblx0dmFyIGlkZW50aXR5ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNykpO1xuXHRcblx0dmFyIHBhcnRpYWxSaWdodCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KSk7XG5cdFxuXHR2YXIgcmVwbGFjZU5vdGlmaWVyJCA9IF9fd2VicGFja19yZXF1aXJlX18oNSkucmVwbGFjZU5vdGlmaWVyJDtcblx0XG5cdHZhciBzbGlkZXJFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnV0dXJlLXNsaWRlclwiKTtcblx0dmFyIGZyYW1lc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmFtZXNcIik7XG5cdFxuXHR2YXIgUEFVU0VfS0VZID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKS5QQVVTRV9LRVk7XG5cdFxuXHR2YXIgcmVjb3JkZWRTdGF0ZXMkID0gbmV3IEJhY29uLkJ1cygpO1xuXHRcblx0dmFyIHNsaWRlckNoYW5nZSQgPSBCYWNvbi5mcm9tRXZlbnQoc2xpZGVyRWwsIFwiaW5wdXRcIikubWFwKGZ1bmN0aW9uIChlKSB7XG5cdCAgcmV0dXJuIHBhcnNlSW50KGUudGFyZ2V0LnZhbHVlLCAxMCk7XG5cdH0pO1xuXHRcblx0dmFyIHBhdXNlZCQgPSBCYWNvbi5mcm9tRXZlbnQod2luZG93LCBcImtleWRvd25cIikuZmlsdGVyKGZ1bmN0aW9uIChldikge1xuXHQgIHJldHVybiBldi5rZXlDb2RlID09PSBQQVVTRV9LRVk7XG5cdH0pLnNjYW4oZmFsc2UsIGZ1bmN0aW9uIChwYXVzZWQpIHtcblx0ICByZXR1cm4gIXBhdXNlZDtcblx0fSk7XG5cdFxuXHRwYXVzZWQkLmZpbHRlcihpZGVudGl0eSkub25WYWx1ZShmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHNsaWRlckVsLmZvY3VzKCk7XG5cdH0pO1xuXHRcblx0dmFyIGFsbFN0YXRlcyQgPSByZWNvcmRlZFN0YXRlcyQuc2NhbihbXSwgZnVuY3Rpb24gKHN0YXRlcywgdmFsdWUpIHtcblx0ICBzdGF0ZXMucHVzaCh2YWx1ZSk7XG5cdCAgcmV0dXJuIHN0YXRlcztcblx0fSk7XG5cdFxuXHR2YXIgdXBkYXRlUmVxdWVzdCQgPSBCYWNvbi5jb21iaW5lV2l0aChpZGVudGl0eSwgc2xpZGVyQ2hhbmdlJCwgcmVwbGFjZU5vdGlmaWVyJCk7XG5cdHZhciBpc1J1bm5pbmckID0gdXBkYXRlUmVxdWVzdCQubWFwKGZhbHNlKS50b1Byb3BlcnR5KCkuc3RhcnRXaXRoKHRydWUpLmFuZChwYXVzZWQkLm5vdCgpKTtcblx0XG5cdHZhciBzZWxlY3RlZFN0YXRlJCA9IEJhY29uLmNvbWJpbmVXaXRoKGZ1bmN0aW9uIChhcnIsIGluZGV4KSB7XG5cdCAgcmV0dXJuIGFycltpbmRleF0gfHwgYXJyW2Fyci5sZW5ndGggLSAxXTtcblx0fSwgYWxsU3RhdGVzJC5maWx0ZXIoaXNSdW5uaW5nJCksIHVwZGF0ZVJlcXVlc3QkKS5tYXAoXCIuc3RhdGVcIikudG9FdmVudFN0cmVhbSgpO1xuXHRcblx0dmFyIGZ1dHVyZUlucHV0JCA9IGFsbFN0YXRlcyQuc2FtcGxlZEJ5KHVwZGF0ZVJlcXVlc3QkLCBmdW5jdGlvbiAoYXJyLCBpbmRleCkge1xuXHQgIHJldHVybiBhcnIuc2xpY2UoaW5kZXggKyAxLCBhcnIubGVuZ3RoKTtcblx0fSkubWFwKHBhcnRpYWxSaWdodChwbHVjaywgXCJpbnB1dFwiKSk7XG5cdFxuXHR2YXIgbmV3U3RhdGVzTGVuZ3RoJCA9IGFsbFN0YXRlcyQubWFwKGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGEubGVuZ3RoO1xuXHR9KTtcblx0XG5cdG5ld1N0YXRlc0xlbmd0aCQuZmlsdGVyKGlzUnVubmluZyQpLm9uVmFsdWUoZnVuY3Rpb24gKHZhbCkge1xuXHQgIHJldHVybiBzbGlkZXJFbC52YWx1ZSA9IHZhbDtcblx0fSk7XG5cdFxuXHRuZXdTdGF0ZXNMZW5ndGgkLm9uVmFsdWUoZnVuY3Rpb24gKHgpIHtcblx0ICBzbGlkZXJFbC5tYXggPSB4O1xuXHQgIGZyYW1lc0VsLmlubmVySFRNTCA9IHg7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMucmVjb3JkID0gcmVjb3JkZWRTdGF0ZXMkLnB1c2guYmluZChyZWNvcmRlZFN0YXRlcyQpO1xuXHRtb2R1bGUuZXhwb3J0cy5pc1J1bm5pbmckID0gaXNSdW5uaW5nJDtcblx0bW9kdWxlLmV4cG9ydHMuc2VsZWN0ZWRTdGF0ZSQgPSBzZWxlY3RlZFN0YXRlJDtcblx0bW9kdWxlLmV4cG9ydHMuZnV0dXJlSW5wdXQkID0gZnV0dXJlSW5wdXQkO1xuXHRcblx0LyogSE9UIFBBVENIIExPQURFUiAqLyB2YXIgX19tb2R1bGVCaW5kaW5ncyA9IFtdOyBpZihmYWxzZSkge1xuXHQgIG1vZHVsZS5ob3QuYWNjZXB0KGZ1bmN0aW9uKGVycikge1xuXHQgICAgY29uc29sZS5sb2coJ1tITVJdIEVycm9yIGFjY2VwdGluZzogJyArIGVycik7XG5cdCAgfSk7XG5cdCAgdmFyIGdldEV2YWxTb3VyY2UgPSBmdW5jdGlvbihmdW5jKSB7XG5cdCAgICB2YXIgY29kZSA9IGZ1bmMudG9TdHJpbmcoKTtcblx0ICAgIHZhciBtID0gY29kZS5tYXRjaCgvXmZ1bmN0aW9uXFxzK19fZXZhbFxccypcXCgoLiopXFwpXFxzKlxceyhbXFxzXFxTXSopXFx9JC9pKTtcblx0ICAgIGlmKCFtKSB7XG5cdCAgICAgIHJldHVybiBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGFyZ3MgPSBtWzFdO1xuXHQgICAgdmFyIGJvZHkgPSBtWzJdO1xuXHQgICAgdmFyIHNjb3BlID0ge307XG5cblx0ICAgIGlmKGFyZ3MudHJpbSgpKSB7XG5cdCAgICAgIGFyZ3Muc3BsaXQoJywnKS5mb3JFYWNoKGZ1bmN0aW9uKGFyZykge1xuXHQgICAgICAgIGlmKGFyZy5pbmRleE9mKCc9JykgIT09IC0xKSB7XG5cdCAgICAgICAgICB2YXIgcCA9IGFyZy5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgc2NvcGVbcFswXS50cmltKCldID0gSlNPTi5wYXJzZShwWzFdKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZWxzZSB7XG5cdCAgICAgICAgICBzY29wZVthcmcudHJpbSgpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXG5cdCAgICByZXR1cm4geyBib2R5OiBib2R5LCBzY29wZTogc2NvcGUgfTtcblx0ICB9XG5cblx0ICB2YXIgaW5qZWN0U2NvcGUgPSBmdW5jdGlvbihzY29wZSwgY29kZSkge1xuXHQgICAgLy8gVGFrZSBhbiBleHBsaWNpdCBzY29wZSBvYmplY3QgYW5kIGluamVjdCBpdCBzbyB0aGF0XG5cdCAgICAvLyBgY29kZWAgcnVucyBpbiBjb250ZXh0IG9mIGl0XG5cdCAgICB2YXIgaW5qZWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICd2YXIgJyArIGJpbmRpbmcgKyAnID0gZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJzsnXG5cdCAgICB9KS5qb2luKCcgJyk7XG5cblx0ICAgIC8vIFVwZGF0ZSBvdXIgc2NvcGUgb2JqZWN0IHdpdGggYW55IG1vZGlmaWNhdGlvbnNcblx0ICAgIHZhciBleHRyYWN0ZWQgPSBPYmplY3Qua2V5cyhzY29wZSkubWFwKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgcmV0dXJuICdldmFsU2NvcGUuJyArIGJpbmRpbmcgKyAnID0gJyArIGJpbmRpbmcgKyAnOyc7XG5cdCAgICB9KS5qb2luKCcgJyk7XG5cdCAgICByZXR1cm4gaW5qZWN0ZWQgKyBjb2RlICsgZXh0cmFjdGVkO1xuXHQgIH1cblxuXHQgIHZhciBiaW5kaW5ncyA9IF9fbW9kdWxlQmluZGluZ3M7XG5cblx0ICBpZighbW9kdWxlLmhvdC5kYXRhKSB7XG5cdCAgICAvLyBGaXJzdCB0aW1lIGxvYWRpbmcuIFRyeSBhbmQgcGF0Y2ggc29tZXRoaW5nLlxuXHQgICAgdmFyIHBhdGNoZWRCaW5kaW5ncyA9IHt9O1xuXHQgICAgdmFyIGV2YWxTY29wZSA9IHt9O1xuXG5cdCAgICB2YXIgbW9kdWxlRXZhbFdpdGhTY29wZSA9IGZ1bmN0aW9uKGZyYW1lKSB7XG5cdCAgICAgIC8vIFVwZGF0ZSB0aGUgc2NvcGUgdG8gcmVmbGVjdCBvbmx5IHRoZSB2YWx1ZXMgc3BlY2lmaWVkIGFzXG5cdCAgICAgIC8vIGFyZ3VtZW50cyB0byB0aGUgX19ldmFsIGZ1bmN0aW9uLiBDb3B5IG92ZXIgdmFsdWVzIGZyb20gdGhlXG5cdCAgICAgIC8vIGV4aXN0aW5nIHNjb3BlIGFuZCBpZ25vcmUgdGhlIHJlc3QuXG5cdCAgICAgIE9iamVjdC5rZXlzKGV2YWxTY29wZSkuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcgaW4gZnJhbWUuc2NvcGUpIHtcblx0ICAgICAgICAgIGZyYW1lLnNjb3BlW2FyZ10gPSBldmFsU2NvcGVbYXJnXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBldmFsU2NvcGUgPSBmcmFtZS5zY29wZTtcblxuXHQgICAgICB2YXIgY29kZSA9IGluamVjdFNjb3BlKGV2YWxTY29wZSwgZnJhbWUuYm9keSk7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICB2YXIgbW9kdWxlRXZhbCA9IGZ1bmN0aW9uKGNvZGUpIHtcblx0ICAgICAgcmV0dXJuIGV2YWwoY29kZSk7XG5cdCAgICB9XG5cblx0ICAgIGJpbmRpbmdzLmZvckVhY2goZnVuY3Rpb24oYmluZGluZykge1xuXHQgICAgICB2YXIgZiA9IGV2YWwoYmluZGluZyk7XG5cblx0ICAgICAgaWYodHlwZW9mIGYgPT09ICdmdW5jdGlvbicgJiYgYmluZGluZyAhPT0gJ19fZXZhbCcpIHtcblx0ICAgICAgICB2YXIgcGF0Y2hlZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYocGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBwYXRjaGVkQmluZGluZ3NbYmluZGluZ10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgcGF0Y2hlZC5wcm90b3R5cGUgPSBmLnByb3RvdHlwZTtcblxuXHQgICAgICAgIGV2YWwoYmluZGluZyArICcgPSBwYXRjaGVkO1xcbicpO1xuXG5cdCAgICAgICAgaWYobW9kdWxlLmV4cG9ydHNbYmluZGluZ10pIHtcblx0ICAgICAgICAgIG1vZHVsZS5leHBvcnRzW2JpbmRpbmddID0gcGF0Y2hlZDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXG5cdCAgICBtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oZGF0YSkge1xuXHQgICAgICBkYXRhLnBhdGNoZWRCaW5kaW5ncyA9IHBhdGNoZWRCaW5kaW5ncztcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsID0gbW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBlbHNlIHtcblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSBtb2R1bGUuaG90LmRhdGEucGF0Y2hlZEJpbmRpbmdzO1xuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgLy8gV2UgbmVlZCB0byByZWlmeSB0aGUgZnVuY3Rpb24gaW4gdGhlIG9yaWdpbmFsIG1vZHVsZSBzb1xuXHQgICAgICAgIC8vIGl0IHJlZmVyZW5jZXMgYW55IG9mIHRoZSBvcmlnaW5hbCBzdGF0ZS4gU3RyaXAgdGhlIG5hbWVcblx0ICAgICAgICAvLyBhbmQgc2ltcGx5IGV2YWwgaXQuXG5cdCAgICAgICAgdmFyIGZ1bmNDb2RlID0gKFxuXHQgICAgICAgICAgJygnICsgZi50b1N0cmluZygpLnJlcGxhY2UoL15mdW5jdGlvbiBcXHcrXFwoLywgJ2Z1bmN0aW9uICgnKSArICcpJ1xuXHQgICAgICAgICk7XG5cdCAgICAgICAgcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWwoZnVuY0NvZGUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgaWYodHlwZW9mIF9fZXZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlKGdldEV2YWxTb3VyY2UoX19ldmFsKSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2F0Y2goZSkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBldmFsaW5nOiAnICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGUgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRleHBvcnRzLnJhbmRvbSA9IHJhbmRvbTtcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiByYW5kb20obWluLCBtYXgpIHtcblx0ICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xuXHR9XG5cblx0LyogSE9UIFBBVENIIExPQURFUiAqLyB2YXIgX19tb2R1bGVCaW5kaW5ncyA9IFtcInJhbmRvbVwiXTsgaWYoZmFsc2UpIHtcblx0ICBtb2R1bGUuaG90LmFjY2VwdChmdW5jdGlvbihlcnIpIHtcblx0ICAgIGNvbnNvbGUubG9nKCdbSE1SXSBFcnJvciBhY2NlcHRpbmc6ICcgKyBlcnIpO1xuXHQgIH0pO1xuXHQgIHZhciBnZXRFdmFsU291cmNlID0gZnVuY3Rpb24oZnVuYykge1xuXHQgICAgdmFyIGNvZGUgPSBmdW5jLnRvU3RyaW5nKCk7XG5cdCAgICB2YXIgbSA9IGNvZGUubWF0Y2goL15mdW5jdGlvblxccytfX2V2YWxcXHMqXFwoKC4qKVxcKVxccypcXHsoW1xcc1xcU10qKVxcfSQvaSk7XG5cdCAgICBpZighbSkge1xuXHQgICAgICByZXR1cm4gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBhcmdzID0gbVsxXTtcblx0ICAgIHZhciBib2R5ID0gbVsyXTtcblx0ICAgIHZhciBzY29wZSA9IHt9O1xuXG5cdCAgICBpZihhcmdzLnRyaW0oKSkge1xuXHQgICAgICBhcmdzLnNwbGl0KCcsJykuZm9yRWFjaChmdW5jdGlvbihhcmcpIHtcblx0ICAgICAgICBpZihhcmcuaW5kZXhPZignPScpICE9PSAtMSkge1xuXHQgICAgICAgICAgdmFyIHAgPSBhcmcuc3BsaXQoJz0nKTtcblx0ICAgICAgICAgIHNjb3BlW3BbMF0udHJpbSgpXSA9IEpTT04ucGFyc2UocFsxXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGVsc2Uge1xuXHQgICAgICAgICAgc2NvcGVbYXJnLnRyaW0oKV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblxuXHQgICAgcmV0dXJuIHsgYm9keTogYm9keSwgc2NvcGU6IHNjb3BlIH07XG5cdCAgfVxuXG5cdCAgdmFyIGluamVjdFNjb3BlID0gZnVuY3Rpb24oc2NvcGUsIGNvZGUpIHtcblx0ICAgIC8vIFRha2UgYW4gZXhwbGljaXQgc2NvcGUgb2JqZWN0IGFuZCBpbmplY3QgaXQgc28gdGhhdFxuXHQgICAgLy8gYGNvZGVgIHJ1bnMgaW4gY29udGV4dCBvZiBpdFxuXHQgICAgdmFyIGluamVjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAndmFyICcgKyBiaW5kaW5nICsgJyA9IGV2YWxTY29wZS4nICsgYmluZGluZyArICc7J1xuXHQgICAgfSkuam9pbignICcpO1xuXG5cdCAgICAvLyBVcGRhdGUgb3VyIHNjb3BlIG9iamVjdCB3aXRoIGFueSBtb2RpZmljYXRpb25zXG5cdCAgICB2YXIgZXh0cmFjdGVkID0gT2JqZWN0LmtleXMoc2NvcGUpLm1hcChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHJldHVybiAnZXZhbFNjb3BlLicgKyBiaW5kaW5nICsgJyA9ICcgKyBiaW5kaW5nICsgJzsnO1xuXHQgICAgfSkuam9pbignICcpO1xuXHQgICAgcmV0dXJuIGluamVjdGVkICsgY29kZSArIGV4dHJhY3RlZDtcblx0ICB9XG5cblx0ICB2YXIgYmluZGluZ3MgPSBfX21vZHVsZUJpbmRpbmdzO1xuXG5cdCAgaWYoIW1vZHVsZS5ob3QuZGF0YSkge1xuXHQgICAgLy8gRmlyc3QgdGltZSBsb2FkaW5nLiBUcnkgYW5kIHBhdGNoIHNvbWV0aGluZy5cblx0ICAgIHZhciBwYXRjaGVkQmluZGluZ3MgPSB7fTtcblx0ICAgIHZhciBldmFsU2NvcGUgPSB7fTtcblxuXHQgICAgdmFyIG1vZHVsZUV2YWxXaXRoU2NvcGUgPSBmdW5jdGlvbihmcmFtZSkge1xuXHQgICAgICAvLyBVcGRhdGUgdGhlIHNjb3BlIHRvIHJlZmxlY3Qgb25seSB0aGUgdmFsdWVzIHNwZWNpZmllZCBhc1xuXHQgICAgICAvLyBhcmd1bWVudHMgdG8gdGhlIF9fZXZhbCBmdW5jdGlvbi4gQ29weSBvdmVyIHZhbHVlcyBmcm9tIHRoZVxuXHQgICAgICAvLyBleGlzdGluZyBzY29wZSBhbmQgaWdub3JlIHRoZSByZXN0LlxuXHQgICAgICBPYmplY3Qua2V5cyhldmFsU2NvcGUpLmZvckVhY2goZnVuY3Rpb24oYXJnKSB7XG5cdCAgICAgICAgaWYoYXJnIGluIGZyYW1lLnNjb3BlKSB7XG5cdCAgICAgICAgICBmcmFtZS5zY29wZVthcmddID0gZXZhbFNjb3BlW2FyZ107XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgZXZhbFNjb3BlID0gZnJhbWUuc2NvcGU7XG5cblx0ICAgICAgdmFyIGNvZGUgPSBpbmplY3RTY29wZShldmFsU2NvcGUsIGZyYW1lLmJvZHkpO1xuXHQgICAgICByZXR1cm4gZXZhbChjb2RlKTtcblx0ICAgIH1cblxuXHQgICAgdmFyIG1vZHVsZUV2YWwgPSBmdW5jdGlvbihjb2RlKSB7XG5cdCAgICAgIHJldHVybiBldmFsKGNvZGUpO1xuXHQgICAgfVxuXG5cdCAgICBiaW5kaW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGJpbmRpbmcpIHtcblx0ICAgICAgdmFyIGYgPSBldmFsKGJpbmRpbmcpO1xuXG5cdCAgICAgIGlmKHR5cGVvZiBmID09PSAnZnVuY3Rpb24nICYmIGJpbmRpbmcgIT09ICdfX2V2YWwnKSB7XG5cdCAgICAgICAgdmFyIHBhdGNoZWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGlmKHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSkge1xuXHQgICAgICAgICAgICByZXR1cm4gcGF0Y2hlZEJpbmRpbmdzW2JpbmRpbmddLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9O1xuXHQgICAgICAgIHBhdGNoZWQucHJvdG90eXBlID0gZi5wcm90b3R5cGU7XG5cblx0ICAgICAgICBldmFsKGJpbmRpbmcgKyAnID0gcGF0Y2hlZDtcXG4nKTtcblxuXHQgICAgICAgIGlmKG1vZHVsZS5leHBvcnRzW2JpbmRpbmddKSB7XG5cdCAgICAgICAgICBtb2R1bGUuZXhwb3J0c1tiaW5kaW5nXSA9IHBhdGNoZWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgbW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKGRhdGEpIHtcblx0ICAgICAgZGF0YS5wYXRjaGVkQmluZGluZ3MgPSBwYXRjaGVkQmluZGluZ3M7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbCA9IG1vZHVsZUV2YWw7XG5cdCAgICAgIGRhdGEubW9kdWxlRXZhbFdpdGhTY29wZSA9IG1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgZWxzZSB7XG5cdCAgICB2YXIgcGF0Y2hlZEJpbmRpbmdzID0gbW9kdWxlLmhvdC5kYXRhLnBhdGNoZWRCaW5kaW5ncztcblxuXHQgICAgYmluZGluZ3MuZm9yRWFjaChmdW5jdGlvbihiaW5kaW5nKSB7XG5cdCAgICAgIHZhciBmID0gZXZhbChiaW5kaW5nKTtcblxuXHQgICAgICBpZih0eXBlb2YgZiA9PT0gJ2Z1bmN0aW9uJyAmJiBiaW5kaW5nICE9PSAnX19ldmFsJykge1xuXHQgICAgICAgIC8vIFdlIG5lZWQgdG8gcmVpZnkgdGhlIGZ1bmN0aW9uIGluIHRoZSBvcmlnaW5hbCBtb2R1bGUgc29cblx0ICAgICAgICAvLyBpdCByZWZlcmVuY2VzIGFueSBvZiB0aGUgb3JpZ2luYWwgc3RhdGUuIFN0cmlwIHRoZSBuYW1lXG5cdCAgICAgICAgLy8gYW5kIHNpbXBseSBldmFsIGl0LlxuXHQgICAgICAgIHZhciBmdW5jQ29kZSA9IChcblx0ICAgICAgICAgICcoJyArIGYudG9TdHJpbmcoKS5yZXBsYWNlKC9eZnVuY3Rpb24gXFx3K1xcKC8sICdmdW5jdGlvbiAoJykgKyAnKSdcblx0ICAgICAgICApO1xuXHQgICAgICAgIHBhdGNoZWRCaW5kaW5nc1tiaW5kaW5nXSA9IG1vZHVsZS5ob3QuZGF0YS5tb2R1bGVFdmFsKGZ1bmNDb2RlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cblx0ICAgIGlmKHR5cGVvZiBfX2V2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbFdpdGhTY29wZShnZXRFdmFsU291cmNlKF9fZXZhbCkpO1xuXHQgICAgICB9XG5cdCAgICAgIGNhdGNoKGUpIHtcblx0ICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgZXZhbGluZzogJyArIGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cblx0ICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbihkYXRhKSB7XG5cdCAgICAgIGRhdGEucGF0Y2hlZEJpbmRpbmdzID0gcGF0Y2hlZEJpbmRpbmdzO1xuXHQgICAgICBkYXRhLm1vZHVsZUV2YWwgPSBtb2R1bGUuaG90LmRhdGEubW9kdWxlRXZhbDtcblx0ICAgICAgZGF0YS5tb2R1bGVFdmFsV2l0aFNjb3BlID0gbW9kdWxlLmhvdC5kYXRhLm1vZHVsZUV2YWxXaXRoU2NvcGU7XG5cdCAgICB9KTtcblx0ICB9XG5cdH1cblxuXG4vKioqLyB9LFxuLyogNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIGh0dHA6Ly93aWtpLmNvbW1vbmpzLm9yZy93aWtpL1VuaXRfVGVzdGluZy8xLjBcblx0Ly9cblx0Ly8gVEhJUyBJUyBOT1QgVEVTVEVEIE5PUiBMSUtFTFkgVE8gV09SSyBPVVRTSURFIFY4IVxuXHQvL1xuXHQvLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG5cdC8vIENvcHlyaWdodCAoYykgMjAwOSBUaG9tYXMgUm9iaW5zb24gPDI4MG5vcnRoLmNvbT5cblx0Ly9cblx0Ly8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuXHQvLyBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAnU29mdHdhcmUnKSwgdG9cblx0Ly8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGVcblx0Ly8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG5cdC8vIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5cdC8vIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG5cdC8vIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgJ0FTIElTJywgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuXHQvLyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcblx0Ly8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5cdC8vIEFVVEhPUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOXG5cdC8vIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT05cblx0Ly8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cdFxuXHQvLyB3aGVuIHVzZWQgaW4gbm9kZSwgdGhpcyB3aWxsIGFjdHVhbGx5IGxvYWQgdGhlIHV0aWwgbW9kdWxlIHdlIGRlcGVuZCBvblxuXHQvLyB2ZXJzdXMgbG9hZGluZyB0aGUgYnVpbHRpbiB1dGlsIG1vZHVsZSBhcyBoYXBwZW5zIG90aGVyd2lzZVxuXHQvLyB0aGlzIGlzIGEgYnVnIGluIG5vZGUgbW9kdWxlIGxvYWRpbmcgYXMgZmFyIGFzIEkgYW0gY29uY2VybmVkXG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdFxuXHR2YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXHR2YXIgaGFzT3duID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG5cdC8vIEFzc2VydGlvbkVycm9yJ3Mgd2hlbiBwYXJ0aWN1bGFyIGNvbmRpdGlvbnMgYXJlIG5vdCBtZXQuIFRoZVxuXHQvLyBhc3NlcnQgbW9kdWxlIG11c3QgY29uZm9ybSB0byB0aGUgZm9sbG93aW5nIGludGVyZmFjZS5cblx0XG5cdHZhciBhc3NlcnQgPSBtb2R1bGUuZXhwb3J0cyA9IG9rO1xuXHRcblx0Ly8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuXHQvLyBuZXcgYXNzZXJ0LkFzc2VydGlvbkVycm9yKHsgbWVzc2FnZTogbWVzc2FnZSxcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdHVhbDogYWN0dWFsLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cdFxuXHRhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihvcHRpb25zKSB7XG5cdCAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblx0ICB0aGlzLmFjdHVhbCA9IG9wdGlvbnMuYWN0dWFsO1xuXHQgIHRoaXMuZXhwZWN0ZWQgPSBvcHRpb25zLmV4cGVjdGVkO1xuXHQgIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuXHQgIGlmIChvcHRpb25zLm1lc3NhZ2UpIHtcblx0ICAgIHRoaXMubWVzc2FnZSA9IG9wdGlvbnMubWVzc2FnZTtcblx0ICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm1lc3NhZ2UgPSBnZXRNZXNzYWdlKHRoaXMpO1xuXHQgICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcblx0ICB9XG5cdCAgdmFyIHN0YWNrU3RhcnRGdW5jdGlvbiA9IG9wdGlvbnMuc3RhY2tTdGFydEZ1bmN0aW9uIHx8IGZhaWw7XG5cdFxuXHQgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuXHQgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgc3RhY2tTdGFydEZ1bmN0aW9uKTtcblx0ICB9XG5cdCAgZWxzZSB7XG5cdCAgICAvLyBub24gdjggYnJvd3NlcnMgc28gd2UgY2FuIGhhdmUgYSBzdGFja3RyYWNlXG5cdCAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG5cdCAgICBpZiAoZXJyLnN0YWNrKSB7XG5cdCAgICAgIHZhciBvdXQgPSBlcnIuc3RhY2s7XG5cdFxuXHQgICAgICAvLyB0cnkgdG8gc3RyaXAgdXNlbGVzcyBmcmFtZXNcblx0ICAgICAgdmFyIGZuX25hbWUgPSBzdGFja1N0YXJ0RnVuY3Rpb24ubmFtZTtcblx0ICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG5cdCAgICAgIGlmIChpZHggPj0gMCkge1xuXHQgICAgICAgIC8vIG9uY2Ugd2UgaGF2ZSBsb2NhdGVkIHRoZSBmdW5jdGlvbiBmcmFtZVxuXHQgICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG5cdCAgICAgICAgdmFyIG5leHRfbGluZSA9IG91dC5pbmRleE9mKCdcXG4nLCBpZHggKyAxKTtcblx0ICAgICAgICBvdXQgPSBvdXQuc3Vic3RyaW5nKG5leHRfbGluZSArIDEpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnN0YWNrID0gb3V0O1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8vIGFzc2VydC5Bc3NlcnRpb25FcnJvciBpbnN0YW5jZW9mIEVycm9yXG5cdHV0aWwuaW5oZXJpdHMoYXNzZXJ0LkFzc2VydGlvbkVycm9yLCBFcnJvcik7XG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlcihrZXksIHZhbHVlKSB7XG5cdCAgaWYgKHV0aWwuaXNVbmRlZmluZWQodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gJycgKyB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHV0aWwuaXNOdW1iZXIodmFsdWUpICYmICFpc0Zpbml0ZSh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuXHQgIH1cblx0ICBpZiAodXRpbC5pc0Z1bmN0aW9uKHZhbHVlKSB8fCB1dGlsLmlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdHJ1bmNhdGUocywgbikge1xuXHQgIGlmICh1dGlsLmlzU3RyaW5nKHMpKSB7XG5cdCAgICByZXR1cm4gcy5sZW5ndGggPCBuID8gcyA6IHMuc2xpY2UoMCwgbik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBzO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0TWVzc2FnZShzZWxmKSB7XG5cdCAgcmV0dXJuIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuYWN0dWFsLCByZXBsYWNlciksIDEyOCkgKyAnICcgK1xuXHQgICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICtcblx0ICAgICAgICAgdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5leHBlY3RlZCwgcmVwbGFjZXIpLCAxMjgpO1xuXHR9XG5cdFxuXHQvLyBBdCBwcmVzZW50IG9ubHkgdGhlIHRocmVlIGtleXMgbWVudGlvbmVkIGFib3ZlIGFyZSB1c2VkIGFuZFxuXHQvLyB1bmRlcnN0b29kIGJ5IHRoZSBzcGVjLiBJbXBsZW1lbnRhdGlvbnMgb3Igc3ViIG1vZHVsZXMgY2FuIHBhc3Ncblx0Ly8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuXHQvLyBpZ25vcmVkLlxuXHRcblx0Ly8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcblx0Ly8gd2hlbiBhIGNvcnJlc3BvbmRpbmcgY29uZGl0aW9uIGlzIG5vdCBtZXQsIHdpdGggYSBtZXNzYWdlIHRoYXRcblx0Ly8gbWF5IGJlIHVuZGVmaW5lZCBpZiBub3QgcHJvdmlkZWQuICBBbGwgYXNzZXJ0aW9uIG1ldGhvZHMgcHJvdmlkZVxuXHQvLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuXHQvLyBkaXNwbGF5IHB1cnBvc2VzLlxuXHRcblx0ZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG5cdCAgdGhyb3cgbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7XG5cdCAgICBtZXNzYWdlOiBtZXNzYWdlLFxuXHQgICAgYWN0dWFsOiBhY3R1YWwsXG5cdCAgICBleHBlY3RlZDogZXhwZWN0ZWQsXG5cdCAgICBvcGVyYXRvcjogb3BlcmF0b3IsXG5cdCAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvLyBFWFRFTlNJT04hIGFsbG93cyBmb3Igd2VsbCBiZWhhdmVkIGVycm9ycyBkZWZpbmVkIGVsc2V3aGVyZS5cblx0YXNzZXJ0LmZhaWwgPSBmYWlsO1xuXHRcblx0Ly8gNC4gUHVyZSBhc3NlcnRpb24gdGVzdHMgd2hldGhlciBhIHZhbHVlIGlzIHRydXRoeSwgYXMgZGV0ZXJtaW5lZFxuXHQvLyBieSAhIWd1YXJkLlxuXHQvLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcblx0Ly8gVGhpcyBzdGF0ZW1lbnQgaXMgZXF1aXZhbGVudCB0byBhc3NlcnQuZXF1YWwodHJ1ZSwgISFndWFyZCxcblx0Ly8gbWVzc2FnZV9vcHQpOy4gVG8gdGVzdCBzdHJpY3RseSBmb3IgdGhlIHZhbHVlIHRydWUsIHVzZVxuXHQvLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cdFxuXHRmdW5jdGlvbiBvayh2YWx1ZSwgbWVzc2FnZSkge1xuXHQgIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG5cdH1cblx0YXNzZXJ0Lm9rID0gb2s7XG5cdFxuXHQvLyA1LiBUaGUgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHNoYWxsb3csIGNvZXJjaXZlIGVxdWFsaXR5IHdpdGhcblx0Ly8gPT0uXG5cdC8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQuZXF1YWwgPSBmdW5jdGlvbiBlcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xuXHR9O1xuXHRcblx0Ly8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuXHQvLyB3aXRoICE9IGFzc2VydC5ub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCA9PSBleHBlY3RlZCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT0nLCBhc3NlcnQubm90RXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuXHQvLyBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuXHQgIGlmICghX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnZGVlcEVxdWFsJywgYXNzZXJ0LmRlZXBFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSB7XG5cdCAgLy8gNy4xLiBBbGwgaWRlbnRpY2FsIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG5cdCAgaWYgKGFjdHVhbCA9PT0gZXhwZWN0ZWQpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHRcblx0ICB9IGVsc2UgaWYgKHV0aWwuaXNCdWZmZXIoYWN0dWFsKSAmJiB1dGlsLmlzQnVmZmVyKGV4cGVjdGVkKSkge1xuXHQgICAgaWYgKGFjdHVhbC5sZW5ndGggIT0gZXhwZWN0ZWQubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY3R1YWwubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgaWYgKGFjdHVhbFtpXSAhPT0gZXhwZWN0ZWRbaV0pIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0XG5cdCAgLy8gNy4yLiBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBEYXRlIG9iamVjdCwgdGhlIGFjdHVhbCB2YWx1ZSBpc1xuXHQgIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzRGF0ZShhY3R1YWwpICYmIHV0aWwuaXNEYXRlKGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGFjdHVhbC5nZXRUaW1lKCkgPT09IGV4cGVjdGVkLmdldFRpbWUoKTtcblx0XG5cdCAgLy8gNy4zIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIFJlZ0V4cCBvYmplY3QsIHRoZSBhY3R1YWwgdmFsdWUgaXNcblx0ICAvLyBlcXVpdmFsZW50IGlmIGl0IGlzIGFsc28gYSBSZWdFeHAgb2JqZWN0IHdpdGggdGhlIHNhbWUgc291cmNlIGFuZFxuXHQgIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG5cdCAgfSBlbHNlIGlmICh1dGlsLmlzUmVnRXhwKGFjdHVhbCkgJiYgdXRpbC5pc1JlZ0V4cChleHBlY3RlZCkpIHtcblx0ICAgIHJldHVybiBhY3R1YWwuc291cmNlID09PSBleHBlY3RlZC5zb3VyY2UgJiZcblx0ICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcblx0ICAgICAgICAgICBhY3R1YWwubXVsdGlsaW5lID09PSBleHBlY3RlZC5tdWx0aWxpbmUgJiZcblx0ICAgICAgICAgICBhY3R1YWwubGFzdEluZGV4ID09PSBleHBlY3RlZC5sYXN0SW5kZXggJiZcblx0ICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblx0XG5cdCAgLy8gNy40LiBPdGhlciBwYWlycyB0aGF0IGRvIG5vdCBib3RoIHBhc3MgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnLFxuXHQgIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG5cdCAgfSBlbHNlIGlmICghdXRpbC5pc09iamVjdChhY3R1YWwpICYmICF1dGlsLmlzT2JqZWN0KGV4cGVjdGVkKSkge1xuXHQgICAgcmV0dXJuIGFjdHVhbCA9PSBleHBlY3RlZDtcblx0XG5cdCAgLy8gNy41IEZvciBhbGwgb3RoZXIgT2JqZWN0IHBhaXJzLCBpbmNsdWRpbmcgQXJyYXkgb2JqZWN0cywgZXF1aXZhbGVuY2UgaXNcblx0ICAvLyBkZXRlcm1pbmVkIGJ5IGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoYXMgdmVyaWZpZWRcblx0ICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG5cdCAgLy8gKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksIGVxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeVxuXHQgIC8vIGNvcnJlc3BvbmRpbmcga2V5LCBhbmQgYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LiBOb3RlOiB0aGlzXG5cdCAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvYmpFcXVpdihhY3R1YWwsIGV4cGVjdGVkKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqZWN0KSA9PSAnW29iamVjdCBBcmd1bWVudHNdJztcblx0fVxuXHRcblx0ZnVuY3Rpb24gb2JqRXF1aXYoYSwgYikge1xuXHQgIGlmICh1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKGEpIHx8IHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYikpXG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgLy8gYW4gaWRlbnRpY2FsICdwcm90b3R5cGUnIHByb3BlcnR5LlxuXHQgIGlmIChhLnByb3RvdHlwZSAhPT0gYi5wcm90b3R5cGUpIHJldHVybiBmYWxzZTtcblx0ICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcblx0ICBpZiAodXRpbC5pc1ByaW1pdGl2ZShhKSB8fCB1dGlsLmlzUHJpbWl0aXZlKGIpKSB7XG5cdCAgICByZXR1cm4gYSA9PT0gYjtcblx0ICB9XG5cdCAgdmFyIGFJc0FyZ3MgPSBpc0FyZ3VtZW50cyhhKSxcblx0ICAgICAgYklzQXJncyA9IGlzQXJndW1lbnRzKGIpO1xuXHQgIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIGlmIChhSXNBcmdzKSB7XG5cdCAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG5cdCAgICBiID0gcFNsaWNlLmNhbGwoYik7XG5cdCAgICByZXR1cm4gX2RlZXBFcXVhbChhLCBiKTtcblx0ICB9XG5cdCAgdmFyIGthID0gb2JqZWN0S2V5cyhhKSxcblx0ICAgICAga2IgPSBvYmplY3RLZXlzKGIpLFxuXHQgICAgICBrZXksIGk7XG5cdCAgLy8gaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChrZXlzIGluY29ycG9yYXRlc1xuXHQgIC8vIGhhc093blByb3BlcnR5KVxuXHQgIGlmIChrYS5sZW5ndGggIT0ga2IubGVuZ3RoKVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIC8vdGhlIHNhbWUgc2V0IG9mIGtleXMgKGFsdGhvdWdoIG5vdCBuZWNlc3NhcmlseSB0aGUgc2FtZSBvcmRlciksXG5cdCAga2Euc29ydCgpO1xuXHQgIGtiLnNvcnQoKTtcblx0ICAvL35+fmNoZWFwIGtleSB0ZXN0XG5cdCAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIGlmIChrYVtpXSAhPSBrYltpXSlcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICAvL2VxdWl2YWxlbnQgdmFsdWVzIGZvciBldmVyeSBjb3JyZXNwb25kaW5nIGtleSwgYW5kXG5cdCAgLy9+fn5wb3NzaWJseSBleHBlbnNpdmUgZGVlcCB0ZXN0XG5cdCAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0ICAgIGtleSA9IGthW2ldO1xuXHQgICAgaWYgKCFfZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSkgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0Ly8gOC4gVGhlIG5vbi1lcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgZm9yIGFueSBkZWVwIGluZXF1YWxpdHkuXG5cdC8vIGFzc2VydC5ub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0Lm5vdERlZXBFcXVhbCA9IGZ1bmN0aW9uIG5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKF9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIDkuIFRoZSBzdHJpY3QgZXF1YWxpdHkgYXNzZXJ0aW9uIHRlc3RzIHN0cmljdCBlcXVhbGl0eSwgYXMgZGV0ZXJtaW5lZCBieSA9PT0uXG5cdC8vIGFzc2VydC5zdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cdFxuXHRhc3NlcnQuc3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBzdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG5cdCAgaWYgKGFjdHVhbCAhPT0gZXhwZWN0ZWQpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gMTAuIFRoZSBzdHJpY3Qgbm9uLWVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBmb3Igc3RyaWN0IGluZXF1YWxpdHksIGFzXG5cdC8vIGRldGVybWluZWQgYnkgIT09LiAgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblx0XG5cdGFzc2VydC5ub3RTdHJpY3RFcXVhbCA9IGZ1bmN0aW9uIG5vdFN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSB7XG5cdCAgaWYgKCFhY3R1YWwgfHwgIWV4cGVjdGVkKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuXHQgICAgcmV0dXJuIGV4cGVjdGVkLnRlc3QoYWN0dWFsKTtcblx0ICB9IGVsc2UgaWYgKGFjdHVhbCBpbnN0YW5jZW9mIGV4cGVjdGVkKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKGV4cGVjdGVkLmNhbGwoe30sIGFjdHVhbCkgPT09IHRydWUpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBfdGhyb3dzKHNob3VsZFRocm93LCBibG9jaywgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcblx0ICB2YXIgYWN0dWFsO1xuXHRcblx0ICBpZiAodXRpbC5pc1N0cmluZyhleHBlY3RlZCkpIHtcblx0ICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcblx0ICAgIGV4cGVjdGVkID0gbnVsbDtcblx0ICB9XG5cdFxuXHQgIHRyeSB7XG5cdCAgICBibG9jaygpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGFjdHVhbCA9IGU7XG5cdCAgfVxuXHRcblx0ICBtZXNzYWdlID0gKGV4cGVjdGVkICYmIGV4cGVjdGVkLm5hbWUgPyAnICgnICsgZXhwZWN0ZWQubmFtZSArICcpLicgOiAnLicpICtcblx0ICAgICAgICAgICAgKG1lc3NhZ2UgPyAnICcgKyBtZXNzYWdlIDogJy4nKTtcblx0XG5cdCAgaWYgKHNob3VsZFRocm93ICYmICFhY3R1YWwpIHtcblx0ICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgJ01pc3NpbmcgZXhwZWN0ZWQgZXhjZXB0aW9uJyArIG1lc3NhZ2UpO1xuXHQgIH1cblx0XG5cdCAgaWYgKCFzaG91bGRUaHJvdyAmJiBleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkge1xuXHQgICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcblx0ICB9XG5cdFxuXHQgIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG5cdCAgICAgICFleHBlY3RlZEV4Y2VwdGlvbihhY3R1YWwsIGV4cGVjdGVkKSkgfHwgKCFzaG91bGRUaHJvdyAmJiBhY3R1YWwpKSB7XG5cdCAgICB0aHJvdyBhY3R1YWw7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG5cdC8vIGFzc2VydC50aHJvd3MoYmxvY2ssIEVycm9yX29wdCwgbWVzc2FnZV9vcHQpO1xuXHRcblx0YXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuXHQgIF90aHJvd3MuYXBwbHkodGhpcywgW3RydWVdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cdH07XG5cdFxuXHQvLyBFWFRFTlNJT04hIFRoaXMgaXMgYW5ub3lpbmcgdG8gd3JpdGUgb3V0c2lkZSB0aGlzIG1vZHVsZS5cblx0YXNzZXJ0LmRvZXNOb3RUaHJvdyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9tZXNzYWdlKSB7XG5cdCAgX3Rocm93cy5hcHBseSh0aGlzLCBbZmFsc2VdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG5cdH07XG5cdFxuXHRhc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB7dGhyb3cgZXJyO319O1xuXHRcblx0dmFyIG9iamVjdEtleXMgPSBPYmplY3Qua2V5cyB8fCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICBpZiAoaGFzT3duLmNhbGwob2JqLCBrZXkpKSBrZXlzLnB1c2goa2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIGtleXM7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDY3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXHRcblx0OyhmdW5jdGlvbiAoZXhwb3J0cykge1xuXHRcdCd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG5cdCAgICA/IFVpbnQ4QXJyYXlcblx0ICAgIDogQXJyYXlcblx0XG5cdFx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdFx0dmFyIFBMVVNfVVJMX1NBRkUgPSAnLScuY2hhckNvZGVBdCgwKVxuXHRcdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cdFxuXHRcdGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG5cdFx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdFx0ICAgIGNvZGUgPT09IFBMVVNfVVJMX1NBRkUpXG5cdFx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdFx0ICAgIGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuXHRcdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdFx0cmV0dXJuIC0xIC8vbm8gbWF0Y2hcblx0XHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdFx0aWYgKGNvZGUgPCBVUFBFUiArIDI2KVxuXHRcdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRcdHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNlxuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuXHRcdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblx0XG5cdFx0XHRpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHRcdC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHRcdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0XHR2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHRcdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cdFxuXHRcdFx0Ly8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdFx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblx0XG5cdFx0XHQvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdFx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXHRcblx0XHRcdHZhciBMID0gMFxuXHRcblx0XHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdFx0YXJyW0wrK10gPSB2XG5cdFx0XHR9XG5cdFxuXHRcdFx0Zm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHRcdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcblx0XHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdFx0fVxuXHRcblx0XHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0XHRwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuXHRcdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0XHR9XG5cdFxuXHRcdFx0cmV0dXJuIGFyclxuXHRcdH1cblx0XG5cdFx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHRcdHZhciBpLFxuXHRcdFx0XHRleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMywgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0XHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdFx0dGVtcCwgbGVuZ3RoXG5cdFxuXHRcdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdFx0fVxuXHRcblx0XHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRcdHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuXHRcdFx0fVxuXHRcblx0XHRcdC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0XHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0XHRvdXRwdXQgKz0gdHJpcGxldFRvQmFzZTY0KHRlbXApXG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHRcdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHR0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gJz09J1xuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHRcdGNhc2UgMjpcblx0XHRcdFx0XHR0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuXHRcdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcblx0XHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gb3V0cHV0XG5cdFx0fVxuXHRcblx0XHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0XHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSB1aW50OFRvQmFzZTY0XG5cdH0oZmFsc2UgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuXG5cbi8qKiovIH0sXG4vKiA2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbSxcblx0ICAgICAgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMSxcblx0ICAgICAgZU1heCA9ICgxIDw8IGVMZW4pIC0gMSxcblx0ICAgICAgZUJpYXMgPSBlTWF4ID4+IDEsXG5cdCAgICAgIG5CaXRzID0gLTcsXG5cdCAgICAgIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMCxcblx0ICAgICAgZCA9IGlzTEUgPyAtMSA6IDEsXG5cdCAgICAgIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblx0XG5cdCAgaSArPSBkXG5cdFxuXHQgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgcyA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBlTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcblx0ICBlID4+PSAoLW5CaXRzKVxuXHQgIG5CaXRzICs9IG1MZW5cblx0ICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gbSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBpZiAoZSA9PT0gMCkge1xuXHQgICAgZSA9IDEgLSBlQmlhc1xuXHQgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuXHQgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcblx0ICAgIGUgPSBlIC0gZUJpYXNcblx0ICB9XG5cdCAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcblx0fVxuXHRcblx0ZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtLCBjLFxuXHQgICAgICBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxLFxuXHQgICAgICBlTWF4ID0gKDEgPDwgZUxlbikgLSAxLFxuXHQgICAgICBlQmlhcyA9IGVNYXggPj4gMSxcblx0ICAgICAgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApLFxuXHQgICAgICBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSksXG5cdCAgICAgIGQgPSBpc0xFID8gMSA6IC0xLFxuXHQgICAgICBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cdFxuXHQgIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cdFxuXHQgIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG5cdCAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcblx0ICAgIGUgPSBlTWF4XG5cdCAgfSBlbHNlIHtcblx0ICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuXHQgICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuXHQgICAgICBlLS1cblx0ICAgICAgYyAqPSAyXG5cdCAgICB9XG5cdCAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgdmFsdWUgKz0gcnQgLyBjXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuXHQgICAgICBlKytcblx0ICAgICAgYyAvPSAyXG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG5cdCAgICAgIG0gPSAwXG5cdCAgICAgIGUgPSBlTWF4XG5cdCAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG5cdCAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gZSArIGVCaWFzXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cdFxuXHQgIGUgPSAoZSA8PCBtTGVuKSB8IG1cblx0ICBlTGVuICs9IG1MZW5cblx0ICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cdFxuXHQgIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0LyoqXG5cdCAqIGlzQXJyYXlcblx0ICovXG5cdFxuXHR2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cdFxuXHQvKipcblx0ICogdG9TdHJpbmdcblx0ICovXG5cdFxuXHR2YXIgc3RyID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBXaGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gYHZhbGBcblx0ICogaXMgYW4gYXJyYXkuXG5cdCAqXG5cdCAqIGV4YW1wbGU6XG5cdCAqXG5cdCAqICAgICAgICBpc0FycmF5KFtdKTtcblx0ICogICAgICAgIC8vID4gdHJ1ZVxuXHQgKiAgICAgICAgaXNBcnJheShhcmd1bWVudHMpO1xuXHQgKiAgICAgICAgLy8gPiBmYWxzZVxuXHQgKiAgICAgICAgaXNBcnJheSgnJyk7XG5cdCAqICAgICAgICAvLyA+IGZhbHNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7bWl4ZWR9IHZhbFxuXHQgKiBAcmV0dXJuIHtib29sfVxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheSB8fCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgcmV0dXJuICEhIHZhbCAmJiAnW29iamVjdCBBcnJheV0nID09IHN0ci5jYWxsKHZhbCk7XG5cdH07XG5cblxuLyoqKi8gfSxcbi8qIDcwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0XG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdFxuXHRwcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRcblx0Ly8gVE9ETyhzaHR5bG1hbilcblx0cHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcblx0cHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdHByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSxcbi8qIDcxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgY3Rvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ3Rvci5wcm90b3R5cGUsIHtcblx0ICAgICAgY29uc3RydWN0b3I6IHtcblx0ICAgICAgICB2YWx1ZTogY3Rvcixcblx0ICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfTtcblx0fSBlbHNlIHtcblx0ICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuXHQgIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG5cdCAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuXHQgICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cblx0ICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcblx0ICAgIGN0b3IucHJvdG90eXBlID0gbmV3IFRlbXBDdG9yKClcblx0ICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuXHQgIH1cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcblx0ICByZXR1cm4gYXJnICYmIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnXG5cdCAgICAmJiB0eXBlb2YgYXJnLmNvcHkgPT09ICdmdW5jdGlvbidcblx0ICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuXHQgICAgJiYgdHlwZW9mIGFyZy5yZWFkVUludDggPT09ICdmdW5jdGlvbic7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7Ly8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG5cdC8vXG5cdC8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG5cdC8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcblx0Ly8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG5cdC8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcblx0Ly8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuXHQvLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcblx0Ly8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cdC8vXG5cdC8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG5cdC8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXHQvL1xuXHQvLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG5cdC8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcblx0Ly8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuXHQvLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcblx0Ly8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG5cdC8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcblx0Ly8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblx0XG5cdHZhciBmb3JtYXRSZWdFeHAgPSAvJVtzZGolXS9nO1xuXHRleHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcblx0ICBpZiAoIWlzU3RyaW5nKGYpKSB7XG5cdCAgICB2YXIgb2JqZWN0cyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgb2JqZWN0cy5wdXNoKGluc3BlY3QoYXJndW1lbnRzW2ldKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgaSA9IDE7XG5cdCAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuXHQgIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcblx0ICAgIGlmICh4ID09PSAnJSUnKSByZXR1cm4gJyUnO1xuXHQgICAgaWYgKGkgPj0gbGVuKSByZXR1cm4geDtcblx0ICAgIHN3aXRjaCAoeCkge1xuXHQgICAgICBjYXNlICclcyc6IHJldHVybiBTdHJpbmcoYXJnc1tpKytdKTtcblx0ICAgICAgY2FzZSAnJWQnOiByZXR1cm4gTnVtYmVyKGFyZ3NbaSsrXSk7XG5cdCAgICAgIGNhc2UgJyVqJzpcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZ3NbaSsrXSk7XG5cdCAgICAgICAgfSBjYXRjaCAoXykge1xuXHQgICAgICAgICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcblx0ICAgICAgICB9XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgcmV0dXJuIHg7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgZm9yICh2YXIgeCA9IGFyZ3NbaV07IGkgPCBsZW47IHggPSBhcmdzWysraV0pIHtcblx0ICAgIGlmIChpc051bGwoeCkgfHwgIWlzT2JqZWN0KHgpKSB7XG5cdCAgICAgIHN0ciArPSAnICcgKyB4O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyICs9ICcgJyArIGluc3BlY3QoeCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBzdHI7XG5cdH07XG5cdFxuXHRcblx0Ly8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cblx0Ly8gUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cblx0Ly8gSWYgLS1uby1kZXByZWNhdGlvbiBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cblx0ZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG5cdCAgLy8gQWxsb3cgZm9yIGRlcHJlY2F0aW5nIHRoaW5ncyBpbiB0aGUgcHJvY2VzcyBvZiBzdGFydGluZyB1cC5cblx0ICBpZiAoaXNVbmRlZmluZWQoZ2xvYmFsLnByb2Nlc3MpKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHJldHVybiBleHBvcnRzLmRlcHJlY2F0ZShmbiwgbXNnKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGlmIChwcm9jZXNzLm5vRGVwcmVjYXRpb24gPT09IHRydWUpIHtcblx0ICAgIHJldHVybiBmbjtcblx0ICB9XG5cdFxuXHQgIHZhciB3YXJuZWQgPSBmYWxzZTtcblx0ICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuXHQgICAgaWYgKCF3YXJuZWQpIHtcblx0ICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MudHJhY2VEZXByZWNhdGlvbikge1xuXHQgICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XG5cdCAgICAgIH1cblx0ICAgICAgd2FybmVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG5cdH07XG5cdFxuXHRcblx0dmFyIGRlYnVncyA9IHt9O1xuXHR2YXIgZGVidWdFbnZpcm9uO1xuXHRleHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGRlYnVnRW52aXJvbikpXG5cdCAgICBkZWJ1Z0Vudmlyb24gPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHIHx8ICcnO1xuXHQgIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuXHQgIGlmICghZGVidWdzW3NldF0pIHtcblx0ICAgIGlmIChuZXcgUmVnRXhwKCdcXFxcYicgKyBzZXQgKyAnXFxcXGInLCAnaScpLnRlc3QoZGVidWdFbnZpcm9uKSkge1xuXHQgICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG5cdCAgICAgIGRlYnVnc1tzZXRdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIG1zZyA9IGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cyk7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkZWJ1Z3Nbc2V0XTtcblx0fTtcblx0XG5cdFxuXHQvKipcblx0ICogRWNob3MgdGhlIHZhbHVlIG9mIGEgdmFsdWUuIFRyeXMgdG8gcHJpbnQgdGhlIHZhbHVlIG91dFxuXHQgKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHByaW50IG91dC5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cblx0ICovXG5cdC8qIGxlZ2FjeTogb2JqLCBzaG93SGlkZGVuLCBkZXB0aCwgY29sb3JzKi9cblx0ZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcblx0ICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICB2YXIgY3R4ID0ge1xuXHQgICAgc2VlbjogW10sXG5cdCAgICBzdHlsaXplOiBzdHlsaXplTm9Db2xvclxuXHQgIH07XG5cdCAgLy8gbGVnYWN5Li4uXG5cdCAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gMykgY3R4LmRlcHRoID0gYXJndW1lbnRzWzJdO1xuXHQgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIGN0eC5jb2xvcnMgPSBhcmd1bWVudHNbM107XG5cdCAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuXHQgICAgLy8gbGVnYWN5Li4uXG5cdCAgICBjdHguc2hvd0hpZGRlbiA9IG9wdHM7XG5cdCAgfSBlbHNlIGlmIChvcHRzKSB7XG5cdCAgICAvLyBnb3QgYW4gXCJvcHRpb25zXCIgb2JqZWN0XG5cdCAgICBleHBvcnRzLl9leHRlbmQoY3R4LCBvcHRzKTtcblx0ICB9XG5cdCAgLy8gc2V0IGRlZmF1bHQgb3B0aW9uc1xuXHQgIGlmIChpc1VuZGVmaW5lZChjdHguc2hvd0hpZGRlbikpIGN0eC5zaG93SGlkZGVuID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jb2xvcnMpKSBjdHguY29sb3JzID0gZmFsc2U7XG5cdCAgaWYgKGlzVW5kZWZpbmVkKGN0eC5jdXN0b21JbnNwZWN0KSkgY3R4LmN1c3RvbUluc3BlY3QgPSB0cnVlO1xuXHQgIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG5cdCAgcmV0dXJuIGZvcm1hdFZhbHVlKGN0eCwgb2JqLCBjdHguZGVwdGgpO1xuXHR9XG5cdGV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cdFxuXHRcblx0Ly8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5cdGluc3BlY3QuY29sb3JzID0ge1xuXHQgICdib2xkJyA6IFsxLCAyMl0sXG5cdCAgJ2l0YWxpYycgOiBbMywgMjNdLFxuXHQgICd1bmRlcmxpbmUnIDogWzQsIDI0XSxcblx0ICAnaW52ZXJzZScgOiBbNywgMjddLFxuXHQgICd3aGl0ZScgOiBbMzcsIDM5XSxcblx0ICAnZ3JleScgOiBbOTAsIDM5XSxcblx0ICAnYmxhY2snIDogWzMwLCAzOV0sXG5cdCAgJ2JsdWUnIDogWzM0LCAzOV0sXG5cdCAgJ2N5YW4nIDogWzM2LCAzOV0sXG5cdCAgJ2dyZWVuJyA6IFszMiwgMzldLFxuXHQgICdtYWdlbnRhJyA6IFszNSwgMzldLFxuXHQgICdyZWQnIDogWzMxLCAzOV0sXG5cdCAgJ3llbGxvdycgOiBbMzMsIDM5XVxuXHR9O1xuXHRcblx0Ly8gRG9uJ3QgdXNlICdibHVlJyBub3QgdmlzaWJsZSBvbiBjbWQuZXhlXG5cdGluc3BlY3Quc3R5bGVzID0ge1xuXHQgICdzcGVjaWFsJzogJ2N5YW4nLFxuXHQgICdudW1iZXInOiAneWVsbG93Jyxcblx0ICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuXHQgICd1bmRlZmluZWQnOiAnZ3JleScsXG5cdCAgJ251bGwnOiAnYm9sZCcsXG5cdCAgJ3N0cmluZyc6ICdncmVlbicsXG5cdCAgJ2RhdGUnOiAnbWFnZW50YScsXG5cdCAgLy8gXCJuYW1lXCI6IGludGVudGlvbmFsbHkgbm90IHN0eWxpbmdcblx0ICAncmVnZXhwJzogJ3JlZCdcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplV2l0aENvbG9yKHN0ciwgc3R5bGVUeXBlKSB7XG5cdCAgdmFyIHN0eWxlID0gaW5zcGVjdC5zdHlsZXNbc3R5bGVUeXBlXTtcblx0XG5cdCAgaWYgKHN0eWxlKSB7XG5cdCAgICByZXR1cm4gJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVswXSArICdtJyArIHN0ciArXG5cdCAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHN0cjtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBzdHlsaXplTm9Db2xvcihzdHIsIHN0eWxlVHlwZSkge1xuXHQgIHJldHVybiBzdHI7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuXHQgIHZhciBoYXNoID0ge307XG5cdFxuXHQgIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcblx0ICAgIGhhc2hbdmFsXSA9IHRydWU7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBoYXNoO1xuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzKSB7XG5cdCAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuXHQgIC8vIENoZWNrIHRoYXQgdmFsdWUgaXMgYW4gb2JqZWN0IHdpdGggYW4gaW5zcGVjdCBmdW5jdGlvbiBvbiBpdFxuXHQgIGlmIChjdHguY3VzdG9tSW5zcGVjdCAmJlxuXHQgICAgICB2YWx1ZSAmJlxuXHQgICAgICBpc0Z1bmN0aW9uKHZhbHVlLmluc3BlY3QpICYmXG5cdCAgICAgIC8vIEZpbHRlciBvdXQgdGhlIHV0aWwgbW9kdWxlLCBpdCdzIGluc3BlY3QgZnVuY3Rpb24gaXMgc3BlY2lhbFxuXHQgICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcblx0ICAgICAgLy8gQWxzbyBmaWx0ZXIgb3V0IGFueSBwcm90b3R5cGUgb2JqZWN0cyB1c2luZyB0aGUgY2lyY3VsYXIgY2hlY2suXG5cdCAgICAgICEodmFsdWUuY29uc3RydWN0b3IgJiYgdmFsdWUuY29uc3RydWN0b3IucHJvdG90eXBlID09PSB2YWx1ZSkpIHtcblx0ICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcblx0ICAgIGlmICghaXNTdHJpbmcocmV0KSkge1xuXHQgICAgICByZXQgPSBmb3JtYXRWYWx1ZShjdHgsIHJldCwgcmVjdXJzZVRpbWVzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXQ7XG5cdCAgfVxuXHRcblx0ICAvLyBQcmltaXRpdmUgdHlwZXMgY2Fubm90IGhhdmUgcHJvcGVydGllc1xuXHQgIHZhciBwcmltaXRpdmUgPSBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSk7XG5cdCAgaWYgKHByaW1pdGl2ZSkge1xuXHQgICAgcmV0dXJuIHByaW1pdGl2ZTtcblx0ICB9XG5cdFxuXHQgIC8vIExvb2sgdXAgdGhlIGtleXMgb2YgdGhlIG9iamVjdC5cblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblx0XG5cdCAgaWYgKGN0eC5zaG93SGlkZGVuKSB7XG5cdCAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuXHQgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9kd3c1MnNidCh2PXZzLjk0KS5hc3B4XG5cdCAgaWYgKGlzRXJyb3IodmFsdWUpXG5cdCAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuXHQgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIFNvbWUgdHlwZSBvZiBvYmplY3Qgd2l0aG91dCBwcm9wZXJ0aWVzIGNhbiBiZSBzaG9ydGN1dHRlZC5cblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tGdW5jdGlvbicgKyBuYW1lICsgJ10nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzUmVnRXhwKHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAnZGF0ZScpO1xuXHQgICAgfVxuXHQgICAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXHRcblx0ICAvLyBNYWtlIEFycmF5IHNheSB0aGF0IHRoZXkgYXJlIEFycmF5XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBhcnJheSA9IHRydWU7XG5cdCAgICBicmFjZXMgPSBbJ1snLCAnXSddO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBmdW5jdGlvbnMgc2F5IHRoYXQgdGhleSBhcmUgZnVuY3Rpb25zXG5cdCAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICB2YXIgbiA9IHZhbHVlLm5hbWUgPyAnOiAnICsgdmFsdWUubmFtZSA6ICcnO1xuXHQgICAgYmFzZSA9ICcgW0Z1bmN0aW9uJyArIG4gKyAnXSc7XG5cdCAgfVxuXHRcblx0ICAvLyBNYWtlIFJlZ0V4cHMgc2F5IHRoYXQgdGhleSBhcmUgUmVnRXhwc1xuXHQgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gTWFrZSBkYXRlcyB3aXRoIHByb3BlcnRpZXMgZmlyc3Qgc2F5IHRoZSBkYXRlXG5cdCAgaWYgKGlzRGF0ZSh2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcblx0ICB9XG5cdFxuXHQgIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3Jcblx0ICBpZiAoaXNFcnJvcih2YWx1ZSkpIHtcblx0ICAgIGJhc2UgPSAnICcgKyBmb3JtYXRFcnJvcih2YWx1ZSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoa2V5cy5sZW5ndGggPT09IDAgJiYgKCFhcnJheSB8fCB2YWx1ZS5sZW5ndGggPT0gMCkpIHtcblx0ICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcblx0ICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdyZWdleHAnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW09iamVjdF0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucHVzaCh2YWx1ZSk7XG5cdFxuXHQgIHZhciBvdXRwdXQ7XG5cdCAgaWYgKGFycmF5KSB7XG5cdCAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgb3V0cHV0ID0ga2V5cy5tYXAoZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgY3R4LnNlZW4ucG9wKCk7XG5cdFxuXHQgIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRQcmltaXRpdmUoY3R4LCB2YWx1ZSkge1xuXHQgIGlmIChpc1VuZGVmaW5lZCh2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcblx0ICBpZiAoaXNTdHJpbmcodmFsdWUpKSB7XG5cdCAgICB2YXIgc2ltcGxlID0gJ1xcJycgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkucmVwbGFjZSgvXlwifFwiJC9nLCAnJylcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpICsgJ1xcJyc7XG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoc2ltcGxlLCAnc3RyaW5nJyk7XG5cdCAgfVxuXHQgIGlmIChpc051bWJlcih2YWx1ZSkpXG5cdCAgICByZXR1cm4gY3R4LnN0eWxpemUoJycgKyB2YWx1ZSwgJ251bWJlcicpO1xuXHQgIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCcnICsgdmFsdWUsICdib29sZWFuJyk7XG5cdCAgLy8gRm9yIHNvbWUgcmVhc29uIHR5cGVvZiBudWxsIGlzIFwib2JqZWN0XCIsIHNvIHNwZWNpYWwgY2FzZSBoZXJlLlxuXHQgIGlmIChpc051bGwodmFsdWUpKVxuXHQgICAgcmV0dXJuIGN0eC5zdHlsaXplKCdudWxsJywgJ251bGwnKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEVycm9yKHZhbHVlKSB7XG5cdCAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdEFycmF5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleXMpIHtcblx0ICB2YXIgb3V0cHV0ID0gW107XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcblx0ICAgIGlmIChoYXNPd25Qcm9wZXJ0eSh2YWx1ZSwgU3RyaW5nKGkpKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvdXRwdXQucHVzaCgnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGtleXMuZm9yRWFjaChmdW5jdGlvbihrZXkpIHtcblx0ICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuXHQgICAgICBvdXRwdXQucHVzaChmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLFxuXHQgICAgICAgICAga2V5LCB0cnVlKSk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG91dHB1dDtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcblx0ICB2YXIgbmFtZSwgc3RyLCBkZXNjO1xuXHQgIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHZhbHVlLCBrZXkpIHx8IHsgdmFsdWU6IHZhbHVlW2tleV0gfTtcblx0ICBpZiAoZGVzYy5nZXQpIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlci9TZXR0ZXJdJywgJ3NwZWNpYWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyXScsICdzcGVjaWFsJyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmIChkZXNjLnNldCkge1xuXHQgICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWhhc093blByb3BlcnR5KHZpc2libGVLZXlzLCBrZXkpKSB7XG5cdCAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuXHQgIH1cblx0ICBpZiAoIXN0cikge1xuXHQgICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG5cdCAgICAgIGlmIChpc051bGwocmVjdXJzZVRpbWVzKSkge1xuXHQgICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgbnVsbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCByZWN1cnNlVGltZXMgLSAxKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcblx0ICAgICAgICBpZiAoYXJyYXkpIHtcblx0ICAgICAgICAgIHN0ciA9IHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuXHQgICAgICAgICAgfSkuam9pbignXFxuJykuc3Vic3RyKDIpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuICcgICAnICsgbGluZTtcblx0ICAgICAgICAgIH0pLmpvaW4oJ1xcbicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcblx0ICAgIGlmIChhcnJheSAmJiBrZXkubWF0Y2goL15cXGQrJC8pKSB7XG5cdCAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9XG5cdCAgICBuYW1lID0gSlNPTi5zdHJpbmdpZnkoJycgKyBrZXkpO1xuXHQgICAgaWYgKG5hbWUubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pKSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuXHQgICAgICBuYW1lID0gY3R4LnN0eWxpemUobmFtZSwgJ25hbWUnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuXHQgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJylcblx0ICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cInxcIiQpL2csIFwiJ1wiKTtcblx0ICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBuYW1lICsgJzogJyArIHN0cjtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHJlZHVjZVRvU2luZ2xlU3RyaW5nKG91dHB1dCwgYmFzZSwgYnJhY2VzKSB7XG5cdCAgdmFyIG51bUxpbmVzRXN0ID0gMDtcblx0ICB2YXIgbGVuZ3RoID0gb3V0cHV0LnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXIpIHtcblx0ICAgIG51bUxpbmVzRXN0Kys7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG5cdCAgICByZXR1cm4gcHJldiArIGN1ci5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZywgJycpLmxlbmd0aCArIDE7XG5cdCAgfSwgMCk7XG5cdFxuXHQgIGlmIChsZW5ndGggPiA2MCkge1xuXHQgICAgcmV0dXJuIGJyYWNlc1swXSArXG5cdCAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG5cdCAgICAgICAgICAgJyAnICtcblx0ICAgICAgICAgICBvdXRwdXQuam9pbignLFxcbiAgJykgK1xuXHQgICAgICAgICAgICcgJyArXG5cdCAgICAgICAgICAgYnJhY2VzWzFdO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGJyYWNlc1swXSArIGJhc2UgKyAnICcgKyBvdXRwdXQuam9pbignLCAnKSArICcgJyArIGJyYWNlc1sxXTtcblx0fVxuXHRcblx0XG5cdC8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuXHQvLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblx0ZnVuY3Rpb24gaXNBcnJheShhcikge1xuXHQgIHJldHVybiBBcnJheS5pc0FycmF5KGFyKTtcblx0fVxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG5cdH1cblx0ZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cdFxuXHRmdW5jdGlvbiBpc051bGwoYXJnKSB7XG5cdCAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblx0XG5cdGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuXHQgIHJldHVybiBhcmcgPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cdFxuXHRmdW5jdGlvbiBpc051bWJlcihhcmcpIHtcblx0ICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG5cdH1cblx0ZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXHRcblx0ZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuXHR9XG5cdGV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblx0XG5cdGZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcblx0fVxuXHRleHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cdFxuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG5cdH1cblx0ZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXHRcblx0ZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcblx0ICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG5cdH1cblx0ZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcblx0fVxuXHRleHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cdFxuXHRmdW5jdGlvbiBpc0RhdGUoZCkge1xuXHQgIHJldHVybiBpc09iamVjdChkKSAmJiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdGV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXHRcblx0ZnVuY3Rpb24gaXNFcnJvcihlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG5cdCAgICAgIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xuXHR9XG5cdGV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cdFxuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuXHQgIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xuXHR9XG5cdGV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cdFxuXHRmdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcblx0ICByZXR1cm4gYXJnID09PSBudWxsIHx8XG5cdCAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuXHQgICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRleHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cdFxuXHRleHBvcnRzLmlzQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Mik7XG5cdFxuXHRmdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcblx0fVxuXHRcblx0XG5cdGZ1bmN0aW9uIHBhZChuKSB7XG5cdCAgcmV0dXJuIG4gPCAxMCA/ICcwJyArIG4udG9TdHJpbmcoMTApIDogbi50b1N0cmluZygxMCk7XG5cdH1cblx0XG5cdFxuXHR2YXIgbW9udGhzID0gWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsXG5cdCAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cdFxuXHQvLyAyNiBGZWIgMTY6MTk6MzRcblx0ZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuXHQgIHZhciBkID0gbmV3IERhdGUoKTtcblx0ICB2YXIgdGltZSA9IFtwYWQoZC5nZXRIb3VycygpKSxcblx0ICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuXHQgICAgICAgICAgICAgIHBhZChkLmdldFNlY29uZHMoKSldLmpvaW4oJzonKTtcblx0ICByZXR1cm4gW2QuZ2V0RGF0ZSgpLCBtb250aHNbZC5nZXRNb250aCgpXSwgdGltZV0uam9pbignICcpO1xuXHR9XG5cdFxuXHRcblx0Ly8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuXHRleHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCkge1xuXHQgIGNvbnNvbGUubG9nKCclcyAtICVzJywgdGltZXN0YW1wKCksIGV4cG9ydHMuZm9ybWF0LmFwcGx5KGV4cG9ydHMsIGFyZ3VtZW50cykpO1xuXHR9O1xuXHRcblx0XG5cdC8qKlxuXHQgKiBJbmhlcml0IHRoZSBwcm90b3R5cGUgbWV0aG9kcyBmcm9tIG9uZSBjb25zdHJ1Y3RvciBpbnRvIGFub3RoZXIuXG5cdCAqXG5cdCAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcblx0ICogZnVuY3Rpb24gKG5vdCBvbiBGdW5jdGlvbi5wcm90b3R5cGUpLiBOT1RFOiBJZiB0aGlzIGZpbGUgaXMgdG8gYmUgbG9hZGVkXG5cdCAqIGR1cmluZyBib290c3RyYXBwaW5nIHRoaXMgZnVuY3Rpb24gbmVlZHMgdG8gYmUgcmV3cml0dGVuIHVzaW5nIHNvbWUgbmF0aXZlXG5cdCAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuXHQgKiBleHBlY3RlZCBkdXJpbmcgYm9vdHN0cmFwcGluZyAoc2VlIG1pcnJvci5qcyBpbiByMTE0OTAzKS5cblx0ICpcblx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuXHQgKiAgICAgcHJvdG90eXBlLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckN0b3IgQ29uc3RydWN0b3IgZnVuY3Rpb24gdG8gaW5oZXJpdCBwcm90b3R5cGUgZnJvbS5cblx0ICovXG5cdGV4cG9ydHMuaW5oZXJpdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTtcblx0XG5cdGV4cG9ydHMuX2V4dGVuZCA9IGZ1bmN0aW9uKG9yaWdpbiwgYWRkKSB7XG5cdCAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuXHQgIGlmICghYWRkIHx8ICFpc09iamVjdChhZGQpKSByZXR1cm4gb3JpZ2luO1xuXHRcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiBvcmlnaW47XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG5cdH1cblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKSkpXG5cbi8qKiovIH0sXG4vKiA3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LypcclxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcblx0Ki9cclxuXHR2YXIgc3R5bGVzSW5Eb20gPSB7fSxcclxuXHRcdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xyXG5cdFx0XHR2YXIgbWVtbztcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdFx0XHRcdHJldHVybiBtZW1vO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gL21zaWUgWzYtOV1cXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0XHR9KSxcclxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHRcdH0pLFxyXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXHJcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMDtcclxuXHRcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcclxuXHRcdGlmKGZhbHNlKSB7XHJcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0XHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcclxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xyXG5cdFxyXG5cdFx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcclxuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcclxuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XHJcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xyXG5cdFx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihuZXdMaXN0KSB7XHJcblx0XHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcclxuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XHJcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxyXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xyXG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdGlmKGRvbVN0eWxlKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xyXG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIHBhcnRzID0gW107XHJcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xyXG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xyXG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xyXG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xyXG5cdFx0XHR2YXIgY3NzID0gaXRlbVsxXTtcclxuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcclxuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XHJcblx0XHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcclxuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXHJcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBzdHlsZXM7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCgpIHtcclxuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcblx0XHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xyXG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XHJcblx0XHJcblx0XHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcclxuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XHJcblx0XHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQoKSk7XHJcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQoKTtcclxuXHRcdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XHJcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cdFxyXG5cdFx0dXBkYXRlKG9iaik7XHJcblx0XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XHJcblx0XHRcdGlmKG5ld09iaikge1xyXG5cdFx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gcmVwbGFjZVRleHQoc291cmNlLCBpZCwgcmVwbGFjZW1lbnQpIHtcclxuXHRcdHZhciBib3VuZGFyaWVzID0gW1wiLyoqID4+XCIgKyBpZCArIFwiICoqL1wiLCBcIi8qKiBcIiArIGlkICsgXCI8PCAqKi9cIl07XHJcblx0XHR2YXIgc3RhcnQgPSBzb3VyY2UubGFzdEluZGV4T2YoYm91bmRhcmllc1swXSk7XHJcblx0XHR2YXIgd3JhcHBlZFJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnRcclxuXHRcdFx0PyAoYm91bmRhcmllc1swXSArIHJlcGxhY2VtZW50ICsgYm91bmRhcmllc1sxXSlcclxuXHRcdFx0OiBcIlwiO1xyXG5cdFx0aWYgKHNvdXJjZS5sYXN0SW5kZXhPZihib3VuZGFyaWVzWzBdKSA+PSAwKSB7XHJcblx0XHRcdHZhciBlbmQgPSBzb3VyY2UubGFzdEluZGV4T2YoYm91bmRhcmllc1sxXSkgKyBib3VuZGFyaWVzWzFdLmxlbmd0aDtcclxuXHRcdFx0cmV0dXJuIHNvdXJjZS5zbGljZSgwLCBzdGFydCkgKyB3cmFwcGVkUmVwbGFjZW1lbnQgKyBzb3VyY2Uuc2xpY2UoZW5kKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBzb3VyY2UgKyB3cmFwcGVkUmVwbGFjZW1lbnQ7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdGZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGVFbGVtZW50LCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcclxuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcclxuXHRcclxuXHRcdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0LCBpbmRleCwgY3NzKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcclxuXHRcdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2RlcztcclxuXHRcdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcclxuXHRcdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0ZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xyXG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XHJcblx0XHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHRcclxuXHRcdGlmKHNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkgKyBcIiAqL1wiO1xyXG5cdFx0XHRcdGNzcyA9IFwiQGltcG9ydCB1cmwoXFxcImRhdGE6dGV4dC9jc3M7YmFzZTY0LFwiICsgYnRvYShjc3MpICsgXCJcXFwiKVwiO1xyXG5cdFx0XHR9IGNhdGNoKGUpIHt9XHJcblx0XHR9XHJcblx0XHJcblx0XHRpZihtZWRpYSkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXHJcblx0XHR9XHJcblx0XHJcblx0XHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcclxuXHRcdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcclxuXHRcdH1cclxuXHR9XHJcblxuXG4vKioqLyB9LFxuLyogNzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpKGNvbnRlbnQsIHt9KTtcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS9Vc2Vycy9yaWt1L0NvZGUvZmxhcHB5LWJpcmQvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhL1VzZXJzL3Jpa3UvQ29kZS9mbGFwcHktYmlyZC9zY3JpcHRzL3N0eWxlLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhL1VzZXJzL3Jpa3UvQ29kZS9mbGFwcHktYmlyZC9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEvVXNlcnMvcmlrdS9Db2RlL2ZsYXBweS1iaXJkL3NjcmlwdHMvc3R5bGUuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiA3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBY1VBQUFFQUNBWUFBQURDNUcyREFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFXbG1sRFExQlFhRzkwYjNOb2IzQWdTVU5ESUhCeWIyWnBiR1VBQUhqYXJaaFpOTmZ2dDhmMzUvT2R2Nzc0bXVkNW51YzVaWjduTVVPWnA4eFRoRlFTb1NJSnlaQXhVNVJDK1VsQ1NZbUlCazFLUW9RS0plUmM5TS92bkl0emNkWTYrK3ExOW5xdjkvUHN2UytlWjIwQTlpU3ZpSWdRbEFvUUdoWVRaV2VzeDcvWHhaV2Y4QllRUUlBRUdzRGg1Uk1kb1d0all3SC9hNnc5QXdRQTRLbU1WMFJFQ1B6ZmdzSFhMOW9IQUxFQkFHL2ZhSjlRQU9RR0FITFVKeUlxQmdDakRBRENjVEVSTVFDWXZRREFITFhYeFJVQUV3SUF6QUYvK0NnQU1Idi80VHdBWUk1eXNOTUh3TlFDRUNsZVhsRUJBRFEzQUlEL29FOUFEQUROR0FDZU1jdzNLQXlBWVJZQXY5c24wTXNYZ0YwY0FLUkRROE45QWRnZEFFRGMrNy81QlB3UFQrOGRUeSt2Z0IzK1V3c0FBQkFOZ3FJalFyd093ZjkzaEliRS9qMkRGd0FvMGNIMjVnQkFCRURpZmJ3TTdmOXlvSitweFYrT2lOR3orOHRCTWFZT081cFlFOGUvSEJ2c3FQdVhnOFBOZC9SaDNsYldPLzdSK3E1L09TSFF3Zmt2Ky9vWkdQN2xxSEM3SFgzMFFYdkRmL1g2Vm4vNWdKZVp6Vi8yaXZyVEx3QWszaS9FMk83Zk85dnMzRE1zeEdxbkZ2OG9veDJOWC9TLzljWUVPcGpzY0pURGpzWS95TWgwcDk0b2szLzlRMngyUEtOaTdYYjY0QmZtdU9QcDYyV3cwMXNJQWt2d0FwOFl2L2dZQUFEOThJaERVVUVCZ1RIOHVoRVJJWDdTL0taaFByTFMvSXJ5Q3NxdzE4V1YvOCtJdnRzQkFnQUk2L0MvdVFRN2dEMGVBRWprdnptWGFvQXJSd0E0cVAvbUJOOEJNQWtDM0d6MGlZMDYrQ2VIQlFEQUFSbm9nUms0Z0JlRVFCeGtRQkZVUVF0MHdCRE13Qm9jd0FYMmd3OEVRaWhFUVJ3a3dURklneXpJZ2ZOUUJHVlFDYlZ3QlZxZ0hUcmhMdHlIUi9BRXh1RVZUTUkwek1NeXJNRUdnaUFFaEJaaFFqZ1FQa1FFa1VJVUVYVmtOMktJV0NCMmlBdmlpUVFnWVVnc2tvUWNSN0tRWEtRSUtVZnFrR3ZJTGVRdU1vQ01JQytSOThnYzhnMzVoV0pRQ3NxTThxQ2lxQnlxanVxaTVxZ0R1ZzhOUUNQUkJEUVZQWU1Xb2hWb0k5cUcza1Vmb2VQb0pEcVBybUlBUTROaHhRaGdaRERxR0gyTU5jWVY0NCtKd2lSak1qSDVtQXBNRTZZRDA0OTVpcG5FTEdEV3NYZ3NFNVlmSzRQVndwcGdIYkUrMkVoc012WVV0Z2hiaTIzRDltR2ZZdDlqbDdHL2NiUTRicHdVVGhObml0dUxDOERGNGRKdytiZ2FYQ3Z1SG00Y040MWJ3K1B4ckhneHZCcmVCTytDUDRCUHhKL0NsK0NiOGQzNEVmd1VmcFZBSUhBUXBBamFCR3VDRnlHR2tFYTRRR2drM0NHTUVxWUpQNGswUkQ2aUl0R0k2RW9NSTZZUTg0bjF4QzdpS0hHR3VFR2lra1JJbWlScmtpL3BFQ21iVkVYcUlBMlRwa2tiWkFheUdGbWI3RUErUUQ1R0xpUTNrZStSWDVPLzA5RFFDTkpvME5qU0JORWNwU21rdVVyemdPWTl6VHFGa1NKSjBhZTRVMklwWnlpWEtkMlVsNVR2dExTMG9yUTZ0SzYwTWJSbmFPdG9lMm5mMHY2a1k2S1RwVE9sODZVN1FuZVJybzF1bEc2Um5rUXZRcTlMdjU4K2dUNmYvanI5TVAwQ2xVUVZwZXBUdmFqSjFJdlVXOVRuMUZVR0pnWUZCbXVHVUlaVERQVU1Bd3l6akFSR1VVWkRSbC9HVk1aS3hsN0dLU1lNa3hDVFBwTVAwM0dtS3FaN1ROUE1lR1l4WmxQbUE4eFp6RmVZaDVpWFdSaFpsRm1jV09KWkxyTGNacGxreGJDS3NwcXlockJtczdhd1BtUDl4Y2JEcHN2bXg1YkIxc1EyeXZhRG5ZdGRoOTJQUFpPOW1YMmMvUmNIUDRjaFJ6REhXWTUyamplY1dFNUpUbHZPT001U3pudWNDMXpNWEZwY1BseVpYQzFjRTl3b3R5UzNIWGNpZHlYM0lQY3FEeStQTVU4RXp3V2VYcDRGWGxaZUhkNER2SG04WGJ4emZFeDh1L21DK1BMNDd2Qjk1bWZoMStVUDRTL2s3K05mRnVBV01CR0lGU2dYR0JMWUVCUVRkQlJNRVd3V2ZDTkVGbElYOGhmS0Urb1JXaGJtRTdZVVRoSnVFSjRRSVltb2l3U0tGSWowaS93UUZSTjFGazBYYlJlZEZXTVhNeFZMRUdzUWV5MU9LNzVIUEZLOFFueE1BaStoTGhFc1VTTHhSQktWVkpFTWxMd29PU3lGU3FsS0JVbVZTSTFJNDZRMXBNT2tLNlNmeTFCa2RHVU95alRJdkpkbGxiV1FUWkZ0bDEyVUU1WnpsVHNyMXkvM1cxNUZQa1MrU3Y2VkFxT0NtVUtLUW9mQ04wVkpSUi9GaTRwalNyUktSa3BIbEc0cWZWV1dVdlpUTGxWK29jS2tZcW1TcnRLanNxV3FwaHFsMnFRNnB5YXM1cWxXclBaY25WbmRSdjJVK2dNTm5JYWV4aEdOVG8xMVRWWE5HTTBXelNVdEdhMWdyWHF0MlYxaXUveDJWZTJhMGhiVTl0SXUxNTdjemIvYmMvZWwzWk43QlBaNDdhblk4MEZIU01kWHAwWm5SbGRDOTRCdW8rNmlucnhlbEY2cjNnOTlUZjNEK3QwR0dBTmpnMHlESVVOR1EwZkRJc08zUm9KR0FVWU5Sc3ZHS3NhSnh0MG1PQk56azdNbXowMTVUSDFNNjB5WHpkVE1EcHYxbVZQTTdjMkx6RDlZU0ZwRVdYUllvcFptbHVjc1gxdUpXSVZadFZ1RHRhbjFPZXMzTm1JMmtUYi8yT0p0Yld3djJuNnlVN0JMc3V1M1o3TDNzSyszWDNQUWM4aDJlT1VvN2hqcjJPTkU3K1R1Vk9mMHc5bkFPZGQ1Y3EvYzNzTjdIN2x3dWdTNTNIUWx1RHE1MXJpdXVobTZuWGViZGxkeFQzTi90azlzWC95K2dmMmMrMFAyMy9hZzkvRHl1TzZKODNUMnJQZmM5TEwycXZCYTlUYjFMdlplOXRIM0tmQ1o5OVh4emZPZDg5UDJ5L1diOGRmMnovV2ZEZEFPT0Jjd0Y3Z25NRDl3SVVnL3FDam82d0dUQTJVSGZnUmJCMThPM2c1eERta09KWVo2aHQ0S1l3d0xEdXNMNXcyUER4K0prSXBJaTVpTTFJdzhIN2tjWlI1VkU0MUU3NHUrR2NNY0V4RXpHQ3NlZXlMMi9jSGRCeThlL0JubkZIYzluaUUrTEg3d2tPU2hqRU16Q1VZSjFZbllSSi9FbmlTQnBHTko3dy9ySGk1UFJwSzlrM3VPQ0IxSlBUSjkxUGhvN1RIeXNlQmpqMVBrVTNKVFZvNDdIKzlJNVVrOW1qcDF3dmhFUXhwZFdsVGE4M1N0OUxLVDJKTkJKNGN5bERJdVpQek85TTE4bUNXZmxaKzFlY3JuMU1QVENxY0xUMitmOFQ4emxLMmFYWnFEenduTGVYWjJ6OW5hWEliY2hOeXBjNWJuMnZMNDh6THpWczU3bkIvSVY4NHZLeUFYeEJaTUZsb1UzcndnZkNIbndtWlJZTkg0UmIyTHpjWGN4Um5GUDBwOFMwWkxkVXFieW5qS3NzcCtYUXE2OUtMY3VMeXRRclFpdnhKZmViRHlVNVZUVlgrMWVuVmREV2ROVnMzVzViRExrN1YydFgxMWFuVjE5ZHoxMlExb1EyekRYS043NDVNckJsZHVOc2swbFRlek5tZGRoYXV4Vno5Zjg3ejJyTVc4cGVlNit2V21HeUkzaWx1WldqUGJrTFpEYmN2dGdlMlROMTF1anR3eXU5WFRvZFhSK28vc1A1YzdCVG92M21hNW5kMUY3a3J0MnI2VGNHZTFPNko3NFc3QTNha2VqNTVYdlh0N3gvcHMrNGJ1bWQ5N2NOL29mbSsvYnYrZEI5b1BPZ2MwQjI0OVZIL1kva2oxVWR1Z3ltRHJZNVhIclVPcVEyM0Rhc00zbjJnODZSalpOZEkxdW1mMDdsT0RwL2ZIVE1jZWpWdU5qenh6ZlBiaXVmdnp5UmUrTDJaZmhyejhPbkZ3WXVQVjBkZTQxNWx2cUcveTMzSy9yWGduOGE1NVVuWHk5bnVEOTRNZjdEKzhtdktabXY4WS9YRnpPdlVUN2FmOEdiNlp1bG5GMmM0NW83a25uOTArVDg5SHpHOHNwSDFoK0ZLOEtMNTRZMGxuYVhCNTcvTDAxNml2Mjk5T2ZlZjRmbmxGZWFWbjFXYjE3VnJvMnNhUHpKOGNQMnZYMWRmN2Z6bi9tdG1JMnlSc0ZtNUpiSFg4TnYvOWVqdDBlenZDSzhvTEFBQXdBSUQ2K3dOOHV3eEE2d0xBOUFTQVRQZm5qL3Vmd0NBQUtBQ2dRQVJtRUlGZDRBckpVQWV2RUY0a0dabER3ekZFVENjMkJSZUlEeUVjSTdhVENUVEJsQTkwM3ZSZkdOS1plSmhiV0MzWkpqZ09jRzV3Wi9CeThiVUlXQWwrRWM0WDFSZGJrTWlWMHBOZWtpMlROMUpZVURxcm9xVDZVTjFENDZOVzZLNjUzZnYzRE92cTZwWG9melVVTlhJMlBtblNhdnJSbkdxaGJ1bGpsV1pkWi9QWWR0R2Uxa0hLMGRESnd6bHhiNEhMTmRkQnQrbDk2SDV1RDIxUFQ2OFU3ektmTHQ4SnY2OEJ4RUR1SU5rRHU0TXRRMXhDL2NOaXdwTWpUa1VXUjlWSDM0b1pqSjA0K0NidVZmekxReThTWGlST0pMMDYvQ2I1dzVHNW85K09iUjRucFhLZWtFblRTOTkzTWlIalFtWjcxb3RUdjg4SVpwdmtoSjB0eXUwOXQzaWVNOSt3SUt6dy9JVzJvb21MbXlYc3BjcGw1cGM4eTZNcWpsWVdWVFZXOTlhTVg1NnRYYXRIR3lpTlRGZlltN2lhdWE5eVhtTnBvVjRuMzBCdXJMZXV0SzIyYjk4aWRsRC9ZZTNrdk0zZHhYV0hzNXY5TGtzUFF5OXRIL2tlNFQ2dUgvTUFPd0FEbng5MlA4b2JESHk4ZTRobGFHSDQvcE9xa1pSUm42ZkdZekxqek9QYnorYWVQMzh4OExKeEl2YVY2cXVmcjd2ZlpMeDFlaWZ5Ym5YeXdmdmlEeEZUK2g5WlBzNU90MzlLbmJHZXBadHRtak9hZS9rNWJCNDdmM0ZCWldIa1MvZ2kzV0x6a3QzUzJuTHhWNzJ2Yzk5eXZtdDluMXU1c0dxNnVyNVcvOFB0SitWbjkzcnNMK2xmMHh1Vm16NWJvbHRMdjl1M2ZiYTNBUUFGQWpDQ0lLaURQY1JDQ1R4Q0FIRkVicUFDYUFWR0JUT0Z2WVlyd1pjVGJoTi9rVjFwdW1rMTZlNVF6Um1lTW5rekw3QUdzbjNnY09NYzRyYmllY0JueGo4aXVFOW9VU1JSakN4ZUpxa28xUyt6VjNaS1BrVGh1MUtrOG1kVkY3WDdHbkthbVZvZnRiVjNIOXR6VytlREh1aHpHNmdhMmhvZE1ENXNrbU5hYm5iVnZNdGl3SExVYXNMNm5jMlU3YXpkZ3YyU3czZkhGYWVmemxzdWRLNGlidXJ1WnZ2Mjc0L3dPT3laNFpYdlhlcFQ0OXZvMStMZkh0QVYyQk0wY0dBaytHWEloOUF2WVYvRFp5TW1JaDlHZFVRM3hseUt6VHQ0TWk0NVB1NVFaRUp3WW1CUzBPSGc1UEFqOFVlUEg4dE9LVHBlblhyMXhLMjB2dlRSazlNWjYxbDBwOFJPNjU1eHo0N0pPWFcyT3ZmT3VkRzgyZk8vQ3NpRjdCZEVpdFF1bWhTN2xZU1dIaTdMdkZSUVhsNVJWOWxjZGFQNlprMzc1ZGJhNjNYWDZtc2JxaHBMcjlRMFhXL3V1ZnJrMnV1V21ldExOOVphdDlveE4wbTM2RG9ZL21IdDVMek4xeVZ5UjdwYjdxNWtEMWN2cVhlOWIvcmUyUDI3L2MwUHlnYXlIeDU5RkRYbyszanZrT1d3L2hPdEVaVlJ5YWRzWXpBMk4vN3kyZjNuclM4cVg1NmJTSGtWL3RydGpjRmJ5WGYwNzc1T2pyeHYvSkEyNWZGUmJabzZQZldwZlNaOTFuRk9jTzdMNXh2ejhRdTdGbjUvNlY0OHVxUzdqQzRQZm0zNVZ2RTlleVZ4MVgvTjhvZjhUNGFmUyt2OXYwbzNvamNOdDFpMlpuNjMvbWYrQ0JDQUNueWdDT1lRQktlaERUNGhva2dDOGh3MVFoOWczTENBN2NIbDR1TUkwY1JrVWdHNWcyYUdscFBPa2o2VjJzNHd4OFRLck0wU3hsckNOc2lCY21weEpYSjM4UUtmRG4rS1FMOFFqYkMxeUJuUlIrSjRpVjJTb1ZMNTBsMHlrN0svNUJrVnBCU1ZsVlNWaFZUb1ZOWlUzNmoxcWRkcm5OWU0wN0xZSmExTjBwN2VmV2RQb1U2RXJwRWV0OTUzL1FHRFVzTm9JM05qZmhPOHliTHBDN083NXZVVzV5d1RyRHl0ald5a2JCbHNmOWk5dHU5eGFIQTg1NVRrSExUWDBVWFBWZEdOM1czSnZYdGZ6bjRQRDNsUHhQT3BWN1YzdkkrbHI2RHZENzloLzlxQTQ0RWVRWHNPOEFkRDhHUklSK2lac0gzaGNoRm94SXZJYTFHWjBYNHh1ckU4c2FzSEIrTXE0dzhkTWt2Z1NQaVllQ1VwK3JCaHN1WVJ0YU1xeHhSU0pJL3pwN0tjd0o5WVRmdVFQblN5STZNaU16TXIrcFRiYWIwejB0bnNPZlJucWJrTTV4anlxT2ZwOHNrRnVFSW8zTHF3VWZUcjRxL2lyVktrakhTSnFaeS9RckpTdUlxKzZtZjF4NXJoeTEyMVRYV1Y5Y1VOaFkwWHJwUTIxVFJmdlhyMzJrakxwK3UvV3lsdHhMYXQ5dFdicTdkK2RHeDFFbTZ6ZEluY1VlODJ1K3ZlRTlwN3VDL3JYc0g5c3Y3cUIzY0gzajNDREFvK05ocnlIMDUvVWpmeWFIUmhqREl1L2N6aWVlaUxNeThiSjRaZXJiNnhmbnRqa3Z2OTZTbmFqeVdmOUdaeGM5UHpYeFk1bGlPK3pheWUvR205SWY5YmNIc2I0TSt1QXdBQXJ3cFF2UXpnakFFd2t3QW9zZ1VRUGdiQXFBUmdRd3Znb0FIb1dBS2doeU1BYVRpeDgzNG9nQjJFd1Vrb2gzWVlnbyt3anRBaFFvZzZZb240SVBGSU5sS05kQ0pqeUFLS1IvbFFUZFFKalVKejBDdm9JRHFQb2NGSVlTd3dvWmhzekRYTVU4d2FsZ09yamZYR25zUTJZY2V3R3pnaG5Ea3VCbGVHZTRoYnd3dmhiZkJIOE0zNDl3UW1nZ2tobVhDRHNFQVVJL29RTHhIZmtYaEozcVJhMGxleUFibUFQRStqVDFORXMwS3hvVFRUMHRGRzBqNmoyMFZYUlU5UG4wUS9UOTFISFdFd1l1aGtWR0ZzWnBKbXFtY1daMjVna1dScFlKVmxiV1hUWnV0bmQyU2Y0VWpnWk9CczRETGhtdUhPNUpIbEdlTk41aFBuRytVL0lpQW44RWJ3akpDcE1FVjRST1NDcUxlWWxOZ1A4WHNTZVpMZVVvclNxUFNZVEpWc3RKeWhQSXY4UjRYcmlzZVZuSlFsbE5kVkJsVXIxT0xVclRXRU5EWTF4N1d1N3NyU1ByRGJZbytDRHJjdVFmZWIzcHorVzRPWGhoTkdiNHcvbWF5YXJwc1RMWmdzUmF6VXJlMXNvbXh6N1RydFp4MjVuR3ljcy9ZT3U3SzR1YnMzN1VjODdEM0x2YVo4Skgwai9lNEVVQU1EZys0Rmk0VmtoYTZFZTBROGlkS0pibzJWT0hncG51WFFtVVRScE9Ya3UwZnpVd0pTdGRPbzZXOHptckxpVCt0bVUzS0djeS9rdWVkekYyd1ZLUlpIbFpaZWVsU3hYTTEwV2FuT29TSGhTbTN6aXhiV0crNXRiYmNhT3I5MFMvUjYzVThmcUJ2c0c1NFluUnYvL1pMcE5mMDc0Z2ZLTk8wc3l6enJJdU5Yd3ZmNXRZSDFjNXY3dDdjQlFBVmNJUkVLb1FVZXdnZFlSK2dSWVVRVHNVSDhrU1RrSEZLUDlDQ3ZrQldVRHBWQWpWQWZOQVV0UjN2UUtRd1dJNG94dzRSaXptSmFNUk9ZYmF3STFnSWJneTNHOW1FWGNldzRmVndZN2lKdUFQY1RMNDUzd1dmaDcrQlhDRklFWDBJcDRTV1JsZWhFTENST2tIaEpBYVFXTWtwMkkxK25vYWNKcFJta3lGQnlLZXUwM3JSRGRMdm9ydEFMMEJkUXFkVFRERFFNV1l4MGpPZVlPSm1xbVdXWi8ySFJZZWxudFdOOXh4Yks5cHY5SEljVVJ4K25OeGZLVmNOdHpyM0tVOEpyenJ2T1Y4dnZJa0FSNkJhTUZWSVZ4Z2cvRmJrc21pUm1LeTRoZ1pGNEszbEw2cngwdEl5dHJLd2NSVzVlL29GQ3RXS3Frcit5cVlxY0tvY2FSbTFSL2JuR0hjMTZyYnhkeWRwQnU1MzJHT3RvNmNycENla0xHUEFZOGhxSkdNdWFhSnRhbURtWkIxckVXWjZ5cXJUdXRwbTB3OXJMT0xnNW5uSzY0N3pwb3UxNjFPMytQcmI5Zmg3dG51dmU2ajd4dnJmOGtRQ3p3S0tneFdERGtMTFF6WEMzaUx0Um90RTVNZXNIL2VOR0R1a20vSk5rY1hqaFNQb3htWlRSMU1OcFl1bWpHY2V5NUU2OU81T1RvM2QyNVZ6dGVhY0NjdUY0VVdOeFpxbmJKYVVLbXNyUDFYMlhMOWVkYVRoNkpiRTU2VnJtOWRMV3Z2YWxEcUZPcDY2UzdrKzlldmVxSDdBOUxIZ3NPdHc5NmpGT2VONDJZZnc2NlczOTVNeVU2SFQ0ek1CbjJZVkxTeUpmVzFkczF6Yldhelk5dDdjQlFBdjhJQVBxNFFGOFFsQ0VGOUZFbkpCb0pBZHBRaDRqWDFBNlZBRjFSQlBSU3ZRUnVvTGh3NWhqNGpCVm1CRXNZR1d4SHRpejJEN3NENXcwemh0M0FUZUtwOFdiNHRQeC9RUVN3WXFRVDNoTGxDSW1FaCtUK0VrSnBCZGtYZklWR2g2YUhBcU9jb1N5U1p0TWg5SmwwclBTMTFBMXFhTU1vWXcwakkxTWRrdy9tU3RaOUZpbVdFK3l5Ykc5WUUvalVPT1k1NnpnY3VObTQzN09rOC9yd3NmRDk1Ni9WaUJTVUVPSVhtaERlRUhrZytoTHNWSHhZWWtoeVNHcEVlbG5NaE95azNLejhsOFVWaFMzbGFrcThxcnVhdW5xTFJxdnRQQzdGTFU5ZHAvZE02aEwxclBTTHpINGJ1UmszR1BLYTZabDdtMXgwckxWYXRaRzBOYkRyc1orMlZIWEtjOTV5Y1hhdGRtZGVWL3kvbWxQYzY4Qzd4bGZEYjlzLzgrQkprR053VXdoQ2FGVDRlWVJiVkY4MFJreHl3ZjN4blVlRWtqSVM1SThQSDRrN2hoL3lyM1VBMm5rOUtvTTdjd25wenhQZjhsT3pObk96Y3lqUDU5ZHdGN1lVM1M4Mkxoa282eXBmSDhscWVwYWpkUGxqYnBMRFNhTnEwMVZWNTFicU5lSFd3dmJmVzlST201MnVuU1I3bHk5dTcrWDJ0ZDdQK2FCNU1EVW8wdVA5dzN6UEhrL1dqRVcrRXo1K2ViTDNsZW1yM3ZmYXJ5NytsN293K21wcFduVFQwVXo3K2Y0UGx2TVJ5eWMrVkt5ZUhtcGZybjhhOTYzeE85ZUs3cXJmS3VyYXdNL3p2LzBXQmRiWC9oMWRTTnlVMmx6YWF2dWQrNzJOa0MwdjVJaUFBQWdGRDBBM052dDdlK2lBSVJjZ0syejI5c2JGZHZiVzVVQW1OY0EzU0YvOXVjQUFIZ3FRSEh3LzdiSC9pLytpbGMydDVRcnNBQUFBQ0JqU0ZKTkFBQnRtQUFBYzQ0QUFQc0JBQUNGb2dBQWJGd0FBT095QUFBdk5BQUFGeXVsZjVZSkFBQWpIa2xFUVZSNDJ1eWRmWXdXMTMzdmY0K3ZzNDdaSmlaaHZaamxaVTFzNDhWeFpaRFZDNkx5VFNxTWlRTVZYS0dnU2lGMUNwV3daV3V0dHRyVnJTbHRtbTI0OWFKVzljcVc0UTl6elExL1JDQkw1Z1pLMWpnS3FkV1Y5MWJJV01HOHhNYXd2Q3ptNVNaZ2Q4RWxicDc3eDNKbXo1em56TXlabCtkNVpwN244NUVRenpOelp1Yk1ZWGMrZk0rY21WUGE4SzhIeXdLUWtLZCtmNkFrSXRLOTRDTitqcURxREF6ZlZWS2Z1eGQ4VkY3KzR5L0pvM2MrTEc5ZU91aVZPWGJzc0hSMVBTakhqaDEyM3UrcEEyTnk5OWRiNWRTQk1SRVIrV3p2bklwajFmcjhmclh6aW5mTUw2K2VITGxjUnkrVGhpK3ZubHl5N1N1b1BrSDdDRnNmdFg4WGd2WVJ0eDIrdkhweTZWWit6U0FML3VudFIya0VxRDZsdzNVNzlMMmJ6MGxYMTRQeTZKMFB4OXJ1elVzSEs4U3RjK3pZWVRsMVlFdysyenVuNGlML3U5OTZYWDZ4YTJYRlJWOWZiZ3BFMzFieGkxMHJLNzdyWmN6dmFsblF2cUtPRlZaM0c2cHMwRFl1Y282cXUrMmNiZHNnUmNnRTlRdHYvdSs4cSt0QjN5OC82MWlYWnQxamNsdmRmc2FWRVBXZmRkZEVhaXRqcHRNZ1VaZ1gvVi9zV3VrVGlNdTJOcUhwWmZUUDVyS3c0d1FkUzlYVnRnL3pjMWo5WE9VY2RHNjI0K295dEcyREZDRXp1SUN6cmhicm1wRW9NWVZ0RjVZTVhRaVNTTmo2dURKMWthaEwzWk9jbjdrTlVnU0V5RHFFMkFEWXVoZUR1azFOSVVTSnhaYnliQ2t0cWJ4ZDVSd212cVRITnV1T0ZDRVR6QzZnVXdlR1E4cXlqblhKMWowbS82MXBmcWYweEdRbXBTQUIyTXFIQ1Mvb1hxSXRvUVVsc0tEMVFmVVBFblpVK295cWg2MU1WTUswN2JQRTZGTklneHA5bXRWb040QXc5SUVWdFI1OWFoNHJ5WEhpSE5QbGR5ck9LTkJxL0J1RURYNnBkbjJTbkh2VWlGUkduMEptM0Q1dktZMEFOV0M0S2Y4RFVJM3kxYTVqTGVzVDUxaFJaVy9obHd3QUFBQXBBZ0FBK0tEN0ZBREFnWjlzR1phZkdOMjNZUU9FWEFoNlJoR1FJZ0JBcnRIZk9BT05MRVhHREFJQWhESXdmRmVwbHFOZG9YNXdUeEVBQUFBcEFnQUFJRVVBQUFDa0NBQUFnQlFCQUFDUUlnQUFBRklFQUFDSXphM0NrekVBQUFBa1JRQUFBS1FJQUFDQUZBRUFBSkFpQUFBQVVnUUFBRUNLQUFBQVNCRUFBQUFwQWdBQUlFVUFBQUNrQ0FBQWdCUUJBQUNRSWdBQUFGSUVBQUJBaWdBQUFFZ1JBQUFBS1FJQUFDQkZBQUFBcEFnQUFJQVVBUUFBa0NJQUFBQlNCQUFBUUlvQUFBQklFUUFBQUNrQ0FBQWdSUUFBQUtRSUFBQ0FGQUVBQUpBaUFBQUFVZ1FBQUVDS0FBQUFTQkVBQUFBcEFnQUFJRVVBQUFDa0NBQUFnQlFCQUFDYWwxdHBBc2lDMitjTWwyZ0ZBQ0FwQWdBQWtCUUJKdWhlOEZHWlZpZzJBOE4zMVRUdGQ4L2ZFZnRuWnVDZE5mUklBRktFWXZDL0J2K1lSaWdvZjdMMGY5Zmx1THNPM25BdSs2MkhXL2lIQXFRSXhlSGl4YXMwQXNUbXpMb1prV1Ztdm5LV2hnS2tDTVhrK3FGQkdxRUEzRDV2S1kwQWdCU0JDeTZJaUxTMzM1R3JkSy9TNEpsMU0zeWZBV29KbzA4QkFBQklpZ0NRbE80RjU2MGpSd2VHcHpFNkZKQWlBRFNYRFB0ZmU5cGIxcnZxSmRrNjlMS0lpS3hmOUZRWk1RSlNCSUNtRUtLUzRTY2ZiaEFSa2I2ZURrK0lJaUpiaDE1R2pJQVVBWkp3L2RDZ2IwQ08rcTZQWHJWOTE4dnJ5OHo5RmJFOXpQTzBuYVB0ZTlTeUxOS2hTb1ViTjQvNjFuL3cxaG01OTVHWktpa21GdVArbGUwaUl0STFwY1gzR1FBcFF0T0owWHlNby9PeDFTSXk4ZXlqK2o3eXhrNnZ2TG1zNk8yZ3prZWR0NzdNL0s2ZmM5aXl0S05MOVhRWUpzWXMwQVdJREFFcFFsUFMrZGhxR1hsanAvZTNRbjFXRjNuYnhiMlJYaGFnbjc4dWVQTWNYZHZCdHErczZIL3RhVStNR3plUFNsL1BKdWw1L2ptNTk1R1p2cTVVVjNnd0g1QWlnSFpCNzN4c2RjV0YzU1hwTk5KTEFsUTdKRW0rcWgzMGRzd3FLWXFNM3ovOHdsZCs0UHN1MHVGOVYySzBwY3lvTGxSZTNRWklFU0JCMGdtNzhPc0owN3puVmhTdUh4cVVFZTAvQkVxU2Vqdm8zNFBhUVoxM1ZrbHhZSGhhcWJ0SHloczNiL0NXOWZWMCtMcFArM282NUlXcDl1MWR4QWlBRkFHTUM3c3BBMXVDMGdWcVNpR29YSkhhd3F5N2ZrNFhMMTZ0K0Y2cmRsQmlWTi83bDUwUU9URCt1WGZ2UGZMQ1ZKRm5Md1J2RzdoZlpyd0FwQWdRbkJCMUdVUWxTWDFaMEhaRlQ4c3ViVkhMZHVoZmRzSzY3Tm1iWWpRSkVpVUFVZ1NBUWpNd1BLM1VMZU5wMFpTakVtT2NsQ2dpTWtPMlc5K0tjMWFlSUVFQ1VnU0EvSXRSUkVUSk1ZNEFneWlYL2JzcWxmQWhJRVVBS0tBY3MwS0owQlNrb20xa2RmbHk1MDVzQ1RXQldUSUFJTmNnUkVDS0FBQUFkWUR1VThndFk5Zit3N3E4ZGRKdE5FNERFZFJ0Q29BVUFVSmthSzVIanNXSGdUV0FGQUVTeWhBNU5oWlJqMTYwVHZ1LzViSHoveFZyUWszaG5pSVVVb2haYlFzNS9wbEFpSUFVQVNFaVJnQ29IM1NmQWtCZDZKNi9JL1lJRzk2WENrZ1JTSWt4OXNYOXhXS3g2K0FONTdKTU13VklFUUFhbmpQclprU1dZU0ppcUJYY1U0U0dTSW5WM0NjQWtCUUJvTTZvQ1pORktpZGJEbHRtSzFNVVZDSjBTWThBU0JHZ3lWQVRCbys4c2RNVG5EN1I4UFZEZzlaSm1VZmUyRmt4aVhQUjVJZ1lBU2tDZ0krUk4zWjZJbFNDVTh0dW43ZlVFNkNlQ21zeDZYTDNndlBXa2FOWnpxQ0JHQUVwQWtDc3BLaVNvVm1tMmpMc2YrMXBiMW52cXBkazY5RExJaUt5ZnRGVDVhekV1SDlsdTNSTlljUXBJRVVBY0V5SzF3OE55b2dtMEdxblF5WERUejdjSUNJaWZUMGRuaEJGUkxZT3ZaeUpHQkVpSUVWb09tYmYzUzRuVDEzTWZKOUZ2WThXbEJKVktyUXRzNVdwaGlDVkVKVU1kVDU0NjR6Yys4aE1sUlJUaVhIL3luWVJFWVFJU0JHYWoycklxMUdFR0hRdTVyS2c4ODFhaUJzM2oxcUZtRFhJRUpBaWtCWXpTb3VObEJMelJsOVBoKy83eHMyajN0OTlQWnVrNS9ubjVONUhadnE2VWwzaHdYeEFpZ0JWU0RRSU1YdjArNGc2dmF0ZXFoQ2piZHVvTGxSZTNRWklFYUFLYVpHVVdEMCsrWENEZk9FclAvQjlGK253cGNnWHBnWkxOY3ZITkFDUUlqUkZXa3dqUm9SWVBRYUdwNVc2ZTZRczhwSzJ0RVA2bDUwUU9TRFN1L2NlZVdHcXlMTVhncmNQM0RjelhnQlNCQWdYbzRnNHkxR1ZSNGcxRU9PQzgrWCtaU2NxMXZVdk95SFAzaFNqU1pBb0FaQWlnS01ZZGRrRnlSRVoxa21NSW1VbFFwc1k0NlJFeFF6WkhqaW40bGw1Z2lRSlNCSEFsR1BRZXFpOUdFVkVsQnpqQ2pDSWNyblNpNlVTUGdTa0NJRDhDaVJIZ0VhRStSUUJJQmVRRGdFcEFnQUFJRVVBQUFDa0NBQUFnQlFCQU1Ld2pVSUZRSW9BQUFCMWdrY3lBS0N1TU9vVWtDSUFGSnEya2RYbHk1MDdVOXVNdDlZQVVvU0c1L1o1UzZXOS9RNGFJdWRFdlJ3aFNIeHRJNnZMdDgzNnByU05TQ1ppQkVDSzBQUVhYTWgvRXJTSlR5MFhFVUdNZ0JRQlFyaCthSkJHYUJBdWQrNHMyWVNubHQ4MjY1dnlINmYvV1JBaUlFV0FBTDczRDUvU0NBMG14ampDQkdnRWVDUURBRElUSmdCSkVVQkVCb2J2NGlJSkFDUkZBQUFBa2lJQTVKYnUrVHR5L2M2MGdYZldWUFFzekpEdEZYWG1PVVpBaWdDUUNic08zc2hsdmI3MWNFdmdPdjM5cDd6cEJwQWlBR1RLbVhVemNsV2ZtYStjNVI4RmtDSUFnQXVsVWltM3MyVU1ETjlWa25ZUmtjUHltTnptTFg5TUh2YjlEY1dHZ1RiUVVIUXYrS2hzKzBQTDJPbmNObXI5M3JsdDFQdGpsZ3RibGdidUh3SkpFU0JER1lxSWJOMnp3MXUyZnZrYTcvdjY1V3ZLUERZU0xNYVJ0UjBWWWh0YzBTWWlJbDFUV256bDh2VHZ2ZWNQZnkxNzVFMWo3WFQ1UUg0dEl0Tmo3Zk9EdlpYSDRHY0dLUUlVVW9oS2ZpZU9IQkVSa2Y3ZVRUNUJidDJ6b3pCaTdGNXczcHBzQjRhblZhWHVneXZhWk9udXk5N2ZDdlZaaWRCY1gvZUwxN0pmVm5YL24rMmR3eThYVWdRb3BoQ1ZESFdPSHo4dTk5OS92eTgxNWxtTVNvYjlyejN0TGV0ZDlaSnNIWHA1L0J3V1BWV3VoaGk3cHJUSTRJbzJMeEVHSlVWVkxpOWkvTWFUQytUUk94K1dOeThkRkJHUlk4Y09TMWZYZzNMczJPRkUrenQxWUV6dS9ucXJuRG93eGk4V1VnUW9waEI3KzUrekNyRjQ1M0srckdUNHlZY2JSRVNrcjZmREU2S0l5TmFobDZzcVJoTXpLWnJsZEVIYXBBcFFSQmhvQXcxSmIvOXo4bzkvMFNmSGp4OGZGNHJXbFpwWElYN3k0UVpQaUlvUDNqcmpmVjYvNkNuWk92UnlZUGRxRWxRYU5MOFBybWp6L3BqbDlBU3B5bVFweEZLcHhET0tRRklFU0VKLzc2WUtHZXFmKy8raXo1b3c4OUtGMnIzZ2ZIbmo1dEVLR2RZS1UyWjZWMmxRdWFEUFdjQUlWRUNLQUlsa010NTFlczhERDNqTFRodzVJdjI5bXp3eDZwOHJ0dS9kbFB0Qk54czNqMHBmenlicGVmNDV1ZmVSbWI2dVZGZDRXQjRBS1VLVG9BdlJsS0Q2YkNaSlJaNkUyTmZUVVNGRFU0eTJoQmwxYnpIc2RXb0FnQlNoUVRFVG9vaDRRclFseFNCUjFqN3RqbmVkZnVFclAvQ1dmZkxoQnVucjZmREUyTmZUSVM5TURkNCtTSXkvNWNjQ0FDbEM0NlB1Qnc0TTMxVmF2M3hONklDVG9LU1lwNVNvQzFGSnNIL1pDWkVESXIxNzc1RVhwb284ZTBFQzBtNXdVbnpSTWdzRkFDQkZhR0JNdVhYM2Jpcm5XWUJocUlUWXYrekVSS0pkZGtLZXZTbEdreUJSTmhQcWVjUkg3M3pZK25jUWIxNDY2SHUrVWRIVnBUNGQ1bG5GSnFhMDRWOFA4bDVJU014VHZ6OVFjK2swMHV1M3pNY3JkQ2w2aVhmdlBiRlNva2l4NWxPMHphT29DQnFOV3F2MzJmS2FONUlpUUNFU29uNVJMUEtGeTVSYnQwZzVyZ0NES05KOGlyYVpNY0tlVlVSV2dCUUJ4SDlQc1RHRm4rM2JhcGhQRVFBcFFwT2tSTkpDNDZDbndpem1VenowL2NQV25jejc2d2Y1bVFHa0NJMG5SbHFoTm9sT0pjMlpyNXkxZnM2S3JDWVdWakpjc3VZaDYvcjk4bTRaT1FKU0JJQllRdHkvc2wxRVJKYThmdEVuUUxVdWJ5Ly9ObVZZZnUrY3RaeGFqeHdCS1FLQU16YnAxVUtJU1Y0RWZ1ajdoOHRSTXZRUzZjMzF1aHdSSStnd1N3WTBITFVhcnQ5czdGL1pMa3RldjFqVlk1VExaZTlQSENHVzN6dFhJY1JMVjI5WS95ZzVsdDg3SjB2V1BCUjQveEdRSWtERENCRXhwcFBmekZmTytycFJWWHBVNi9KRWtBeXZqUDNHK2tlSjBTVlpBbElFYUppRWlCaVRvZVNuZDVVcU9hcDFXYVBtVU5UL3VLWkVVNGhLZm5PV3pQSCtpSWpjMTlFcTkzVzBWb2lSdEFnNjNGT0VocUVSSHVyLzRhYjdyUmZuN3p4M3ZLYm40anFmWWhha21VTlJUM3BLaUVxQ2F0MzdvMk55WDBlclYrNitqbFo1ZjNUOE5XNTMzdEZDV2dTa0NKQlhHZjZQdi94TDYvcS9sLzlaVGlMSFJuMVlYcitYcUZCQ3RFbnUwdFViY3VjZExUNUp2ajg2NWkxYnN1WWhCdDBBVWdUSW13eHZmUHFwdFp4YUgwZU9qVDZmb2k2LzkwZkhBb1VZZDErQUZBRWFoaUoxbWY1dzAvM2xLQmtxMUhwZGpyWHVVaTJTSkhYTTdsSzlLMVZQa0FCSUVhRE9RclRKOE5xMWE5WnRKazJhNUpOam1CZ0htbWcrUlRWb1JvbFBsNkVweGl0anYvR1ZVZDhSSXlCRmdEcGpDbEhKY0dSa3hGcStzN05USmsyYTVKUXNtNGtyWTcrUit6cGFwZlRWNmI3VXFBK3dNUWZiNk9qM0ZnR1FJa0FPVXVLMWE5YzhHVDQwZjc2My9OMTMzcEc1YytlS2lNalJvMGQ5WWd4TGk0MCtuNkpLaUVwbXVoQ1Y2Q2EzZnM0YmthcDNvWnJNV1RKSExnNmQ1QWNUa0NKQUhsS2lFcUtTb1ZwMzlPaFJUNGdpSW5Qbnp2V0pNU290TnZKOGl2UCsrc0hTb2U4ZkxqODZ2ODIvbjVzSmNYTHI1N3hsazFzL0Y1Z1UzeDhkay9KNzUrVGREei9tUGFpQUZBSHlrQktWRUlQdUw2cGtxQ1NweXpMcTNtS2p6NmQ0NmVvTm1iTmtqdnh5L3k5RHl5a3hraElCS1VKVG9TWWhMa3BLUEhyMGFLQVE0KzZyeUNTWlQ5RkxpM2VjOHg3WVY5Z2thWlpSeVpLVUNFZ3hSenk3OEl2VzVTKzgvVEdOVXlPbWwxL041UDdidWRKM0UxMVlnOFJtZHBmcVhhbDZnc3lDem0yakU4bDFiVWZGY3JYTUxCZTBYVnpTektkNDZlb051ZE40SENOSWdMWnRBWkJpam1Wb3JrZU82WkpoMVBycDVWZkwxKzY1TjNVOUpwMzRJUFkyYXJUcDBhTkhLMlJvaXRGa1pHVEVOK2dtQ3daWGpOK2ZXN3I3c2ljOGM5bmdpalpadXZ1eURLNW84MTczcHNyVVk0NUZsUllmK3NyNDc0c2FlQlAxTUw2U0lTa1JuS1ZJZ3FsT20wVEpFRG5HUTczdlZJbFBGMkJjSWVwaVU4dlZNdk83dml3cEl5TWpNbmZ1WEduNS9PZDlxVkcvWjJnT3R0RUpXNWNFbTlTQzNvR3FMMSs2KzNMcXBKaWsrOVFVbzRpSUtjY3dHYXB0K1MyQ1VDbVNZSktudXFoMmlTdEVjMXZFR0N6R09NdURFdUsxZSs2VlNTYys4QW5ROXRtMkxHNUNWQWxQRjZJU1hXZG5wemNpTlNncGlvdy91bkhsVjcvS3JCMVZWNmllQXZYdTBhaUVtU1lwcHVrKzFlVm15dEVFR1lLekZJdVFZR3FkWHBOSUxLaGQwZ2d4VDIyU2Q5UXNHYlhvTWszQ2Q1NDdYdG9pVzh0Ly9tZC81bHV1RW1KblorZUVwRG83QTlQZzBhTkg1Y2FubjhxV3JWc3ptMEhEN0NvMWx3V1JSVkxNQ2xPT1Flc0JRcVdZOXdSVGpmUWFKWk8wRXRQcmxKVVE5YmF1UjV2WXl1ZHBtRUwzZ28vS3I3MzlFeEVSV2JYd0c0RmRwK2RLM3kxTkwzL2dKRWJidlVLelN6VUoxNjVkazRmbXo1ZDMzM2tuUEwzZEZHTzFVNko1ajdCclNvdDFtZTJ6SWsxU2RKay9NWWtjQVdKTE1Zc0xkclhFV0kzMEdxY3J0RjVwTTY5dG91K2pXc20zVnJpS3NScjNFdlcwcUwrOVJrU3NralRMcUdTWlpVcTB6WmNZTklkaTFuTXJwcGxQRWFBcVNUSHJGRk52bWRqcVV2U0xlRFgrZlpJS3RsR3dpVEhxYzViZHJyWVhmd2NKMEdWYkc0MDZuMkxZcStFUU1lUkNpbmxMVjNHNkdwdFJqTTNRSmk3M0Y1VVlhMTAzbFJhZlhMOStQSWs2dnVoYnlkQWxKUlp0UGtWZGRFZ0xHa0tLUVdreHpyMnFMQy9XeUxCNTJrUUpVS0h1TFlxRTMxOVVZcXhIblpVWVJVUk1PWWJKVUcwYnR1L2ZGdlRmc1Z3dVozNS9FU0EzU1pISE82QldRbnp0N1ovSXFvWGZzSzYvdVM2WHIzOVRjalBsYU9JcVE4V0xUVFNmSWtDdXBaam1NUWFBTk9qcHNHaVljZ3hhRHdBRlRvb0FrRXlPQUZBZmJxRUpvT2dNRE45VldyWHdHekw4TC85Q1l3QUFVZ1FZR0w2cjFOKzd5U3BHWkZrY0dHUUQ5YWFtM2FlL3VIakoreng2dGExaS9kTDdTazFWRDlva2V6RjI5MjRxOS9iN2wvZjNicEs4ejdFSVBJWUJUU2hGRVpGWnJiZmV2UENLTE95NDRpMS9lM1J5VTlhRE5zbWUvdDVOL0dZRFFPMmwrT20vWDY5WTl2bmZ1ZDFhZHZEOXNvaTB5ZWhWLy9MVFk1OTVGK09pMTRNMnlVZGE1TmNhQUdvcVJkc0Yxd1U5ZlpqcHBNajFvRTBBQUJwRWl1TXBZUnlYKzBaQkY5MmZuMWZ6d2xVK1pxWHZWNlVQOCsrSnhPSldsN3pVZ3pZWnArVS8vNnBtcjBxNzhWLytybTVwTUt2empIc09VY2RWKyt1ZXY2T2M1d3ZPZ1BaU2diRDNsM0ovRWVvbXhZNDdMc3VzMWx1ZDdodEZwUkF6Ylp3ZSs4dzZhQ01JMTdya3BSNjBpWjhuRnoxVDlSL1lMVU12MXYyWEp1MTViaGw2MFZtdXVqeURqbXUyeWE2RE4zSjVzYkc5aTFWTkxsd3FsWHlmQWVvbXhkR3JFL2VTOURUZ21wSk1vdTVEcVhYbTN5TGpveDZ6cWt0ZTZ0SG9iZklIeGo2MjczOGlzaDVQTE5sZVVjNjJ6TFpkWGtoem5xNVN0ZjBId0xZL0cyZld6Y2pWaGFaUlordUFCazZLSm0rUFR2YWxEOXNnallsdXVZbHR4aStnMFJkbVd4ZWRTMTN5VWcvYXBIN1VzcXZXbHRocUpkUjZuU3RBVTBzeDdRNXNBelRVQlZZbGpGcVFsM3JRSnRXbEZsMjBMb210Nk9mYXVXM1Urenl5dHNPM0xPcDcxTElrcUs1VFY3am5DRldYb2kwZHVCQ1dMaFRqaVdZOHVZUjEwYVdwUzE3cVFadjR1ZDc2ZTdhczVGVDI5ckYvUzV5eVhMcGlYYnB3WGJ0c3I3ZituclcrbGVmdjNnWHNjcTVKaFRpNFl1SS9SRjFUV256THpPOUxkMS8yaEJlMnJHdEtDMWRVSUNtNjhQNjFmL2N1dlBVa0wvVm9walp4U1R0S1BHYlpha21oV3VkcHEyODlrbTBVZ3l2YVpPbnV5eFhwenBTYVRYSzJaYlo5dWFJUHFvbVRGcWVYWDAzVnJWeXZPVFNoUUZJTVN3ZGgyTktGT1VKUjc2WnpTUzlKNnBLWGV0QW0wV25IbHI2S0pNQTRxYzRsZWJvazJ5enBtdEppVFh5dUtWT0pWUWt5YVZMVXUwRERIczhBcUNXMzZCZEUvVzlYek8zVTN3czdybmgvT3U2NG5HcWZSYW9IYlZKYjdOMnp5Y3ZWdWw3MW9IUGJxQ3pkZlZtVzdyN3NDVzF3Ulp0MGJodjFTVTk5MTd0YUIxZTArWkttRXF2K0hhQWhrbUlVU2Q2VTRwSTA0cWF3dk5TRE5za0hRZDJXU2N0bFdhOTBFdDF1TFdPN2J4a1g4MzZpbVI2N3ByUlVmTGVsUTcxTWtxUm93dk9Ka0NzcFp0bFZtSFRZZjVxNjVLVWV6ZDRtdXo3OVAwNTFNOHNsM1M3Tk12UDc4aDkvS1ZVOXpIM3QrY05mTzlmTkpsR3ozSjRsMjJYNWo3K1UrcGMrU0Y1Ujl4VDE3N3BNczREUnBKQWJLWTVlYlpOWnJWZms3ZEhKc3JCajRtK2RsNC92OVgxLzZ2NWwzbWR6Ty8yZTFheldXMlhic1o5NjM0OThMUExBRjFmSnJOWXJvbzZyL2o3eThXdHk1T09KWTZ6dFd1dzh3akZvVzhXYlozN3VLNyt3WTNHc05HV3JSMWliMk9RUzFpYVB6dnhhclBOSzJpYjZ2MDNTTmhFUlgvMmZqaWk3ZkVwZnhiSTlFcDJpbGsvcGt6My9iMk5oZnBIUzF0ZDg3Q1B0QUIwZWxnZEltUlJ0cUF2LzVCbDJJVHp3eFZXUkYwNXoyeU5ueHkvV2E3c1creTdlWmptMXZTb1hwMzZtZE1MMkhUZUJWYU5ObEtEVXVhcnZlV3VUb1BxSGtmVGkvdVNpWjV4U2tXdHl5aUpoWlZIZk1OUUxBdEkrc0c5N25Wb2U0ZDJua0dzcHFuUzRzT05LNU1WUExUOXk5alV2WmVqYm1lVnN5MXlQTWJIUFZmSzFhWjlXSkxTd1kxdzUrNW5UdmxXS092THgrUGwwM1BFMW54VDBkT2ZTSmtyNlppb3NXcHVjSHZ2TUU3UktuWEdFbUNZRlZWdGltU2ZGR3RUWDVSaS9MZGdGeVBZWUJ2Y1dvYTVTMUx2WjFuWXRsbTNIZmhyN3doZDBNVmNYNEtpTHRMN2V2R2lic3NuaUdPWnh6UHJyWFl0eDJ5UktjRVZ0RTVkOTF5SUZaU29aVzlkdWdicHNiYnlvelVJQkFBbWtxRi9jekZUalNsU3ljYm1RQnBXSjJqYk9NVnpMcFdtVExPdGJqemFKdSs4aVkwdXNSVXVvalFMcEVISWpSWmVMcVMycDJKSkdsR1NDRWxEWXhUL3RNV3dwS0U3S2FhWTJTYkx2cVBRVk5LaEdMN2RIbnJHbXRvb1VaOW1YNjBBZXM5enlvWFQzQVYzcmEydVBKRzBVcDAyS2lONk5paUFoTjFKMFRScHBVMExTQkZUUDR6UkxtMVFqZmJtVVN6TWdKOHR5dFRodXZlb01BQW1sbUhYM25HdlNTYk5mTS9Ga1hYL2FKQnJYMlNTU3pqcmhPc2x1Mm5MVnFuL2VqcEVIa3I3N0ZLQm1Vc3l5ZXk3TmZ0TW1GNWRqdWRhZk5nbi9qNEtJKzN5RFNlY2xWQU4wZ3JvZXpZRThTY3VabU4yVFdjNnJtSFViRlJGRUNMbVhZdElra2tXWnRQV28xckZvayt6cms1U3N1eDdwb2dTQVVDa0M1SldzdTJlYnBZc3l6ekNvQm5MM00vbjg2R2I2THlBeDMrNDR6RlVOQUJxR1cyZ0NBQUNBY2VnK0JXZ0F1dWZ2eUhXUHo4RE5OKzBFdmU5VXZlczBhajBBVWdRQUozWWR2SkhMZXBrdktEZEhuSnIzRmFQV0F5QkZ5RDNWZXFkcGtzY1RrdFJGUDA3YTdiT3VUeHpPckp1UnE1K0xvQ21zd2tUSHM0dUFGS0VoeVByeGhpMURMeWFXYlp5NjJFYWh4dDArcXA1Wjd5K3RQT3ROMEd2ZDlHN1NzS21sQUpBaUZJSWY5cjBiV2VZN0d4K0tMUGVkalErbGxxeHJYZEp1NzFyUHJQY1g5NUdTem0yajN1ZVJ0UjNTdVcxVVJ0WjJlT3YwejZxTWJidWdaWEZRSWlRSkFsSUV5RkJxU1dSWDdYcmFwQituUG1sbEhpVEV3UlZ0M3ZldUtTMlI1WmJ1dnV3SkwyeFowTDVja3lJQVVnU0Ftaks0b2syVzdyNWNrZXoweEJjbVROc3kyLzdpcE1Tc3l3SWdSY2c5WTR2Zmt0YWZQdElRZGNuNlhHclpObDFUV2lJVFlKZ28xYkxCRlcyZUlKTWt4VGlQVnZBWUJpQkZhRGpHNzQ5VmR2V1ozWDh1WFlaQkVuR1Z5NU9MbnBFZjlxVTdselRiSjkxZkZ2THMzRFlxblZwcVZDS3pDYzBtU3B0UWt5WkZBS1FJVFkwdVBKZEJObkVsNGlxWE5QY29xOTB1MVpheDdYNmltZnBVbW5SZFp1NFBBQ2tDUUNHSXVrOW9TNDZ1eXdDUUlnRFVsTEhGYi9rWGJMUS90aEgwc0R3QUlFV0Foc0hsMlVYemRXb0FnQlNob0Ntb0ZxTXdLOUpXU09LcVMvb0xxVS9VZy9xLzVjY0lBQ2xDNDZTZ0xFZDFwa2xiZVV0L09tR3ZkSHZ4NWl3VUFJQVVJY2U0akxDczFhaFEyM0d5ZnROTTJuSzFmQk1QQUNCRmdJYUUrUlFCa0NKQUxvaTZKenEyK0syYTNMdGtQa1VBcEFnNUZFUW9HNStKTGhOVUxtamJPR1V0MnlZK2w1dmJQN25vR2RreUZGeFczVHRNYzk2dUZHMCt4YUFYZ3pPTEJpQkZhQWhjQm8rNERqQ3hsUXZhTms3WkxNOUZaSHhrYUZoWnRUN05lVGNhVWJKRGhvQVVvZkRFbmQrdmtjNGxxbnhlMmtaUGJtZld6YWo0cnBjeHYwY3RpME5ZRXRTN1M1RWpJRVVvSkVXZEFiN1J6OFVVNHY2VjdkNzNyaWt0c245bHV5eDUvYUxzWDlrdVhWTmFmR1dXdkg3UkU1NjV6Tnd1eTZTSUNBRXBBa0RWVVNMVDAxM1krMDExekdWcDNvRWFOWENHZ1RXQUZBR2c2cWhrYUtaQVc2SU1XcFkwR1NxaUhxM2cwUXRBaXRBUXRQem5YOVcwenl1cWk3UFc5UW1xWDFROWF0bFZPL09Wc3pKVFM0MUJjdFBGYVZ1V3R4R3VBRWdSY2ttdFJrMjZEbHFwMXloT3MzNUI5YWoxNEJ2emZxSllCR243SExVZUFDa0NCT0R5aWpQWGlZWnQ1ZUsrQnEzYTliR1ZjYWxIUFY3bkZpU3dvUHVKVWZjYkVTSWdSWUNjWU91V3pOT29VZGZ1VzVkeWNjNkwrUlFCa0NJMEdiYnV5RHc5SXhuVmJhdFNva3YzYnB6ellqNUZBS1FJT2NkMXprRFhPUlhUeml6aGVweWdjdWI1Mk1va21Sa2tiVmN4OHlrQ0lFVW9hS29MS2xlck9SVmRqbU9XQzBwM3RhaXpDOHluQ0lBVW9TQzRKS0JhemFtWXRNNTVyQ01BSUVWb2NseTdZOEhQZXpzdVdnZjBmSFZOZXlZSjg5Vy91ZHU2LysvKzdTa1NMQ0JGZ0dwUnhCa2tYTzlqVmxPR2ozMzduNjNyMzVCdmx0UElVY2x3dy9lK1oxMy9BL2xlR1RrQ1VnU29JbWtHcE5TakM5VGxQbWJXOVRKbGVQSGFPbXM1dFQ2dUhFMFpYamg5MmxwT3JYZVI0d3paN3FWTlh2Y0dTQkdhbW5wMWk0NHRmaXR3Tkd4VVhlcVpBS09FR0NWRGhWcXZ5ekZLaksvK3pkM2xLQmtxMUhwZGpqWXhLaUdXeTJVcGxVb3lRN2FYRVNNZ1JXaGFYTHRGczA1VWNTWXRUcElBNnlWRW13d25YN0J2YzJXcVg0NWhZbFJDdE1udzVNbVQxdjNQbmozYko4Y2dNYW9wbzVRWUFaQWlOQnl1RWt2Ny9HR2Ercm1NaGswellyYldYYmFtRUpVTXo1MGZzNWFmTHExeVphbzRKVXRiT2xReVBITHNXT0EyczJmUGpreVdwVklKSVFKU0JHaEdiTjNGYWJ0aWJTbHg4b1VKR2M1ZTlLTUprUTM5a2JUT2F4Mlg1YUV4bnhpRDBxSXRKWjQ4ZWRLVDRkcjE2NzNsMjdadWxXV1BQeTRpSW52MzdmT0owWllXejhvVHBSbXl2YXlFU05jcElFV0FHc2tvRC9jQmJkMnpXWFRGMm9Tb1pLaldqUjBhODRRb0l0STZyOVVueHJDMGFCT2lrcUZhdDNmZlBrK0lJaUxMSG4vY0o4YWd0SWdJQVNsQ1V5U2dDalkrazNrNTEvbzh1ZWdaMlRMMFZ2empaRmpuTFl2Vi9janN1bFZ0S1ZFSk1laitva3FHU3BMbkRvMUo2OVJXYTFxMHBVUWx4S0Q3aXlvWktrbnUzYmN2TkMwQ0lFVm9PT0s4MWkzTGNuRzJkMTFXcnpwbmtSTEhEZ1VMTWU2K2JDbHg3NzU5Z1VKMEllbDJBRWdSQ2tPZVpxcklZMzFxTGM0Z0lacmRwWHBYcXA0Z2s0ck43QzdWdTFMMUJBbUFGS0ZoeWROY2hubXNqNDZhUTlHbHl6WUpreStJak4xTWk2WU1UVEhLZWYrMjU4NzdCOTNZVUtOTmxmaDBHWnBpTkVla3F1K0lFWkFpQU5Ra0xaNDdQMzZQc0gzU0s3N1VxQSt3TVFmYitMYlg3aTNhT0hMc21DeDcvSEdaT211V0x6WHFBMnpNd1RZNityMUZBS1FJQUZYcDJ0VzdQblVoS2dsT245WXFjbUZDbW1hU1ZNeGU5Q081Y1hLZE5TRXFtZWxDVktKN29LdkxHNUdxZDZHYXJGMi9YdDcrK2MvNUlRQ2tDQURWNmRyOTZwcjIwb0VkNTh2ei92czAzM0tWRUtkUG0waCswNmZkSEdscVNZcGpoOGJrNHJWMWNtam92Tzg5cU4vOTIxT2xWK1ZuNVQ4MUVwNUtpQTkwZFhuTEh1anFDa3lLZS9mdGt3dW5UOHRQZi9ZelhoSU9TQkVBcXN2a0N5THRpMzRrSjRmK0tMU2NFcU5yU3RUVDR0cjE2MlhiMXEyaCsxZGlKQ1VDVW9UbXZCalAvRms1emZaWHp2eUJseHIwMlJKTTlBZTg2MUV1cUV5dDFqdWx4YW5yZkcrdkVSR3JKTTB5S2xtYUtkRk1pN05uei9hOXZVWkVySkkweTZoa1NVb0VwQWhOUWV2cEViblcyU2tpSXBOR3hqOVBHaG54MXF2dnFvd3FOemFyczJKZjZ1WFFPclozWXRham5Ga215WHExelBhdXo2anRYZExpeGFucm5BUm8yellLMjR1L2d3VG9zaTBBVW9TR3haU2VrcUZMdWFLZ1N5cEtvcmIxY1k4UkI1VVd2NzVvL042aTY0dStsUXdQQktSRU15MHVWckoxZU5HM0xrTlNJaUJGYUNyTWRLZ0VHQ1RIdEhLSUt5QTFFME9hY2xIYnUrdy96ajdpQ2xLSlVVVEVsR09ZRE5XMlVmdFhZaFFSTWVVWUprTzFMYjhsZ0JTaHFjV1lKaEdHeWNIMWZtQmNZYm1VQ3hOVjJpU1pSZEpVY2pQbGFCSkhocVlZUlVSTU9ab2dRMENLQUFaNlV0VHZLeGE1Q3pWTTFtRWljeEY1VWhHNnlERm9mVkpNT1FhdEIwQ0swSFRvQTJiVVo5c2dtckIxdHRTVXBTU2k5dWVTMHVKMDZiclVKODMyY2VWWUxaQWZJRVVBRGYyUmltb2xzbHJzTDJwOTFLTVJjZVlFdEpWbFRrR0ErbklMVFFBQUFFQlNoQnlUcEF2UmRmQkwxc2NGZ0FhNjlqdy91cmxNTTBCU3Z0MXhHSXNBUU1Qdy93Y0F0OGlSOTFnbXRYOEFBQUFBU1VWT1JLNUNZSUk9XCJcblxuLyoqKi8gfSxcbi8qIDc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJkZWZpbmUgY2Fubm90IGJlIHVzZWQgaW5kaXJlY3RcIik7IH07XHJcblxuXG4vKioqLyB9LFxuLyogNzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihfX3dlYnBhY2tfYW1kX29wdGlvbnNfXykge21vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XHJcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCB7fSkpXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGJ1bmRsZS5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9zY3JpcHRzL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgNjI1OWFlNGFmOTAyM2UyMDM2NjhcbiAqKi8iLCIoZnVuY3Rpb24oKSB7XG4gIHZhciBCYWNvbiwgQnVmZmVyaW5nU291cmNlLCBCdXMsIENvbXBvc2l0ZVVuc3Vic2NyaWJlLCBDb25zdW1pbmdTb3VyY2UsIERlc2MsIERpc3BhdGNoZXIsIEVuZCwgRXJyb3IsIEV2ZW50LCBFdmVudFN0cmVhbSwgRXhjZXB0aW9uLCBJbml0aWFsLCBOZXh0LCBOb25lLCBPYnNlcnZhYmxlLCBQcm9wZXJ0eSwgUHJvcGVydHlEaXNwYXRjaGVyLCBTb21lLCBTb3VyY2UsIFVwZGF0ZUJhcnJpZXIsIF8sIGFkZFByb3BlcnR5SW5pdFZhbHVlVG9TdHJlYW0sIGFzc2VydCwgYXNzZXJ0QXJyYXksIGFzc2VydEV2ZW50U3RyZWFtLCBhc3NlcnRGdW5jdGlvbiwgYXNzZXJ0Tm9Bcmd1bWVudHMsIGFzc2VydE9ic2VydmFibGUsIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5LCBhc3NlcnRTdHJpbmcsIGNsb25lQXJyYXksIGNvbnN0YW50VG9GdW5jdGlvbiwgY29udGFpbnNEdXBsaWNhdGVEZXBzLCBjb252ZXJ0QXJnc1RvRnVuY3Rpb24sIGRlc2NyaWJlLCBlbmRFdmVudCwgZXZlbnRJZENvdW50ZXIsIGV2ZW50TWV0aG9kcywgZmluZERlcHMsIGZpbmRIYW5kbGVyTWV0aG9kcywgZmxhdE1hcF8sIGZvcm1lciwgaWRDb3VudGVyLCBpbml0aWFsRXZlbnQsIGlzQXJyYXksIGlzRmllbGRLZXksIGlzT2JzZXJ2YWJsZSwgbGF0dGVyLCBsaWZ0Q2FsbGJhY2ssIG1ha2VGdW5jdGlvbiwgbWFrZUZ1bmN0aW9uQXJncywgbWFrZUZ1bmN0aW9uXywgbWFrZU9ic2VydmFibGUsIG1ha2VTcGF3bmVyLCBuZXh0RXZlbnQsIG5vcCwgcGFydGlhbGx5QXBwbGllZCwgcmVjdXJzaW9uRGVwdGgsIHJlZiwgcmVnaXN0ZXJPYnMsIHNweXMsIHRvQ29tYmluYXRvciwgdG9FdmVudCwgdG9GaWVsZEV4dHJhY3RvciwgdG9GaWVsZEtleSwgdG9PcHRpb24sIHRvU2ltcGxlRXh0cmFjdG9yLCB2YWx1ZUFuZEVuZCwgd2l0aERlc2MsIHdpdGhNZXRob2RDYWxsU3VwcG9ydCxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24oY2hpbGQsIHBhcmVudCkgeyBmb3IgKHZhciBrZXkgaW4gcGFyZW50KSB7IGlmIChoYXNQcm9wLmNhbGwocGFyZW50LCBrZXkpKSBjaGlsZFtrZXldID0gcGFyZW50W2tleV07IH0gZnVuY3Rpb24gY3RvcigpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9IGN0b3IucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTsgY2hpbGQucHJvdG90eXBlID0gbmV3IGN0b3IoKTsgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTsgcmV0dXJuIGNoaWxkOyB9LFxuICAgIHNsaWNlID0gW10uc2xpY2UsXG4gICAgYmluZCA9IGZ1bmN0aW9uKGZuLCBtZSl7IHJldHVybiBmdW5jdGlvbigpeyByZXR1cm4gZm4uYXBwbHkobWUsIGFyZ3VtZW50cyk7IH07IH07XG5cbiAgQmFjb24gPSB7XG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiQmFjb25cIjtcbiAgICB9XG4gIH07XG5cbiAgQmFjb24udmVyc2lvbiA9ICcwLjcuNjUnO1xuXG4gIEV4Y2VwdGlvbiA9ICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbCAhPT0gbnVsbCA/IGdsb2JhbCA6IHRoaXMpLkVycm9yO1xuXG4gIG5vcCA9IGZ1bmN0aW9uKCkge307XG5cbiAgbGF0dGVyID0gZnVuY3Rpb24oXywgeCkge1xuICAgIHJldHVybiB4O1xuICB9O1xuXG4gIGZvcm1lciA9IGZ1bmN0aW9uKHgsIF8pIHtcbiAgICByZXR1cm4geDtcbiAgfTtcblxuICBjbG9uZUFycmF5ID0gZnVuY3Rpb24oeHMpIHtcbiAgICByZXR1cm4geHMuc2xpY2UoMCk7XG4gIH07XG5cbiAgYXNzZXJ0ID0gZnVuY3Rpb24obWVzc2FnZSwgY29uZGl0aW9uKSB7XG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24obWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIGFzc2VydE9ic2VydmFibGVJc1Byb3BlcnR5ID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSAmJiAhKHggaW5zdGFuY2VvZiBQcm9wZXJ0eSkpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJPYnNlcnZhYmxlIGlzIG5vdCBhIFByb3BlcnR5IDogXCIgKyB4KTtcbiAgICB9XG4gIH07XG5cbiAgYXNzZXJ0RXZlbnRTdHJlYW0gPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICghKGV2ZW50IGluc3RhbmNlb2YgRXZlbnRTdHJlYW0pKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwibm90IGFuIEV2ZW50U3RyZWFtIDogXCIgKyBldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIGFzc2VydE9ic2VydmFibGUgPSBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICghKGV2ZW50IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSkpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJub3QgYW4gT2JzZXJ2YWJsZSA6IFwiICsgZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBhc3NlcnRGdW5jdGlvbiA9IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4gYXNzZXJ0KFwibm90IGEgZnVuY3Rpb24gOiBcIiArIGYsIF8uaXNGdW5jdGlvbihmKSk7XG4gIH07XG5cbiAgaXNBcnJheSA9IGZ1bmN0aW9uKHhzKSB7XG4gICAgcmV0dXJuIHhzIGluc3RhbmNlb2YgQXJyYXk7XG4gIH07XG5cbiAgaXNPYnNlcnZhYmxlID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4IGluc3RhbmNlb2YgT2JzZXJ2YWJsZTtcbiAgfTtcblxuICBhc3NlcnRBcnJheSA9IGZ1bmN0aW9uKHhzKSB7XG4gICAgaWYgKCFpc0FycmF5KHhzKSkge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhbiBhcnJheSA6IFwiICsgeHMpO1xuICAgIH1cbiAgfTtcblxuICBhc3NlcnROb0FyZ3VtZW50cyA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICByZXR1cm4gYXNzZXJ0KFwibm8gYXJndW1lbnRzIHN1cHBvcnRlZFwiLCBhcmdzLmxlbmd0aCA9PT0gMCk7XG4gIH07XG5cbiAgYXNzZXJ0U3RyaW5nID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhIHN0cmluZyA6IFwiICsgeCk7XG4gICAgfVxuICB9O1xuXG4gIF8gPSB7XG4gICAgaW5kZXhPZjogQXJyYXkucHJvdG90eXBlLmluZGV4T2YgPyBmdW5jdGlvbih4cywgeCkge1xuICAgICAgcmV0dXJuIHhzLmluZGV4T2YoeCk7XG4gICAgfSA6IGZ1bmN0aW9uKHhzLCB4KSB7XG4gICAgICB2YXIgaSwgaiwgbGVuMSwgeTtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4xID0geHMubGVuZ3RoOyBqIDwgbGVuMTsgaSA9ICsraikge1xuICAgICAgICB5ID0geHNbaV07XG4gICAgICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9LFxuICAgIGluZGV4V2hlcmU6IGZ1bmN0aW9uKHhzLCBmKSB7XG4gICAgICB2YXIgaSwgaiwgbGVuMSwgeTtcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4xID0geHMubGVuZ3RoOyBqIDwgbGVuMTsgaSA9ICsraikge1xuICAgICAgICB5ID0geHNbaV07XG4gICAgICAgIGlmIChmKHkpKSB7XG4gICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9LFxuICAgIGhlYWQ6IGZ1bmN0aW9uKHhzKSB7XG4gICAgICByZXR1cm4geHNbMF07XG4gICAgfSxcbiAgICBhbHdheXM6IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9O1xuICAgIH0sXG4gICAgbmVnYXRlOiBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgICAgICByZXR1cm4gIWYoeCk7XG4gICAgICB9O1xuICAgIH0sXG4gICAgZW1wdHk6IGZ1bmN0aW9uKHhzKSB7XG4gICAgICByZXR1cm4geHMubGVuZ3RoID09PSAwO1xuICAgIH0sXG4gICAgdGFpbDogZnVuY3Rpb24oeHMpIHtcbiAgICAgIHJldHVybiB4cy5zbGljZSgxLCB4cy5sZW5ndGgpO1xuICAgIH0sXG4gICAgZmlsdGVyOiBmdW5jdGlvbihmLCB4cykge1xuICAgICAgdmFyIGZpbHRlcmVkLCBqLCBsZW4xLCB4O1xuICAgICAgZmlsdGVyZWQgPSBbXTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB4cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgeCA9IHhzW2pdO1xuICAgICAgICBpZiAoZih4KSkge1xuICAgICAgICAgIGZpbHRlcmVkLnB1c2goeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmaWx0ZXJlZDtcbiAgICB9LFxuICAgIG1hcDogZnVuY3Rpb24oZiwgeHMpIHtcbiAgICAgIHZhciBqLCBsZW4xLCByZXN1bHRzLCB4O1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHhzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICB4ID0geHNbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChmKHgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0sXG4gICAgZWFjaDogZnVuY3Rpb24oeHMsIGYpIHtcbiAgICAgIHZhciBrZXksIHZhbHVlO1xuICAgICAgZm9yIChrZXkgaW4geHMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoeHMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICB2YWx1ZSA9IHhzW2tleV07XG4gICAgICAgIGYoa2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH0sXG4gICAgdG9BcnJheTogZnVuY3Rpb24oeHMpIHtcbiAgICAgIGlmIChpc0FycmF5KHhzKSkge1xuICAgICAgICByZXR1cm4geHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW3hzXTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbih4cywgeCkge1xuICAgICAgcmV0dXJuIF8uaW5kZXhPZih4cywgeCkgIT09IC0xO1xuICAgIH0sXG4gICAgaWQ6IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB4O1xuICAgIH0sXG4gICAgbGFzdDogZnVuY3Rpb24oeHMpIHtcbiAgICAgIHJldHVybiB4c1t4cy5sZW5ndGggLSAxXTtcbiAgICB9LFxuICAgIGFsbDogZnVuY3Rpb24oeHMsIGYpIHtcbiAgICAgIHZhciBqLCBsZW4xLCB4O1xuICAgICAgaWYgKGYgPT0gbnVsbCkge1xuICAgICAgICBmID0gXy5pZDtcbiAgICAgIH1cbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB4cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgeCA9IHhzW2pdO1xuICAgICAgICBpZiAoIWYoeCkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgYW55OiBmdW5jdGlvbih4cywgZikge1xuICAgICAgdmFyIGosIGxlbjEsIHg7XG4gICAgICBpZiAoZiA9PSBudWxsKSB7XG4gICAgICAgIGYgPSBfLmlkO1xuICAgICAgfVxuICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHhzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICB4ID0geHNbal07XG4gICAgICAgIGlmIChmKHgpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIHdpdGhvdXQ6IGZ1bmN0aW9uKHgsIHhzKSB7XG4gICAgICByZXR1cm4gXy5maWx0ZXIoKGZ1bmN0aW9uKHkpIHtcbiAgICAgICAgcmV0dXJuIHkgIT09IHg7XG4gICAgICB9KSwgeHMpO1xuICAgIH0sXG4gICAgcmVtb3ZlOiBmdW5jdGlvbih4LCB4cykge1xuICAgICAgdmFyIGk7XG4gICAgICBpID0gXy5pbmRleE9mKHhzLCB4KTtcbiAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgcmV0dXJuIHhzLnNwbGljZShpLCAxKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZvbGQ6IGZ1bmN0aW9uKHhzLCBzZWVkLCBmKSB7XG4gICAgICB2YXIgaiwgbGVuMSwgeDtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB4cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgeCA9IHhzW2pdO1xuICAgICAgICBzZWVkID0gZihzZWVkLCB4KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzZWVkO1xuICAgIH0sXG4gICAgZmxhdE1hcDogZnVuY3Rpb24oZiwgeHMpIHtcbiAgICAgIHJldHVybiBfLmZvbGQoeHMsIFtdLCAoZnVuY3Rpb24oeXMsIHgpIHtcbiAgICAgICAgcmV0dXJuIHlzLmNvbmNhdChmKHgpKTtcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIGNhY2hlZDogZnVuY3Rpb24oZikge1xuICAgICAgdmFyIHZhbHVlO1xuICAgICAgdmFsdWUgPSBOb25lO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodmFsdWUgPT09IE5vbmUpIHtcbiAgICAgICAgICB2YWx1ZSA9IGYoKTtcbiAgICAgICAgICBmID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBpc0Z1bmN0aW9uOiBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGYgPT09IFwiZnVuY3Rpb25cIjtcbiAgICB9LFxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHZhciBleCwgaW50ZXJuYWxzLCBrZXksIHZhbHVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVjdXJzaW9uRGVwdGgrKztcbiAgICAgICAgaWYgKG9iaiA9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoXy5pc0Z1bmN0aW9uKG9iaikpIHtcbiAgICAgICAgICByZXR1cm4gXCJmdW5jdGlvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICAgIGlmIChyZWN1cnNpb25EZXB0aCA+IDUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlsuLl1cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIFwiW1wiICsgXy5tYXAoXy50b1N0cmluZywgb2JqKS50b1N0cmluZygpICsgXCJdXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoKChvYmogIT0gbnVsbCA/IG9iai50b1N0cmluZyA6IHZvaWQgMCkgIT0gbnVsbCkgJiYgb2JqLnRvU3RyaW5nICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai50b1N0cmluZygpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICBpZiAocmVjdXJzaW9uRGVwdGggPiA1KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJ7Li59XCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGludGVybmFscyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzO1xuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iaiwga2V5KSkgY29udGludWU7XG4gICAgICAgICAgICAgIHZhbHVlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgICBleCA9IF9lcnJvcjtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBleDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgIHJlc3VsdHMucHVzaChfLnRvU3RyaW5nKGtleSkgKyBcIjpcIiArIF8udG9TdHJpbmcodmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgcmV0dXJuIFwie1wiICsgaW50ZXJuYWxzICsgXCJ9XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgcmVjdXJzaW9uRGVwdGgtLTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmVjdXJzaW9uRGVwdGggPSAwO1xuXG4gIEJhY29uLl8gPSBfO1xuXG4gIFVwZGF0ZUJhcnJpZXIgPSBCYWNvbi5VcGRhdGVCYXJyaWVyID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciBhZnRlclRyYW5zYWN0aW9uLCBhZnRlcnMsIGFmdGVyc0luZGV4LCBjdXJyZW50RXZlbnRJZCwgZmx1c2gsIGZsdXNoRGVwc09mLCBmbHVzaFdhaXRlcnMsIGhhc1dhaXRlcnMsIGluVHJhbnNhY3Rpb24sIHJvb3RFdmVudCwgd2FpdGVyT2JzLCB3YWl0ZXJzLCB3aGVuRG9uZVdpdGgsIHdyYXBwZWRTdWJzY3JpYmU7XG4gICAgcm9vdEV2ZW50ID0gdm9pZCAwO1xuICAgIHdhaXRlck9icyA9IFtdO1xuICAgIHdhaXRlcnMgPSB7fTtcbiAgICBhZnRlcnMgPSBbXTtcbiAgICBhZnRlcnNJbmRleCA9IDA7XG4gICAgYWZ0ZXJUcmFuc2FjdGlvbiA9IGZ1bmN0aW9uKGYpIHtcbiAgICAgIGlmIChyb290RXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFmdGVycy5wdXNoKGYpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdoZW5Eb25lV2l0aCA9IGZ1bmN0aW9uKG9icywgZikge1xuICAgICAgdmFyIG9ic1dhaXRlcnM7XG4gICAgICBpZiAocm9vdEV2ZW50KSB7XG4gICAgICAgIG9ic1dhaXRlcnMgPSB3YWl0ZXJzW29icy5pZF07XG4gICAgICAgIGlmIChvYnNXYWl0ZXJzID09IG51bGwpIHtcbiAgICAgICAgICBvYnNXYWl0ZXJzID0gd2FpdGVyc1tvYnMuaWRdID0gW2ZdO1xuICAgICAgICAgIHJldHVybiB3YWl0ZXJPYnMucHVzaChvYnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBvYnNXYWl0ZXJzLnB1c2goZik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBmbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2hpbGUgKHdhaXRlck9icy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZsdXNoV2FpdGVycygwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfTtcbiAgICBmbHVzaFdhaXRlcnMgPSBmdW5jdGlvbihpbmRleCkge1xuICAgICAgdmFyIGYsIGosIGxlbjEsIG9icywgb2JzSWQsIG9ic1dhaXRlcnM7XG4gICAgICBvYnMgPSB3YWl0ZXJPYnNbaW5kZXhdO1xuICAgICAgb2JzSWQgPSBvYnMuaWQ7XG4gICAgICBvYnNXYWl0ZXJzID0gd2FpdGVyc1tvYnNJZF07XG4gICAgICB3YWl0ZXJPYnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGRlbGV0ZSB3YWl0ZXJzW29ic0lkXTtcbiAgICAgIGZsdXNoRGVwc09mKG9icyk7XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gb2JzV2FpdGVycy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgZiA9IG9ic1dhaXRlcnNbal07XG4gICAgICAgIGYoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfTtcbiAgICBmbHVzaERlcHNPZiA9IGZ1bmN0aW9uKG9icykge1xuICAgICAgdmFyIGRlcCwgZGVwcywgaW5kZXgsIGosIGxlbjE7XG4gICAgICBkZXBzID0gb2JzLmludGVybmFsRGVwcygpO1xuICAgICAgZm9yIChqID0gMCwgbGVuMSA9IGRlcHMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIGRlcCA9IGRlcHNbal07XG4gICAgICAgIGZsdXNoRGVwc09mKGRlcCk7XG4gICAgICAgIGlmICh3YWl0ZXJzW2RlcC5pZF0pIHtcbiAgICAgICAgICBpbmRleCA9IF8uaW5kZXhPZih3YWl0ZXJPYnMsIGRlcCk7XG4gICAgICAgICAgZmx1c2hXYWl0ZXJzKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9O1xuICAgIGluVHJhbnNhY3Rpb24gPSBmdW5jdGlvbihldmVudCwgY29udGV4dCwgZiwgYXJncykge1xuICAgICAgdmFyIGFmdGVyLCByZXN1bHQ7XG4gICAgICBpZiAocm9vdEV2ZW50KSB7XG4gICAgICAgIHJldHVybiBmLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdEV2ZW50ID0gZXZlbnQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0ID0gZi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIHJvb3RFdmVudCA9IHZvaWQgMDtcbiAgICAgICAgICB3aGlsZSAoYWZ0ZXJzSW5kZXggPCBhZnRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZnRlciA9IGFmdGVyc1thZnRlcnNJbmRleF07XG4gICAgICAgICAgICBhZnRlcnNJbmRleCsrO1xuICAgICAgICAgICAgYWZ0ZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYWZ0ZXJzSW5kZXggPSAwO1xuICAgICAgICAgIGFmdGVycyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfTtcbiAgICBjdXJyZW50RXZlbnRJZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHJvb3RFdmVudCkge1xuICAgICAgICByZXR1cm4gcm9vdEV2ZW50LmlkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHdyYXBwZWRTdWJzY3JpYmUgPSBmdW5jdGlvbihvYnMsIHNpbmspIHtcbiAgICAgIHZhciBkb1Vuc3ViLCBzaG91bGRVbnN1YiwgdW5zdWIsIHVuc3ViZDtcbiAgICAgIHVuc3ViZCA9IGZhbHNlO1xuICAgICAgc2hvdWxkVW5zdWIgPSBmYWxzZTtcbiAgICAgIGRvVW5zdWIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZFVuc3ViID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICB1bnN1YiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB1bnN1YmQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZG9VbnN1YigpO1xuICAgICAgfTtcbiAgICAgIGRvVW5zdWIgPSBvYnMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFmdGVyVHJhbnNhY3Rpb24oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlcGx5O1xuICAgICAgICAgIGlmICghdW5zdWJkKSB7XG4gICAgICAgICAgICByZXBseSA9IHNpbmsoZXZlbnQpO1xuICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHVuc3ViKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgaWYgKHNob3VsZFVuc3ViKSB7XG4gICAgICAgIGRvVW5zdWIoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bnN1YjtcbiAgICB9O1xuICAgIGhhc1dhaXRlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB3YWl0ZXJPYnMubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIHJldHVybiB7XG4gICAgICB3aGVuRG9uZVdpdGg6IHdoZW5Eb25lV2l0aCxcbiAgICAgIGhhc1dhaXRlcnM6IGhhc1dhaXRlcnMsXG4gICAgICBpblRyYW5zYWN0aW9uOiBpblRyYW5zYWN0aW9uLFxuICAgICAgY3VycmVudEV2ZW50SWQ6IGN1cnJlbnRFdmVudElkLFxuICAgICAgd3JhcHBlZFN1YnNjcmliZTogd3JhcHBlZFN1YnNjcmliZSxcbiAgICAgIGFmdGVyVHJhbnNhY3Rpb246IGFmdGVyVHJhbnNhY3Rpb25cbiAgICB9O1xuICB9KSgpO1xuXG4gIFNvdXJjZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBTb3VyY2Uob2JzMSwgc3luYywgbGF6eTEpIHtcbiAgICAgIHRoaXMub2JzID0gb2JzMTtcbiAgICAgIHRoaXMuc3luYyA9IHN5bmM7XG4gICAgICB0aGlzLmxhenkgPSBsYXp5MSAhPSBudWxsID8gbGF6eTEgOiBmYWxzZTtcbiAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICB9XG5cbiAgICBTb3VyY2UucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgIHJldHVybiB0aGlzLm9icy5kaXNwYXRjaGVyLnN1YnNjcmliZShzaW5rKTtcbiAgICB9O1xuXG4gICAgU291cmNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMub2JzLnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIFNvdXJjZS5wcm90b3R5cGUubWFya0VuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIFNvdXJjZS5wcm90b3R5cGUuY29uc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHRoaXMubGF6eSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHZhbHVlOiBfLmFsd2F5cyh0aGlzLnF1ZXVlWzBdKVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVbMF07XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNvdXJjZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXVlID0gW3hdO1xuICAgIH07XG5cbiAgICBTb3VyY2UucHJvdG90eXBlLm1heUhhdmUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBTb3VyY2UucHJvdG90eXBlLmhhc0F0TGVhc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgU291cmNlLnByb3RvdHlwZS5mbGF0dGVuID0gdHJ1ZTtcblxuICAgIHJldHVybiBTb3VyY2U7XG5cbiAgfSkoKTtcblxuICBDb25zdW1pbmdTb3VyY2UgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChDb25zdW1pbmdTb3VyY2UsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gQ29uc3VtaW5nU291cmNlKCkge1xuICAgICAgcmV0dXJuIENvbnN1bWluZ1NvdXJjZS5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBDb25zdW1pbmdTb3VyY2UucHJvdG90eXBlLmNvbnN1bWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgfTtcblxuICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnB1c2goeCk7XG4gICAgfTtcblxuICAgIENvbnN1bWluZ1NvdXJjZS5wcm90b3R5cGUubWF5SGF2ZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICAgIHJldHVybiAhdGhpcy5lbmRlZCB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA+PSBjO1xuICAgIH07XG5cbiAgICBDb25zdW1pbmdTb3VyY2UucHJvdG90eXBlLmhhc0F0TGVhc3QgPSBmdW5jdGlvbihjKSB7XG4gICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggPj0gYztcbiAgICB9O1xuXG4gICAgQ29uc3VtaW5nU291cmNlLnByb3RvdHlwZS5mbGF0dGVuID0gZmFsc2U7XG5cbiAgICByZXR1cm4gQ29uc3VtaW5nU291cmNlO1xuXG4gIH0pKFNvdXJjZSk7XG5cbiAgQnVmZmVyaW5nU291cmNlID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoQnVmZmVyaW5nU291cmNlLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIEJ1ZmZlcmluZ1NvdXJjZShvYnMpIHtcbiAgICAgIEJ1ZmZlcmluZ1NvdXJjZS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBvYnMsIHRydWUpO1xuICAgIH1cblxuICAgIEJ1ZmZlcmluZ1NvdXJjZS5wcm90b3R5cGUuY29uc3VtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHZhbHVlcztcbiAgICAgIHZhbHVlcyA9IHRoaXMucXVldWU7XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgQnVmZmVyaW5nU291cmNlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHRoaXMucXVldWUucHVzaCh4LnZhbHVlKCkpO1xuICAgIH07XG5cbiAgICBCdWZmZXJpbmdTb3VyY2UucHJvdG90eXBlLmhhc0F0TGVhc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICByZXR1cm4gQnVmZmVyaW5nU291cmNlO1xuXG4gIH0pKFNvdXJjZSk7XG5cbiAgU291cmNlLmlzVHJpZ2dlciA9IGZ1bmN0aW9uKHMpIHtcbiAgICBpZiAocyBpbnN0YW5jZW9mIFNvdXJjZSkge1xuICAgICAgcmV0dXJuIHMuc3luYztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHMgaW5zdGFuY2VvZiBFdmVudFN0cmVhbTtcbiAgICB9XG4gIH07XG5cbiAgU291cmNlLmZyb21PYnNlcnZhYmxlID0gZnVuY3Rpb24ocykge1xuICAgIGlmIChzIGluc3RhbmNlb2YgU291cmNlKSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9IGVsc2UgaWYgKHMgaW5zdGFuY2VvZiBQcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIG5ldyBTb3VyY2UocywgZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IENvbnN1bWluZ1NvdXJjZShzLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgRGVzYyA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBEZXNjKGNvbnRleHQxLCBtZXRob2QxLCBhcmdzMSkge1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDE7XG4gICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDE7XG4gICAgICB0aGlzLmFyZ3MgPSBhcmdzMTtcbiAgICB9XG5cbiAgICBEZXNjLnByb3RvdHlwZS5kZXBzID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYWNoZWQgfHwgKHRoaXMuY2FjaGVkID0gZmluZERlcHMoW3RoaXMuY29udGV4dF0uY29uY2F0KHRoaXMuYXJncykpKTtcbiAgICB9O1xuXG4gICAgRGVzYy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfLnRvU3RyaW5nKHRoaXMuY29udGV4dCkgKyBcIi5cIiArIF8udG9TdHJpbmcodGhpcy5tZXRob2QpICsgXCIoXCIgKyBfLm1hcChfLnRvU3RyaW5nLCB0aGlzLmFyZ3MpICsgXCIpXCI7XG4gICAgfTtcblxuICAgIHJldHVybiBEZXNjO1xuXG4gIH0pKCk7XG5cbiAgZGVzY3JpYmUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgY29udGV4dCwgbWV0aG9kO1xuICAgIGNvbnRleHQgPSBhcmd1bWVudHNbMF0sIG1ldGhvZCA9IGFyZ3VtZW50c1sxXSwgYXJncyA9IDMgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IFtdO1xuICAgIGlmICgoY29udGV4dCB8fCBtZXRob2QpIGluc3RhbmNlb2YgRGVzYykge1xuICAgICAgcmV0dXJuIGNvbnRleHQgfHwgbWV0aG9kO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IERlc2MoY29udGV4dCwgbWV0aG9kLCBhcmdzKTtcbiAgICB9XG4gIH07XG5cbiAgd2l0aERlc2MgPSBmdW5jdGlvbihkZXNjLCBvYnMpIHtcbiAgICBvYnMuZGVzYyA9IGRlc2M7XG4gICAgcmV0dXJuIG9icztcbiAgfTtcblxuICBmaW5kRGVwcyA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoaXNBcnJheSh4KSkge1xuICAgICAgcmV0dXJuIF8uZmxhdE1hcChmaW5kRGVwcywgeCk7XG4gICAgfSBlbHNlIGlmIChpc09ic2VydmFibGUoeCkpIHtcbiAgICAgIHJldHVybiBbeF07XG4gICAgfSBlbHNlIGlmICh4IGluc3RhbmNlb2YgU291cmNlKSB7XG4gICAgICByZXR1cm4gW3gub2JzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfTtcblxuICBCYWNvbi5EZXNjID0gRGVzYztcblxuICBCYWNvbi5EZXNjLmVtcHR5ID0gbmV3IEJhY29uLkRlc2MoXCJcIiwgXCJcIiwgW10pO1xuXG4gIHdpdGhNZXRob2RDYWxsU3VwcG9ydCA9IGZ1bmN0aW9uKHdyYXBwZWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgY29udGV4dCwgZiwgbWV0aG9kTmFtZTtcbiAgICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICAgIGlmICh0eXBlb2YgZiA9PT0gXCJvYmplY3RcIiAmJiBhcmdzLmxlbmd0aCkge1xuICAgICAgICBjb250ZXh0ID0gZjtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGFyZ3NbMF07XG4gICAgICAgIGYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gY29udGV4dFttZXRob2ROYW1lXS5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgICAgICBhcmdzID0gYXJncy5zbGljZSgxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVkLmFwcGx5KG51bGwsIFtmXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpO1xuICAgIH07XG4gIH07XG5cbiAgbWFrZUZ1bmN0aW9uQXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncyk7XG4gICAgcmV0dXJuIG1ha2VGdW5jdGlvbl8uYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgcGFydGlhbGx5QXBwbGllZCA9IGZ1bmN0aW9uKGYsIGFwcGxpZWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncztcbiAgICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICAgIHJldHVybiBmLmFwcGx5KG51bGwsIGFwcGxpZWQuY29uY2F0KGFyZ3MpKTtcbiAgICB9O1xuICB9O1xuXG4gIHRvU2ltcGxlRXh0cmFjdG9yID0gZnVuY3Rpb24oYXJncykge1xuICAgIHJldHVybiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YXIgZmllbGRWYWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpZWxkVmFsdWUgPSB2YWx1ZVtrZXldO1xuICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oZmllbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWVsZFZhbHVlLmFwcGx5KHZhbHVlLCBhcmdzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZpZWxkVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gIH07XG5cbiAgdG9GaWVsZEV4dHJhY3RvciA9IGZ1bmN0aW9uKGYsIGFyZ3MpIHtcbiAgICB2YXIgcGFydEZ1bmNzLCBwYXJ0cztcbiAgICBwYXJ0cyA9IGYuc2xpY2UoMSkuc3BsaXQoXCIuXCIpO1xuICAgIHBhcnRGdW5jcyA9IF8ubWFwKHRvU2ltcGxlRXh0cmFjdG9yKGFyZ3MpLCBwYXJ0cyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgaiwgbGVuMTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBwYXJ0RnVuY3MubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIGYgPSBwYXJ0RnVuY3Nbal07XG4gICAgICAgIHZhbHVlID0gZih2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfTtcblxuICBpc0ZpZWxkS2V5ID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiAodHlwZW9mIGYgPT09IFwic3RyaW5nXCIpICYmIGYubGVuZ3RoID4gMSAmJiBmLmNoYXJBdCgwKSA9PT0gXCIuXCI7XG4gIH07XG5cbiAgbWFrZUZ1bmN0aW9uXyA9IHdpdGhNZXRob2RDYWxsU3VwcG9ydChmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgZjtcbiAgICBmID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgaWYgKF8uaXNGdW5jdGlvbihmKSkge1xuICAgICAgaWYgKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBwYXJ0aWFsbHlBcHBsaWVkKGYsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGY7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpc0ZpZWxkS2V5KGYpKSB7XG4gICAgICByZXR1cm4gdG9GaWVsZEV4dHJhY3RvcihmLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIF8uYWx3YXlzKGYpO1xuICAgIH1cbiAgfSk7XG5cbiAgbWFrZUZ1bmN0aW9uID0gZnVuY3Rpb24oZiwgYXJncykge1xuICAgIHJldHVybiBtYWtlRnVuY3Rpb25fLmFwcGx5KG51bGwsIFtmXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpO1xuICB9O1xuXG4gIGNvbnZlcnRBcmdzVG9GdW5jdGlvbiA9IGZ1bmN0aW9uKG9icywgZiwgYXJncywgbWV0aG9kKSB7XG4gICAgdmFyIHNhbXBsZWQ7XG4gICAgaWYgKGYgaW5zdGFuY2VvZiBQcm9wZXJ0eSkge1xuICAgICAgc2FtcGxlZCA9IGYuc2FtcGxlZEJ5KG9icywgZnVuY3Rpb24ocCwgcykge1xuICAgICAgICByZXR1cm4gW3AsIHNdO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gbWV0aG9kLmNhbGwoc2FtcGxlZCwgZnVuY3Rpb24oYXJnKSB7XG4gICAgICAgIHZhciBwLCBzO1xuICAgICAgICBwID0gYXJnWzBdLCBzID0gYXJnWzFdO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0pLm1hcChmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgdmFyIHAsIHM7XG4gICAgICAgIHAgPSBhcmdbMF0sIHMgPSBhcmdbMV07XG4gICAgICAgIHJldHVybiBzO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGYgPSBtYWtlRnVuY3Rpb24oZiwgYXJncyk7XG4gICAgICByZXR1cm4gbWV0aG9kLmNhbGwob2JzLCBmKTtcbiAgICB9XG4gIH07XG5cbiAgdG9Db21iaW5hdG9yID0gZnVuY3Rpb24oZikge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihmKSkge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfSBlbHNlIGlmIChpc0ZpZWxkS2V5KGYpKSB7XG4gICAgICBrZXkgPSB0b0ZpZWxkS2V5KGYpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0W2tleV0ocmlnaHQpO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIm5vdCBhIGZ1bmN0aW9uIG9yIGEgZmllbGQga2V5OiBcIiArIGYpO1xuICAgIH1cbiAgfTtcblxuICB0b0ZpZWxkS2V5ID0gZnVuY3Rpb24oZikge1xuICAgIHJldHVybiBmLnNsaWNlKDEpO1xuICB9O1xuXG4gIFNvbWUgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gU29tZSh2YWx1ZTEpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTE7XG4gICAgfVxuXG4gICAgU29tZS5wcm90b3R5cGUuZ2V0T3JFbHNlID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9O1xuXG4gICAgU29tZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9O1xuXG4gICAgU29tZS5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oZikge1xuICAgICAgaWYgKGYodGhpcy52YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTb21lKHRoaXMudmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIE5vbmU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFNvbWUucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKGYpIHtcbiAgICAgIHJldHVybiBuZXcgU29tZShmKHRoaXMudmFsdWUpKTtcbiAgICB9O1xuXG4gICAgU29tZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGYpIHtcbiAgICAgIHJldHVybiBmKHRoaXMudmFsdWUpO1xuICAgIH07XG5cbiAgICBTb21lLnByb3RvdHlwZS5pc0RlZmluZWQgPSB0cnVlO1xuXG4gICAgU29tZS5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFt0aGlzLnZhbHVlXTtcbiAgICB9O1xuXG4gICAgU29tZS5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiU29tZShcIiArIHRoaXMudmFsdWUgKyBcIilcIjtcbiAgICB9O1xuXG4gICAgU29tZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmluc3BlY3QoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNvbWU7XG5cbiAgfSkoKTtcblxuICBOb25lID0ge1xuICAgIGdldE9yRWxzZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIGZpbHRlcjogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gTm9uZTtcbiAgICB9LFxuICAgIG1hcDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gTm9uZTtcbiAgICB9LFxuICAgIGZvckVhY2g6IGZ1bmN0aW9uKCkge30sXG4gICAgaXNEZWZpbmVkOiBmYWxzZSxcbiAgICB0b0FycmF5OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9LFxuICAgIGluc3BlY3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIFwiTm9uZVwiO1xuICAgIH0sXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpO1xuICAgIH1cbiAgfTtcblxuICB0b09wdGlvbiA9IGZ1bmN0aW9uKHYpIHtcbiAgICBpZiAodiBpbnN0YW5jZW9mIFNvbWUgfHwgdiA9PT0gTm9uZSkge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgU29tZSh2KTtcbiAgICB9XG4gIH07XG5cbiAgQmFjb24ubm9Nb3JlID0gW1wiPG5vLW1vcmU+XCJdO1xuXG4gIEJhY29uLm1vcmUgPSBbXCI8bW9yZT5cIl07XG5cbiAgZXZlbnRJZENvdW50ZXIgPSAwO1xuXG4gIEV2ZW50ID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIEV2ZW50KCkge1xuICAgICAgdGhpcy5pZCA9ICsrZXZlbnRJZENvdW50ZXI7XG4gICAgfVxuXG4gICAgRXZlbnQucHJvdG90eXBlLmlzRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBFdmVudC5wcm90b3R5cGUuaXNFbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgRXZlbnQucHJvdG90eXBlLmlzSW5pdGlhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBFdmVudC5wcm90b3R5cGUuaXNOZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIEV2ZW50LnByb3RvdHlwZS5pc0Vycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIEV2ZW50LnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBFdmVudC5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuXG4gICAgRXZlbnQucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIEV2ZW50LnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRvU3RyaW5nKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVudDtcblxuICB9KSgpO1xuXG4gIE5leHQgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChOZXh0LCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIE5leHQodmFsdWVGLCBlYWdlcikge1xuICAgICAgTmV4dC5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcbiAgICAgIGlmICghZWFnZXIgJiYgXy5pc0Z1bmN0aW9uKHZhbHVlRikgfHwgdmFsdWVGIGluc3RhbmNlb2YgTmV4dCkge1xuICAgICAgICB0aGlzLnZhbHVlRiA9IHZhbHVlRjtcbiAgICAgICAgdGhpcy52YWx1ZUludGVybmFsID0gdm9pZCAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52YWx1ZUYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudmFsdWVJbnRlcm5hbCA9IHZhbHVlRjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBOZXh0LnByb3RvdHlwZS5pc05leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICBOZXh0LnByb3RvdHlwZS5oYXNWYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIE5leHQucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZUYgaW5zdGFuY2VvZiBOZXh0KSB7XG4gICAgICAgIHRoaXMudmFsdWVJbnRlcm5hbCA9IHRoaXMudmFsdWVGLnZhbHVlKCk7XG4gICAgICAgIHRoaXMudmFsdWVGID0gdm9pZCAwO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlRikge1xuICAgICAgICB0aGlzLnZhbHVlSW50ZXJuYWwgPSB0aGlzLnZhbHVlRigpO1xuICAgICAgICB0aGlzLnZhbHVlRiA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnZhbHVlSW50ZXJuYWw7XG4gICAgfTtcblxuICAgIE5leHQucHJvdG90eXBlLmZtYXAgPSBmdW5jdGlvbihmKSB7XG4gICAgICB2YXIgZXZlbnQsIHZhbHVlO1xuICAgICAgaWYgKHRoaXMudmFsdWVJbnRlcm5hbCkge1xuICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWVJbnRlcm5hbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGYodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIGYoZXZlbnQudmFsdWUoKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBOZXh0LnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHQodmFsdWUpO1xuICAgIH07XG5cbiAgICBOZXh0LnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gZih0aGlzLnZhbHVlKCkpO1xuICAgIH07XG5cbiAgICBOZXh0LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8udG9TdHJpbmcodGhpcy52YWx1ZSgpKTtcbiAgICB9O1xuXG4gICAgTmV4dC5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV4dDtcblxuICB9KShFdmVudCk7XG5cbiAgSW5pdGlhbCA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKEluaXRpYWwsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gSW5pdGlhbCgpIHtcbiAgICAgIHJldHVybiBJbml0aWFsLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIEluaXRpYWwucHJvdG90eXBlLmlzSW5pdGlhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIEluaXRpYWwucHJvdG90eXBlLmlzTmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBJbml0aWFsLnByb3RvdHlwZS5hcHBseSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbmV3IEluaXRpYWwodmFsdWUpO1xuICAgIH07XG5cbiAgICBJbml0aWFsLnByb3RvdHlwZS50b05leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgTmV4dCh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluaXRpYWw7XG5cbiAgfSkoTmV4dCk7XG5cbiAgRW5kID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoRW5kLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIEVuZCgpIHtcbiAgICAgIHJldHVybiBFbmQuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgRW5kLnByb3RvdHlwZS5pc0VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIEVuZC5wcm90b3R5cGUuZm1hcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIEVuZC5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBFbmQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8ZW5kPlwiO1xuICAgIH07XG5cbiAgICByZXR1cm4gRW5kO1xuXG4gIH0pKEV2ZW50KTtcblxuICBFcnJvciA9IChmdW5jdGlvbihzdXBlckNsYXNzKSB7XG4gICAgZXh0ZW5kKEVycm9yLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIEVycm9yKGVycm9yMSkge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yMTtcbiAgICB9XG5cbiAgICBFcnJvci5wcm90b3R5cGUuaXNFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIEVycm9yLnByb3RvdHlwZS5mbWFwID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRXJyb3IucHJvdG90eXBlLmFwcGx5ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXCI8ZXJyb3I+IFwiICsgXy50b1N0cmluZyh0aGlzLmVycm9yKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVycm9yO1xuXG4gIH0pKEV2ZW50KTtcblxuICBCYWNvbi5FdmVudCA9IEV2ZW50O1xuXG4gIEJhY29uLkluaXRpYWwgPSBJbml0aWFsO1xuXG4gIEJhY29uLk5leHQgPSBOZXh0O1xuXG4gIEJhY29uLkVuZCA9IEVuZDtcblxuICBCYWNvbi5FcnJvciA9IEVycm9yO1xuXG4gIGluaXRpYWxFdmVudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBJbml0aWFsKHZhbHVlLCB0cnVlKTtcbiAgfTtcblxuICBuZXh0RXZlbnQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgTmV4dCh2YWx1ZSwgdHJ1ZSk7XG4gIH07XG5cbiAgZW5kRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IEVuZCgpO1xuICB9O1xuXG4gIHRvRXZlbnQgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggaW5zdGFuY2VvZiBFdmVudCkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXh0RXZlbnQoeCk7XG4gICAgfVxuICB9O1xuXG4gIGlkQ291bnRlciA9IDA7XG5cbiAgcmVnaXN0ZXJPYnMgPSBmdW5jdGlvbigpIHt9O1xuXG4gIE9ic2VydmFibGUgPSAoZnVuY3Rpb24oKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShkZXNjMSkge1xuICAgICAgdGhpcy5kZXNjID0gZGVzYzE7XG4gICAgICB0aGlzLmlkID0gKytpZENvdW50ZXI7XG4gICAgICB0aGlzLmluaXRpYWxEZXNjID0gdGhpcy5kZXNjO1xuICAgIH1cblxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgIHJldHVybiBVcGRhdGVCYXJyaWVyLndyYXBwZWRTdWJzY3JpYmUodGhpcywgc2luayk7XG4gICAgfTtcblxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUludGVybmFsID0gZnVuY3Rpb24oc2luaykge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoc2luayk7XG4gICAgfTtcblxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm9uVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBmO1xuICAgICAgZiA9IG1ha2VGdW5jdGlvbkFyZ3MoYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiB0aGlzLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuaGFzVmFsdWUoKSkge1xuICAgICAgICAgIHJldHVybiBmKGV2ZW50LnZhbHVlKCkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25WYWx1ZXMgPSBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gdGhpcy5vblZhbHVlKGZ1bmN0aW9uKGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGY7XG4gICAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcbiAgICAgICAgICByZXR1cm4gZihldmVudC5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGY7XG4gICAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIGYoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS53aXRoRGVzY3JpcHRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZGVzYyA9IGRlc2NyaWJlLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLl9uYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzYy50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnRlcm5hbERlcHMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmluaXRpYWxEZXNjLmRlcHMoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG5cbiAgfSkoKTtcblxuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5hc3NpZ24gPSBPYnNlcnZhYmxlLnByb3RvdHlwZS5vblZhbHVlO1xuXG4gIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBPYnNlcnZhYmxlLnByb3RvdHlwZS5vblZhbHVlO1xuXG4gIE9ic2VydmFibGUucHJvdG90eXBlLmluc3BlY3QgPSBPYnNlcnZhYmxlLnByb3RvdHlwZS50b1N0cmluZztcblxuICBCYWNvbi5PYnNlcnZhYmxlID0gT2JzZXJ2YWJsZTtcblxuICBDb21wb3NpdGVVbnN1YnNjcmliZSA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiBDb21wb3NpdGVVbnN1YnNjcmliZShzcykge1xuICAgICAgdmFyIGosIGxlbjEsIHM7XG4gICAgICBpZiAoc3MgPT0gbnVsbCkge1xuICAgICAgICBzcyA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy51bnN1YnNjcmliZSA9IGJpbmQodGhpcy51bnN1YnNjcmliZSwgdGhpcyk7XG4gICAgICB0aGlzLnVuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB0aGlzLnN0YXJ0aW5nID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gc3MubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIHMgPSBzc1tqXTtcbiAgICAgICAgdGhpcy5hZGQocyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgQ29tcG9zaXRlVW5zdWJzY3JpYmUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKHN1YnNjcmlwdGlvbikge1xuICAgICAgdmFyIGVuZGVkLCB1bnN1YiwgdW5zdWJNZTtcbiAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBlbmRlZCA9IGZhbHNlO1xuICAgICAgdW5zdWIgPSBub3A7XG4gICAgICB0aGlzLnN0YXJ0aW5nLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgIHVuc3ViTWUgPSAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChfdGhpcy51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZW5kZWQgPSB0cnVlO1xuICAgICAgICAgIF90aGlzLnJlbW92ZSh1bnN1Yik7XG4gICAgICAgICAgcmV0dXJuIF8ucmVtb3ZlKHN1YnNjcmlwdGlvbiwgX3RoaXMuc3RhcnRpbmcpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgICB1bnN1YiA9IHN1YnNjcmlwdGlvbih0aGlzLnVuc3Vic2NyaWJlLCB1bnN1Yk1lKTtcbiAgICAgIGlmICghKHRoaXMudW5zdWJzY3JpYmVkIHx8IGVuZGVkKSkge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCh1bnN1Yik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bnN1YigpO1xuICAgICAgfVxuICAgICAgXy5yZW1vdmUoc3Vic2NyaXB0aW9uLCB0aGlzLnN0YXJ0aW5nKTtcbiAgICAgIHJldHVybiB1bnN1YjtcbiAgICB9O1xuXG4gICAgQ29tcG9zaXRlVW5zdWJzY3JpYmUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHVuc3ViKSB7XG4gICAgICBpZiAodGhpcy51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKChfLnJlbW92ZSh1bnN1YiwgdGhpcy5zdWJzY3JpcHRpb25zKSkgIT09IHZvaWQgMCkge1xuICAgICAgICByZXR1cm4gdW5zdWIoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tcG9zaXRlVW5zdWJzY3JpYmUucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaiwgbGVuMSwgcmVmLCBzO1xuICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMudW5zdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIHMgPSByZWZbal07XG4gICAgICAgIHMoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgcmV0dXJuIHRoaXMuc3RhcnRpbmcgPSBbXTtcbiAgICB9O1xuXG4gICAgQ29tcG9zaXRlVW5zdWJzY3JpYmUucHJvdG90eXBlLmNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy51bnN1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCArIHRoaXMuc3RhcnRpbmcubGVuZ3RoO1xuICAgIH07XG5cbiAgICBDb21wb3NpdGVVbnN1YnNjcmliZS5wcm90b3R5cGUuZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvdW50KCkgPT09IDA7XG4gICAgfTtcblxuICAgIHJldHVybiBDb21wb3NpdGVVbnN1YnNjcmliZTtcblxuICB9KSgpO1xuXG4gIEJhY29uLkNvbXBvc2l0ZVVuc3Vic2NyaWJlID0gQ29tcG9zaXRlVW5zdWJzY3JpYmU7XG5cbiAgRGlzcGF0Y2hlciA9IChmdW5jdGlvbigpIHtcbiAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5wdXNoaW5nID0gZmFsc2U7XG5cbiAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5lbmRlZCA9IGZhbHNlO1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHJldkVycm9yID0gdm9pZCAwO1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5zdWJTcmMgPSB2b2lkIDA7XG5cbiAgICBmdW5jdGlvbiBEaXNwYXRjaGVyKF9zdWJzY3JpYmUsIF9oYW5kbGVFdmVudCkge1xuICAgICAgdGhpcy5fc3Vic2NyaWJlID0gX3N1YnNjcmliZTtcbiAgICAgIHRoaXMuX2hhbmRsZUV2ZW50ID0gX2hhbmRsZUV2ZW50O1xuICAgICAgdGhpcy5zdWJzY3JpYmUgPSBiaW5kKHRoaXMuc3Vic2NyaWJlLCB0aGlzKTtcbiAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBiaW5kKHRoaXMuaGFuZGxlRXZlbnQsIHRoaXMpO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB0aGlzLnF1ZXVlID0gW107XG4gICAgfVxuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaGFzU3Vic2NyaWJlcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoID4gMDtcbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24oc3Vic2NyaXB0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25zID0gXy53aXRob3V0KHN1YnNjcmlwdGlvbiwgdGhpcy5zdWJzY3JpcHRpb25zKTtcbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuICAgICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBVcGRhdGVCYXJyaWVyLmluVHJhbnNhY3Rpb24oZXZlbnQsIHRoaXMsIHRoaXMucHVzaEl0LCBbZXZlbnRdKTtcbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUucHVzaFRvU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2YXIgZSwgaiwgbGVuMSwgcmVwbHksIHN1YiwgdG1wO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdG1wID0gdGhpcy5zdWJzY3JpcHRpb25zO1xuICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gdG1wLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgIHN1YiA9IHRtcFtqXTtcbiAgICAgICAgICByZXBseSA9IHN1Yi5zaW5rKGV2ZW50KTtcbiAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSB8fCBldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVN1YihzdWIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xuICAgICAgICBlID0gX2Vycm9yO1xuICAgICAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBEaXNwYXRjaGVyLnByb3RvdHlwZS5wdXNoSXQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKCF0aGlzLnB1c2hpbmcpIHtcbiAgICAgICAgaWYgKGV2ZW50ID09PSB0aGlzLnByZXZFcnJvcikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuaXNFcnJvcigpKSB7XG4gICAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBldmVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnB1c2hpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnB1c2hUb1N1YnNjcmlwdGlvbnMoZXZlbnQpO1xuICAgICAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgZXZlbnQgPSB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNTdWJzY3JpYmVycygpKSB7XG4gICAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51bnN1YnNjcmliZUZyb21Tb3VyY2UoKTtcbiAgICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKHRoaXMuX2hhbmRsZUV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVFdmVudChldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUudW5zdWJzY3JpYmVGcm9tU291cmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAodGhpcy51bnN1YlNyYykge1xuICAgICAgICB0aGlzLnVuc3ViU3JjKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy51bnN1YlNyYyA9IHZvaWQgMDtcbiAgICB9O1xuXG4gICAgRGlzcGF0Y2hlci5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24oc2luaykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG4gICAgICAgIHJldHVybiBub3A7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhc3NlcnRGdW5jdGlvbihzaW5rKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uID0ge1xuICAgICAgICAgIHNpbms6IHNpbmtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuc3Vic2NyaXB0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0aGlzLnVuc3ViU3JjID0gdGhpcy5fc3Vic2NyaWJlKHRoaXMuaGFuZGxlRXZlbnQpO1xuICAgICAgICAgIGFzc2VydEZ1bmN0aW9uKHRoaXMudW5zdWJTcmMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW1vdmVTdWIoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmICghX3RoaXMuaGFzU3Vic2NyaWJlcnMoKSkge1xuICAgICAgICAgICAgICByZXR1cm4gX3RoaXMudW5zdWJzY3JpYmVGcm9tU291cmNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkodGhpcyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBEaXNwYXRjaGVyO1xuXG4gIH0pKCk7XG5cbiAgQmFjb24uRGlzcGF0Y2hlciA9IERpc3BhdGNoZXI7XG5cbiAgRXZlbnRTdHJlYW0gPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChFdmVudFN0cmVhbSwgc3VwZXJDbGFzcyk7XG5cbiAgICBmdW5jdGlvbiBFdmVudFN0cmVhbShkZXNjLCBzdWJzY3JpYmUsIGhhbmRsZXIpIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24oZGVzYykpIHtcbiAgICAgICAgaGFuZGxlciA9IHN1YnNjcmliZTtcbiAgICAgICAgc3Vic2NyaWJlID0gZGVzYztcbiAgICAgICAgZGVzYyA9IERlc2MuZW1wdHk7XG4gICAgICB9XG4gICAgICBFdmVudFN0cmVhbS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZXNjKTtcbiAgICAgIGFzc2VydEZ1bmN0aW9uKHN1YnNjcmliZSk7XG4gICAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgRGlzcGF0Y2hlcihzdWJzY3JpYmUsIGhhbmRsZXIpO1xuICAgICAgcmVnaXN0ZXJPYnModGhpcyk7XG4gICAgfVxuXG4gICAgRXZlbnRTdHJlYW0ucHJvdG90eXBlLnRvUHJvcGVydHkgPSBmdW5jdGlvbihpbml0VmFsdWVfKSB7XG4gICAgICB2YXIgZGlzcCwgaW5pdFZhbHVlO1xuICAgICAgaW5pdFZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMCA/IE5vbmUgOiB0b09wdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIGluaXRWYWx1ZV87XG4gICAgICB9KTtcbiAgICAgIGRpc3AgPSB0aGlzLmRpc3BhdGNoZXI7XG4gICAgICByZXR1cm4gbmV3IFByb3BlcnR5KG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidG9Qcm9wZXJ0eVwiLCBbaW5pdFZhbHVlX10pLCBmdW5jdGlvbihzaW5rKSB7XG4gICAgICAgIHZhciBpbml0U2VudCwgcmVwbHksIHNlbmRJbml0LCB1bnN1YjtcbiAgICAgICAgaW5pdFNlbnQgPSBmYWxzZTtcbiAgICAgICAgdW5zdWIgPSBub3A7XG4gICAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcbiAgICAgICAgc2VuZEluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoIWluaXRTZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gaW5pdFZhbHVlLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICAgaW5pdFNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICByZXBseSA9IHNpbmsobmV3IEluaXRpYWwodmFsdWUpKTtcbiAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcbiAgICAgICAgICAgICAgICB1bnN1YigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bnN1YiA9IG5vcDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB1bnN1YiA9IGRpc3Auc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgIGlmIChpbml0U2VudCAmJiBldmVudC5pc0luaXRpYWwoKSkge1xuICAgICAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghZXZlbnQuaXNJbml0aWFsKCkpIHtcbiAgICAgICAgICAgICAgICBzZW5kSW5pdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGluaXRTZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgaW5pdFZhbHVlID0gbmV3IFNvbWUoZXZlbnQpO1xuICAgICAgICAgICAgICByZXR1cm4gc2luayhldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgICAgIHJlcGx5ID0gc2VuZEluaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXBseSAhPT0gQmFjb24ubm9Nb3JlKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzaW5rKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzZW5kSW5pdCgpO1xuICAgICAgICByZXR1cm4gdW5zdWI7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgRXZlbnRTdHJlYW0ucHJvdG90eXBlLnRvRXZlbnRTdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBFdmVudFN0cmVhbS5wcm90b3R5cGUud2l0aEhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwid2l0aEhhbmRsZXJcIiwgW2hhbmRsZXJdKSwgdGhpcy5kaXNwYXRjaGVyLnN1YnNjcmliZSwgaGFuZGxlcik7XG4gICAgfTtcblxuICAgIHJldHVybiBFdmVudFN0cmVhbTtcblxuICB9KShPYnNlcnZhYmxlKTtcblxuICBCYWNvbi5FdmVudFN0cmVhbSA9IEV2ZW50U3RyZWFtO1xuXG4gIEJhY29uLm5ldmVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShkZXNjcmliZShCYWNvbiwgXCJuZXZlclwiKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgc2luayhlbmRFdmVudCgpKTtcbiAgICAgIHJldHVybiBub3A7XG4gICAgfSk7XG4gIH07XG5cbiAgQmFjb24ud2hlbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmLCBpLCBpbmRleCwgaXgsIGosIGssIGxlbiwgbGVuMSwgbGVuMiwgbmVlZHNCYXJyaWVyLCBwYXQsIHBhdFNvdXJjZXMsIHBhdHMsIHBhdHRlcm5zLCByZWYsIHJlc3VsdFN0cmVhbSwgcywgc291cmNlcywgdHJpZ2dlckZvdW5kLCB1c2FnZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG4gICAgfVxuICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdXNhZ2UgPSBcIndoZW46IGV4cGVjdGluZyBhcmd1bWVudHMgaW4gdGhlIGZvcm0gKE9ic2VydmFibGUrLGZ1bmN0aW9uKStcIjtcbiAgICBhc3NlcnQodXNhZ2UsIGxlbiAlIDIgPT09IDApO1xuICAgIHNvdXJjZXMgPSBbXTtcbiAgICBwYXRzID0gW107XG4gICAgaSA9IDA7XG4gICAgcGF0dGVybnMgPSBbXTtcbiAgICB3aGlsZSAoaSA8IGxlbikge1xuICAgICAgcGF0dGVybnNbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgICBwYXR0ZXJuc1tpICsgMV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgcGF0U291cmNlcyA9IF8udG9BcnJheShhcmd1bWVudHNbaV0pO1xuICAgICAgZiA9IGNvbnN0YW50VG9GdW5jdGlvbihhcmd1bWVudHNbaSArIDFdKTtcbiAgICAgIHBhdCA9IHtcbiAgICAgICAgZjogZixcbiAgICAgICAgaXhzOiBbXVxuICAgICAgfTtcbiAgICAgIHRyaWdnZXJGb3VuZCA9IGZhbHNlO1xuICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHBhdFNvdXJjZXMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIHMgPSBwYXRTb3VyY2VzW2pdO1xuICAgICAgICBpbmRleCA9IF8uaW5kZXhPZihzb3VyY2VzLCBzKTtcbiAgICAgICAgaWYgKCF0cmlnZ2VyRm91bmQpIHtcbiAgICAgICAgICB0cmlnZ2VyRm91bmQgPSBTb3VyY2UuaXNUcmlnZ2VyKHMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICBzb3VyY2VzLnB1c2gocyk7XG4gICAgICAgICAgaW5kZXggPSBzb3VyY2VzLmxlbmd0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmVmID0gcGF0Lml4cztcbiAgICAgICAgZm9yIChrID0gMCwgbGVuMiA9IHJlZi5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcbiAgICAgICAgICBpeCA9IHJlZltrXTtcbiAgICAgICAgICBpZiAoaXguaW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgICBpeC5jb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXQuaXhzLnB1c2goe1xuICAgICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAgICBjb3VudDogMVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGFzc2VydChcIkF0IGxlYXN0IG9uZSBFdmVudFN0cmVhbSByZXF1aXJlZFwiLCB0cmlnZ2VyRm91bmQgfHwgKCFwYXRTb3VyY2VzLmxlbmd0aCkpO1xuICAgICAgaWYgKHBhdFNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXRzLnB1c2gocGF0KTtcbiAgICAgIH1cbiAgICAgIGkgPSBpICsgMjtcbiAgICB9XG4gICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG4gICAgfVxuICAgIHNvdXJjZXMgPSBfLm1hcChTb3VyY2UuZnJvbU9ic2VydmFibGUsIHNvdXJjZXMpO1xuICAgIG5lZWRzQmFycmllciA9IChfLmFueShzb3VyY2VzLCBmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gcy5mbGF0dGVuO1xuICAgIH0pKSAmJiAoY29udGFpbnNEdXBsaWNhdGVEZXBzKF8ubWFwKChmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gcy5vYnM7XG4gICAgfSksIHNvdXJjZXMpKSk7XG4gICAgcmV0dXJuIHJlc3VsdFN0cmVhbSA9IG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJ3aGVuXCIsIHBhdHRlcm5zKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgdmFyIGNhbm5vdE1hdGNoLCBjYW5ub3RTeW5jLCBlbmRzLCBtYXRjaCwgbm9uRmxhdHRlbmVkLCBwYXJ0LCB0cmlnZ2VycztcbiAgICAgIHRyaWdnZXJzID0gW107XG4gICAgICBlbmRzID0gZmFsc2U7XG4gICAgICBtYXRjaCA9IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdmFyIGwsIGxlbjMsIHJlZjE7XG4gICAgICAgIHJlZjEgPSBwLml4cztcbiAgICAgICAgZm9yIChsID0gMCwgbGVuMyA9IHJlZjEubGVuZ3RoOyBsIDwgbGVuMzsgbCsrKSB7XG4gICAgICAgICAgaSA9IHJlZjFbbF07XG4gICAgICAgICAgaWYgKCFzb3VyY2VzW2kuaW5kZXhdLmhhc0F0TGVhc3QoaS5jb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgICAgY2Fubm90U3luYyA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gIXNvdXJjZS5zeW5jIHx8IHNvdXJjZS5lbmRlZDtcbiAgICAgIH07XG4gICAgICBjYW5ub3RNYXRjaCA9IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdmFyIGwsIGxlbjMsIHJlZjE7XG4gICAgICAgIHJlZjEgPSBwLml4cztcbiAgICAgICAgZm9yIChsID0gMCwgbGVuMyA9IHJlZjEubGVuZ3RoOyBsIDwgbGVuMzsgbCsrKSB7XG4gICAgICAgICAgaSA9IHJlZjFbbF07XG4gICAgICAgICAgaWYgKCFzb3VyY2VzW2kuaW5kZXhdLm1heUhhdmUoaS5jb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIG5vbkZsYXR0ZW5lZCA9IGZ1bmN0aW9uKHRyaWdnZXIpIHtcbiAgICAgICAgcmV0dXJuICF0cmlnZ2VyLnNvdXJjZS5mbGF0dGVuO1xuICAgICAgfTtcbiAgICAgIHBhcnQgPSBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHVuc3ViQWxsKSB7XG4gICAgICAgICAgdmFyIGZsdXNoLCBmbHVzaExhdGVyLCBmbHVzaFdoaWxlVHJpZ2dlcnM7XG4gICAgICAgICAgZmx1c2hMYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFVwZGF0ZUJhcnJpZXIud2hlbkRvbmVXaXRoKHJlc3VsdFN0cmVhbSwgZmx1c2gpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgZmx1c2hXaGlsZVRyaWdnZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRzLCBsLCBsZW4zLCBwLCByZXBseSwgdHJpZ2dlcjtcbiAgICAgICAgICAgIGlmICh0cmlnZ2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcbiAgICAgICAgICAgICAgdHJpZ2dlciA9IHRyaWdnZXJzLnBvcCgpO1xuICAgICAgICAgICAgICBmb3IgKGwgPSAwLCBsZW4zID0gcGF0cy5sZW5ndGg7IGwgPCBsZW4zOyBsKyspIHtcbiAgICAgICAgICAgICAgICBwID0gcGF0c1tsXTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gocCkpIHtcbiAgICAgICAgICAgICAgICAgIGV2ZW50cyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjQsIG0sIHJlZjEsIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgIHJlZjEgPSBwLml4cztcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKG0gPSAwLCBsZW40ID0gcmVmMS5sZW5ndGg7IG0gPCBsZW40OyBtKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICBpID0gcmVmMVttXTtcbiAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goc291cmNlc1tpLmluZGV4XS5jb25zdW1lKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgICAgICAgfSkoKTtcbiAgICAgICAgICAgICAgICAgIHJlcGx5ID0gc2luayh0cmlnZ2VyLmUuYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudCwgdmFsdWVzO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbjQsIG0sIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgIGZvciAobSA9IDAsIGxlbjQgPSBldmVudHMubGVuZ3RoOyBtIDwgbGVuNDsgbSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCA9IGV2ZW50c1ttXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChldmVudC52YWx1ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwLmYuYXBwbHkocCwgdmFsdWVzKTtcbiAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgIGlmICh0cmlnZ2Vycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcnMgPSBfLmZpbHRlcihub25GbGF0dGVuZWQsIHRyaWdnZXJzKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChyZXBseSA9PT0gQmFjb24ubm9Nb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXBseTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbHVzaFdoaWxlVHJpZ2dlcnMoKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBCYWNvbi5tb3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgZmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXBseTtcbiAgICAgICAgICAgIHJlcGx5ID0gZmx1c2hXaGlsZVRyaWdnZXJzKCk7XG4gICAgICAgICAgICBpZiAoZW5kcykge1xuICAgICAgICAgICAgICBlbmRzID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmIChfLmFsbChzb3VyY2VzLCBjYW5ub3RTeW5jKSB8fCBfLmFsbChwYXRzLCBjYW5ub3RNYXRjaCkpIHtcbiAgICAgICAgICAgICAgICByZXBseSA9IEJhY29uLm5vTW9yZTtcbiAgICAgICAgICAgICAgICBzaW5rKGVuZEV2ZW50KCkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgICAgICB1bnN1YkFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlcGx5O1xuICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHJlcGx5O1xuICAgICAgICAgICAgaWYgKGUuaXNFbmQoKSkge1xuICAgICAgICAgICAgICBlbmRzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgc291cmNlLm1hcmtFbmRlZCgpO1xuICAgICAgICAgICAgICBmbHVzaExhdGVyKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuaXNFcnJvcigpKSB7XG4gICAgICAgICAgICAgIHJlcGx5ID0gc2luayhlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNvdXJjZS5wdXNoKGUpO1xuICAgICAgICAgICAgICBpZiAoc291cmNlLnN5bmMpIHtcbiAgICAgICAgICAgICAgICB0cmlnZ2Vycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICAgICAgZTogZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChuZWVkc0JhcnJpZXIgfHwgVXBkYXRlQmFycmllci5oYXNXYWl0ZXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgIGZsdXNoTGF0ZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgZmx1c2goKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXBseSA9PT0gQmFjb24ubm9Nb3JlKSB7XG4gICAgICAgICAgICAgIHVuc3ViQWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVwbHkgfHwgQmFjb24ubW9yZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gbmV3IEJhY29uLkNvbXBvc2l0ZVVuc3Vic2NyaWJlKChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGwsIGxlbjMsIHJlc3VsdHM7XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChsID0gMCwgbGVuMyA9IHNvdXJjZXMubGVuZ3RoOyBsIDwgbGVuMzsgbCsrKSB7XG4gICAgICAgICAgcyA9IHNvdXJjZXNbbF07XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHBhcnQocykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfSkoKSkudW5zdWJzY3JpYmU7XG4gICAgfSk7XG4gIH07XG5cbiAgY29udGFpbnNEdXBsaWNhdGVEZXBzID0gZnVuY3Rpb24ob2JzZXJ2YWJsZXMsIHN0YXRlKSB7XG4gICAgdmFyIGNoZWNrT2JzZXJ2YWJsZTtcbiAgICBpZiAoc3RhdGUgPT0gbnVsbCkge1xuICAgICAgc3RhdGUgPSBbXTtcbiAgICB9XG4gICAgY2hlY2tPYnNlcnZhYmxlID0gZnVuY3Rpb24ob2JzKSB7XG4gICAgICB2YXIgZGVwcztcbiAgICAgIGlmIChfLmNvbnRhaW5zKHN0YXRlLCBvYnMpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVwcyA9IG9icy5pbnRlcm5hbERlcHMoKTtcbiAgICAgICAgaWYgKGRlcHMubGVuZ3RoKSB7XG4gICAgICAgICAgc3RhdGUucHVzaChvYnMpO1xuICAgICAgICAgIHJldHVybiBfLmFueShkZXBzLCBjaGVja09ic2VydmFibGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnB1c2gob2JzKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBfLmFueShvYnNlcnZhYmxlcywgY2hlY2tPYnNlcnZhYmxlKTtcbiAgfTtcblxuICBjb25zdGFudFRvRnVuY3Rpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihmKSkge1xuICAgICAgcmV0dXJuIGY7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBfLmFsd2F5cyhmKTtcbiAgICB9XG4gIH07XG5cbiAgQmFjb24uZ3JvdXBTaW11bHRhbmVvdXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcywgc291cmNlcywgc3RyZWFtcztcbiAgICBzdHJlYW1zID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgaWYgKHN0cmVhbXMubGVuZ3RoID09PSAxICYmIGlzQXJyYXkoc3RyZWFtc1swXSkpIHtcbiAgICAgIHN0cmVhbXMgPSBzdHJlYW1zWzBdO1xuICAgIH1cbiAgICBzb3VyY2VzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGosIGxlbjEsIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gc3RyZWFtcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgcyA9IHN0cmVhbXNbal07XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgQnVmZmVyaW5nU291cmNlKHMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImdyb3VwU2ltdWx0YW5lb3VzXCIsIHN0cmVhbXMpLCBCYWNvbi53aGVuKHNvdXJjZXMsIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciB4cztcbiAgICAgIHhzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICByZXR1cm4geHM7XG4gICAgfSkpKTtcbiAgfTtcblxuICBQcm9wZXJ0eURpc3BhdGNoZXIgPSAoZnVuY3Rpb24oc3VwZXJDbGFzcykge1xuICAgIGV4dGVuZChQcm9wZXJ0eURpc3BhdGNoZXIsIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gUHJvcGVydHlEaXNwYXRjaGVyKHByb3BlcnR5MSwgc3Vic2NyaWJlLCBoYW5kbGVFdmVudCkge1xuICAgICAgdGhpcy5wcm9wZXJ0eSA9IHByb3BlcnR5MTtcbiAgICAgIHRoaXMuc3Vic2NyaWJlID0gYmluZCh0aGlzLnN1YnNjcmliZSwgdGhpcyk7XG4gICAgICBQcm9wZXJ0eURpc3BhdGNoZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgc3Vic2NyaWJlLCBoYW5kbGVFdmVudCk7XG4gICAgICB0aGlzLmN1cnJlbnQgPSBOb25lO1xuICAgICAgdGhpcy5jdXJyZW50VmFsdWVSb290SWQgPSB2b2lkIDA7XG4gICAgICB0aGlzLnByb3BlcnR5RW5kZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBQcm9wZXJ0eURpc3BhdGNoZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmlzRW5kKCkpIHtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUVuZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC5oYXNWYWx1ZSgpKSB7XG4gICAgICAgIHRoaXMuY3VycmVudCA9IG5ldyBTb21lKGV2ZW50KTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmFsdWVSb290SWQgPSBVcGRhdGVCYXJyaWVyLmN1cnJlbnRFdmVudElkKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gUHJvcGVydHlEaXNwYXRjaGVyLl9fc3VwZXJfXy5wdXNoLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIH07XG5cbiAgICBQcm9wZXJ0eURpc3BhdGNoZXIucHJvdG90eXBlLm1heWJlU3ViU291cmNlID0gZnVuY3Rpb24oc2luaywgcmVwbHkpIHtcbiAgICAgIGlmIChyZXBseSA9PT0gQmFjb24ubm9Nb3JlKSB7XG4gICAgICAgIHJldHVybiBub3A7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydHlFbmRlZCkge1xuICAgICAgICBzaW5rKGVuZEV2ZW50KCkpO1xuICAgICAgICByZXR1cm4gbm9wO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIERpc3BhdGNoZXIucHJvdG90eXBlLnN1YnNjcmliZS5jYWxsKHRoaXMsIHNpbmspO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBQcm9wZXJ0eURpc3BhdGNoZXIucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgIHZhciBkaXNwYXRjaGluZ0lkLCBpbml0U2VudCwgcmVwbHksIHZhbElkO1xuICAgICAgaW5pdFNlbnQgPSBmYWxzZTtcbiAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnQuaXNEZWZpbmVkICYmICh0aGlzLmhhc1N1YnNjcmliZXJzKCkgfHwgdGhpcy5wcm9wZXJ0eUVuZGVkKSkge1xuICAgICAgICBkaXNwYXRjaGluZ0lkID0gVXBkYXRlQmFycmllci5jdXJyZW50RXZlbnRJZCgpO1xuICAgICAgICB2YWxJZCA9IHRoaXMuY3VycmVudFZhbHVlUm9vdElkO1xuICAgICAgICBpZiAoIXRoaXMucHJvcGVydHlFbmRlZCAmJiB2YWxJZCAmJiBkaXNwYXRjaGluZ0lkICYmIGRpc3BhdGNoaW5nSWQgIT09IHZhbElkKSB7XG4gICAgICAgICAgVXBkYXRlQmFycmllci53aGVuRG9uZVdpdGgodGhpcy5wcm9wZXJ0eSwgKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGlmIChfdGhpcy5jdXJyZW50VmFsdWVSb290SWQgPT09IHZhbElkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoaW5pdGlhbEV2ZW50KF90aGlzLmN1cnJlbnQuZ2V0KCkudmFsdWUoKSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5tYXliZVN1YlNvdXJjZShzaW5rLCByZXBseSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgVXBkYXRlQmFycmllci5pblRyYW5zYWN0aW9uKHZvaWQgMCwgdGhpcywgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcGx5ID0gc2luayhpbml0aWFsRXZlbnQodGhpcy5jdXJyZW50LmdldCgpLnZhbHVlKCkpKTtcbiAgICAgICAgICB9KSwgW10pO1xuICAgICAgICAgIHJldHVybiB0aGlzLm1heWJlU3ViU291cmNlKHNpbmssIHJlcGx5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF5YmVTdWJTb3VyY2Uoc2luaywgcmVwbHkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUHJvcGVydHlEaXNwYXRjaGVyO1xuXG4gIH0pKERpc3BhdGNoZXIpO1xuXG4gIFByb3BlcnR5ID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoUHJvcGVydHksIHN1cGVyQ2xhc3MpO1xuXG4gICAgZnVuY3Rpb24gUHJvcGVydHkoZGVzYywgc3Vic2NyaWJlLCBoYW5kbGVyKSB7XG4gICAgICBQcm9wZXJ0eS5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCBkZXNjKTtcbiAgICAgIGFzc2VydEZ1bmN0aW9uKHN1YnNjcmliZSk7XG4gICAgICB0aGlzLmRpc3BhdGNoZXIgPSBuZXcgUHJvcGVydHlEaXNwYXRjaGVyKHRoaXMsIHN1YnNjcmliZSwgaGFuZGxlcik7XG4gICAgICByZWdpc3Rlck9icyh0aGlzKTtcbiAgICB9XG5cbiAgICBQcm9wZXJ0eS5wcm90b3R5cGUuY2hhbmdlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyh0aGlzLCBcImNoYW5nZXNcIiwgW10pLCAoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmICghZXZlbnQuaXNJbml0aWFsKCkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcykpO1xuICAgIH07XG5cbiAgICBQcm9wZXJ0eS5wcm90b3R5cGUud2l0aEhhbmRsZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gbmV3IFByb3BlcnR5KG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwid2l0aEhhbmRsZXJcIiwgW2hhbmRsZXJdKSwgdGhpcy5kaXNwYXRjaGVyLnN1YnNjcmliZSwgaGFuZGxlcik7XG4gICAgfTtcblxuICAgIFByb3BlcnR5LnByb3RvdHlwZS50b1Byb3BlcnR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICBhc3NlcnROb0FyZ3VtZW50cyhhcmd1bWVudHMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIFByb3BlcnR5LnByb3RvdHlwZS50b0V2ZW50U3RyZWFtID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidG9FdmVudFN0cmVhbVwiLCBbXSksIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oc2luaykge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmlzSW5pdGlhbCgpKSB7XG4gICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQudG9OZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2luayhldmVudCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICB9KSh0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQcm9wZXJ0eTtcblxuICB9KShPYnNlcnZhYmxlKTtcblxuICBCYWNvbi5Qcm9wZXJ0eSA9IFByb3BlcnR5O1xuXG4gIEJhY29uLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFByb3BlcnR5KG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbnN0YW50XCIsIFt2YWx1ZV0pLCBmdW5jdGlvbihzaW5rKSB7XG4gICAgICBzaW5rKGluaXRpYWxFdmVudCh2YWx1ZSkpO1xuICAgICAgc2luayhlbmRFdmVudCgpKTtcbiAgICAgIHJldHVybiBub3A7XG4gICAgfSk7XG4gIH07XG5cbiAgQmFjb24uZnJvbUJpbmRlciA9IGZ1bmN0aW9uKGJpbmRlciwgZXZlbnRUcmFuc2Zvcm1lcikge1xuICAgIGlmIChldmVudFRyYW5zZm9ybWVyID09IG51bGwpIHtcbiAgICAgIGV2ZW50VHJhbnNmb3JtZXIgPSBfLmlkO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImZyb21CaW5kZXJcIiwgW2JpbmRlciwgZXZlbnRUcmFuc2Zvcm1lcl0pLCBmdW5jdGlvbihzaW5rKSB7XG4gICAgICB2YXIgc2hvdWxkVW5iaW5kLCB1bmJpbmQsIHVuYmluZGVyLCB1bmJvdW5kO1xuICAgICAgdW5ib3VuZCA9IGZhbHNlO1xuICAgICAgc2hvdWxkVW5iaW5kID0gZmFsc2U7XG4gICAgICB1bmJpbmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF1bmJvdW5kKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1bmJpbmRlciAhPT0gXCJ1bmRlZmluZWRcIiAmJiB1bmJpbmRlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdW5iaW5kZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB1bmJvdW5kID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNob3VsZFVuYmluZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdW5iaW5kZXIgPSBiaW5kZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzLCBldmVudCwgaiwgbGVuMSwgcmVwbHksIHZhbHVlO1xuICAgICAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgICAgIHZhbHVlID0gZXZlbnRUcmFuc2Zvcm1lci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKCEoaXNBcnJheSh2YWx1ZSkgJiYgXy5sYXN0KHZhbHVlKSBpbnN0YW5jZW9mIEV2ZW50KSkge1xuICAgICAgICAgIHZhbHVlID0gW3ZhbHVlXTtcbiAgICAgICAgfVxuICAgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSB2YWx1ZS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICBldmVudCA9IHZhbHVlW2pdO1xuICAgICAgICAgIHJlcGx5ID0gc2luayhldmVudCA9IHRvRXZlbnQoZXZlbnQpKTtcbiAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSB8fCBldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgICB1bmJpbmQoKTtcbiAgICAgICAgICAgIHJldHVybiByZXBseTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcGx5O1xuICAgICAgfSk7XG4gICAgICBpZiAoc2hvdWxkVW5iaW5kKSB7XG4gICAgICAgIHVuYmluZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVuYmluZDtcbiAgICB9KTtcbiAgfTtcblxuICBldmVudE1ldGhvZHMgPSBbW1wiYWRkRXZlbnRMaXN0ZW5lclwiLCBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIl0sIFtcImFkZExpc3RlbmVyXCIsIFwicmVtb3ZlTGlzdGVuZXJcIl0sIFtcIm9uXCIsIFwib2ZmXCJdLCBbXCJiaW5kXCIsIFwidW5iaW5kXCJdXTtcblxuICBmaW5kSGFuZGxlck1ldGhvZHMgPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICB2YXIgaiwgbGVuMSwgbWV0aG9kUGFpciwgcGFpcjtcbiAgICBmb3IgKGogPSAwLCBsZW4xID0gZXZlbnRNZXRob2RzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgcGFpciA9IGV2ZW50TWV0aG9kc1tqXTtcbiAgICAgIG1ldGhvZFBhaXIgPSBbdGFyZ2V0W3BhaXJbMF1dLCB0YXJnZXRbcGFpclsxXV1dO1xuICAgICAgaWYgKG1ldGhvZFBhaXJbMF0gJiYgbWV0aG9kUGFpclsxXSkge1xuICAgICAgICByZXR1cm4gbWV0aG9kUGFpcjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gc3VpdGFibGUgZXZlbnQgbWV0aG9kcyBpbiBcIiArIHRhcmdldCk7XG4gIH07XG5cbiAgQmFjb24uZnJvbUV2ZW50VGFyZ2V0ID0gZnVuY3Rpb24odGFyZ2V0LCBldmVudE5hbWUsIGV2ZW50VHJhbnNmb3JtZXIpIHtcbiAgICB2YXIgcmVmLCBzdWIsIHVuc3ViO1xuICAgIHJlZiA9IGZpbmRIYW5kbGVyTWV0aG9kcyh0YXJnZXQpLCBzdWIgPSByZWZbMF0sIHVuc3ViID0gcmVmWzFdO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJmcm9tRXZlbnRcIiwgW3RhcmdldCwgZXZlbnROYW1lXSksIEJhY29uLmZyb21CaW5kZXIoZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgc3ViLmNhbGwodGFyZ2V0LCBldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdW5zdWIuY2FsbCh0YXJnZXQsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICB9O1xuICAgIH0sIGV2ZW50VHJhbnNmb3JtZXIpKTtcbiAgfTtcblxuICBCYWNvbi5mcm9tRXZlbnQgPSBCYWNvbi5mcm9tRXZlbnRUYXJnZXQ7XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MsIHA7XG4gICAgcCA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIHJldHVybiBjb252ZXJ0QXJnc1RvRnVuY3Rpb24odGhpcywgcCwgYXJncywgZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwibWFwXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudC5mbWFwKGYpKTtcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5jb21iaW5lQXNBcnJheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbmRleCwgaiwgbGVuMSwgcywgc291cmNlcywgc3RyZWFtLCBzdHJlYW1zO1xuICAgIHN0cmVhbXMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICBpZiAoc3RyZWFtcy5sZW5ndGggPT09IDEgJiYgaXNBcnJheShzdHJlYW1zWzBdKSkge1xuICAgICAgc3RyZWFtcyA9IHN0cmVhbXNbMF07XG4gICAgfVxuICAgIGZvciAoaW5kZXggPSBqID0gMCwgbGVuMSA9IHN0cmVhbXMubGVuZ3RoOyBqIDwgbGVuMTsgaW5kZXggPSArK2opIHtcbiAgICAgIHN0cmVhbSA9IHN0cmVhbXNbaW5kZXhdO1xuICAgICAgaWYgKCEoaXNPYnNlcnZhYmxlKHN0cmVhbSkpKSB7XG4gICAgICAgIHN0cmVhbXNbaW5kZXhdID0gQmFjb24uY29uc3RhbnQoc3RyZWFtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0cmVhbXMubGVuZ3RoKSB7XG4gICAgICBzb3VyY2VzID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaywgbGVuMiwgcmVzdWx0cztcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGsgPSAwLCBsZW4yID0gc3RyZWFtcy5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcbiAgICAgICAgICBzID0gc3RyZWFtc1trXTtcbiAgICAgICAgICByZXN1bHRzLnB1c2gobmV3IFNvdXJjZShzLCB0cnVlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICB9KSgpO1xuICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbWJpbmVBc0FycmF5XCIsIHN0cmVhbXMpLCBCYWNvbi53aGVuKHNvdXJjZXMsIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHhzO1xuICAgICAgICB4cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgICByZXR1cm4geHM7XG4gICAgICB9KSkudG9Qcm9wZXJ0eSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIEJhY29uLmNvbnN0YW50KFtdKTtcbiAgICB9XG4gIH07XG5cbiAgQmFjb24ub25WYWx1ZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZiwgaiwgc3RyZWFtcztcbiAgICBzdHJlYW1zID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDAsIGogPSBhcmd1bWVudHMubGVuZ3RoIC0gMSkgOiAoaiA9IDAsIFtdKSwgZiA9IGFyZ3VtZW50c1tqKytdO1xuICAgIHJldHVybiBCYWNvbi5jb21iaW5lQXNBcnJheShzdHJlYW1zKS5vblZhbHVlcyhmKTtcbiAgfTtcblxuICBCYWNvbi5jb21iaW5lV2l0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmLCBzdHJlYW1zO1xuICAgIGYgPSBhcmd1bWVudHNbMF0sIHN0cmVhbXMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiY29tYmluZVdpdGhcIiwgW2ZdLmNvbmNhdChzbGljZS5jYWxsKHN0cmVhbXMpKSksIEJhY29uLmNvbWJpbmVBc0FycmF5KHN0cmVhbXMpLm1hcChmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICAgIHJldHVybiBmLmFwcGx5KG51bGwsIHZhbHVlcyk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLmNvbWJpbmVUZW1wbGF0ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgdmFyIGFwcGx5U3RyZWFtVmFsdWUsIGNvbWJpbmF0b3IsIGNvbXBpbGUsIGNvbXBpbGVUZW1wbGF0ZSwgY29uc3RhbnRWYWx1ZSwgY3VycmVudCwgZnVuY3MsIG1rQ29udGV4dCwgc2V0VmFsdWUsIHN0cmVhbXM7XG4gICAgZnVuY3MgPSBbXTtcbiAgICBzdHJlYW1zID0gW107XG4gICAgY3VycmVudCA9IGZ1bmN0aW9uKGN0eFN0YWNrKSB7XG4gICAgICByZXR1cm4gY3R4U3RhY2tbY3R4U3RhY2subGVuZ3RoIC0gMV07XG4gICAgfTtcbiAgICBzZXRWYWx1ZSA9IGZ1bmN0aW9uKGN0eFN0YWNrLCBrZXksIHZhbHVlKSB7XG4gICAgICByZXR1cm4gY3VycmVudChjdHhTdGFjaylba2V5XSA9IHZhbHVlO1xuICAgIH07XG4gICAgYXBwbHlTdHJlYW1WYWx1ZSA9IGZ1bmN0aW9uKGtleSwgaW5kZXgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihjdHhTdGFjaywgdmFsdWVzKSB7XG4gICAgICAgIHJldHVybiBzZXRWYWx1ZShjdHhTdGFjaywga2V5LCB2YWx1ZXNbaW5kZXhdKTtcbiAgICAgIH07XG4gICAgfTtcbiAgICBjb25zdGFudFZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKGN0eFN0YWNrKSB7XG4gICAgICAgIHJldHVybiBzZXRWYWx1ZShjdHhTdGFjaywga2V5LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgIH07XG4gICAgbWtDb250ZXh0ID0gZnVuY3Rpb24odGVtcGxhdGUpIHtcbiAgICAgIGlmIChpc0FycmF5KHRlbXBsYXRlKSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgfTtcbiAgICBjb21waWxlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIHBvcENvbnRleHQsIHB1c2hDb250ZXh0O1xuICAgICAgaWYgKGlzT2JzZXJ2YWJsZSh2YWx1ZSkpIHtcbiAgICAgICAgc3RyZWFtcy5wdXNoKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmNzLnB1c2goYXBwbHlTdHJlYW1WYWx1ZShrZXksIHN0cmVhbXMubGVuZ3RoIC0gMSkpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gT2JqZWN0KHZhbHVlKSAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHtcbiAgICAgICAgcHVzaENvbnRleHQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oY3R4U3RhY2spIHtcbiAgICAgICAgICAgIHZhciBuZXdDb250ZXh0O1xuICAgICAgICAgICAgbmV3Q29udGV4dCA9IG1rQ29udGV4dCh2YWx1ZSk7XG4gICAgICAgICAgICBzZXRWYWx1ZShjdHhTdGFjaywga2V5LCBuZXdDb250ZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBjdHhTdGFjay5wdXNoKG5ld0NvbnRleHQpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHBvcENvbnRleHQgPSBmdW5jdGlvbihjdHhTdGFjaykge1xuICAgICAgICAgIHJldHVybiBjdHhTdGFjay5wb3AoKTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3MucHVzaChwdXNoQ29udGV4dChrZXkpKTtcbiAgICAgICAgY29tcGlsZVRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmNzLnB1c2gocG9wQ29udGV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZnVuY3MucHVzaChjb25zdGFudFZhbHVlKGtleSwgdmFsdWUpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGNvbXBpbGVUZW1wbGF0ZSA9IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICByZXR1cm4gXy5lYWNoKHRlbXBsYXRlLCBjb21waWxlKTtcbiAgICB9O1xuICAgIGNvbXBpbGVUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgY29tYmluYXRvciA9IGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgdmFyIGN0eFN0YWNrLCBmLCBqLCBsZW4xLCByb290Q29udGV4dDtcbiAgICAgIHJvb3RDb250ZXh0ID0gbWtDb250ZXh0KHRlbXBsYXRlKTtcbiAgICAgIGN0eFN0YWNrID0gW3Jvb3RDb250ZXh0XTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBmdW5jcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgZiA9IGZ1bmNzW2pdO1xuICAgICAgICBmKGN0eFN0YWNrLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJvb3RDb250ZXh0O1xuICAgIH07XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImNvbWJpbmVUZW1wbGF0ZVwiLCBbdGVtcGxhdGVdKSwgQmFjb24uY29tYmluZUFzQXJyYXkoc3RyZWFtcykubWFwKGNvbWJpbmF0b3IpKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24ob3RoZXIsIGYpIHtcbiAgICB2YXIgY29tYmluYXRvcjtcbiAgICBjb21iaW5hdG9yID0gdG9Db21iaW5hdG9yKGYpO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImNvbWJpbmVcIiwgW290aGVyLCBmXSksIEJhY29uLmNvbWJpbmVBc0FycmF5KHRoaXMsIG90aGVyKS5tYXAoZnVuY3Rpb24odmFsdWVzKSB7XG4gICAgICByZXR1cm4gY29tYmluYXRvcih2YWx1ZXNbMF0sIHZhbHVlc1sxXSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uKGNhc2VzKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVjb2RlXCIsIFtjYXNlc10pLCB0aGlzLmNvbWJpbmUoQmFjb24uY29tYmluZVRlbXBsYXRlKGNhc2VzKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZXMpIHtcbiAgICAgIHJldHVybiB2YWx1ZXNba2V5XTtcbiAgICB9KSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUud2l0aFN0YXRlTWFjaGluZSA9IGZ1bmN0aW9uKGluaXRTdGF0ZSwgZikge1xuICAgIHZhciBzdGF0ZTtcbiAgICBzdGF0ZSA9IGluaXRTdGF0ZTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJ3aXRoU3RhdGVNYWNoaW5lXCIsIFtpbml0U3RhdGUsIGZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIGZyb21GLCBqLCBsZW4xLCBuZXdTdGF0ZSwgb3V0cHV0LCBvdXRwdXRzLCByZXBseTtcbiAgICAgIGZyb21GID0gZihzdGF0ZSwgZXZlbnQpO1xuICAgICAgbmV3U3RhdGUgPSBmcm9tRlswXSwgb3V0cHV0cyA9IGZyb21GWzFdO1xuICAgICAgc3RhdGUgPSBuZXdTdGF0ZTtcbiAgICAgIHJlcGx5ID0gQmFjb24ubW9yZTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBvdXRwdXRzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICBvdXRwdXQgPSBvdXRwdXRzW2pdO1xuICAgICAgICByZXBseSA9IHRoaXMucHVzaChvdXRwdXQpO1xuICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgIHJldHVybiByZXBseTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcGx5O1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwRHVwbGljYXRlcyA9IGZ1bmN0aW9uKGlzRXF1YWwpIHtcbiAgICBpZiAoaXNFcXVhbCA9PSBudWxsKSB7XG4gICAgICBpc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInNraXBEdXBsaWNhdGVzXCIsIFtdKSwgdGhpcy53aXRoU3RhdGVNYWNoaW5lKE5vbmUsIGZ1bmN0aW9uKHByZXYsIGV2ZW50KSB7XG4gICAgICBpZiAoIWV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgcmV0dXJuIFtwcmV2LCBbZXZlbnRdXTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNJbml0aWFsKCkgfHwgcHJldiA9PT0gTm9uZSB8fCAhaXNFcXVhbChwcmV2LmdldCgpLCBldmVudC52YWx1ZSgpKSkge1xuICAgICAgICByZXR1cm4gW25ldyBTb21lKGV2ZW50LnZhbHVlKCkpLCBbZXZlbnRdXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbcHJldiwgW11dO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5hd2FpdGluZyA9IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiYXdhaXRpbmdcIiwgW290aGVyXSksIEJhY29uLmdyb3VwU2ltdWx0YW5lb3VzKHRoaXMsIG90aGVyKS5tYXAoZnVuY3Rpb24oYXJnKSB7XG4gICAgICB2YXIgbXlWYWx1ZXMsIG90aGVyVmFsdWVzO1xuICAgICAgbXlWYWx1ZXMgPSBhcmdbMF0sIG90aGVyVmFsdWVzID0gYXJnWzFdO1xuICAgICAgcmV0dXJuIG90aGVyVmFsdWVzLmxlbmd0aCA9PT0gMDtcbiAgICB9KS50b1Byb3BlcnR5KGZhbHNlKS5za2lwRHVwbGljYXRlcygpKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5ub3QgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJub3RcIiwgW10pLCB0aGlzLm1hcChmdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gIXg7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLlByb3BlcnR5LnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImFuZFwiLCBbb3RoZXJdKSwgdGhpcy5jb21iaW5lKG90aGVyLCBmdW5jdGlvbih4LCB5KSB7XG4gICAgICByZXR1cm4geCAmJiB5O1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUub3IgPSBmdW5jdGlvbihvdGhlcikge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcIm9yXCIsIFtvdGhlcl0pLCB0aGlzLmNvbWJpbmUob3RoZXIsIGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgIHJldHVybiB4IHx8IHk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLnNjaGVkdWxlciA9IHtcbiAgICBzZXRUaW1lb3V0OiBmdW5jdGlvbihmLCBkKSB7XG4gICAgICByZXR1cm4gc2V0VGltZW91dChmLCBkKTtcbiAgICB9LFxuICAgIHNldEludGVydmFsOiBmdW5jdGlvbihmLCBpKSB7XG4gICAgICByZXR1cm4gc2V0SW50ZXJ2YWwoZiwgaSk7XG4gICAgfSxcbiAgICBjbGVhckludGVydmFsOiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwoaWQpO1xuICAgIH0sXG4gICAgY2xlYXJUaW1lb3V0OiBmdW5jdGlvbihpZCkge1xuICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChpZCk7XG4gICAgfSxcbiAgICBub3c6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIH1cbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuYnVmZmVyV2l0aFRpbWUgPSBmdW5jdGlvbihkZWxheSkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlcldpdGhUaW1lXCIsIFtkZWxheV0pLCB0aGlzLmJ1ZmZlcldpdGhUaW1lT3JDb3VudChkZWxheSwgTnVtYmVyLk1BWF9WQUxVRSkpO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5idWZmZXJXaXRoQ291bnQgPSBmdW5jdGlvbihjb3VudCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlcldpdGhDb3VudFwiLCBbY291bnRdKSwgdGhpcy5idWZmZXJXaXRoVGltZU9yQ291bnQodm9pZCAwLCBjb3VudCkpO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5idWZmZXJXaXRoVGltZU9yQ291bnQgPSBmdW5jdGlvbihkZWxheSwgY291bnQpIHtcbiAgICB2YXIgZmx1c2hPclNjaGVkdWxlO1xuICAgIGZsdXNoT3JTY2hlZHVsZSA9IGZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgaWYgKGJ1ZmZlci52YWx1ZXMubGVuZ3RoID09PSBjb3VudCkge1xuICAgICAgICByZXR1cm4gYnVmZmVyLmZsdXNoKCk7XG4gICAgICB9IGVsc2UgaWYgKGRlbGF5ICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlci5zY2hlZHVsZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiYnVmZmVyV2l0aFRpbWVPckNvdW50XCIsIFtkZWxheSwgY291bnRdKSwgdGhpcy5idWZmZXIoZGVsYXksIGZsdXNoT3JTY2hlZHVsZSwgZmx1c2hPclNjaGVkdWxlKSk7XG4gIH07XG5cbiAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmJ1ZmZlciA9IGZ1bmN0aW9uKGRlbGF5LCBvbklucHV0LCBvbkZsdXNoKSB7XG4gICAgdmFyIGJ1ZmZlciwgZGVsYXlNcywgcmVwbHk7XG4gICAgaWYgKG9uSW5wdXQgPT0gbnVsbCkge1xuICAgICAgb25JbnB1dCA9IG5vcDtcbiAgICB9XG4gICAgaWYgKG9uRmx1c2ggPT0gbnVsbCkge1xuICAgICAgb25GbHVzaCA9IG5vcDtcbiAgICB9XG4gICAgYnVmZmVyID0ge1xuICAgICAgc2NoZWR1bGVkOiBudWxsLFxuICAgICAgZW5kOiB2b2lkIDAsXG4gICAgICB2YWx1ZXM6IFtdLFxuICAgICAgZmx1c2g6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVwbHk7XG4gICAgICAgIGlmICh0aGlzLnNjaGVkdWxlZCkge1xuICAgICAgICAgIEJhY29uLnNjaGVkdWxlci5jbGVhclRpbWVvdXQodGhpcy5zY2hlZHVsZWQpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlcGx5ID0gdGhpcy5wdXNoKG5leHRFdmVudCh0aGlzLnZhbHVlcykpO1xuICAgICAgICAgIHRoaXMudmFsdWVzID0gW107XG4gICAgICAgICAgaWYgKHRoaXMuZW5kICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2godGhpcy5lbmQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVwbHkgIT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgICAgcmV0dXJuIG9uRmx1c2godGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmVuZCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKHRoaXMuZW5kKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBzY2hlZHVsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5zY2hlZHVsZWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZWQgPSBkZWxheSgoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZsdXNoKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGRlbGF5KSkge1xuICAgICAgZGVsYXlNcyA9IGRlbGF5O1xuICAgICAgZGVsYXkgPSBmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiBCYWNvbi5zY2hlZHVsZXIuc2V0VGltZW91dChmLCBkZWxheU1zKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlclwiLCBbXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGJ1ZmZlci5wdXNoID0gKGZ1bmN0aW9uKF90aGlzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHJldHVybiBfdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgfTtcbiAgICAgIH0pKHRoaXMpO1xuICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuICAgICAgICByZXBseSA9IHRoaXMucHVzaChldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzRW5kKCkpIHtcbiAgICAgICAgYnVmZmVyLmVuZCA9IGV2ZW50O1xuICAgICAgICBpZiAoIWJ1ZmZlci5zY2hlZHVsZWQpIHtcbiAgICAgICAgICBidWZmZXIuZmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyLnZhbHVlcy5wdXNoKGV2ZW50LnZhbHVlKCkpO1xuICAgICAgICBvbklucHV0KGJ1ZmZlcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVwbHk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzLCBmO1xuICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBhc3NlcnRPYnNlcnZhYmxlSXNQcm9wZXJ0eShmKTtcbiAgICByZXR1cm4gY29udmVydEFyZ3NUb0Z1bmN0aW9uKHRoaXMsIGYsIGFyZ3MsIGZ1bmN0aW9uKGYpIHtcbiAgICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImZpbHRlclwiLCBbZl0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5maWx0ZXIoZikpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9O1xuXG4gIEJhY29uLm9uY2UgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgRXZlbnRTdHJlYW0obmV3IERlc2MoQmFjb24sIFwib25jZVwiLCBbdmFsdWVdKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgc2luayh0b0V2ZW50KHZhbHVlKSk7XG4gICAgICBzaW5rKGVuZEV2ZW50KCkpO1xuICAgICAgcmV0dXJuIG5vcDtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24ocmlnaHQpIHtcbiAgICB2YXIgbGVmdDtcbiAgICBsZWZ0ID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKGxlZnQsIFwiY29uY2F0XCIsIFtyaWdodF0pLCBmdW5jdGlvbihzaW5rKSB7XG4gICAgICB2YXIgdW5zdWJMZWZ0LCB1bnN1YlJpZ2h0O1xuICAgICAgdW5zdWJSaWdodCA9IG5vcDtcbiAgICAgIHVuc3ViTGVmdCA9IGxlZnQuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoZS5pc0VuZCgpKSB7XG4gICAgICAgICAgcmV0dXJuIHVuc3ViUmlnaHQgPSByaWdodC5kaXNwYXRjaGVyLnN1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gc2luayhlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHVuc3ViTGVmdCgpO1xuICAgICAgICByZXR1cm4gdW5zdWJSaWdodCgpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZsYXRNYXBfKHRoaXMsIG1ha2VTcGF3bmVyKGFyZ3VtZW50cykpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZsYXRNYXBGaXJzdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmbGF0TWFwXyh0aGlzLCBtYWtlU3Bhd25lcihhcmd1bWVudHMpLCB0cnVlKTtcbiAgfTtcblxuICBmbGF0TWFwXyA9IGZ1bmN0aW9uKHJvb3QsIGYsIGZpcnN0T25seSwgbGltaXQpIHtcbiAgICB2YXIgY2hpbGREZXBzLCByZXN1bHQsIHJvb3REZXA7XG4gICAgcm9vdERlcCA9IFtyb290XTtcbiAgICBjaGlsZERlcHMgPSBbXTtcbiAgICByZXN1bHQgPSBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2Mocm9vdCwgXCJmbGF0TWFwXCIgKyAoZmlyc3RPbmx5ID8gXCJGaXJzdFwiIDogXCJcIiksIFtmXSksIGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgIHZhciBjaGVja0VuZCwgY2hlY2tRdWV1ZSwgY29tcG9zaXRlLCBxdWV1ZSwgc3Bhd247XG4gICAgICBjb21wb3NpdGUgPSBuZXcgQ29tcG9zaXRlVW5zdWJzY3JpYmUoKTtcbiAgICAgIHF1ZXVlID0gW107XG4gICAgICBzcGF3biA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciBjaGlsZDtcbiAgICAgICAgY2hpbGQgPSBtYWtlT2JzZXJ2YWJsZShmKGV2ZW50LnZhbHVlKCkpKTtcbiAgICAgICAgY2hpbGREZXBzLnB1c2goY2hpbGQpO1xuICAgICAgICByZXR1cm4gY29tcG9zaXRlLmFkZChmdW5jdGlvbih1bnN1YkFsbCwgdW5zdWJNZSkge1xuICAgICAgICAgIHJldHVybiBjaGlsZC5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIHJlcGx5O1xuICAgICAgICAgICAgaWYgKGV2ZW50LmlzRW5kKCkpIHtcbiAgICAgICAgICAgICAgXy5yZW1vdmUoY2hpbGQsIGNoaWxkRGVwcyk7XG4gICAgICAgICAgICAgIGNoZWNrUXVldWUoKTtcbiAgICAgICAgICAgICAgY2hlY2tFbmQodW5zdWJNZSk7XG4gICAgICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBJbml0aWFsKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudC50b05leHQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXBseSA9IHNpbmsoZXZlbnQpO1xuICAgICAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgICAgICAgIHVuc3ViQWxsKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlcGx5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgICBjaGVja1F1ZXVlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBldmVudDtcbiAgICAgICAgZXZlbnQgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gc3Bhd24oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgY2hlY2tFbmQgPSBmdW5jdGlvbih1bnN1Yikge1xuICAgICAgICB1bnN1YigpO1xuICAgICAgICBpZiAoY29tcG9zaXRlLmVtcHR5KCkpIHtcbiAgICAgICAgICByZXR1cm4gc2luayhlbmRFdmVudCgpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbXBvc2l0ZS5hZGQoZnVuY3Rpb24oX18sIHVuc3ViUm9vdCkge1xuICAgICAgICByZXR1cm4gcm9vdC5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2tFbmQodW5zdWJSb290KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZmlyc3RPbmx5ICYmIGNvbXBvc2l0ZS5jb3VudCgpID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjb21wb3NpdGUudW5zdWJzY3JpYmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGltaXQgJiYgY29tcG9zaXRlLmNvdW50KCkgPiBsaW1pdCkge1xuICAgICAgICAgICAgICByZXR1cm4gcXVldWUucHVzaChldmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm4gc3Bhd24oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBjb21wb3NpdGUudW5zdWJzY3JpYmU7XG4gICAgfSk7XG4gICAgcmVzdWx0LmludGVybmFsRGVwcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGNoaWxkRGVwcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHJvb3REZXAuY29uY2F0KGNoaWxkRGVwcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcm9vdERlcDtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgbWFrZVNwYXduZXIgPSBmdW5jdGlvbihhcmdzKSB7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxICYmIGlzT2JzZXJ2YWJsZShhcmdzWzBdKSkge1xuICAgICAgcmV0dXJuIF8uYWx3YXlzKGFyZ3NbMF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWFrZUZ1bmN0aW9uQXJncyhhcmdzKTtcbiAgICB9XG4gIH07XG5cbiAgbWFrZU9ic2VydmFibGUgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKGlzT2JzZXJ2YWJsZSh4KSkge1xuICAgICAgcmV0dXJuIHg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBCYWNvbi5vbmNlKHgpO1xuICAgIH1cbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwV2l0aENvbmN1cnJlbmN5TGltaXQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgbGltaXQ7XG4gICAgbGltaXQgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJmbGF0TWFwV2l0aENvbmN1cnJlbmN5TGltaXRcIiwgW2xpbWl0XS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpLCBmbGF0TWFwXyh0aGlzLCBtYWtlU3Bhd25lcihhcmdzKSwgZmFsc2UsIGxpbWl0KSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmxhdE1hcENvbmNhdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImZsYXRNYXBDb25jYXRcIiwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSksIHRoaXMuZmxhdE1hcFdpdGhDb25jdXJyZW5jeUxpbWl0LmFwcGx5KHRoaXMsIFsxXS5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSkpO1xuICB9O1xuXG4gIEJhY29uLmxhdGVyID0gZnVuY3Rpb24oZGVsYXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImxhdGVyXCIsIFtkZWxheSwgdmFsdWVdKSwgQmFjb24uZnJvbUJpbmRlcihmdW5jdGlvbihzaW5rKSB7XG4gICAgICB2YXIgaWQsIHNlbmRlcjtcbiAgICAgIHNlbmRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gc2luayhbdmFsdWUsIGVuZEV2ZW50KCldKTtcbiAgICAgIH07XG4gICAgICBpZCA9IEJhY29uLnNjaGVkdWxlci5zZXRUaW1lb3V0KHNlbmRlciwgZGVsYXkpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQmFjb24uc2NoZWR1bGVyLmNsZWFyVGltZW91dChpZCk7XG4gICAgICB9O1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5idWZmZXJpbmdUaHJvdHRsZSA9IGZ1bmN0aW9uKG1pbmltdW1JbnRlcnZhbCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImJ1ZmZlcmluZ1Rocm90dGxlXCIsIFttaW5pbXVtSW50ZXJ2YWxdKSwgdGhpcy5mbGF0TWFwQ29uY2F0KGZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiBCYWNvbi5vbmNlKHgpLmNvbmNhdChCYWNvbi5sYXRlcihtaW5pbXVtSW50ZXJ2YWwpLmZpbHRlcihmYWxzZSkpO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuYnVmZmVyaW5nVGhyb3R0bGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuYnVmZmVyaW5nVGhyb3R0bGUuYXBwbHkodGhpcywgYXJndW1lbnRzKS50b1Byb3BlcnR5KCk7XG4gIH07XG5cbiAgQnVzID0gKGZ1bmN0aW9uKHN1cGVyQ2xhc3MpIHtcbiAgICBleHRlbmQoQnVzLCBzdXBlckNsYXNzKTtcblxuICAgIGZ1bmN0aW9uIEJ1cygpIHtcbiAgICAgIHRoaXMuZ3VhcmRlZFNpbmsgPSBiaW5kKHRoaXMuZ3VhcmRlZFNpbmssIHRoaXMpO1xuICAgICAgdGhpcy5zdWJzY3JpYmVBbGwgPSBiaW5kKHRoaXMuc3Vic2NyaWJlQWxsLCB0aGlzKTtcbiAgICAgIHRoaXMudW5zdWJBbGwgPSBiaW5kKHRoaXMudW5zdWJBbGwsIHRoaXMpO1xuICAgICAgdGhpcy5zaW5rID0gdm9pZCAwO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gICAgICBCdXMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbmV3IEJhY29uLkRlc2MoQmFjb24sIFwiQnVzXCIsIFtdKSwgdGhpcy5zdWJzY3JpYmVBbGwpO1xuICAgIH1cblxuICAgIEJ1cy5wcm90b3R5cGUudW5zdWJBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBqLCBsZW4xLCByZWYsIHN1YjtcbiAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIHN1YiA9IHJlZltqXTtcbiAgICAgICAgaWYgKHR5cGVvZiBzdWIudW5zdWIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIHN1Yi51bnN1YigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH07XG5cbiAgICBCdXMucHJvdG90eXBlLnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uKG5ld1NpbmspIHtcbiAgICAgIHZhciBqLCBsZW4xLCByZWYsIHN1YnNjcmlwdGlvbjtcbiAgICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICAgIG5ld1NpbmsoZW5kRXZlbnQoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNpbmsgPSBuZXdTaW5rO1xuICAgICAgICByZWYgPSBjbG9uZUFycmF5KHRoaXMuc3Vic2NyaXB0aW9ucyk7XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uID0gcmVmW2pdO1xuICAgICAgICAgIHRoaXMuc3Vic2NyaWJlSW5wdXQoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudW5zdWJBbGw7XG4gICAgfTtcblxuICAgIEJ1cy5wcm90b3R5cGUuZ3VhcmRlZFNpbmsgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgcmV0dXJuIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuICAgICAgICAgICAgX3RoaXMudW5zdWJzY3JpYmVJbnB1dChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuc2luayhldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgfTtcblxuICAgIEJ1cy5wcm90b3R5cGUuc3Vic2NyaWJlSW5wdXQgPSBmdW5jdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgICAgIHJldHVybiBzdWJzY3JpcHRpb24udW5zdWIgPSBzdWJzY3JpcHRpb24uaW5wdXQuZGlzcGF0Y2hlci5zdWJzY3JpYmUodGhpcy5ndWFyZGVkU2luayhzdWJzY3JpcHRpb24uaW5wdXQpKTtcbiAgICB9O1xuXG4gICAgQnVzLnByb3RvdHlwZS51bnN1YnNjcmliZUlucHV0ID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgIHZhciBpLCBqLCBsZW4xLCByZWYsIHN1YjtcbiAgICAgIHJlZiA9IHRoaXMuc3Vic2NyaXB0aW9ucztcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4xID0gcmVmLmxlbmd0aDsgaiA8IGxlbjE7IGkgPSArK2opIHtcbiAgICAgICAgc3ViID0gcmVmW2ldO1xuICAgICAgICBpZiAoc3ViLmlucHV0ID09PSBpbnB1dCkge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3ViLnVuc3ViID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHN1Yi51bnN1YigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBCdXMucHJvdG90eXBlLnBsdWcgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgdmFyIHN1YjtcbiAgICAgIGFzc2VydE9ic2VydmFibGUoaW5wdXQpO1xuICAgICAgaWYgKHRoaXMuZW5kZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc3ViID0ge1xuICAgICAgICBpbnB1dDogaW5wdXRcbiAgICAgIH07XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChzdWIpO1xuICAgICAgaWYgKCh0aGlzLnNpbmsgIT0gbnVsbCkpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVJbnB1dChzdWIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIChmdW5jdGlvbihfdGhpcykge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLnVuc3Vic2NyaWJlSW5wdXQoaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgfSkodGhpcyk7XG4gICAgfTtcblxuICAgIEJ1cy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMudW5zdWJBbGwoKTtcbiAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5zaW5rID09PSBcImZ1bmN0aW9uXCIgPyB0aGlzLnNpbmsoZW5kRXZlbnQoKSkgOiB2b2lkIDA7XG4gICAgfTtcblxuICAgIEJ1cy5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICBpZiAoIXRoaXMuZW5kZWQpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLnNpbmsgPT09IFwiZnVuY3Rpb25cIiA/IHRoaXMuc2luayhuZXh0RXZlbnQodmFsdWUpKSA6IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQnVzLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHRoaXMuc2luayA9PT0gXCJmdW5jdGlvblwiID8gdGhpcy5zaW5rKG5ldyBFcnJvcihlcnJvcikpIDogdm9pZCAwO1xuICAgIH07XG5cbiAgICByZXR1cm4gQnVzO1xuXG4gIH0pKEV2ZW50U3RyZWFtKTtcblxuICBCYWNvbi5CdXMgPSBCdXM7XG5cbiAgbGlmdENhbGxiYWNrID0gZnVuY3Rpb24oZGVzYywgd3JhcHBlZCkge1xuICAgIHJldHVybiB3aXRoTWV0aG9kQ2FsbFN1cHBvcnQoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncywgZiwgc3RyZWFtO1xuICAgICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgICAgc3RyZWFtID0gcGFydGlhbGx5QXBwbGllZCh3cmFwcGVkLCBbXG4gICAgICAgIGZ1bmN0aW9uKHZhbHVlcywgY2FsbGJhY2spIHtcbiAgICAgICAgICByZXR1cm4gZi5hcHBseShudWxsLCBzbGljZS5jYWxsKHZhbHVlcykuY29uY2F0KFtjYWxsYmFja10pKTtcbiAgICAgICAgfVxuICAgICAgXSk7XG4gICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIGRlc2MsIFtmXS5jb25jYXQoc2xpY2UuY2FsbChhcmdzKSkpLCBCYWNvbi5jb21iaW5lQXNBcnJheShhcmdzKS5mbGF0TWFwKHN0cmVhbSkpO1xuICAgIH0pO1xuICB9O1xuXG4gIEJhY29uLmZyb21DYWxsYmFjayA9IGxpZnRDYWxsYmFjayhcImZyb21DYWxsYmFja1wiLCBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgZjtcbiAgICBmID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgcmV0dXJuIEJhY29uLmZyb21CaW5kZXIoZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgbWFrZUZ1bmN0aW9uKGYsIGFyZ3MpKGhhbmRsZXIpO1xuICAgICAgcmV0dXJuIG5vcDtcbiAgICB9LCAoZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiBbdmFsdWUsIGVuZEV2ZW50KCldO1xuICAgIH0pKTtcbiAgfSk7XG5cbiAgQmFjb24uZnJvbU5vZGVDYWxsYmFjayA9IGxpZnRDYWxsYmFjayhcImZyb21Ob2RlQ2FsbGJhY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MsIGY7XG4gICAgZiA9IGFyZ3VtZW50c1swXSwgYXJncyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIHJldHVybiBCYWNvbi5mcm9tQmluZGVyKGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgIG1ha2VGdW5jdGlvbihmLCBhcmdzKShoYW5kbGVyKTtcbiAgICAgIHJldHVybiBub3A7XG4gICAgfSwgZnVuY3Rpb24oZXJyb3IsIHZhbHVlKSB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIFtuZXcgRXJyb3IoZXJyb3IpLCBlbmRFdmVudCgpXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbdmFsdWUsIGVuZEV2ZW50KCldO1xuICAgIH0pO1xuICB9KTtcblxuICBhZGRQcm9wZXJ0eUluaXRWYWx1ZVRvU3RyZWFtID0gZnVuY3Rpb24ocHJvcGVydHksIHN0cmVhbSkge1xuICAgIHZhciBqdXN0SW5pdFZhbHVlO1xuICAgIGp1c3RJbml0VmFsdWUgPSBuZXcgRXZlbnRTdHJlYW0oZGVzY3JpYmUocHJvcGVydHksIFwianVzdEluaXRWYWx1ZVwiKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgdmFyIHVuc3ViLCB2YWx1ZTtcbiAgICAgIHZhbHVlID0gdm9pZCAwO1xuICAgICAgdW5zdWIgPSBwcm9wZXJ0eS5kaXNwYXRjaGVyLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoIWV2ZW50LmlzRW5kKCkpIHtcbiAgICAgICAgICB2YWx1ZSA9IGV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG4gICAgICB9KTtcbiAgICAgIFVwZGF0ZUJhcnJpZXIud2hlbkRvbmVXaXRoKGp1c3RJbml0VmFsdWUsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHNpbmsodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW5rKGVuZEV2ZW50KCkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdW5zdWI7XG4gICAgfSk7XG4gICAgcmV0dXJuIGp1c3RJbml0VmFsdWUuY29uY2F0KHN0cmVhbSkudG9Qcm9wZXJ0eSgpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLm1hcEVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmO1xuICAgIGYgPSBtYWtlRnVuY3Rpb25BcmdzKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwibWFwRW5kXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICAgIHRoaXMucHVzaChuZXh0RXZlbnQoZihldmVudCkpKTtcbiAgICAgICAgdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLnNraXBFcnJvcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwRXJyb3JzXCIsIFtdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSkge1xuICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUudGFrZVVudGlsID0gZnVuY3Rpb24oc3RvcHBlcikge1xuICAgIHZhciBlbmRNYXJrZXI7XG4gICAgZW5kTWFya2VyID0ge307XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidGFrZVVudGlsXCIsIFtzdG9wcGVyXSksIEJhY29uLmdyb3VwU2ltdWx0YW5lb3VzKHRoaXMubWFwRW5kKGVuZE1hcmtlciksIHN0b3BwZXIuc2tpcEVycm9ycygpKS53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuICAgICAgdmFyIGRhdGEsIGosIGxlbjEsIHJlZiwgcmVwbHksIHZhbHVlO1xuICAgICAgaWYgKCFldmVudC5oYXNWYWx1ZSgpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVmID0gZXZlbnQudmFsdWUoKSwgZGF0YSA9IHJlZlswXSwgc3RvcHBlciA9IHJlZlsxXTtcbiAgICAgICAgaWYgKHN0b3BwZXIubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChlbmRFdmVudCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IGRhdGEubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGRhdGFbal07XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IGVuZE1hcmtlcikge1xuICAgICAgICAgICAgICByZXBseSA9IHRoaXMucHVzaChlbmRFdmVudCgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJlcGx5ID0gdGhpcy5wdXNoKG5leHRFdmVudCh2YWx1ZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVwbHk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLnRha2VVbnRpbCA9IGZ1bmN0aW9uKHN0b3BwZXIpIHtcbiAgICB2YXIgY2hhbmdlcztcbiAgICBjaGFuZ2VzID0gdGhpcy5jaGFuZ2VzKCkudGFrZVVudGlsKHN0b3BwZXIpO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRha2VVbnRpbFwiLCBbc3RvcHBlcl0pLCBhZGRQcm9wZXJ0eUluaXRWYWx1ZVRvU3RyZWFtKHRoaXMsIGNoYW5nZXMpKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwTGF0ZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYsIHN0cmVhbTtcbiAgICBmID0gbWFrZVNwYXduZXIoYXJndW1lbnRzKTtcbiAgICBzdHJlYW0gPSB0aGlzLnRvRXZlbnRTdHJlYW0oKTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJmbGF0TWFwTGF0ZXN0XCIsIFtmXSksIHN0cmVhbS5mbGF0TWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gbWFrZU9ic2VydmFibGUoZih2YWx1ZSkpLnRha2VVbnRpbChzdHJlYW0pO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuZGVsYXlDaGFuZ2VzID0gZnVuY3Rpb24oZGVzYywgZikge1xuICAgIHJldHVybiB3aXRoRGVzYyhkZXNjLCBhZGRQcm9wZXJ0eUluaXRWYWx1ZVRvU3RyZWFtKHRoaXMsIGYodGhpcy5jaGFuZ2VzKCkpKSk7XG4gIH07XG5cbiAgQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkZWxheVwiLCBbZGVsYXldKSwgdGhpcy5mbGF0TWFwKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gQmFjb24ubGF0ZXIoZGVsYXksIHZhbHVlKTtcbiAgICB9KSk7XG4gIH07XG5cbiAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24oZGVsYXkpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxheUNoYW5nZXMobmV3IEJhY29uLkRlc2ModGhpcywgXCJkZWxheVwiLCBbZGVsYXldKSwgZnVuY3Rpb24oY2hhbmdlcykge1xuICAgICAgcmV0dXJuIGNoYW5nZXMuZGVsYXkoZGVsYXkpO1xuICAgIH0pO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5kZWJvdW5jZSA9IGZ1bmN0aW9uKGRlbGF5KSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVib3VuY2VcIiwgW2RlbGF5XSksIHRoaXMuZmxhdE1hcExhdGVzdChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIEJhY29uLmxhdGVyKGRlbGF5LCB2YWx1ZSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLlByb3BlcnR5LnByb3RvdHlwZS5kZWJvdW5jZSA9IGZ1bmN0aW9uKGRlbGF5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGVsYXlDaGFuZ2VzKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZGVib3VuY2VcIiwgW2RlbGF5XSksIGZ1bmN0aW9uKGNoYW5nZXMpIHtcbiAgICAgIHJldHVybiBjaGFuZ2VzLmRlYm91bmNlKGRlbGF5KTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuZGVib3VuY2VJbW1lZGlhdGUgPSBmdW5jdGlvbihkZWxheSkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImRlYm91bmNlSW1tZWRpYXRlXCIsIFtkZWxheV0pLCB0aGlzLmZsYXRNYXBGaXJzdChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIEJhY29uLm9uY2UodmFsdWUpLmNvbmNhdChCYWNvbi5sYXRlcihkZWxheSkuZmlsdGVyKGZhbHNlKSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLnNjYW4gPSBmdW5jdGlvbihzZWVkLCBmKSB7XG4gICAgdmFyIGFjYywgcmVzdWx0UHJvcGVydHksIHN1YnNjcmliZTtcbiAgICBmID0gdG9Db21iaW5hdG9yKGYpO1xuICAgIGFjYyA9IHRvT3B0aW9uKHNlZWQpO1xuICAgIHN1YnNjcmliZSA9IChmdW5jdGlvbihfdGhpcykge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgICAgdmFyIGluaXRTZW50LCByZXBseSwgc2VuZEluaXQsIHVuc3ViO1xuICAgICAgICBpbml0U2VudCA9IGZhbHNlO1xuICAgICAgICB1bnN1YiA9IG5vcDtcbiAgICAgICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuICAgICAgICBzZW5kSW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICghaW5pdFNlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2MuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgICBpbml0U2VudCA9IHRydWU7XG4gICAgICAgICAgICAgIHJlcGx5ID0gc2luayhuZXcgSW5pdGlhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgaWYgKHJlcGx5ID09PSBCYWNvbi5ub01vcmUpIHtcbiAgICAgICAgICAgICAgICB1bnN1YigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bnN1YiA9IG5vcDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB1bnN1YiA9IF90aGlzLmRpc3BhdGNoZXIuc3Vic2NyaWJlKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIG5leHQsIHByZXY7XG4gICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgIGlmIChpbml0U2VudCAmJiBldmVudC5pc0luaXRpYWwoKSkge1xuICAgICAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghZXZlbnQuaXNJbml0aWFsKCkpIHtcbiAgICAgICAgICAgICAgICBzZW5kSW5pdCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGluaXRTZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgcHJldiA9IGFjYy5nZXRPckVsc2Uodm9pZCAwKTtcbiAgICAgICAgICAgICAgbmV4dCA9IGYocHJldiwgZXZlbnQudmFsdWUoKSk7XG4gICAgICAgICAgICAgIGFjYyA9IG5ldyBTb21lKG5leHQpO1xuICAgICAgICAgICAgICByZXR1cm4gc2luayhldmVudC5hcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuICAgICAgICAgICAgICByZXBseSA9IHNlbmRJbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVwbHkgIT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgICAgICByZXR1cm4gc2luayhldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgVXBkYXRlQmFycmllci53aGVuRG9uZVdpdGgocmVzdWx0UHJvcGVydHksIHNlbmRJbml0KTtcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xuICAgICAgfTtcbiAgICB9KSh0aGlzKTtcbiAgICByZXR1cm4gcmVzdWx0UHJvcGVydHkgPSBuZXcgUHJvcGVydHkobmV3IEJhY29uLkRlc2ModGhpcywgXCJzY2FuXCIsIFtzZWVkLCBmXSksIHN1YnNjcmliZSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZGlmZiA9IGZ1bmN0aW9uKHN0YXJ0LCBmKSB7XG4gICAgZiA9IHRvQ29tYmluYXRvcihmKTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkaWZmXCIsIFtzdGFydCwgZl0pLCB0aGlzLnNjYW4oW3N0YXJ0XSwgZnVuY3Rpb24ocHJldlR1cGxlLCBuZXh0KSB7XG4gICAgICByZXR1cm4gW25leHQsIGYocHJldlR1cGxlWzBdLCBuZXh0KV07XG4gICAgfSkuZmlsdGVyKGZ1bmN0aW9uKHR1cGxlKSB7XG4gICAgICByZXR1cm4gdHVwbGUubGVuZ3RoID09PSAyO1xuICAgIH0pLm1hcChmdW5jdGlvbih0dXBsZSkge1xuICAgICAgcmV0dXJuIHR1cGxlWzFdO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kb0FjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBmO1xuICAgIGYgPSBtYWtlRnVuY3Rpb25BcmdzKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZG9BY3Rpb25cIiwgW2ZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgZihldmVudC52YWx1ZSgpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5kb0Vycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGY7XG4gICAgZiA9IG1ha2VGdW5jdGlvbkFyZ3MoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJkb0Vycm9yXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcbiAgICAgICAgZihldmVudC5lcnJvcik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICB9KSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuZG9Mb2cgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncztcbiAgICBhcmdzID0gMSA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDApIDogW107XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZG9Mb2dcIiwgYXJncyksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIHNsaWNlLmNhbGwoYXJncykuY29uY2F0KFtldmVudC5sb2coKV0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmVuZE9uRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgZjtcbiAgICBmID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgaWYgKGYgPT0gbnVsbCkge1xuICAgICAgZiA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBjb252ZXJ0QXJnc1RvRnVuY3Rpb24odGhpcywgZiwgYXJncywgZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZW5kT25FcnJvclwiLCBbXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LmlzRXJyb3IoKSAmJiBmKGV2ZW50LmVycm9yKSkge1xuICAgICAgICAgIHRoaXMucHVzaChldmVudCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChlbmRFdmVudCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9O1xuXG4gIE9ic2VydmFibGUucHJvdG90eXBlLmVycm9ycyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImVycm9yc1wiLCBbXSksIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pKTtcbiAgfTtcblxuICB2YWx1ZUFuZEVuZCA9IChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBbdmFsdWUsIGVuZEV2ZW50KCldO1xuICB9KTtcblxuICBCYWNvbi5mcm9tUHJvbWlzZSA9IGZ1bmN0aW9uKHByb21pc2UsIGFib3J0LCBldmVudFRyYW5zZm9ybWVyKSB7XG4gICAgaWYgKGV2ZW50VHJhbnNmb3JtZXIgPT0gbnVsbCkge1xuICAgICAgZXZlbnRUcmFuc2Zvcm1lciA9IHZhbHVlQW5kRW5kO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiZnJvbVByb21pc2VcIiwgW3Byb21pc2VdKSwgQmFjb24uZnJvbUJpbmRlcihmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgaWYgKChyZWYgPSBwcm9taXNlLnRoZW4oaGFuZGxlciwgZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gaGFuZGxlcihuZXcgRXJyb3IoZSkpO1xuICAgICAgfSkpICE9IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZWYuZG9uZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgcmVmLmRvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYWJvcnQpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHByb21pc2UuYWJvcnQgPT09IFwiZnVuY3Rpb25cIiA/IHByb21pc2UuYWJvcnQoKSA6IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9LCBldmVudFRyYW5zZm9ybWVyKSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUubWFwRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZjtcbiAgICBmID0gbWFrZUZ1bmN0aW9uQXJncyhhcmd1bWVudHMpO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcIm1hcEVycm9yXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHVzaChuZXh0RXZlbnQoZihldmVudC5lcnJvcikpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwRXJyb3IgPSBmdW5jdGlvbihmbikge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImZsYXRNYXBFcnJvclwiLCBbZm5dKSwgdGhpcy5tYXBFcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoZXJyKTtcbiAgICB9KS5mbGF0TWFwKGZ1bmN0aW9uKHgpIHtcbiAgICAgIGlmICh4IGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZuKHguZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIEJhY29uLm9uY2UoeCk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5zYW1wbGVkQnkgPSBmdW5jdGlvbihzYW1wbGVyLCBjb21iaW5hdG9yKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic2FtcGxlZEJ5XCIsIFtzYW1wbGVyLCBjb21iaW5hdG9yXSksIHRoaXMudG9Qcm9wZXJ0eSgpLnNhbXBsZWRCeShzYW1wbGVyLCBjb21iaW5hdG9yKSk7XG4gIH07XG5cbiAgQmFjb24uUHJvcGVydHkucHJvdG90eXBlLnNhbXBsZWRCeSA9IGZ1bmN0aW9uKHNhbXBsZXIsIGNvbWJpbmF0b3IpIHtcbiAgICB2YXIgbGF6eSwgcmVzdWx0LCBzYW1wbGVyU291cmNlLCBzdHJlYW0sIHRoaXNTb3VyY2U7XG4gICAgaWYgKGNvbWJpbmF0b3IgIT0gbnVsbCkge1xuICAgICAgY29tYmluYXRvciA9IHRvQ29tYmluYXRvcihjb21iaW5hdG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF6eSA9IHRydWU7XG4gICAgICBjb21iaW5hdG9yID0gZnVuY3Rpb24oZikge1xuICAgICAgICByZXR1cm4gZi52YWx1ZSgpO1xuICAgICAgfTtcbiAgICB9XG4gICAgdGhpc1NvdXJjZSA9IG5ldyBTb3VyY2UodGhpcywgZmFsc2UsIGxhenkpO1xuICAgIHNhbXBsZXJTb3VyY2UgPSBuZXcgU291cmNlKHNhbXBsZXIsIHRydWUsIGxhenkpO1xuICAgIHN0cmVhbSA9IEJhY29uLndoZW4oW3RoaXNTb3VyY2UsIHNhbXBsZXJTb3VyY2VdLCBjb21iaW5hdG9yKTtcbiAgICByZXN1bHQgPSBzYW1wbGVyIGluc3RhbmNlb2YgUHJvcGVydHkgPyBzdHJlYW0udG9Qcm9wZXJ0eSgpIDogc3RyZWFtO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInNhbXBsZWRCeVwiLCBbc2FtcGxlciwgY29tYmluYXRvcl0pLCByZXN1bHQpO1xuICB9O1xuXG4gIEJhY29uLlByb3BlcnR5LnByb3RvdHlwZS5zYW1wbGUgPSBmdW5jdGlvbihpbnRlcnZhbCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInNhbXBsZVwiLCBbaW50ZXJ2YWxdKSwgdGhpcy5zYW1wbGVkQnkoQmFjb24uaW50ZXJ2YWwoaW50ZXJ2YWwsIHt9KSkpO1xuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzLCBwO1xuICAgIHAgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBpZiAocCBpbnN0YW5jZW9mIFByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gcC5zYW1wbGVkQnkodGhpcywgZm9ybWVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNvbnZlcnRBcmdzVG9GdW5jdGlvbih0aGlzLCBwLCBhcmdzLCBmdW5jdGlvbihmKSB7XG4gICAgICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcIm1hcFwiLCBbZl0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudC5mbWFwKGYpKTtcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZvbGQgPSBmdW5jdGlvbihzZWVkLCBmKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwiZm9sZFwiLCBbc2VlZCwgZl0pLCB0aGlzLnNjYW4oc2VlZCwgZikuc2FtcGxlZEJ5KHRoaXMuZmlsdGVyKGZhbHNlKS5tYXBFbmQoKS50b1Byb3BlcnR5KCkpKTtcbiAgfTtcblxuICBPYnNlcnZhYmxlLnByb3RvdHlwZS5yZWR1Y2UgPSBPYnNlcnZhYmxlLnByb3RvdHlwZS5mb2xkO1xuXG4gIEJhY29uLmZyb21Qb2xsID0gZnVuY3Rpb24oZGVsYXksIHBvbGwpIHtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiZnJvbVBvbGxcIiwgW2RlbGF5LCBwb2xsXSksIEJhY29uLmZyb21CaW5kZXIoKGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICAgIHZhciBpZDtcbiAgICAgIGlkID0gQmFjb24uc2NoZWR1bGVyLnNldEludGVydmFsKGhhbmRsZXIsIGRlbGF5KTtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEJhY29uLnNjaGVkdWxlci5jbGVhckludGVydmFsKGlkKTtcbiAgICAgIH07XG4gICAgfSksIHBvbGwpKTtcbiAgfTtcblxuICBCYWNvbi5mcm9tQXJyYXkgPSBmdW5jdGlvbih2YWx1ZXMpIHtcbiAgICB2YXIgaTtcbiAgICBhc3NlcnRBcnJheSh2YWx1ZXMpO1xuICAgIGlmICghdmFsdWVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImZyb21BcnJheVwiLCB2YWx1ZXMpLCBCYWNvbi5uZXZlcigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaSA9IDA7XG4gICAgICByZXR1cm4gbmV3IEV2ZW50U3RyZWFtKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImZyb21BcnJheVwiLCBbdmFsdWVzXSksIGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgICAgdmFyIHB1c2gsIHB1c2hOZWVkZWQsIHB1c2hpbmcsIHJlcGx5LCB1bnN1YmQ7XG4gICAgICAgIHVuc3ViZCA9IGZhbHNlO1xuICAgICAgICByZXBseSA9IEJhY29uLm1vcmU7XG4gICAgICAgIHB1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgcHVzaE5lZWRlZCA9IGZhbHNlO1xuICAgICAgICBwdXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgIHB1c2hOZWVkZWQgPSB0cnVlO1xuICAgICAgICAgIGlmIChwdXNoaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIHB1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgIHdoaWxlIChwdXNoTmVlZGVkKSB7XG4gICAgICAgICAgICBwdXNoTmVlZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoKHJlcGx5ICE9PSBCYWNvbi5ub01vcmUpICYmICF1bnN1YmQpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZXNbaSsrXTtcbiAgICAgICAgICAgICAgcmVwbHkgPSBzaW5rKHRvRXZlbnQodmFsdWUpKTtcbiAgICAgICAgICAgICAgaWYgKHJlcGx5ICE9PSBCYWNvbi5ub01vcmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgc2luayhlbmRFdmVudCgpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgVXBkYXRlQmFycmllci5hZnRlclRyYW5zYWN0aW9uKHB1c2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHVzaGluZyA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gdW5zdWJkID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuaG9sZFdoZW4gPSBmdW5jdGlvbih2YWx2ZSkge1xuICAgIHZhciBidWZmZXJlZFZhbHVlcywgY29tcG9zaXRlLCBvbkhvbGQsIHNyYywgc3Vic2NyaWJlZDtcbiAgICBjb21wb3NpdGUgPSBuZXcgQ29tcG9zaXRlVW5zdWJzY3JpYmUoKTtcbiAgICBvbkhvbGQgPSBmYWxzZTtcbiAgICBidWZmZXJlZFZhbHVlcyA9IFtdO1xuICAgIHN1YnNjcmliZWQgPSBmYWxzZTtcbiAgICBzcmMgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgRXZlbnRTdHJlYW0obmV3IEJhY29uLkRlc2ModGhpcywgXCJob2xkV2hlblwiLCBbdmFsdmVdKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgdmFyIGVuZElmQm90aEVuZGVkO1xuICAgICAgZW5kSWZCb3RoRW5kZWQgPSBmdW5jdGlvbih1bnN1Yikge1xuICAgICAgICBpZiAodHlwZW9mIHVuc3ViID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICB1bnN1YigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21wb3NpdGUuZW1wdHkoKSAmJiBzdWJzY3JpYmVkKSB7XG4gICAgICAgICAgcmV0dXJuIHNpbmsoZW5kRXZlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBjb21wb3NpdGUuYWRkKGZ1bmN0aW9uKHVuc3ViQWxsLCB1bnN1Yk1lKSB7XG4gICAgICAgIHJldHVybiB2YWx2ZS5zdWJzY3JpYmVJbnRlcm5hbChmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciBqLCBsZW4xLCByZXN1bHRzLCB0b1NlbmQsIHZhbHVlO1xuICAgICAgICAgIGlmIChldmVudC5oYXNWYWx1ZSgpKSB7XG4gICAgICAgICAgICBvbkhvbGQgPSBldmVudC52YWx1ZSgpO1xuICAgICAgICAgICAgaWYgKCFvbkhvbGQpIHtcbiAgICAgICAgICAgICAgdG9TZW5kID0gYnVmZmVyZWRWYWx1ZXM7XG4gICAgICAgICAgICAgIGJ1ZmZlcmVkVmFsdWVzID0gW107XG4gICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHRvU2VuZC5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRvU2VuZFtqXTtcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goc2luayhuZXh0RXZlbnQodmFsdWUpKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5kSWZCb3RoRW5kZWQodW5zdWJNZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzaW5rKGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICBjb21wb3NpdGUuYWRkKGZ1bmN0aW9uKHVuc3ViQWxsLCB1bnN1Yk1lKSB7XG4gICAgICAgIHJldHVybiBzcmMuc3Vic2NyaWJlSW50ZXJuYWwoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAob25Ib2xkICYmIGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBidWZmZXJlZFZhbHVlcy5wdXNoKGV2ZW50LnZhbHVlKCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuaXNFbmQoKSAmJiBidWZmZXJlZFZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmRJZkJvdGhFbmRlZCh1bnN1Yk1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNpbmsoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgZW5kSWZCb3RoRW5kZWQoKTtcbiAgICAgIHJldHVybiBjb21wb3NpdGUudW5zdWJzY3JpYmU7XG4gICAgfSk7XG4gIH07XG5cbiAgQmFjb24uaW50ZXJ2YWwgPSBmdW5jdGlvbihkZWxheSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcImludGVydmFsXCIsIFtkZWxheSwgdmFsdWVdKSwgQmFjb24uZnJvbVBvbGwoZGVsYXksIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5leHRFdmVudCh2YWx1ZSk7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLiQgPSB7fTtcblxuICBCYWNvbi4kLmFzRXZlbnRTdHJlYW0gPSBmdW5jdGlvbihldmVudE5hbWUsIHNlbGVjdG9yLCBldmVudFRyYW5zZm9ybWVyKSB7XG4gICAgdmFyIHJlZjtcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgcmVmID0gW3NlbGVjdG9yLCB2b2lkIDBdLCBldmVudFRyYW5zZm9ybWVyID0gcmVmWzBdLCBzZWxlY3RvciA9IHJlZlsxXTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMuc2VsZWN0b3IgfHwgdGhpcywgXCJhc0V2ZW50U3RyZWFtXCIsIFtldmVudE5hbWVdKSwgQmFjb24uZnJvbUJpbmRlcigoZnVuY3Rpb24oX3RoaXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIF90aGlzLm9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm9mZihldmVudE5hbWUsIHNlbGVjdG9yLCBoYW5kbGVyKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfSkodGhpcyksIGV2ZW50VHJhbnNmb3JtZXIpKTtcbiAgfTtcblxuICBpZiAoKHJlZiA9IHR5cGVvZiBqUXVlcnkgIT09IFwidW5kZWZpbmVkXCIgJiYgalF1ZXJ5ICE9PSBudWxsID8galF1ZXJ5IDogdHlwZW9mIFplcHRvICE9PSBcInVuZGVmaW5lZFwiICYmIFplcHRvICE9PSBudWxsID8gWmVwdG8gOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICByZWYuZm4uYXNFdmVudFN0cmVhbSA9IEJhY29uLiQuYXNFdmVudFN0cmVhbTtcbiAgfVxuXG4gIEJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGFyZ3MgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICB0aGlzLnN1YnNjcmliZShmdW5jdGlvbihldmVudCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwgPyB0eXBlb2YgY29uc29sZS5sb2cgPT09IFwiZnVuY3Rpb25cIiA/IGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIHNsaWNlLmNhbGwoYXJncykuY29uY2F0KFtldmVudC5sb2coKV0pKSA6IHZvaWQgMCA6IHZvaWQgMDtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUubWVyZ2UgPSBmdW5jdGlvbihyaWdodCkge1xuICAgIHZhciBsZWZ0O1xuICAgIGFzc2VydEV2ZW50U3RyZWFtKHJpZ2h0KTtcbiAgICBsZWZ0ID0gdGhpcztcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MobGVmdCwgXCJtZXJnZVwiLCBbcmlnaHRdKSwgQmFjb24ubWVyZ2VBbGwodGhpcywgcmlnaHQpKTtcbiAgfTtcblxuICBCYWNvbi5tZXJnZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdHJlYW1zO1xuICAgIHN0cmVhbXMgPSAxIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMCkgOiBbXTtcbiAgICBpZiAoaXNBcnJheShzdHJlYW1zWzBdKSkge1xuICAgICAgc3RyZWFtcyA9IHN0cmVhbXNbMF07XG4gICAgfVxuICAgIGlmIChzdHJlYW1zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIG5ldyBFdmVudFN0cmVhbShuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJtZXJnZUFsbFwiLCBzdHJlYW1zKSwgZnVuY3Rpb24oc2luaykge1xuICAgICAgICB2YXIgZW5kcywgc2lua3MsIHNtYXJ0U2luaztcbiAgICAgICAgZW5kcyA9IDA7XG4gICAgICAgIHNtYXJ0U2luayA9IGZ1bmN0aW9uKG9icykge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbih1bnN1YkJvdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBvYnMuZGlzcGF0Y2hlci5zdWJzY3JpYmUoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgdmFyIHJlcGx5O1xuICAgICAgICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuICAgICAgICAgICAgICAgIGVuZHMrKztcbiAgICAgICAgICAgICAgICBpZiAoZW5kcyA9PT0gc3RyZWFtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBzaW5rKGVuZEV2ZW50KCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVwbHkgPSBzaW5rKGV2ZW50KTtcbiAgICAgICAgICAgICAgICBpZiAocmVwbHkgPT09IEJhY29uLm5vTW9yZSkge1xuICAgICAgICAgICAgICAgICAgdW5zdWJCb3RoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXBseTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgc2lua3MgPSBfLm1hcChzbWFydFNpbmssIHN0cmVhbXMpO1xuICAgICAgICByZXR1cm4gbmV3IEJhY29uLkNvbXBvc2l0ZVVuc3Vic2NyaWJlKHNpbmtzKS51bnN1YnNjcmliZTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gQmFjb24ubmV2ZXIoKTtcbiAgICB9XG4gIH07XG5cbiAgQmFjb24ucmVwZWF0ZWRseSA9IGZ1bmN0aW9uKGRlbGF5LCB2YWx1ZXMpIHtcbiAgICB2YXIgaW5kZXg7XG4gICAgaW5kZXggPSAwO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJyZXBlYXRlZGx5XCIsIFtkZWxheSwgdmFsdWVzXSksIEJhY29uLmZyb21Qb2xsKGRlbGF5LCBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB2YWx1ZXNbaW5kZXgrKyAlIHZhbHVlcy5sZW5ndGhdO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5yZXBlYXQgPSBmdW5jdGlvbihnZW5lcmF0b3IpIHtcbiAgICB2YXIgaW5kZXg7XG4gICAgaW5kZXggPSAwO1xuICAgIHJldHVybiBCYWNvbi5mcm9tQmluZGVyKGZ1bmN0aW9uKHNpbmspIHtcbiAgICAgIHZhciBmbGFnLCBoYW5kbGVFdmVudCwgcmVwbHksIHN1YnNjcmliZU5leHQsIHVuc3ViO1xuICAgICAgZmxhZyA9IGZhbHNlO1xuICAgICAgcmVwbHkgPSBCYWNvbi5tb3JlO1xuICAgICAgdW5zdWIgPSBmdW5jdGlvbigpIHt9O1xuICAgICAgaGFuZGxlRXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuaXNFbmQoKSkge1xuICAgICAgICAgIGlmICghZmxhZykge1xuICAgICAgICAgICAgcmV0dXJuIGZsYWcgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaWJlTmV4dCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVwbHkgPSBzaW5rKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHN1YnNjcmliZU5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICB3aGlsZSAoZmxhZyAmJiByZXBseSAhPT0gQmFjb24ubm9Nb3JlKSB7XG4gICAgICAgICAgbmV4dCA9IGdlbmVyYXRvcihpbmRleCsrKTtcbiAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIHVuc3ViID0gbmV4dC5zdWJzY3JpYmVJbnRlcm5hbChoYW5kbGVFdmVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNpbmsoZW5kRXZlbnQoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbGFnID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBzdWJzY3JpYmVOZXh0KCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB1bnN1YigpO1xuICAgICAgfTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5yZXRyeSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgZGVsYXksIGVycm9yLCBmaW5pc2hlZCwgaXNSZXRyeWFibGUsIG1heFJldHJpZXMsIHJldHJpZXMsIHNvdXJjZTtcbiAgICBpZiAoIV8uaXNGdW5jdGlvbihvcHRpb25zLnNvdXJjZSkpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCInc291cmNlJyBvcHRpb24gaGFzIHRvIGJlIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICAgIHNvdXJjZSA9IG9wdGlvbnMuc291cmNlO1xuICAgIHJldHJpZXMgPSBvcHRpb25zLnJldHJpZXMgfHwgMDtcbiAgICBtYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzIHx8IHJldHJpZXM7XG4gICAgZGVsYXkgPSBvcHRpb25zLmRlbGF5IHx8IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICBpc1JldHJ5YWJsZSA9IG9wdGlvbnMuaXNSZXRyeWFibGUgfHwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIGZpbmlzaGVkID0gZmFsc2U7XG4gICAgZXJyb3IgPSBudWxsO1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJyZXRyeVwiLCBbb3B0aW9uc10pLCBCYWNvbi5yZXBlYXQoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY29udGV4dCwgcGF1c2UsIHZhbHVlU3RyZWFtO1xuICAgICAgaWYgKGZpbmlzaGVkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVTdHJlYW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gc291cmNlKCkuZW5kT25FcnJvcigpLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuaXNFcnJvcigpKSB7XG4gICAgICAgICAgICAgIGVycm9yID0gZXZlbnQ7XG4gICAgICAgICAgICAgIGlmIChpc1JldHJ5YWJsZShlcnJvci5lcnJvcikgJiYgcmV0cmllcyA+IDApIHtcblxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgICAgICBlcnJvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgZmluaXNoZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb250ZXh0ID0ge1xuICAgICAgICAgICAgZXJyb3I6IGVycm9yLmVycm9yLFxuICAgICAgICAgICAgcmV0cmllc0RvbmU6IG1heFJldHJpZXMgLSByZXRyaWVzXG4gICAgICAgICAgfTtcbiAgICAgICAgICBwYXVzZSA9IEJhY29uLmxhdGVyKGRlbGF5KGNvbnRleHQpKS5maWx0ZXIoZmFsc2UpO1xuICAgICAgICAgIHJldHJpZXMgPSByZXRyaWVzIC0gMTtcbiAgICAgICAgICByZXR1cm4gcGF1c2UuY29uY2F0KEJhY29uLm9uY2UoKS5mbGF0TWFwKHZhbHVlU3RyZWFtKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlU3RyZWFtKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KSk7XG4gIH07XG5cbiAgQmFjb24uc2VxdWVudGlhbGx5ID0gZnVuY3Rpb24oZGVsYXksIHZhbHVlcykge1xuICAgIHZhciBpbmRleDtcbiAgICBpbmRleCA9IDA7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcInNlcXVlbnRpYWxseVwiLCBbZGVsYXksIHZhbHVlc10pLCBCYWNvbi5mcm9tUG9sbChkZWxheSwgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdmFsdWU7XG4gICAgICB2YWx1ZSA9IHZhbHVlc1tpbmRleCsrXTtcbiAgICAgIGlmIChpbmRleCA8IHZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gW3ZhbHVlLCBlbmRFdmVudCgpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBlbmRFdmVudCgpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5za2lwID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJza2lwXCIsIFtjb3VudF0pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoIWV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG4gICAgICB9IGVsc2UgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICBjb3VudC0tO1xuICAgICAgICByZXR1cm4gQmFjb24ubW9yZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlID0gZnVuY3Rpb24oY291bnQpIHtcbiAgICBpZiAoY291bnQgPD0gMCkge1xuICAgICAgcmV0dXJuIEJhY29uLm5ldmVyKCk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInRha2VcIiwgW2NvdW50XSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmICghZXZlbnQuaGFzVmFsdWUoKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvdW50LS07XG4gICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5wdXNoKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMucHVzaChlbmRFdmVudCgpKTtcbiAgICAgICAgICByZXR1cm4gQmFjb24ubm9Nb3JlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5za2lwVW50aWwgPSBmdW5jdGlvbihzdGFydGVyKSB7XG4gICAgdmFyIHN0YXJ0ZWQ7XG4gICAgc3RhcnRlZCA9IHN0YXJ0ZXIudGFrZSgxKS5tYXAodHJ1ZSkudG9Qcm9wZXJ0eShmYWxzZSk7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic2tpcFVudGlsXCIsIFtzdGFydGVyXSksIHRoaXMuZmlsdGVyKHN0YXJ0ZWQpKTtcbiAgfTtcblxuICBCYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUuc2tpcFdoaWxlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MsIGYsIG9rO1xuICAgIGYgPSBhcmd1bWVudHNbMF0sIGFyZ3MgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBhc3NlcnRPYnNlcnZhYmxlSXNQcm9wZXJ0eShmKTtcbiAgICBvayA9IGZhbHNlO1xuICAgIHJldHVybiBjb252ZXJ0QXJnc1RvRnVuY3Rpb24odGhpcywgZiwgYXJncywgZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic2tpcFdoaWxlXCIsIFtmXSksIHRoaXMud2l0aEhhbmRsZXIoZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKG9rIHx8ICFldmVudC5oYXNWYWx1ZSgpIHx8ICFmKGV2ZW50LnZhbHVlKCkpKSB7XG4gICAgICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgICAgIG9rID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIEJhY29uLm1vcmU7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5zbGlkaW5nV2luZG93ID0gZnVuY3Rpb24obiwgbWluVmFsdWVzKSB7XG4gICAgaWYgKG1pblZhbHVlcyA9PSBudWxsKSB7XG4gICAgICBtaW5WYWx1ZXMgPSAwO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJzbGlkaW5nV2luZG93XCIsIFtuLCBtaW5WYWx1ZXNdKSwgdGhpcy5zY2FuKFtdLCAoZnVuY3Rpb24od2luZG93LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5jb25jYXQoW3ZhbHVlXSkuc2xpY2UoLW4pO1xuICAgIH0pKS5maWx0ZXIoKGZ1bmN0aW9uKHZhbHVlcykge1xuICAgICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPj0gbWluVmFsdWVzO1xuICAgIH0pKSk7XG4gIH07XG5cbiAgQmFjb24uc3B5ID0gZnVuY3Rpb24oc3B5KSB7XG4gICAgcmV0dXJuIHNweXMucHVzaChzcHkpO1xuICB9O1xuXG4gIHNweXMgPSBbXTtcblxuICByZWdpc3Rlck9icyA9IGZ1bmN0aW9uKG9icykge1xuICAgIHZhciBqLCBsZW4xLCBzcHk7XG4gICAgaWYgKHNweXMubGVuZ3RoKSB7XG4gICAgICBpZiAoIXJlZ2lzdGVyT2JzLnJ1bm5pbmcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZWdpc3Rlck9icy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gc3B5cy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICAgIHNweSA9IHNweXNbal07XG4gICAgICAgICAgICBzcHkob2JzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgZGVsZXRlIHJlZ2lzdGVyT2JzLnJ1bm5pbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfTtcblxuICBCYWNvbi5Qcm9wZXJ0eS5wcm90b3R5cGUuc3RhcnRXaXRoID0gZnVuY3Rpb24oc2VlZCkge1xuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInN0YXJ0V2l0aFwiLCBbc2VlZF0pLCB0aGlzLnNjYW4oc2VlZCwgZnVuY3Rpb24ocHJldiwgbmV4dCkge1xuICAgICAgcmV0dXJuIG5leHQ7XG4gICAgfSkpO1xuICB9O1xuXG4gIEJhY29uLkV2ZW50U3RyZWFtLnByb3RvdHlwZS5zdGFydFdpdGggPSBmdW5jdGlvbihzZWVkKSB7XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwic3RhcnRXaXRoXCIsIFtzZWVkXSksIEJhY29uLm9uY2Uoc2VlZCkuY29uY2F0KHRoaXMpKTtcbiAgfTtcblxuICBCYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS50YWtlV2hpbGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncywgZjtcbiAgICBmID0gYXJndW1lbnRzWzBdLCBhcmdzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgYXNzZXJ0T2JzZXJ2YWJsZUlzUHJvcGVydHkoZik7XG4gICAgcmV0dXJuIGNvbnZlcnRBcmdzVG9GdW5jdGlvbih0aGlzLCBmLCBhcmdzLCBmdW5jdGlvbihmKSB7XG4gICAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJ0YWtlV2hpbGVcIiwgW2ZdKSwgdGhpcy53aXRoSGFuZGxlcihmdW5jdGlvbihldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQuZmlsdGVyKGYpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChldmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuICAgICAgICAgIHJldHVybiBCYWNvbi5ub01vcmU7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfTtcblxuICBCYWNvbi51cGRhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgaW5pdGlhbCwgbGF0ZUJpbmRGaXJzdCwgcGF0dGVybnM7XG4gICAgaW5pdGlhbCA9IGFyZ3VtZW50c1swXSwgcGF0dGVybnMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBsYXRlQmluZEZpcnN0ID0gZnVuY3Rpb24oZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncztcbiAgICAgICAgYXJncyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSkge1xuICAgICAgICAgIHJldHVybiBmLmFwcGx5KG51bGwsIFtpXS5jb25jYXQoYXJncykpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9O1xuICAgIGkgPSBwYXR0ZXJucy5sZW5ndGggLSAxO1xuICAgIHdoaWxlIChpID4gMCkge1xuICAgICAgaWYgKCEocGF0dGVybnNbaV0gaW5zdGFuY2VvZiBGdW5jdGlvbikpIHtcbiAgICAgICAgcGF0dGVybnNbaV0gPSAoZnVuY3Rpb24oeCkge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKHBhdHRlcm5zW2ldKTtcbiAgICAgIH1cbiAgICAgIHBhdHRlcm5zW2ldID0gbGF0ZUJpbmRGaXJzdChwYXR0ZXJuc1tpXSk7XG4gICAgICBpID0gaSAtIDI7XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyhCYWNvbiwgXCJ1cGRhdGVcIiwgW2luaXRpYWxdLmNvbmNhdChzbGljZS5jYWxsKHBhdHRlcm5zKSkpLCBCYWNvbi53aGVuLmFwcGx5KEJhY29uLCBwYXR0ZXJucykuc2Nhbihpbml0aWFsLCAoZnVuY3Rpb24oeCwgZikge1xuICAgICAgcmV0dXJuIGYoeCk7XG4gICAgfSkpKTtcbiAgfTtcblxuICBCYWNvbi56aXBBc0FycmF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0cmVhbXM7XG4gICAgc3RyZWFtcyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgIGlmIChpc0FycmF5KHN0cmVhbXNbMF0pKSB7XG4gICAgICBzdHJlYW1zID0gc3RyZWFtc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKEJhY29uLCBcInppcEFzQXJyYXlcIiwgc3RyZWFtcyksIEJhY29uLnppcFdpdGgoc3RyZWFtcywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgeHM7XG4gICAgICB4cyA9IDEgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSA6IFtdO1xuICAgICAgcmV0dXJuIHhzO1xuICAgIH0pKTtcbiAgfTtcblxuICBCYWNvbi56aXBXaXRoID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGYsIHJlZjEsIHN0cmVhbXM7XG4gICAgZiA9IGFyZ3VtZW50c1swXSwgc3RyZWFtcyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIGlmICghXy5pc0Z1bmN0aW9uKGYpKSB7XG4gICAgICByZWYxID0gW2YsIHN0cmVhbXNbMF1dLCBzdHJlYW1zID0gcmVmMVswXSwgZiA9IHJlZjFbMV07XG4gICAgfVxuICAgIHN0cmVhbXMgPSBfLm1hcCgoZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIHMudG9FdmVudFN0cmVhbSgpO1xuICAgIH0pLCBzdHJlYW1zKTtcbiAgICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2MoQmFjb24sIFwiemlwV2l0aFwiLCBbZl0uY29uY2F0KHNsaWNlLmNhbGwoc3RyZWFtcykpKSwgQmFjb24ud2hlbihzdHJlYW1zLCBmKSk7XG4gIH07XG5cbiAgQmFjb24uT2JzZXJ2YWJsZS5wcm90b3R5cGUuemlwID0gZnVuY3Rpb24ob3RoZXIsIGYpIHtcbiAgICBpZiAoZiA9PSBudWxsKSB7XG4gICAgICBmID0gQXJyYXk7XG4gICAgfVxuICAgIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcInppcFwiLCBbb3RoZXJdKSwgQmFjb24uemlwV2l0aChbdGhpcywgb3RoZXJdLCBmKSk7XG4gIH07XG5cbiAgXG5cbkJhY29uLk9ic2VydmFibGUucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gd2l0aERlc2MobmV3IEJhY29uLkRlc2ModGhpcywgXCJmaXJzdFwiLCBbXSksIHRoaXMudGFrZSgxKSk7XG59O1xuXG5CYWNvbi5PYnNlcnZhYmxlLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGFzdEV2ZW50O1xuXG4gIHJldHVybiB3aXRoRGVzYyhuZXcgQmFjb24uRGVzYyh0aGlzLCBcImxhc3RcIiwgW10pLCB0aGlzLndpdGhIYW5kbGVyKGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC5pc0VuZCgpKSB7XG4gICAgICBpZiAobGFzdEV2ZW50KSB7XG4gICAgICAgIHRoaXMucHVzaChsYXN0RXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5wdXNoKGVuZEV2ZW50KCkpO1xuICAgICAgcmV0dXJuIEJhY29uLm5vTW9yZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdEV2ZW50ID0gZXZlbnQ7XG4gICAgfVxuICB9KSk7XG59O1xuXG5CYWNvbi5FdmVudFN0cmVhbS5wcm90b3R5cGUudGhyb3R0bGUgPSBmdW5jdGlvbiAoZGVsYXkpIHtcbiAgcmV0dXJuIHdpdGhEZXNjKG5ldyBCYWNvbi5EZXNjKHRoaXMsIFwidGhyb3R0bGVcIiwgW2RlbGF5XSksIHRoaXMuYnVmZmVyV2l0aFRpbWUoZGVsYXkpLm1hcChmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgcmV0dXJuIHZhbHVlc1t2YWx1ZXMubGVuZ3RoIC0gMV07XG4gIH0pKTtcbn07XG5cbkJhY29uLlByb3BlcnR5LnByb3RvdHlwZS50aHJvdHRsZSA9IGZ1bmN0aW9uIChkZWxheSkge1xuICByZXR1cm4gdGhpcy5kZWxheUNoYW5nZXMobmV3IEJhY29uLkRlc2ModGhpcywgXCJ0aHJvdHRsZVwiLCBbZGVsYXldKSwgZnVuY3Rpb24gKGNoYW5nZXMpIHtcbiAgICByZXR1cm4gY2hhbmdlcy50aHJvdHRsZShkZWxheSk7XG4gIH0pO1xufTtcblxuT2JzZXJ2YWJsZS5wcm90b3R5cGUuZmlyc3RUb1Byb21pc2UgPSBmdW5jdGlvbiAoUHJvbWlzZUN0cikge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIGlmICh0eXBlb2YgUHJvbWlzZUN0ciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgaWYgKHR5cGVvZiBQcm9taXNlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIFByb21pc2VDdHIgPSBQcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGhlcmUgaXNuJ3QgZGVmYXVsdCBQcm9taXNlLCB1c2Ugc2hpbSBvciBwYXJhbWV0ZXJcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlQ3RyKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICByZXR1cm4gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50Lmhhc1ZhbHVlKCkpIHtcbiAgICAgICAgcmVzb2x2ZShldmVudC52YWx1ZSgpKTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC5pc0Vycm9yKCkpIHtcbiAgICAgICAgcmVqZWN0KGV2ZW50LmVycm9yKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEJhY29uLm5vTW9yZTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5PYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAoUHJvbWlzZUN0cikge1xuICByZXR1cm4gdGhpcy5sYXN0KCkuZmlyc3RUb1Byb21pc2UoUHJvbWlzZUN0cik7XG59O1xuXG5pZiAoKHR5cGVvZiBkZWZpbmUgIT09IFwidW5kZWZpbmVkXCIgJiYgZGVmaW5lICE9PSBudWxsKSAmJiAoZGVmaW5lLmFtZCAhPSBudWxsKSkge1xuICAgIGRlZmluZShbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFjb247XG4gICAgfSk7XG4gICAgdGhpcy5CYWNvbiA9IEJhY29uO1xuICB9IGVsc2UgaWYgKCh0eXBlb2YgbW9kdWxlICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZSAhPT0gbnVsbCkgJiYgKG1vZHVsZS5leHBvcnRzICE9IG51bGwpKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBCYWNvbjtcbiAgICBCYWNvbi5CYWNvbiA9IEJhY29uO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuQmFjb24gPSBCYWNvbjtcbiAgfVxuXG59KS5jYWxsKHRoaXMpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFjb25qcy9kaXN0L0JhY29uLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzcGVjaWFsIGNoYXJhY3RlcnNdKGh0dHA6Ly93d3cucmVndWxhci1leHByZXNzaW9ucy5pbmZvL2NoYXJhY3RlcnMuaHRtbCNzcGVjaWFsKS5cbiAqIEluIGFkZGl0aW9uIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgZm9yd2FyZCBzbGFzaCBpcyBlc2NhcGVkIHRvIGFsbG93IGZvclxuICogZWFzaWVyIGBldmFsYCB1c2UgYW5kIGBGdW5jdGlvbmAgY29tcGlsYXRpb24uXG4gKi9cbnZhciByZVJlZ0V4cENoYXJzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nLFxuICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGVzY2FwZVJlZ0V4cChmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc05hdGl2ZShfKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnKSB7XG4gICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcbiAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuICogLy8gPT4gJ1xcW2xvZGFzaFxcXVxcKGh0dHBzOlxcL1xcL2xvZGFzaFxcLmNvbVxcL1xcKSdcbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLmlzYXJyYXkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnQgY29uc3QgQklSRF9SQURJVVMgPSA1O1xuZXhwb3J0IGNvbnN0IEZSQU1FX1JBVEUgPSAxMDAwIC8gNjA7XG5leHBvcnQgY29uc3QgR1JPVU5EX0hFSUdIVCA9IDIwO1xuZXhwb3J0IGNvbnN0IEhPTEVfSEVJR0hUID0gNTA7XG5leHBvcnQgY29uc3QgUEFVU0VfS0VZID0gODA7XG5leHBvcnQgY29uc3QgU1BBQ0VfS0VZID0gMzI7XG5leHBvcnQgY29uc3QgUElQRV9ESVNUQU5DRSA9IDEwMDtcbmV4cG9ydCBjb25zdCBQSVBFX1dJRFRIID0gMjI7XG5leHBvcnQgY29uc3QgV09STERfSEVJR0hUID0gMjAwO1xuZXhwb3J0IGNvbnN0IEdSQVZJVFkgPSAwLjI7XG5leHBvcnQgY29uc3QgUElQRV9PRkZTRVQgPSBXT1JMRF9IRUlHSFQgKiAwLjQ7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvY29uc3RhbnRzLmpzXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzcGVjaWFsIGNoYXJhY3RlcnNdKGh0dHA6Ly93d3cucmVndWxhci1leHByZXNzaW9ucy5pbmZvL2NoYXJhY3RlcnMuaHRtbCNzcGVjaWFsKS5cbiAqIEluIGFkZGl0aW9uIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgZm9yd2FyZCBzbGFzaCBpcyBlc2NhcGVkIHRvIGFsbG93IGZvclxuICogZWFzaWVyIGBldmFsYCB1c2UgYW5kIGBGdW5jdGlvbmAgY29tcGlsYXRpb24uXG4gKi9cbnZhciByZVJlZ0V4cENoYXJzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nLFxuICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGVzY2FwZVJlZ0V4cChmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc05hdGl2ZShfKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnKSB7XG4gICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcbiAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuICogLy8gPT4gJ1xcW2xvZGFzaFxcXVxcKGh0dHBzOlxcL1xcL2xvZGFzaFxcLmNvbVxcL1xcKSdcbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guaXNhcnJheS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImltcG9ydCBCYWNvbiBmcm9tICdiYWNvbmpzJztcblxuXG5jb25zdCBidXMgPSBuZXcgQmFjb24uQnVzKCk7XG5tb2R1bGUuZXhwb3J0cyA9IGJ1cy5wdXNoLmJpbmQoYnVzKTtcbm1vZHVsZS5leHBvcnRzLnJlcGxhY2VOb3RpZmllciQgPSBidXMuc3RhcnRXaXRoKCkuZGVsYXkoMSk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvaG90UmVwbGFjZU5vdGlmaWVyLmpzXG4gKiovIiwidmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgdG9TdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIHVuZGVmaW5lZDtcblxudmFyIGlzQXJyYXkgPSBmdW5jdGlvbiBpc0FycmF5KGFycikge1xuXHRpZiAodHlwZW9mIEFycmF5LmlzQXJyYXkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpO1xuXHR9XG5cblx0cmV0dXJuIHRvU3RyLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbnZhciBpc1BsYWluT2JqZWN0ID0gZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0J3VzZSBzdHJpY3QnO1xuXHRpZiAoIW9iaiB8fCB0b1N0ci5jYWxsKG9iaikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dmFyIGhhc19vd25fY29uc3RydWN0b3IgPSBoYXNPd24uY2FsbChvYmosICdjb25zdHJ1Y3RvcicpO1xuXHR2YXIgaGFzX2lzX3Byb3BlcnR5X29mX21ldGhvZCA9IG9iai5jb25zdHJ1Y3RvciAmJiBvYmouY29uc3RydWN0b3IucHJvdG90eXBlICYmIGhhc093bi5jYWxsKG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICdpc1Byb3RvdHlwZU9mJyk7XG5cdC8vIE5vdCBvd24gY29uc3RydWN0b3IgcHJvcGVydHkgbXVzdCBiZSBPYmplY3Rcblx0aWYgKG9iai5jb25zdHJ1Y3RvciAmJiAhaGFzX293bl9jb25zdHJ1Y3RvciAmJiAhaGFzX2lzX3Byb3BlcnR5X29mX21ldGhvZCkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vIE93biBwcm9wZXJ0aWVzIGFyZSBlbnVtZXJhdGVkIGZpcnN0bHksIHNvIHRvIHNwZWVkIHVwLFxuXHQvLyBpZiBsYXN0IG9uZSBpcyBvd24sIHRoZW4gYWxsIHByb3BlcnRpZXMgYXJlIG93bi5cblx0dmFyIGtleTtcblx0Zm9yIChrZXkgaW4gb2JqKSB7fVxuXG5cdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCBoYXNPd24uY2FsbChvYmosIGtleSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGV4dGVuZCgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdLFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKHR5cGVvZiB0YXJnZXQgPT09ICdib29sZWFuJykge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHRcdC8vIHNraXAgdGhlIGJvb2xlYW4gYW5kIHRoZSB0YXJnZXRcblx0XHRpID0gMjtcblx0fSBlbHNlIGlmICgodHlwZW9mIHRhcmdldCAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIHRhcmdldCAhPT0gJ2Z1bmN0aW9uJykgfHwgdGFyZ2V0ID09IG51bGwpIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdGZvciAoOyBpIDwgbGVuZ3RoOyArK2kpIHtcblx0XHRvcHRpb25zID0gYXJndW1lbnRzW2ldO1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAob3B0aW9ucyAhPSBudWxsKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbbmFtZV07XG5cdFx0XHRcdGNvcHkgPSBvcHRpb25zW25hbWVdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKHRhcmdldCA9PT0gY29weSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmIChkZWVwICYmIGNvcHkgJiYgKGlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0gaXNBcnJheShjb3B5KSkpKSB7XG5cdFx0XHRcdFx0aWYgKGNvcHlJc0FycmF5KSB7XG5cdFx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGV4dGVuZChkZWVwLCBjbG9uZSwgY29weSk7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHR9IGVsc2UgaWYgKGNvcHkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRhcmdldFtuYW1lXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXh0ZW5kL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjcuMCA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBwcm92aWRlZCB0byBpdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxpdHlcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaWRlbnRpdHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2guaWRlbnRpdHkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjEuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJ2xvZGFzaC5fZ2V0bmF0aXZlJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCdsb2Rhc2guaXNhcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUtleXMgPSBnZXROYXRpdmUoT2JqZWN0LCAna2V5cycpO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gKi9cbnZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQSBmYWxsYmFjayBpbXBsZW1lbnRhdGlvbiBvZiBgT2JqZWN0LmtleXNgIHdoaWNoIGNyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlXG4gKiBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gc2hpbUtleXMob2JqZWN0KSB7XG4gIHZhciBwcm9wcyA9IGtleXNJbihvYmplY3QpLFxuICAgICAgcHJvcHNMZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICBsZW5ndGggPSBwcm9wc0xlbmd0aCAmJiBvYmplY3QubGVuZ3RoO1xuXG4gIHZhciBhbGxvd0luZGV4ZXMgPSAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgcHJvcHNMZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdO1xuICAgIGlmICgoYWxsb3dJbmRleGVzICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpKSB8fCBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdCgxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG4gIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3Qua2V5cylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbnZhciBrZXlzID0gIW5hdGl2ZUtleXMgPyBzaGltS2V5cyA6IGZ1bmN0aW9uKG9iamVjdCkge1xuICB2YXIgQ3RvciA9IG9iamVjdCA9PSBudWxsID8gbnVsbCA6IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgaWYgKCh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QpIHx8XG4gICAgICAodHlwZW9mIG9iamVjdCAhPSAnZnVuY3Rpb24nICYmIGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIHNoaW1LZXlzKG9iamVjdCk7XG4gIH1cbiAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgPyBuYXRpdmVLZXlzKG9iamVjdCkgOiBbXTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzSW4obmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYicsICdjJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqL1xuZnVuY3Rpb24ga2V5c0luKG9iamVjdCkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG4gIH1cbiAgdmFyIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7XG4gIGxlbmd0aCA9IChsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkgJiYgbGVuZ3RoKSB8fCAwO1xuXG4gIHZhciBDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgaW5kZXggPSAtMSxcbiAgICAgIGlzUHJvdG8gPSB0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QsXG4gICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpLFxuICAgICAgc2tpcEluZGV4ZXMgPSBsZW5ndGggPiAwO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IChpbmRleCArICcnKTtcbiAgfVxuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKCEoc2tpcEluZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpICYmXG4gICAgICAgICEoa2V5ID09ICdjb25zdHJ1Y3RvcicgJiYgKGlzUHJvdG8gfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2gua2V5cy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMS4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnbG9kYXNoLl9nZXRuYXRpdmUnKSxcbiAgICBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJ2xvZGFzaC5pc2FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCdsb2Rhc2guaXNhcnJheScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXlxcZCskLztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlS2V5cyA9IGdldE5hdGl2ZShPYmplY3QsICdrZXlzJyk7XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG4gKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAqL1xudmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggY3JlYXRlcyBhbiBhcnJheSBvZiB0aGVcbiAqIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBzaGltS2V5cyhvYmplY3QpIHtcbiAgdmFyIHByb3BzID0ga2V5c0luKG9iamVjdCksXG4gICAgICBwcm9wc0xlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgIGxlbmd0aCA9IHByb3BzTGVuZ3RoICYmIG9iamVjdC5sZW5ndGg7XG5cbiAgdmFyIGFsbG93SW5kZXhlcyA9ICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgd2hpbGUgKCsraW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgaWYgKChhbGxvd0luZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpIHx8IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xudmFyIGtleXMgPSAhbmF0aXZlS2V5cyA/IHNoaW1LZXlzIDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHZhciBDdG9yID0gb2JqZWN0ID09IG51bGwgPyBudWxsIDogb2JqZWN0LmNvbnN0cnVjdG9yO1xuICBpZiAoKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCkgfHxcbiAgICAgICh0eXBlb2Ygb2JqZWN0ICE9ICdmdW5jdGlvbicgJiYgaXNBcnJheUxpa2Uob2JqZWN0KSkpIHtcbiAgICByZXR1cm4gc2hpbUtleXMob2JqZWN0KTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3Qob2JqZWN0KSA/IG5hdGl2ZUtleXMob2JqZWN0KSA6IFtdO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXNJbihuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJywgJ2MnXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICovXG5mdW5jdGlvbiBrZXlzSW4ob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgfVxuICB2YXIgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDtcbiAgbGVuZ3RoID0gKGxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSAmJiBsZW5ndGgpIHx8IDA7XG5cbiAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICBpbmRleCA9IC0xLFxuICAgICAgaXNQcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCxcbiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICBza2lwSW5kZXhlcyA9IGxlbmd0aCA+IDA7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICByZXN1bHRbaW5kZXhdID0gKGluZGV4ICsgJycpO1xuICB9XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoIShza2lwSW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgJiZcbiAgICAgICAgIShrZXkgPT0gJ2NvbnN0cnVjdG9yJyAmJiAoaXNQcm90byB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBrZXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2gua2V5cy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS43LjAgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKiBVc2VkIGFzIHRoZSBpbnRlcm5hbCBhcmd1bWVudCBwbGFjZWhvbGRlci4gKi9cbnZhciBQTEFDRUhPTERFUiA9ICdfX2xvZGFzaF9wbGFjZWhvbGRlcl9fJztcblxuLyoqXG4gKiBSZXBsYWNlcyBhbGwgYHBsYWNlaG9sZGVyYCBlbGVtZW50cyBpbiBgYXJyYXlgIHdpdGggYW4gaW50ZXJuYWwgcGxhY2Vob2xkZXJcbiAqIGFuZCByZXR1cm5zIGFuIGFycmF5IG9mIHRoZWlyIGluZGV4ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0geyp9IHBsYWNlaG9sZGVyIFRoZSBwbGFjZWhvbGRlciB0byByZXBsYWNlLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAqL1xuZnVuY3Rpb24gcmVwbGFjZUhvbGRlcnMoYXJyYXksIHBsYWNlaG9sZGVyKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgcmVzSW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKGFycmF5W2luZGV4XSA9PT0gcGxhY2Vob2xkZXIpIHtcbiAgICAgIGFycmF5W2luZGV4XSA9IFBMQUNFSE9MREVSO1xuICAgICAgcmVzdWx0WysrcmVzSW5kZXhdID0gaW5kZXg7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVwbGFjZUhvbGRlcnM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGFydGlhbHJpZ2h0L34vbG9kYXNoLl9yZXBsYWNlaG9sZGVycy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgW3NwZWNpYWwgY2hhcmFjdGVyc10oaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vY2hhcmFjdGVycy5odG1sI3NwZWNpYWwpLlxuICogSW4gYWRkaXRpb24gdG8gc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBmb3J3YXJkIHNsYXNoIGlzIGVzY2FwZWQgdG8gYWxsb3cgZm9yXG4gKiBlYXNpZXIgYGV2YWxgIHVzZSBhbmQgYEZ1bmN0aW9uYCBjb21waWxhdGlvbi5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhcnMgPSAvWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csXG4gICAgcmVIYXNSZWdFeHBDaGFycyA9IFJlZ0V4cChyZVJlZ0V4cENoYXJzLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZXNjYXBlUmVnRXhwKGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVJc0FycmF5ID0gZ2V0TmF0aXZlKEFycmF5LCAnaXNBcnJheScpO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgcmV0dXJuIGlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5KGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJyYXlUYWc7XG59O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTmF0aXZlKF8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWcpIHtcbiAgICByZXR1cm4gcmVJc05hdGl2ZS50ZXN0KGZuVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIHRoZSBgUmVnRXhwYCBzcGVjaWFsIGNoYXJhY3RlcnMgXCJcXFwiLCBcIi9cIiwgXCJeXCIsIFwiJFwiLCBcIi5cIiwgXCJ8XCIsIFwiP1wiLFxuICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG4gKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6XFwvXFwvbG9kYXNoXFwuY29tXFwvXFwpJ1xuICovXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXJzLnRlc3Qoc3RyaW5nKSlcbiAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2guc2V0L34vbG9kYXNoLmlzYXJyYXkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IHNvbWUgZnJvbSAnbG9kYXNoLnNvbWUnO1xuXG5pbXBvcnQge1xuICBXT1JMRF9IRUlHSFQsXG4gIEdST1VORF9IRUlHSFQsXG4gIEhPTEVfSEVJR0hULFxuICBQSVBFX1dJRFRILFxuICBCSVJEX1JBRElVUyxcbiAgR1JBVklUWVxufSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQmlyZCA9IHtcbiAgcmFkaXVzOiBXT1JMRF9IRUlHSFQsXG4gIHg6IDAsXG4gIHZ4OiAyLFxuICB5OiBXT1JMRF9IRUlHSFQgLyAyIC0gQklSRF9SQURJVVMgLyAyLFxuICB2eTogMCxcbiAgdG91Y2hlc0dyb3VuZDogZmFsc2UsXG4gIGdyb3VuZFRvdWNoVGltZTogMFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUJpcmQoYmlyZCwgW1tpbnB1dCwgb3V0cHV0XSwgd29ybGRdKSB7XG4gIGlmKCF3b3JsZC5ydW5uaW5nKSB7XG4gICAgcmV0dXJuIGluaXRpYWxCaXJkO1xuICB9XG5cbiAgY29uc3QgbmV3QmlyZCA9IHtcbiAgICB4OiBiaXJkLnggKyBiaXJkLnZ4LFxuICAgIC8vIFRPRE8gdng6IG91dHB1dC5iaXJkVG91Y2hlZFBpcGUgPyAwIDogYmlyZC52eCxcbiAgICB2eDogb3V0cHV0LmJpcmRUb3VjaGVkUGlwZSA/IDAgOiBNYXRoLm1pbihiaXJkLnZ4ICsgMC4xLCAyKSxcbiAgICB5OiBiaXJkLnkgKyBiaXJkLnZ5LFxuICAgIHZ5OiBiaXJkLnZ5IC0gR1JBVklUWSxcbiAgICB0b3VjaGVzR3JvdW5kOiBmYWxzZSxcbiAgICBncm91bmRUb3VjaFRpbWU6IGJpcmQudG91Y2hlc0dyb3VuZCA/IGJpcmQuZ3JvdW5kVG91Y2hUaW1lICsgMSA6IDBcbiAgfVxuXG4gIGNvbnN0IGJpcmRCb3R0b20gPSBuZXdCaXJkLnkgLSBCSVJEX1JBRElVUyAqIDI7XG5cbiAgaWYoYmlyZEJvdHRvbSA8PSBHUk9VTkRfSEVJR0hUKSB7XG4gICAgbmV3QmlyZC55ID0gR1JPVU5EX0hFSUdIVCArIEJJUkRfUkFESVVTICogMjtcbiAgICBuZXdCaXJkLnZ5ID0gMDtcbiAgICBuZXdCaXJkLnRvdWNoZXNHcm91bmQgPSB0cnVlO1xuICB9XG5cbiAgaWYoaW5wdXQuY2xpY2tzLmxlbmd0aCA+IDAgJiYgIW5ld0JpcmQudG91Y2hlc0dyb3VuZCkge1xuICAgIG5ld0JpcmQudnkgPSAzO1xuICB9XG5cbiAgcmV0dXJuIG5ld0JpcmQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYmlyZFRvdWNoZXNQaXBlKHtiaXJkLCBwaXBlc30pIHtcbiAgcmV0dXJuIHNvbWUocGlwZXMsIChwaXBlKSA9PiB7XG4gICAgLy8gSG9yaXpvbnRhbCBjaGVja1xuICAgIGlmKCEoYmlyZC54ICsgQklSRF9SQURJVVMqMiA+IHBpcGUueCAmJiBiaXJkLnggPCBwaXBlLnggKyBQSVBFX1dJRFRIKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gQmlyZCBub3QgdmVydGljYWxseSBpbnNpZGUgdGhlIGhvbGVcbiAgICByZXR1cm4gIShiaXJkLnkgPCBwaXBlLnkgJiYgYmlyZC55IC0gQklSRF9SQURJVVMqMiA+IHBpcGUueSAtIEhPTEVfSEVJR0hUKVxuICB9KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBiaXJkVG91Y2hlc0dyb3VuZCh7YmlyZH0pIHtcbiAgcmV0dXJuIGJpcmQueSAtIEJJUkRfUkFESVVTICogMiA8PSBHUk9VTkRfSEVJR0hUO1xufVxuXG5yZXF1aXJlKCcuL2hvdFJlcGxhY2VOb3RpZmllcicpKCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvYmlyZC5qc1xuICoqLyIsImltcG9ydCBleHRlbmQgZnJvbSAnZXh0ZW5kJ1xuaW1wb3J0IHtyYW5kb219IGZyb20gJy4vdXRpbHMnXG5leHBvcnQgY29uc3QgaW5pdGlhbFBpcGVzID0gW107XG5cbmltcG9ydCB7XG4gIFdPUkxEX0hFSUdIVCxcbiAgUElQRV9ESVNUQU5DRSxcbiAgUElQRV9PRkZTRVRcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUGlwZXMocGlwZXMsIFt3b3JsZCwgYmlyZF0pIHtcbiAgaWYoIXdvcmxkLnJ1bm5pbmcpIHtcbiAgICByZXR1cm4gaW5pdGlhbFBpcGVzO1xuICB9XG5cbiAgY29uc3QgbmV3UGlwZXMgPSBwaXBlcy5zbGljZSgwKS5tYXAoKHBpcGUpID0+IGV4dGVuZCh7fSwgcGlwZSkpO1xuXG4gIGlmKG5ld1BpcGVzLmxlbmd0aCA+IDI1KSB7XG4gICAgbmV3UGlwZXMuc2hpZnQoKVxuICB9XG5cbiAgY29uc3QgbGFzdFBpcGUgPSBuZXdQaXBlc1tuZXdQaXBlcy5sZW5ndGggLSAxXTtcblxuICBpZihuZXdQaXBlcy5sZW5ndGggPT09IDAgfHwgYmlyZC54ICsgKFBJUEVfRElTVEFOQ0UgKiA1KSA+IGxhc3RQaXBlLnggKyBQSVBFX0RJU1RBTkNFKSB7XG4gICAgbmV3UGlwZXMucHVzaCh7XG4gICAgICB4OiBiaXJkLnggKyAoUElQRV9ESVNUQU5DRSAqIDUpLFxuICAgICAgeTogcmFuZG9tKFBJUEVfT0ZGU0VULCBXT1JMRF9IRUlHSFQgLSBXT1JMRF9IRUlHSFQvOClcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIG5ld1BpcGVzO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc2NyaXB0cy9waXBlcy5qc1xuICoqLyIsImltcG9ydCByYWRpYW5zIGZyb20gJ2RlZ3JlZXMtcmFkaWFucyc7XG5pbXBvcnQgZXh0ZW5kIGZyb20gJ2V4dGVuZCc7XG5pbXBvcnQgcmFuZ2UgZnJvbSAnbG9kYXNoLnJhbmdlJztcblxucmVxdWlyZSgnLi9zdHlsZS5jc3MnKTtcblxuaW1wb3J0IHtcbiAgRlJBTUVfUkFURSxcbiAgV09STERfSEVJR0hULFxuICBCSVJEX0hFSUdIVCxcbiAgSE9MRV9IRUlHSFQsXG4gIFBJUEVfV0lEVEgsXG4gIEdST1VORF9IRUlHSFQsXG4gIEJJUkRfUkFESVVTXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuaW1wb3J0IHtjYW52YXMsIGN0eH0gZnJvbSAnLi9jYW52YXMnO1xuXG5jb25zdCBzcHJpdGVzID0ge1xuICBiYWNrZ3JvdW5kOiB7eDogMCwgeTogMCwgdzogMTQ0LCBoOiAyNTZ9LFxuICBncm91bmQ6IHt4OiAxNDYsIHk6IDAsIHc6IDE1MywgaDogNTZ9LFxuICBzY29yZToge3g6IDE0NiwgeTogNTgsIHc6IDExMywgaDogNTh9LFxuICBiaXJkOiBbe3g6IDIyMywgeTogMTI0LCB3OiAxNywgaDogMTJ9LFxuICAgICAgICB7eDogMjY0LCB5OiA5MCwgdzogMTcsIGg6IDEyfSxcbiAgICAgICAge3g6IDI2NCwgeTogNjMsIHc6IDE3LCBoOiAxMn1dLFxuICBwaXBlOiB7eDogMzMwLCB5OiAwLCB3OiAyNiwgaDogMTIxfSxcbiAgcGlwZTI6IHt4OiAzMDIsIHk6IDAsIHc6IDI2LCBoOiAxMzV9LFxuICBwaXBlMzoge3g6IDMwMiwgeTogMCwgdzogMjYsIGg6IDEwMH1cbn1cblxuY29uc3QgYXRsYXMgPSBuZXcgSW1hZ2UoKVxuYXRsYXMuc3JjID0gcmVxdWlyZSgndXJsIS4uL2Fzc2V0cy9zcHJpdGUucG5nJyk7XG5cblxuZnVuY3Rpb24gZHJhd1Nwcml0ZShjb250ZXh0LCBzcHJpdGUsIHgsIHksIHcsIGgpIHtcbiAgY29udGV4dC5kcmF3SW1hZ2UoYXRsYXMsIHNwcml0ZS54LCBzcHJpdGUueSwgc3ByaXRlLncsIHNwcml0ZS5oLCB4LCB5LCB3LCBoKTtcbn1cblxuXG5mdW5jdGlvbiBzY2FsZSh5KSB7XG4gIHJldHVybiAoY2FudmFzLmhlaWdodCAvIFdPUkxEX0hFSUdIVCkgKiB5O1xufVxuXG5cbmxldCBydW5uaW5nID0gZmFsc2U7XG5mdW5jdGlvbiB1cGRhdGVSdW5uaW5nQ2xhc3MocnVubmluZykge1xuICBjb25zdCB7Y2xhc3NMaXN0fSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgcnVubmluZyA/IGNsYXNzTGlzdC5hZGQoJ3J1bm5pbmcnKSA6IGNsYXNzTGlzdC5yZW1vdmUoJ3J1bm5pbmcnKTtcbn1cblxuZnVuY3Rpb24gZ2V0RnJhbWUoc3ByaXRlcywgdGljaykge1xuICByZXR1cm4gc3ByaXRlc1tNYXRoLmZsb29yKHRpY2sgLyBzcHJpdGVzLmxlbmd0aCkgJSBzcHJpdGVzLmxlbmd0aF07XG59XG5cbmZ1bmN0aW9uIHJlbmRlckJpcmQod29ybGQsIGJpcmQpIHtcbiAgY3R4LnNhdmUoKVxuXG4gIC8vY29uc29sZS5sb2coc2NhbGUoYmlyZC55KSwgYmlyZC55KTtcbiAgY29uc3QgcmFkaXVzID0gc2NhbGUoQklSRF9SQURJVVMpO1xuICBjb25zdCBkaXZpZGVyID0gcmFkaXVzICogMjtcblxuICBjdHgudHJhbnNsYXRlKGNhbnZhcy53aWR0aCAvIDIgLSByYWRpdXMsIGNhbnZhcy5oZWlnaHQgLSBzY2FsZShiaXJkLnkpICsgcmFkaXVzKTtcblxuXG4gIGN0eC5yb3RhdGUocmFkaWFucygtYmlyZC52eSAqIDcgKyBiaXJkLmdyb3VuZFRvdWNoVGltZSAqIDQpKVxuXG4gIGN0eC50cmFuc2xhdGUoLXJhZGl1cywgLXJhZGl1cylcbiAgLy9jdHguZmlsbFJlY3QoMCwgMCwgc2NhbGUoQklSRF9SQURJVVMgKiAyKSwgc2NhbGUoQklSRF9SQURJVVMgKiAyKSlcblxuICBjb25zdCBzcHJpdGUgPSBiaXJkLnZ5ID4gMCA/IGdldEZyYW1lKHNwcml0ZXMuYmlyZCwgd29ybGQudGljaykgOiBzcHJpdGVzLmJpcmRbMF07XG5cbiAgY29uc3QgcmF0aW8gPSBzcHJpdGUudyAvIHNwcml0ZS5oO1xuXG4gIGRyYXdTcHJpdGUoY3R4LCBzcHJpdGUsIDAsIDAsIGRpdmlkZXIgKiByYXRpbywgZGl2aWRlcilcblxuICBjdHgucmVzdG9yZSgpXG59XG5cbmZ1bmN0aW9uIHJlbmRlckdyb3VuZChiaXJkKSB7XG4gIGNvbnN0IHNwcml0ZSA9IHNwcml0ZXMuZ3JvdW5kO1xuICBjb25zdCBzcHJpdGVXaWR0aCA9IHNjYWxlKHNwcml0ZS53KTtcbiAgY29uc3Qgc3ByaXRlSGVpZ2h0ID0gc2NhbGUoc3ByaXRlLmgpO1xuXG4gIGN0eC5zYXZlKCk7XG5cbiAgY29uc3QgbW92ZW1lbnQgPSBzY2FsZShiaXJkLngpICUgc3ByaXRlV2lkdGggKiAtMTtcblxuICBjdHgudHJhbnNsYXRlKDAgKyBtb3ZlbWVudCwgY2FudmFzLmhlaWdodCAtIHNjYWxlKEdST1VORF9IRUlHSFQpICogMS4yNSk7XG5cbiAgZm9yKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChjYW52YXMud2lkdGggLyBzcHJpdGVXaWR0aCkgKyAxOyBpKyspIHtcbiAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCAwLCAwLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KVxuICAgIGN0eC50cmFuc2xhdGUoc3ByaXRlV2lkdGgsIDApXG4gIH1cblxuICBjdHgucmVzdG9yZSgpO1xufVxuXG5mdW5jdGlvbiByZW5kZXJCYWNrZ3JvdW5kKHdvcmxkKSB7XG4gIGNvbnN0IHNwcml0ZSA9IHNwcml0ZXMuYmFja2dyb3VuZDtcblxuICBjb25zdCBzcHJpdGVXaWR0aCA9IHNjYWxlKHNwcml0ZS53KTtcbiAgY29uc3Qgc3ByaXRlSGVpZ2h0ID0gc2NhbGUoc3ByaXRlLmgpO1xuXG4gIGN0eC5zYXZlKCk7XG5cbiAgY3R4LnRyYW5zbGF0ZSgwLCAtc2NhbGUoc3ByaXRlLmgpICogMC4yNSk7XG5cbiAgZm9yKGxldCBpID0gMDsgaSA8IE1hdGguY2VpbChjYW52YXMud2lkdGggLyBzcHJpdGVXaWR0aCkgKyAxOyBpKyspIHtcbiAgICBkcmF3U3ByaXRlKGN0eCwgc3ByaXRlLCAwLCAwLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KVxuICAgIGN0eC50cmFuc2xhdGUoc3ByaXRlV2lkdGgsIDApXG4gIH1cblxuICBjdHgucmVzdG9yZSgpO1xufVxuXG4vLyBUT0RPIHJlZmFjdG9yXG5mdW5jdGlvbiByZW5kZXJQaXBlcyhwaXBlcywgYmlyZCkge1xuICBjb25zdCBzcHJpdGUgPSBzcHJpdGVzLnBpcGU7XG4gIGNvbnN0IHNwcml0ZTIgPSBzcHJpdGVzLnBpcGUyO1xuXG4gIGNvbnN0IHBpcGVXaWR0aCA9IHNjYWxlKFBJUEVfV0lEVEgpO1xuICBjb25zdCByYXRpbyA9IHNwcml0ZS53IC8gcGlwZVdpZHRoO1xuXG4gIGNvbnN0IHNwcml0ZVdpZHRoID0gc2NhbGUoc3ByaXRlLncpO1xuICBjb25zdCBzcHJpdGVIZWlnaHQgPSBzY2FsZShzcHJpdGUuaCkgKiByYXRpbztcblxuICBjb25zdCBzcHJpdGUyV2lkdGggPSBzY2FsZShzcHJpdGUyLncpO1xuICBjb25zdCBzcHJpdGUySGVpZ2h0ID0gc2NhbGUoc3ByaXRlMi5oKSAqIHJhdGlvO1xuICBjb25zdCBzaGFmdEhlaWdodCA9IHNjYWxlKHNwcml0ZXMucGlwZTMuaCkgKiByYXRpbztcblxuICBwaXBlcy5mb3JFYWNoKChwaXBlKSA9PiB7XG4gICAgY29uc3QgeCA9IChjYW52YXMud2lkdGggLyAyIC0gc2NhbGUoQklSRF9SQURJVVMpKSAtIChzY2FsZShiaXJkLngpIC0gc2NhbGUocGlwZS54KSk7XG4gICAgbGV0IHkgPSBjYW52YXMuaGVpZ2h0IC0gc2NhbGUocGlwZS55KSArIHNjYWxlKEhPTEVfSEVJR0hUKTtcblxuICAgIGNvbnN0IGJvdHRvbVBpcGVCb3R0b20gPSBjYW52YXMuaGVpZ2h0IC0gKHkgKyBzcHJpdGVIZWlnaHQpO1xuXG4gICAgaWYoYm90dG9tUGlwZUJvdHRvbSA+IHNjYWxlKEdST1VORF9IRUlHSFQpKSB7XG5cbiAgICAgIHJhbmdlKE1hdGguY2VpbCgoYm90dG9tUGlwZUJvdHRvbSAtIHNjYWxlKEdST1VORF9IRUlHSFQpKSAvIHNoYWZ0SGVpZ2h0KSkuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHgudHJhbnNsYXRlKHgsIHkgKyBzcHJpdGVIZWlnaHQgKyBzaGFmdEhlaWdodCAqIGkpO1xuXG4gICAgICAgIGRyYXdTcHJpdGUoY3R4LCBzcHJpdGVzLnBpcGUzLCAwLCAwLCBwaXBlV2lkdGgsIHNoYWZ0SGVpZ2h0KVxuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7XG4gICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZSwgMCwgMCwgcGlwZVdpZHRoLCBzcHJpdGVIZWlnaHQpXG4gICAgY3R4LnJlc3RvcmUoKTtcblxuICAgIGN0eC5zYXZlKCk7XG5cbiAgICB5ID0gY2FudmFzLmhlaWdodCAtIHNjYWxlKHBpcGUueSkgLSBzcHJpdGUySGVpZ2h0O1xuXG4gICAgaWYoeSA+IDApIHtcbiAgICAgIHJhbmdlKE1hdGguY2VpbCh5IC8gc2hhZnRIZWlnaHQpKS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC50cmFuc2xhdGUoeCwgeSAtIGkgKiBzaGFmdEhlaWdodCAtIHNoYWZ0SGVpZ2h0KTtcbiAgICAgICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZXMucGlwZTMsIDAsIDAsIHBpcGVXaWR0aCwgc2hhZnRIZWlnaHQpXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICB9KVxuICAgIH1cblxuICAgIGN0eC50cmFuc2xhdGUoeCwgeSk7XG4gICAgZHJhd1Nwcml0ZShjdHgsIHNwcml0ZTIsIDAsIDAsIHBpcGVXaWR0aCwgc3ByaXRlMkhlaWdodClcbiAgICBjdHgucmVzdG9yZSgpO1xuICB9KVxufVxuXG5mdW5jdGlvbiByZW5kZXIoe3dvcmxkLCBiaXJkLCBwaXBlc30pIHtcbiAgaWYod29ybGQucnVubmluZyAhPT0gcnVubmluZykge1xuICAgIHVwZGF0ZVJ1bm5pbmdDbGFzcyh3b3JsZC5ydW5uaW5nKTtcbiAgICBydW5uaW5nID0gd29ybGQucnVubmluZztcbiAgfVxuXG4gIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgcmVuZGVyQmFja2dyb3VuZCh3b3JsZCk7XG4gIHJlbmRlclBpcGVzKHBpcGVzLCBiaXJkKTtcbiAgcmVuZGVyR3JvdW5kKGJpcmQpO1xuICByZW5kZXJCaXJkKHdvcmxkLCBiaXJkKTtcbn1cblxuXG5mdW5jdGlvbiByZW5kZXJGdXR1cmUoZnV0dXJlLCB7YmlyZH0pIHtcbiAgY3R4LnNhdmUoKVxuICBjdHguZ2xvYmFsQWxwaGEgPSAwLjM7XG5cbiAgY3R4LnRyYW5zbGF0ZShzY2FsZShmdXR1cmUuYmlyZC54IC0gYmlyZC54KSwgMCk7XG4gIHJlbmRlckJpcmQoZnV0dXJlLndvcmxkLCBmdXR1cmUuYmlyZClcblxuICBjdHgucmVzdG9yZSgpXG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVuZGVyO1xubW9kdWxlLmV4cG9ydHMucmVuZGVyRnV0dXJlID0gcmVuZGVyRnV0dXJlO1xuXG5yZXF1aXJlKCcuL2hvdFJlcGxhY2VOb3RpZmllcicpKCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvcmVuZGVyLmpzXG4gKiovIiwiaW1wb3J0IGV4dGVuZCBmcm9tICdleHRlbmQnO1xuaW1wb3J0IHNldCBmcm9tICdsb2Rhc2guc2V0JztcbmltcG9ydCB7V09STERfSEVJR0hUfSBmcm9tICcuL2NvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsV29ybGQgPSB7XG4gIHJ1bm5pbmc6IGZhbHNlLFxuICB0aWNrOiAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVXb3JsZCh3b3JsZCwgW2lucHV0LCBvdXRwdXRdKSB7XG4gIGNvbnN0IG5ld1dvcmxkID0ge1xuICAgIHJ1bm5pbmc6IHdvcmxkLnJ1bm5pbmcsXG4gICAgdGljazogd29ybGQudGljayArIDFcbiAgfTtcblxuICBpZighbmV3V29ybGQucnVubmluZyAmJiBpbnB1dC5jbGlja3MubGVuZ3RoID4gMCkge1xuICAgIG5ld1dvcmxkLnJ1bm5pbmcgPSB0cnVlO1xuICB9XG5cbiAgaWYobmV3V29ybGQucnVubmluZyAmJiBvdXRwdXQuZ2FtZUVuZHMpIHtcbiAgICBuZXdXb3JsZC5ydW5uaW5nID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gbmV3V29ybGQ7XG59O1xuXG5yZXF1aXJlKCcuL2hvdFJlcGxhY2VOb3RpZmllcicpKCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvd29ybGQuanNcbiAqKi8iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCdiYXNlNjQtanMnKVxudmFyIGllZWU3NTQgPSByZXF1aXJlKCdpZWVlNzU0JylcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXMtYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxudmFyIGtNYXhMZW5ndGggPSAweDNmZmZmZmZmXG52YXIgcm9vdFBhcmVudCA9IHt9XG5cbi8qKlxuICogSWYgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYDpcbiAqICAgPT09IHRydWUgICAgVXNlIFVpbnQ4QXJyYXkgaW1wbGVtZW50YXRpb24gKGZhc3Rlc3QpXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXG4gKlxuICogQnJvd3NlcnMgdGhhdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBhcmUgSUUgMTArLCBGaXJlZm94IDQrLCBDaHJvbWUgNyssIFNhZmFyaSA1LjErLFxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxuICpcbiAqIE5vdGU6XG4gKlxuICogLSBJbXBsZW1lbnRhdGlvbiBtdXN0IHN1cHBvcnQgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMuXG4gKiAgIEZpcmVmb3ggNC0yOSBsYWNrZWQgc3VwcG9ydCwgZml4ZWQgaW4gRmlyZWZveCAzMCsuXG4gKiAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxuICogICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG4gKlxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXkgd2lsbFxuICogZ2V0IHRoZSBPYmplY3QgaW1wbGVtZW50YXRpb24sIHdoaWNoIGlzIHNsb3dlciBidXQgd2lsbCB3b3JrIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSAoZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIoMClcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKVxuICAgIGFyci5mb28gPSBmdW5jdGlvbiAoKSB7IHJldHVybiA0MiB9XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDIgJiYgLy8gdHlwZWQgYXJyYXkgaW5zdGFuY2VzIGNhbiBiZSBhdWdtZW50ZWRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgbmV3IFVpbnQ4QXJyYXkoMSkuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn0pKClcblxuLyoqXG4gKiBDbGFzczogQnVmZmVyXG4gKiA9PT09PT09PT09PT09XG4gKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG4gKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2VcbiAqIGBVaW50OEFycmF5YCBzbyB0aGF0IHNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0IHJldHVybnNcbiAqIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIEJ5IGF1Z21lbnRpbmcgdGhlIGluc3RhbmNlcywgd2UgY2FuIGF2b2lkIG1vZGlmeWluZyB0aGUgYFVpbnQ4QXJyYXlgXG4gKiBwcm90b3R5cGUuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICB0aGlzLmxlbmd0aCA9IDBcbiAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGZyb21OdW1iZXIodGhpcywgYXJnKVxuICB9XG5cbiAgLy8gU2xpZ2h0bHkgbGVzcyBjb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhpcywgYXJnLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICd1dGY4JylcbiAgfVxuXG4gIC8vIFVudXN1YWwuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoaXMsIGFyZylcbn1cblxuZnVuY3Rpb24gZnJvbU51bWJlciAodGhhdCwgbGVuZ3RoKSB7XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGggPCAwID8gMCA6IGNoZWNrZWQobGVuZ3RoKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgZW5jb2RpbmcgPSAndXRmOCdcblxuICAvLyBBc3N1bXB0aW9uOiBieXRlTGVuZ3RoKCkgcmV0dXJuIHZhbHVlIGlzIGFsd2F5cyA8IGtNYXhMZW5ndGguXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSkgcmV0dXJuIGZyb21CdWZmZXIodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChpc0FycmF5KG9iamVjdCkpIHJldHVybiBmcm9tQXJyYXkodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIG9iamVjdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpXG4gIH1cblxuICBpZiAob2JqZWN0Lmxlbmd0aCkgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqZWN0KVxuXG4gIHJldHVybiBmcm9tSnNvbk9iamVjdCh0aGF0LCBvYmplY3QpXG59XG5cbmZ1bmN0aW9uIGZyb21CdWZmZXIgKHRoYXQsIGJ1ZmZlcikge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChidWZmZXIubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgYnVmZmVyLmNvcHkodGhhdCwgMCwgMCwgbGVuZ3RoKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEdXBsaWNhdGUgb2YgZnJvbUFycmF5KCkgdG8ga2VlcCBmcm9tQXJyYXkoKSBtb25vbW9ycGhpYy5cbmZ1bmN0aW9uIGZyb21UeXBlZEFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICAvLyBUcnVuY2F0aW5nIHRoZSBlbGVtZW50cyBpcyBwcm9iYWJseSBub3Qgd2hhdCBwZW9wbGUgZXhwZWN0IGZyb20gdHlwZWRcbiAgLy8gYXJyYXlzIHdpdGggQllURVNfUEVSX0VMRU1FTlQgPiAxIGJ1dCBpdCdzIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3JcbiAgLy8gb2YgdGhlIG9sZCBCdWZmZXIgY29uc3RydWN0b3IuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC5cbi8vIFJldHVybnMgYSB6ZXJvLWxlbmd0aCBidWZmZXIgZm9yIGlucHV0cyB0aGF0IGRvbid0IGNvbmZvcm0gdG8gdGhlIHNwZWMuXG5mdW5jdGlvbiBmcm9tSnNvbk9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIHZhciBhcnJheVxuICB2YXIgbGVuZ3RoID0gMFxuXG4gIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHtcbiAgICBhcnJheSA9IG9iamVjdC5kYXRhXG4gICAgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB9XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoYXQuX2lzQnVmZmVyID0gdHJ1ZVxuICB9XG5cbiAgdmFyIGZyb21Qb29sID0gbGVuZ3RoICE9PSAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUgPj4+IDFcbiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgudG9TdHJpbmcoMTYpICsgJyBieXRlcycpXG4gIH1cbiAgcmV0dXJuIGxlbmd0aCB8IDBcbn1cblxuZnVuY3Rpb24gU2xvd0J1ZmZlciAoc3ViamVjdCwgZW5jb2RpbmcpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNsb3dCdWZmZXIpKSByZXR1cm4gbmV3IFNsb3dCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoc3ViamVjdCwgZW5jb2RpbmcpXG4gIGRlbGV0ZSBidWYucGFyZW50XG4gIHJldHVybiBidWZcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIHZhciBpID0gMFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICBpZiAoYVtpXSAhPT0gYltpXSkgYnJlYWtcblxuICAgICsraVxuICB9XG5cbiAgaWYgKGkgIT09IGxlbikge1xuICAgIHggPSBhW2ldXG4gICAgeSA9IGJbaV1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuQnVmZmVyLmlzRW5jb2RpbmcgPSBmdW5jdGlvbiBpc0VuY29kaW5nIChlbmNvZGluZykge1xuICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xuICAgIGNhc2UgJ2hleCc6XG4gICAgY2FzZSAndXRmOCc6XG4gICAgY2FzZSAndXRmLTgnOlxuICAgIGNhc2UgJ2FzY2lpJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAncmF3JzpcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1Y3MtMic6XG4gICAgY2FzZSAndXRmMTZsZSc6XG4gICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgcmV0dXJuIHRydWVcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuQnVmZmVyLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCAobGlzdCwgbGVuZ3RoKSB7XG4gIGlmICghaXNBcnJheShsaXN0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcignbGlzdCBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMuJylcblxuICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcigwKVxuICB9IGVsc2UgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGxpc3RbMF1cbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSBTdHJpbmcoc3RyaW5nKVxuXG4gIGlmIChzdHJpbmcubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIHN3aXRjaCAoZW5jb2RpbmcgfHwgJ3V0ZjgnKSB7XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAncmF3JzpcbiAgICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiBzdHJpbmcubGVuZ3RoICogMlxuICAgIGNhc2UgJ2hleCc6XG4gICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aCA+Pj4gMVxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gc3RyaW5nLmxlbmd0aFxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbkJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG5CdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZFxuXG4vLyB0b1N0cmluZyhlbmNvZGluZywgc3RhcnQ9MCwgZW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCB8IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMFxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG4gIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJ1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gMFxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7XG4gIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgYnl0ZU9mZnNldCA+Pj0gMFxuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG4gIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTFcblxuICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMClcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlsc1xuICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIFsgdmFsIF0sIGJ5dGVPZmZzZXQpXG4gIH1cblxuICBmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0KSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFycltieXRlT2Zmc2V0ICsgaV0gPT09IHZhbFtmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleF0pIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTFcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbi8vIGBnZXRgIHdpbGwgYmUgcmVtb3ZlZCBpbiBOb2RlIDAuMTMrXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCB3aWxsIGJlIHJlbW92ZWQgaW4gTm9kZSAwLjEzK1xuQnVmZmVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiBzZXQgKHYsIG9mZnNldCkge1xuICBjb25zb2xlLmxvZygnLnNldCgpIGlzIGRlcHJlY2F0ZWQuIEFjY2VzcyB1c2luZyBhcnJheSBpbmRleGVzIGluc3RlYWQuJylcbiAgcmV0dXJuIHRoaXMud3JpdGVVSW50OCh2LCBvZmZzZXQpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcblxuICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xuICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlSW50KHN0cmluZy5zdWJzdHIoaSAqIDIsIDIpLCAxNilcbiAgICBpZiAoaXNOYU4ocGFyc2VkKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIHV0ZjhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihhc2NpaVRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmluYXJ5V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYXNjaWlXcml0ZShidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJhc2U2NFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGYxNmxlVG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gd3JpdGUgKHN0cmluZywgb2Zmc2V0LCBsZW5ndGgsIGVuY29kaW5nKSB7XG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcpXG4gIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgb2Zmc2V0WywgbGVuZ3RoXVssIGVuY29kaW5nXSlcbiAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XG4gICAgICBsZW5ndGggPSBsZW5ndGggfCAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgLy8gbGVnYWN5IHdyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldCwgbGVuZ3RoKSAtIHJlbW92ZSBpbiB2MC4xM1xuICB9IGVsc2Uge1xuICAgIHZhciBzd2FwID0gZW5jb2RpbmdcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIG9mZnNldCA9IGxlbmd0aCB8IDBcbiAgICBsZW5ndGggPSBzd2FwXG4gIH1cblxuICB2YXIgcmVtYWluaW5nID0gdGhpcy5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXG5cbiAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXMgPSAnJ1xuICB2YXIgdG1wID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgaWYgKGJ1ZltpXSA8PSAweDdGKSB7XG4gICAgICByZXMgKz0gZGVjb2RlVXRmOENoYXIodG1wKSArIFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICAgICAgdG1wID0gJydcbiAgICB9IGVsc2Uge1xuICAgICAgdG1wICs9ICclJyArIGJ1ZltpXS50b1N0cmluZygxNilcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzICsgZGVjb2RlVXRmOENoYXIodG1wKVxufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gdmFsdWVcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9IHZhbHVlXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSB2YWx1ZVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcblxuICBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZCwgd2lsbCBiZSByZW1vdmVkIGluIG5vZGUgMC4xMytcbiAgYXJyLmdldCA9IEJQLmdldFxuICBhcnIuc2V0ID0gQlAuc2V0XG5cbiAgYXJyLndyaXRlID0gQlAud3JpdGVcbiAgYXJyLnRvU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvTG9jYWxlU3RyaW5nID0gQlAudG9TdHJpbmdcbiAgYXJyLnRvSlNPTiA9IEJQLnRvSlNPTlxuICBhcnIuZXF1YWxzID0gQlAuZXF1YWxzXG4gIGFyci5jb21wYXJlID0gQlAuY29tcGFyZVxuICBhcnIuaW5kZXhPZiA9IEJQLmluZGV4T2ZcbiAgYXJyLmNvcHkgPSBCUC5jb3B5XG4gIGFyci5zbGljZSA9IEJQLnNsaWNlXG4gIGFyci5yZWFkVUludExFID0gQlAucmVhZFVJbnRMRVxuICBhcnIucmVhZFVJbnRCRSA9IEJQLnJlYWRVSW50QkVcbiAgYXJyLnJlYWRVSW50OCA9IEJQLnJlYWRVSW50OFxuICBhcnIucmVhZFVJbnQxNkxFID0gQlAucmVhZFVJbnQxNkxFXG4gIGFyci5yZWFkVUludDE2QkUgPSBCUC5yZWFkVUludDE2QkVcbiAgYXJyLnJlYWRVSW50MzJMRSA9IEJQLnJlYWRVSW50MzJMRVxuICBhcnIucmVhZFVJbnQzMkJFID0gQlAucmVhZFVJbnQzMkJFXG4gIGFyci5yZWFkSW50TEUgPSBCUC5yZWFkSW50TEVcbiAgYXJyLnJlYWRJbnRCRSA9IEJQLnJlYWRJbnRCRVxuICBhcnIucmVhZEludDggPSBCUC5yZWFkSW50OFxuICBhcnIucmVhZEludDE2TEUgPSBCUC5yZWFkSW50MTZMRVxuICBhcnIucmVhZEludDE2QkUgPSBCUC5yZWFkSW50MTZCRVxuICBhcnIucmVhZEludDMyTEUgPSBCUC5yZWFkSW50MzJMRVxuICBhcnIucmVhZEludDMyQkUgPSBCUC5yZWFkSW50MzJCRVxuICBhcnIucmVhZEZsb2F0TEUgPSBCUC5yZWFkRmxvYXRMRVxuICBhcnIucmVhZEZsb2F0QkUgPSBCUC5yZWFkRmxvYXRCRVxuICBhcnIucmVhZERvdWJsZUxFID0gQlAucmVhZERvdWJsZUxFXG4gIGFyci5yZWFkRG91YmxlQkUgPSBCUC5yZWFkRG91YmxlQkVcbiAgYXJyLndyaXRlVUludDggPSBCUC53cml0ZVVJbnQ4XG4gIGFyci53cml0ZVVJbnRMRSA9IEJQLndyaXRlVUludExFXG4gIGFyci53cml0ZVVJbnRCRSA9IEJQLndyaXRlVUludEJFXG4gIGFyci53cml0ZVVJbnQxNkxFID0gQlAud3JpdGVVSW50MTZMRVxuICBhcnIud3JpdGVVSW50MTZCRSA9IEJQLndyaXRlVUludDE2QkVcbiAgYXJyLndyaXRlVUludDMyTEUgPSBCUC53cml0ZVVJbnQzMkxFXG4gIGFyci53cml0ZVVJbnQzMkJFID0gQlAud3JpdGVVSW50MzJCRVxuICBhcnIud3JpdGVJbnRMRSA9IEJQLndyaXRlSW50TEVcbiAgYXJyLndyaXRlSW50QkUgPSBCUC53cml0ZUludEJFXG4gIGFyci53cml0ZUludDggPSBCUC53cml0ZUludDhcbiAgYXJyLndyaXRlSW50MTZMRSA9IEJQLndyaXRlSW50MTZMRVxuICBhcnIud3JpdGVJbnQxNkJFID0gQlAud3JpdGVJbnQxNkJFXG4gIGFyci53cml0ZUludDMyTEUgPSBCUC53cml0ZUludDMyTEVcbiAgYXJyLndyaXRlSW50MzJCRSA9IEJQLndyaXRlSW50MzJCRVxuICBhcnIud3JpdGVGbG9hdExFID0gQlAud3JpdGVGbG9hdExFXG4gIGFyci53cml0ZUZsb2F0QkUgPSBCUC53cml0ZUZsb2F0QkVcbiAgYXJyLndyaXRlRG91YmxlTEUgPSBCUC53cml0ZURvdWJsZUxFXG4gIGFyci53cml0ZURvdWJsZUJFID0gQlAud3JpdGVEb3VibGVCRVxuICBhcnIuZmlsbCA9IEJQLmZpbGxcbiAgYXJyLmluc3BlY3QgPSBCUC5pbnNwZWN0XG4gIGFyci50b0FycmF5QnVmZmVyID0gQlAudG9BcnJheUJ1ZmZlclxuXG4gIHJldHVybiBhcnJcbn1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtelxcLV0vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG4gIHZhciBpID0gMFxuXG4gIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgICAgICBjb2RlUG9pbnQgPSBsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwIHwgMHgxMDAwMFxuICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG5cbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgICB9XG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDIwMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiBkZWNvZGVVdGY4Q2hhciAoc3RyKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzdHIpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkZGRCkgLy8gVVRGIDggaW52YWxpZCBjaGFyXG4gIH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKCl7XG4gIHZhciBpbml0LCBCYWNvbjtcbiAgaW5pdCA9IGZ1bmN0aW9uKEJhY29uKXtcbiAgICB2YXIgY2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsIHNjaGVkdWxlRnJhbWU7XG4gICAgY2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgfHwgd2luZG93LndlYmtpdENhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cubW96Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5vQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tc0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBjbGVhclRpbWVvdXQ7XG4gICAgfSgpO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKCl7XG4gICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgd2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGZ1bmN0aW9uKGNiKXtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoY2IsIDEwMDAgLyA2MCk7XG4gICAgICB9O1xuICAgIH0oKTtcbiAgICBzY2hlZHVsZUZyYW1lID0gZnVuY3Rpb24oY2Ipe1xuICAgICAgcmV0dXJuIChmdW5jdGlvbigpe1xuICAgICAgICBmdW5jdGlvbiBhbmltTG9vcCh5KXtcbiAgICAgICAgICBjYih5KTtcbiAgICAgICAgICByZXR1cm4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uKHgpe1xuICAgICAgICAgICAgcmV0dXJuIGFuaW1Mb29wKHgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhbmltTG9vcDtcbiAgICAgIH0oKSkoKTtcbiAgICB9O1xuICAgIEJhY29uLnNjaGVkdWxlQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIEJhY29uLmZyb21CaW5kZXIoZnVuY3Rpb24oaGFuZGxlcil7XG4gICAgICAgIHZhciBpZDtcbiAgICAgICAgaWQgPSBzY2hlZHVsZUZyYW1lKGhhbmRsZXIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKXtcbiAgICAgICAgICByZXR1cm4gY2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lKGlkKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgQmFjb24ucmVwZWF0ZWRseU9uRnJhbWUgPSBmdW5jdGlvbih2YWx1ZXMsIGRpdmlzb3Ipe1xuICAgICAgdmFyIGluZGV4O1xuICAgICAgZGl2aXNvciA9PSBudWxsICYmIChkaXZpc29yID0gMSk7XG4gICAgICBpbmRleCA9IDA7XG4gICAgICByZXR1cm4gQmFjb24uc2NoZWR1bGVBbmltYXRpb25GcmFtZSgpLnNjYW4oMCwgKGZ1bmN0aW9uKGl0KXtcbiAgICAgICAgcmV0dXJuIGl0ICsgMTtcbiAgICAgIH0pKS5maWx0ZXIoZnVuY3Rpb24odGljayl7XG4gICAgICAgIHJldHVybiAhKHRpY2sgJSBkaXZpc29yKTtcbiAgICAgIH0pLm1hcChmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gdmFsdWVzW2luZGV4KysgJSB2YWx1ZXMubGVuZ3RoXTtcbiAgICAgIH0pLnRvRXZlbnRTdHJlYW0oKTtcbiAgICB9O1xuICAgIHJldHVybiBCYWNvbjtcbiAgfTtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlICE9PSBudWxsKSB7XG4gICAgQmFjb24gPSByZXF1aXJlKFwiYmFjb25qc1wiKTtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGluaXQoQmFjb24pO1xuICB9IGVsc2Uge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgZGVmaW5lKFtcImJhY29uXCJdLCBpbml0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5pdCh0aGlzLkJhY29uKTtcbiAgICB9XG4gIH1cbn0pLmNhbGwodGhpcyk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWNvbi5hbmltYXRpb25mcmFtZS9kaXN0L2JhY29uLmFuaW1hdGlvbkZyYW1lLmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbigpe1xuICAgIHZhciBiYWNvbiA9IHJlcXVpcmUoJy4vbGliL2JhY29uJyk7XG4gICAgXG4gICAgZXhwb3J0cy51c2luZyA9IGJhY29uLnVzaW5nO1xuICAgIGV4cG9ydHMudG8gPSBiYWNvbi50bztcblxufSkoKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhY29uL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbigpIHtcblxuICAgIHZhciBfaW5kZXhPZiA9IGZ1bmN0aW9uKGJ1ZmZlciwgcGF0dGVybiwgaSkge1xuXHR2YXIgbGVuZ3RoLCBnb29kO1xuXG5cdGlmICggIUJ1ZmZlci5pc0J1ZmZlcihwYXR0ZXJuKSApICBwYXR0ZXJuID0gbmV3KEJ1ZmZlcikocGF0dGVybik7XG5cdGlmICggdHlwZW9mIGkgPT0gJ3VuZGVmaW5lZCcgKSBpID0gMDtcblxuXHR2YXIgbGVuZ3RoID0gYnVmZmVyLmxlbmd0aCAtIHBhdHRlcm4ubGVuZ3RoO1xuXHR3aGlsZSAoIGkgPD0gbGVuZ3RoICkge1xuXHQgICAgZ29vZCA9IHRydWU7XG5cdCAgICBcblx0ICAgIGZvciAoIHZhciBqID0gMDsgaiA8IHBhdHRlcm4ubGVuZ3RoOyBqKysgKSB7XG5cdFx0aWYgKCBidWZmZXJbaStqIF0gIT09IHBhdHRlcm5bal0gKSB7XG5cdFx0ICAgIGdvb2QgPSBmYWxzZTtcblx0XHQgICAgYnJlYWs7XG5cdFx0fVxuXHQgICAgfVxuXHQgICAgXG5cdCAgICBpZiAoIGdvb2QgKSByZXR1cm4gaTtcblx0ICAgIGkrKztcblx0fVxuXHRcblx0cmV0dXJuIC0xO1xuXG4gICAgfTtcblxuXG4gICAgdmFyIF9jb25jYXQgPSBmdW5jdGlvbihidWZmZXJzKSB7XG5cdHZhciBfYnVmZmVycyA9IFtdO1xuXHRidWZmZXJzLmZvckVhY2goZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgICBpZiAoICFCdWZmZXIuaXNCdWZmZXIoYnVmZmVyKSApIHtcblx0XHRidWZmZXIgPSBuZXcoQnVmZmVyKShidWZmZXIpO1xuXHQgICAgfVxuXG5cdCAgICBfYnVmZmVycy5wdXNoKGJ1ZmZlcik7XG5cblx0fSk7XG5cblx0cmV0dXJuIEJ1ZmZlci5jb25jYXQoX2J1ZmZlcnMpO1xuXG4gICAgfTtcblxuICAgIFxuICAgIHZhciB0byA9IGZ1bmN0aW9uKG9iaikgeyBcblx0aWYgKCAhQXJyYXkuaXNBcnJheShvYmopICkge1xuXHQgICAgb2JqID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0fVxuXG5cdHJldHVybiBuZXcgdG9fd3JhcHBlcihvYmopOyBcblxuICAgIH07XG5cbiAgICB2YXIgdG9fd3JhcHBlciA9IGZ1bmN0aW9uKG9iaikgeyB0aGlzLl93cmFwcGVkID0gb2JqOyB9O1xuXG4gICAgdG9fd3JhcHBlci5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24oYnVmZmVycykge1xuXHRpZiAoICFBcnJheS5pc0FycmF5KGJ1ZmZlcnMpICkge1xuXHQgICAgYnVmZmVycyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG5cdH1cblxuXHR2YXIgX2J1ZmZlcnMgPSBbXTtcblx0dGhpcy5fd3JhcHBlZC5mb3JFYWNoKGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgICAgX2J1ZmZlcnMucHVzaChfY29uY2F0KFtidWZmZXJdLmNvbmNhdChidWZmZXJzKSkpO1xuXG5cdH0pO1xuXG5cdHJldHVybiBfYnVmZmVycztcblxuICAgIH07XG5cblxuICAgIHRvX3dyYXBwZXIucHJvdG90eXBlLnByZXBlbmQgPSBmdW5jdGlvbihidWZmZXJzKSB7XG5cdGlmICggIUFycmF5LmlzQXJyYXkoYnVmZmVycykgKSB7XG5cdCAgICBidWZmZXJzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcblx0fVxuXG5cdHZhciBfYnVmZmVycyA9IFtdO1xuXHR0aGlzLl93cmFwcGVkLmZvckVhY2goZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgICBfYnVmZmVycy5wdXNoKF9jb25jYXQoYnVmZmVycy5jb25jYXQoYnVmZmVyKSkpO1xuXG5cdH0pO1xuXG5cdHJldHVybiBfYnVmZmVycztcblxuICAgIH07XG5cblxuICAgIHZhciB1c2luZyA9IGZ1bmN0aW9uKG9iaikge1xuXHRyZXR1cm4gbmV3IHVzaW5nX3dyYXBwZXIob2JqKTtcbiAgICB9O1xuXG5cbiAgICB2YXIgdXNpbmdfd3JhcHBlciA9IGZ1bmN0aW9uKG9iaikgeyB0aGlzLl93cmFwcGVkID0gb2JqOyB9O1xuXG4gICAgdXNpbmdfd3JhcHBlci5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbihidWZmZXIpIHtcblx0dmFyIHBhdHRlcm4gPSB0aGlzLl93cmFwcGVkLCBidWZmZXJzID0gW107XG5cdHZhciBfYnVmZmVyLCBpID0gMCwgaiA9IDA7XG5cblx0aWYgKCAhQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcikgKSB7XG5cdCAgICBidWZmZXIgPSBuZXcoQnVmZmVyKShidWZmZXIpO1xuXHR9XG5cblx0d2hpbGUgKCBpID4gLTEgKSB7XG5cdCAgICBpID0gX2luZGV4T2YoYnVmZmVyLCBwYXR0ZXJuLCBqKTtcblx0ICAgIGlmICggaSA9PSAtMSApIHtcblx0XHRidWZmZXJzLnB1c2goYnVmZmVyLnNsaWNlKGopKTtcblx0XHRicmVhaztcblx0ICAgIH0gXG5cblx0ICAgIF9idWZmZXIgPSBidWZmZXIuc2xpY2UoaiwgaSk7XG5cdCAgICBidWZmZXJzLnB1c2goX2J1ZmZlcik7XG5cdCAgICBqICs9IChfYnVmZmVyLmxlbmd0aCtwYXR0ZXJuLmxlbmd0aCk7XG5cblx0fVxuXG5cdHJldHVybiAoIGJ1ZmZlcnMubGVuZ3RoID4gMCApPyBidWZmZXJzIDogW2J1ZmZlcl07XG5cbiAgICB9O1xuXG4gICAgdXNpbmdfd3JhcHBlci5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uKGJ1ZmZlcnMpIHtcblx0aWYgKCAhQXJyYXkuaXNBcnJheShidWZmZXJzKSApIHtcblx0ICAgIGJ1ZmZlcnMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuXHR9XG5cdFxuXHR2YXIgZ2x1ZSA9IHRoaXMuX3dyYXBwZWQsIF9idWZmZXJzID0gW107XG5cdGJ1ZmZlcnMuZm9yRWFjaChmdW5jdGlvbihidWZmZXIpIHtcblx0ICAgIF9idWZmZXJzLnB1c2goYnVmZmVyKTtcblx0ICAgIGlmICggX2J1ZmZlcnMubGVuZ3RoIDwgYnVmZmVycy5sZW5ndGgrKGJ1ZmZlcnMubGVuZ3RoLTEpICl7XG5cdFx0X2J1ZmZlcnMucHVzaChnbHVlKTtcblx0XHRyZXR1cm47XG5cdCAgICB9XG5cblx0fSk7XG5cblx0cmV0dXJuIF9jb25jYXQoX2J1ZmZlcnMpO1xuICAgIH07XG4gICAgXG5cbiAgICBleHBvcnRzLnVzaW5nID0gdXNpbmc7XG4gICAgZXhwb3J0cy50byA9IHRvO1xuXG59KSgpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhY29uL2xpYi9iYWNvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xyXG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xyXG5cdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBpdGVtWzFdICsgXCJ9XCIpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIvY3NzVG9TdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi9Vc2Vycy9yaWt1L0NvZGUvZmxhcHB5LWJpcmQvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvY3NzVG9TdHJpbmcuanNcIikoKTtcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImh0bWwsYm9keSwjYXBwLCNnYW1le3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7bWFyZ2luOjA7b3ZlcmZsb3c6aGlkZGVufSNhcHB7Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmctYm90dG9tOjEwMHB4fSNjb250cm9sc3t3aWR0aDoxMDAlO2hlaWdodDoxMDBweDtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206MDtsZWZ0OjB9Y2FudmFze2Rpc3BsYXk6YmxvY2s7aGVpZ2h0OjEwMCV9Y2FudmFzLCNmdXR1cmUtc2xpZGVye3dpZHRoOjEwMCV9LmZ1dHVyZS1zbGlkZXJ7bWFyZ2luLXRvcDotOXB4fVwiLCBcIlwiXSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL3NjcmlwdHMvc3R5bGUuY3NzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqL1xuXG52YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG5cbi8qKlxuICogQ29udmVydCBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGRlZ3JlZXNcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRlZ3JlZXMpIHtcbiAgYXNzZXJ0KCdudW1iZXInID09IHR5cGVvZiBkZWdyZWVzLCAnRGVncmVlcyBzaG91bGQgYmUgYSBudW1iZXInKTtcbiAgcmV0dXJuIGRlZ3JlZXMgKiAoTWF0aC5QSSAvIDE4MCk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9kZWdyZWVzLXJhZGlhbnMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy43LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBiYXNlR2V0ID0gcmVxdWlyZSgnbG9kYXNoLl9iYXNlZ2V0JyksXG4gICAgdG9QYXRoID0gcmVxdWlyZSgnbG9kYXNoLl90b3BhdGgnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBwcm9wZXJ0eSB2YWx1ZSBvZiBgcGF0aGAgb24gYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuICogYHVuZGVmaW5lZGAgdGhlIGBkZWZhdWx0VmFsdWVgIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgaWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzIGB1bmRlZmluZWRgLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICogLy8gPT4gJ2RlZmF1bHQnXG4gKi9cbmZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgdG9QYXRoKHBhdGgpLCBwYXRoICsgJycpO1xuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLmdldC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjcuMiAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RyaW5nIHBhdGhzXG4gKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbcGF0aEtleV0gVGhlIGtleSByZXByZXNlbnRhdGlvbiBvZiBwYXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcbiAgICBwYXRoID0gW3BhdGhLZXldO1xuICB9XG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG4gIH1cbiAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gdG9PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdCgxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG4gIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLmdldC9+L2xvZGFzaC5fYmFzZWdldC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjguMCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdsb2Rhc2guaXNhcnJheScpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQgaXMgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIHByb3BlcnR5IHBhdGggYXJyYXkgaWYgaXQgaXMgbm90IG9uZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gdG9QYXRoKHZhbHVlKSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gW107XG4gIGJhc2VUb1N0cmluZyh2YWx1ZSkucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG4gICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1BhdGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2guZ2V0L34vbG9kYXNoLl90b3BhdGgvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjMgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgIFtzcGVjaWFsIGNoYXJhY3RlcnNdKGh0dHA6Ly93d3cucmVndWxhci1leHByZXNzaW9ucy5pbmZvL2NoYXJhY3RlcnMuaHRtbCNzcGVjaWFsKS5cbiAqIEluIGFkZGl0aW9uIHRvIHNwZWNpYWwgY2hhcmFjdGVycyB0aGUgZm9yd2FyZCBzbGFzaCBpcyBlc2NhcGVkIHRvIGFsbG93IGZvclxuICogZWFzaWVyIGBldmFsYCB1c2UgYW5kIGBGdW5jdGlvbmAgY29tcGlsYXRpb24uXG4gKi9cbnZhciByZVJlZ0V4cENoYXJzID0gL1suKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nLFxuICAgIHJlSGFzUmVnRXhwQ2hhcnMgPSBSZWdFeHAocmVSZWdFeHBDaGFycy5zb3VyY2UpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHN0cmluZyBpZiBpdCdzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmblRvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGVzY2FwZVJlZ0V4cChmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xufTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc05hdGl2ZShfKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnKSB7XG4gICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcbiAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuICogLy8gPT4gJ1xcW2xvZGFzaFxcXVxcKGh0dHBzOlxcL1xcL2xvZGFzaFxcLmNvbVxcL1xcKSdcbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLmdldC9+L2xvZGFzaC5fdG9wYXRoL34vbG9kYXNoLmlzYXJyYXkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4xLjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMiA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBjcmVhdGVXcmFwcGVyID0gcmVxdWlyZSgnbG9kYXNoLl9jcmVhdGV3cmFwcGVyJyksXG4gICAgcmVwbGFjZUhvbGRlcnMgPSByZXF1aXJlKCdsb2Rhc2guX3JlcGxhY2Vob2xkZXJzJyksXG4gICAgcmVzdFBhcmFtID0gcmVxdWlyZSgnbG9kYXNoLnJlc3RwYXJhbScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciB3cmFwcGVyIG1ldGFkYXRhLiAqL1xudmFyIFBBUlRJQUxfUklHSFRfRkxBRyA9IDY0O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgXy5wYXJ0aWFsYCBvciBgXy5wYXJ0aWFsUmlnaHRgIGZ1bmN0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGZsYWcgVGhlIHBhcnRpYWwgYml0IGZsYWcuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBwYXJ0aWFsIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVQYXJ0aWFsKGZsYWcpIHtcbiAgdmFyIHBhcnRpYWxGdW5jID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIHBhcnRpYWxzKSB7XG4gICAgdmFyIGhvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhwYXJ0aWFscywgcGFydGlhbEZ1bmMucGxhY2Vob2xkZXIpO1xuICAgIHJldHVybiBjcmVhdGVXcmFwcGVyKGZ1bmMsIGZsYWcsIG51bGwsIHBhcnRpYWxzLCBob2xkZXJzKTtcbiAgfSk7XG4gIHJldHVybiBwYXJ0aWFsRnVuYztcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLnBhcnRpYWxgIGV4Y2VwdCB0aGF0IHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50c1xuICogYXJlIGFwcGVuZGVkIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gKlxuICogVGhlIGBfLnBhcnRpYWxSaWdodC5wbGFjZWhvbGRlcmAgdmFsdWUsIHdoaWNoIGRlZmF1bHRzIHRvIGBfYCBpbiBtb25vbGl0aGljXG4gKiBidWlsZHMsIG1heSBiZSB1c2VkIGFzIGEgcGxhY2Vob2xkZXIgZm9yIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgZG9lcyBub3Qgc2V0IHRoZSBgbGVuZ3RoYCBwcm9wZXJ0eSBvZiBwYXJ0aWFsbHlcbiAqIGFwcGxpZWQgZnVuY3Rpb25zLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gKiBAcGFyYW0gey4uLip9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHBhcnRpYWxseSBhcHBsaWVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgZ3JlZXQgPSBmdW5jdGlvbihncmVldGluZywgbmFtZSkge1xuICogICByZXR1cm4gZ3JlZXRpbmcgKyAnICcgKyBuYW1lO1xuICogfTtcbiAqXG4gKiB2YXIgZ3JlZXRGcmVkID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdmcmVkJyk7XG4gKiBncmVldEZyZWQoJ2hpJyk7XG4gKiAvLyA9PiAnaGkgZnJlZCdcbiAqXG4gKiAvLyB1c2luZyBwbGFjZWhvbGRlcnNcbiAqIHZhciBzYXlIZWxsb1RvID0gXy5wYXJ0aWFsUmlnaHQoZ3JlZXQsICdoZWxsbycsIF8pO1xuICogc2F5SGVsbG9UbygnZnJlZCcpO1xuICogLy8gPT4gJ2hlbGxvIGZyZWQnXG4gKi9cbnZhciBwYXJ0aWFsUmlnaHQgPSBjcmVhdGVQYXJ0aWFsKFBBUlRJQUxfUklHSFRfRkxBRyk7XG5cbi8vIEFzc2lnbiBkZWZhdWx0IHBsYWNlaG9sZGVycy5cbnBhcnRpYWxSaWdodC5wbGFjZWhvbGRlciA9IHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnRpYWxSaWdodDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wYXJ0aWFscmlnaHQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjYgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBhcnJheUNvcHkgPSByZXF1aXJlKCdsb2Rhc2guX2FycmF5Y29weScpLFxuICAgIGJhc2VDcmVhdGUgPSByZXF1aXJlKCdsb2Rhc2guX2Jhc2VjcmVhdGUnKSxcbiAgICByZXBsYWNlSG9sZGVycyA9IHJlcXVpcmUoJ2xvZGFzaC5fcmVwbGFjZWhvbGRlcnMnKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3Igd3JhcHBlciBtZXRhZGF0YS4gKi9cbnZhciBCSU5EX0ZMQUcgPSAxLFxuICAgIEJJTkRfS0VZX0ZMQUcgPSAyLFxuICAgIENVUlJZX0JPVU5EX0ZMQUcgPSA0LFxuICAgIENVUlJZX0ZMQUcgPSA4LFxuICAgIENVUlJZX1JJR0hUX0ZMQUcgPSAxNixcbiAgICBQQVJUSUFMX0ZMQUcgPSAzMixcbiAgICBQQVJUSUFMX1JJR0hUX0ZMQUcgPSA2NCxcbiAgICBBUllfRkxBRyA9IDEyODtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgdGhhdCBpcyB0aGUgY29tcG9zaXRpb24gb2YgcGFydGlhbGx5IGFwcGxpZWQgYXJndW1lbnRzLFxuICogcGxhY2Vob2xkZXJzLCBhbmQgcHJvdmlkZWQgYXJndW1lbnRzIGludG8gYSBzaW5nbGUgYXJyYXkgb2YgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkLlxuICogQHBhcmFtIHtBcnJheX0gaG9sZGVycyBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2YgY29tcG9zZWQgYXJndW1lbnRzLlxuICovXG5mdW5jdGlvbiBjb21wb3NlQXJncyhhcmdzLCBwYXJ0aWFscywgaG9sZGVycykge1xuICB2YXIgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuICAgICAgYXJnc0luZGV4ID0gLTEsXG4gICAgICBhcmdzTGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgIGxlZnRMZW5ndGggPSBwYXJ0aWFscy5sZW5ndGgsXG4gICAgICByZXN1bHQgPSBBcnJheShhcmdzTGVuZ3RoICsgbGVmdExlbmd0aCk7XG5cbiAgd2hpbGUgKCsrbGVmdEluZGV4IDwgbGVmdExlbmd0aCkge1xuICAgIHJlc3VsdFtsZWZ0SW5kZXhdID0gcGFydGlhbHNbbGVmdEluZGV4XTtcbiAgfVxuICB3aGlsZSAoKythcmdzSW5kZXggPCBob2xkZXJzTGVuZ3RoKSB7XG4gICAgcmVzdWx0W2hvbGRlcnNbYXJnc0luZGV4XV0gPSBhcmdzW2FyZ3NJbmRleF07XG4gIH1cbiAgd2hpbGUgKGFyZ3NMZW5ndGgtLSkge1xuICAgIHJlc3VsdFtsZWZ0SW5kZXgrK10gPSBhcmdzW2FyZ3NJbmRleCsrXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgbGlrZSBgY29tcG9zZUFyZ3NgIGV4Y2VwdCB0aGF0IHRoZSBhcmd1bWVudHMgY29tcG9zaXRpb25cbiAqIGlzIHRhaWxvcmVkIGZvciBgXy5wYXJ0aWFsUmlnaHRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gYXJncyBUaGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICogQHBhcmFtIHtBcnJheX0gcGFydGlhbHMgVGhlIGFyZ3VtZW50cyB0byBhcHBlbmQgdG8gdGhvc2UgcHJvdmlkZWQuXG4gKiBAcGFyYW0ge0FycmF5fSBob2xkZXJzIFRoZSBgcGFydGlhbHNgIHBsYWNlaG9sZGVyIGluZGV4ZXMuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG5ldyBhcnJheSBvZiBjb21wb3NlZCBhcmd1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2VBcmdzUmlnaHQoYXJncywgcGFydGlhbHMsIGhvbGRlcnMpIHtcbiAgdmFyIGhvbGRlcnNJbmRleCA9IC0xLFxuICAgICAgaG9sZGVyc0xlbmd0aCA9IGhvbGRlcnMubGVuZ3RoLFxuICAgICAgYXJnc0luZGV4ID0gLTEsXG4gICAgICBhcmdzTGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gaG9sZGVyc0xlbmd0aCwgMCksXG4gICAgICByaWdodEluZGV4ID0gLTEsXG4gICAgICByaWdodExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgIHJlc3VsdCA9IEFycmF5KGFyZ3NMZW5ndGggKyByaWdodExlbmd0aCk7XG5cbiAgd2hpbGUgKCsrYXJnc0luZGV4IDwgYXJnc0xlbmd0aCkge1xuICAgIHJlc3VsdFthcmdzSW5kZXhdID0gYXJnc1thcmdzSW5kZXhdO1xuICB9XG4gIHZhciBvZmZzZXQgPSBhcmdzSW5kZXg7XG4gIHdoaWxlICgrK3JpZ2h0SW5kZXggPCByaWdodExlbmd0aCkge1xuICAgIHJlc3VsdFtvZmZzZXQgKyByaWdodEluZGV4XSA9IHBhcnRpYWxzW3JpZ2h0SW5kZXhdO1xuICB9XG4gIHdoaWxlICgrK2hvbGRlcnNJbmRleCA8IGhvbGRlcnNMZW5ndGgpIHtcbiAgICByZXN1bHRbb2Zmc2V0ICsgaG9sZGVyc1tob2xkZXJzSW5kZXhdXSA9IGFyZ3NbYXJnc0luZGV4KytdO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIGB0aGlzYFxuICogYmluZGluZyBvZiBgdGhpc0FyZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJpbmQuXG4gKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYm91bmQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJpbmRXcmFwcGVyKGZ1bmMsIHRoaXNBcmcpIHtcbiAgdmFyIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgIHZhciBmbiA9ICh0aGlzICYmIHRoaXMgIT09IGdsb2JhbCAmJiB0aGlzIGluc3RhbmNlb2Ygd3JhcHBlcikgPyBDdG9yIDogZnVuYztcbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgfVxuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBwcm9kdWNlcyBhbiBpbnN0YW5jZSBvZiBgQ3RvcmAgcmVnYXJkbGVzcyBvZlxuICogd2hldGhlciBpdCB3YXMgaW52b2tlZCBhcyBwYXJ0IG9mIGEgYG5ld2AgZXhwcmVzc2lvbiBvciBieSBgY2FsbGAgb3IgYGFwcGx5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gQ3RvciBUaGUgY29uc3RydWN0b3IgdG8gd3JhcC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUN0b3JXcmFwcGVyKEN0b3IpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIC8vIFVzZSBhIGBzd2l0Y2hgIHN0YXRlbWVudCB0byB3b3JrIHdpdGggY2xhc3MgY29uc3RydWN0b3JzLlxuICAgIC8vIFNlZSBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZWNtYXNjcmlwdC1mdW5jdGlvbi1vYmplY3RzLWNhbGwtdGhpc2FyZ3VtZW50LWFyZ3VtZW50c2xpc3RcbiAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDogcmV0dXJuIG5ldyBDdG9yO1xuICAgICAgY2FzZSAxOiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSk7XG4gICAgICBjYXNlIDI6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgIGNhc2UgMzogcmV0dXJuIG5ldyBDdG9yKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgY2FzZSA0OiByZXR1cm4gbmV3IEN0b3IoYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSwgYXJnc1szXSk7XG4gICAgICBjYXNlIDU6IHJldHVybiBuZXcgQ3RvcihhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcbiAgICB9XG4gICAgdmFyIHRoaXNCaW5kaW5nID0gYmFzZUNyZWF0ZShDdG9yLnByb3RvdHlwZSksXG4gICAgICAgIHJlc3VsdCA9IEN0b3IuYXBwbHkodGhpc0JpbmRpbmcsIGFyZ3MpO1xuXG4gICAgLy8gTWltaWMgdGhlIGNvbnN0cnVjdG9yJ3MgYHJldHVybmAgYmVoYXZpb3IuXG4gICAgLy8gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDEzLjIuMiBmb3IgbW9yZSBkZXRhaWxzLlxuICAgIHJldHVybiBpc09iamVjdChyZXN1bHQpID8gcmVzdWx0IDogdGhpc0JpbmRpbmc7XG4gIH07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggb3B0aW9uYWwgYHRoaXNgXG4gKiBiaW5kaW5nIG9mLCBwYXJ0aWFsIGFwcGxpY2F0aW9uLCBhbmQgY3VycnlpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb258c3RyaW5nfSBmdW5jIFRoZSBmdW5jdGlvbiBvciBtZXRob2QgbmFtZSB0byByZWZlcmVuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy4gU2VlIGBjcmVhdGVXcmFwcGVyYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBwcmVwZW5kIHRvIHRob3NlIHByb3ZpZGVkIHRvIHRoZSBuZXcgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5fSBbaG9sZGVyc10gVGhlIGBwYXJ0aWFsc2AgcGxhY2Vob2xkZXIgaW5kZXhlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc1JpZ2h0XSBUaGUgYXJndW1lbnRzIHRvIGFwcGVuZCB0byB0aG9zZSBwcm92aWRlZCB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBcnJheX0gW2hvbGRlcnNSaWdodF0gVGhlIGBwYXJ0aWFsc1JpZ2h0YCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICogQHBhcmFtIHtBcnJheX0gW2FyZ1Bvc10gVGhlIGFyZ3VtZW50IHBvc2l0aW9ucyBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUh5YnJpZFdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5KSB7XG4gIHZhciBpc0FyeSA9IGJpdG1hc2sgJiBBUllfRkxBRyxcbiAgICAgIGlzQmluZCA9IGJpdG1hc2sgJiBCSU5EX0ZMQUcsXG4gICAgICBpc0JpbmRLZXkgPSBiaXRtYXNrICYgQklORF9LRVlfRkxBRyxcbiAgICAgIGlzQ3VycnkgPSBiaXRtYXNrICYgQ1VSUllfRkxBRyxcbiAgICAgIGlzQ3VycnlCb3VuZCA9IGJpdG1hc2sgJiBDVVJSWV9CT1VORF9GTEFHLFxuICAgICAgaXNDdXJyeVJpZ2h0ID0gYml0bWFzayAmIENVUlJZX1JJR0hUX0ZMQUcsXG4gICAgICBDdG9yID0gaXNCaW5kS2V5ID8gbnVsbCA6IGNyZWF0ZUN0b3JXcmFwcGVyKGZ1bmMpO1xuXG4gIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgLy8gQXZvaWQgYGFyZ3VtZW50c2Agb2JqZWN0IHVzZSBkaXNxdWFsaWZ5aW5nIG9wdGltaXphdGlvbnMgYnlcbiAgICAvLyBjb252ZXJ0aW5nIGl0IHRvIGFuIGFycmF5IGJlZm9yZSBwcm92aWRpbmcgaXQgdG8gb3RoZXIgZnVuY3Rpb25zLlxuICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGxlbmd0aCxcbiAgICAgICAgYXJncyA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgYXJnc1tpbmRleF0gPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIH1cbiAgICBpZiAocGFydGlhbHMpIHtcbiAgICAgIGFyZ3MgPSBjb21wb3NlQXJncyhhcmdzLCBwYXJ0aWFscywgaG9sZGVycyk7XG4gICAgfVxuICAgIGlmIChwYXJ0aWFsc1JpZ2h0KSB7XG4gICAgICBhcmdzID0gY29tcG9zZUFyZ3NSaWdodChhcmdzLCBwYXJ0aWFsc1JpZ2h0LCBob2xkZXJzUmlnaHQpO1xuICAgIH1cbiAgICBpZiAoaXNDdXJyeSB8fCBpc0N1cnJ5UmlnaHQpIHtcbiAgICAgIHZhciBwbGFjZWhvbGRlciA9IHdyYXBwZXIucGxhY2Vob2xkZXIsXG4gICAgICAgICAgYXJnc0hvbGRlcnMgPSByZXBsYWNlSG9sZGVycyhhcmdzLCBwbGFjZWhvbGRlcik7XG5cbiAgICAgIGxlbmd0aCAtPSBhcmdzSG9sZGVycy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgYXJpdHkpIHtcbiAgICAgICAgdmFyIG5ld0FyZ1BvcyA9IGFyZ1BvcyA/IGFycmF5Q29weShhcmdQb3MpIDogbnVsbCxcbiAgICAgICAgICAgIG5ld0FyaXR5ID0gbmF0aXZlTWF4KGFyaXR5IC0gbGVuZ3RoLCAwKSxcbiAgICAgICAgICAgIG5ld3NIb2xkZXJzID0gaXNDdXJyeSA/IGFyZ3NIb2xkZXJzIDogbnVsbCxcbiAgICAgICAgICAgIG5ld0hvbGRlcnNSaWdodCA9IGlzQ3VycnkgPyBudWxsIDogYXJnc0hvbGRlcnMsXG4gICAgICAgICAgICBuZXdQYXJ0aWFscyA9IGlzQ3VycnkgPyBhcmdzIDogbnVsbCxcbiAgICAgICAgICAgIG5ld1BhcnRpYWxzUmlnaHQgPSBpc0N1cnJ5ID8gbnVsbCA6IGFyZ3M7XG5cbiAgICAgICAgYml0bWFzayB8PSAoaXNDdXJyeSA/IFBBUlRJQUxfRkxBRyA6IFBBUlRJQUxfUklHSFRfRkxBRyk7XG4gICAgICAgIGJpdG1hc2sgJj0gfihpc0N1cnJ5ID8gUEFSVElBTF9SSUdIVF9GTEFHIDogUEFSVElBTF9GTEFHKTtcblxuICAgICAgICBpZiAoIWlzQ3VycnlCb3VuZCkge1xuICAgICAgICAgIGJpdG1hc2sgJj0gfihCSU5EX0ZMQUcgfCBCSU5EX0tFWV9GTEFHKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzdWx0ID0gY3JlYXRlSHlicmlkV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBuZXdQYXJ0aWFscywgbmV3c0hvbGRlcnMsIG5ld1BhcnRpYWxzUmlnaHQsIG5ld0hvbGRlcnNSaWdodCwgbmV3QXJnUG9zLCBhcnksIG5ld0FyaXR5KTtcblxuICAgICAgICByZXN1bHQucGxhY2Vob2xkZXIgPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRoaXNCaW5kaW5nID0gaXNCaW5kID8gdGhpc0FyZyA6IHRoaXMsXG4gICAgICAgIGZuID0gaXNCaW5kS2V5ID8gdGhpc0JpbmRpbmdbZnVuY10gOiBmdW5jO1xuXG4gICAgaWYgKGFyZ1Bvcykge1xuICAgICAgYXJncyA9IHJlb3JkZXIoYXJncywgYXJnUG9zKTtcbiAgICB9XG4gICAgaWYgKGlzQXJ5ICYmIGFyeSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgICBhcmdzLmxlbmd0aCA9IGFyeTtcbiAgICB9XG4gICAgaWYgKHRoaXMgJiYgdGhpcyAhPT0gZ2xvYmFsICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSB7XG4gICAgICBmbiA9IEN0b3IgfHwgY3JlYXRlQ3RvcldyYXBwZXIoZnVuYyk7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzQmluZGluZywgYXJncyk7XG4gIH1cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgd3JhcHMgYGZ1bmNgIGFuZCBpbnZva2VzIGl0IHdpdGggdGhlIG9wdGlvbmFsIGB0aGlzYFxuICogYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBgcGFydGlhbHNgIHByZXBlbmRlZCB0byB0aG9zZSBwcm92aWRlZCB0b1xuICogdGhlIHdyYXBwZXIuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHBhcnRpYWxseSBhcHBseSBhcmd1bWVudHMgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBmbGFncy4gU2VlIGBjcmVhdGVXcmFwcGVyYCBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge0FycmF5fSBwYXJ0aWFscyBUaGUgYXJndW1lbnRzIHRvIHByZXBlbmQgdG8gdGhvc2UgcHJvdmlkZWQgdG8gdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJvdW5kIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVQYXJ0aWFsV3JhcHBlcihmdW5jLCBiaXRtYXNrLCB0aGlzQXJnLCBwYXJ0aWFscykge1xuICB2YXIgaXNCaW5kID0gYml0bWFzayAmIEJJTkRfRkxBRyxcbiAgICAgIEN0b3IgPSBjcmVhdGVDdG9yV3JhcHBlcihmdW5jKTtcblxuICBmdW5jdGlvbiB3cmFwcGVyKCkge1xuICAgIC8vIEF2b2lkIGBhcmd1bWVudHNgIG9iamVjdCB1c2UgZGlzcXVhbGlmeWluZyBvcHRpbWl6YXRpb25zIGJ5XG4gICAgLy8gY29udmVydGluZyBpdCB0byBhbiBhcnJheSBiZWZvcmUgcHJvdmlkaW5nIGl0IGBmdW5jYC5cbiAgICB2YXIgYXJnc0luZGV4ID0gLTEsXG4gICAgICAgIGFyZ3NMZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoLFxuICAgICAgICBsZWZ0SW5kZXggPSAtMSxcbiAgICAgICAgbGVmdExlbmd0aCA9IHBhcnRpYWxzLmxlbmd0aCxcbiAgICAgICAgYXJncyA9IEFycmF5KGFyZ3NMZW5ndGggKyBsZWZ0TGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2xlZnRJbmRleCA8IGxlZnRMZW5ndGgpIHtcbiAgICAgIGFyZ3NbbGVmdEluZGV4XSA9IHBhcnRpYWxzW2xlZnRJbmRleF07XG4gICAgfVxuICAgIHdoaWxlIChhcmdzTGVuZ3RoLS0pIHtcbiAgICAgIGFyZ3NbbGVmdEluZGV4KytdID0gYXJndW1lbnRzWysrYXJnc0luZGV4XTtcbiAgICB9XG4gICAgdmFyIGZuID0gKHRoaXMgJiYgdGhpcyAhPT0gZ2xvYmFsICYmIHRoaXMgaW5zdGFuY2VvZiB3cmFwcGVyKSA/IEN0b3IgOiBmdW5jO1xuICAgIHJldHVybiBmbi5hcHBseShpc0JpbmQgPyB0aGlzQXJnIDogdGhpcywgYXJncyk7XG4gIH1cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgZWl0aGVyIGN1cnJpZXMgb3IgaW52b2tlcyBgZnVuY2Agd2l0aCBvcHRpb25hbFxuICogYHRoaXNgIGJpbmRpbmcgYW5kIHBhcnRpYWxseSBhcHBsaWVkIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbnxzdHJpbmd9IGZ1bmMgVGhlIGZ1bmN0aW9uIG9yIG1ldGhvZCBuYW1lIHRvIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGZsYWdzLlxuICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuICogICAgIDEgLSBgXy5iaW5kYFxuICogICAgIDIgLSBgXy5iaW5kS2V5YFxuICogICAgIDQgLSBgXy5jdXJyeWAgb3IgYF8uY3VycnlSaWdodGAgb2YgYSBib3VuZCBmdW5jdGlvblxuICogICAgIDggLSBgXy5jdXJyeWBcbiAqICAgIDE2IC0gYF8uY3VycnlSaWdodGBcbiAqICAgIDMyIC0gYF8ucGFydGlhbGBcbiAqICAgIDY0IC0gYF8ucGFydGlhbFJpZ2h0YFxuICogICAxMjggLSBgXy5yZWFyZ2BcbiAqICAgMjU2IC0gYF8uYXJ5YFxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IFtwYXJ0aWFsc10gVGhlIGFyZ3VtZW50cyB0byBiZSBwYXJ0aWFsbHkgYXBwbGllZC5cbiAqIEBwYXJhbSB7QXJyYXl9IFtob2xkZXJzXSBUaGUgYHBhcnRpYWxzYCBwbGFjZWhvbGRlciBpbmRleGVzLlxuICogQHBhcmFtIHtBcnJheX0gW2FyZ1Bvc10gVGhlIGFyZ3VtZW50IHBvc2l0aW9ucyBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcnldIFRoZSBhcml0eSBjYXAgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcml0eV0gVGhlIGFyaXR5IG9mIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHdyYXBwZWQgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVdyYXBwZXIoZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIGFyZ1BvcywgYXJ5LCBhcml0eSkge1xuICB2YXIgaXNCaW5kS2V5ID0gYml0bWFzayAmIEJJTkRfS0VZX0ZMQUc7XG4gIGlmICghaXNCaW5kS2V5ICYmIHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgdmFyIGxlbmd0aCA9IHBhcnRpYWxzID8gcGFydGlhbHMubGVuZ3RoIDogMDtcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBiaXRtYXNrICY9IH4oUEFSVElBTF9GTEFHIHwgUEFSVElBTF9SSUdIVF9GTEFHKTtcbiAgICBwYXJ0aWFscyA9IGhvbGRlcnMgPSBudWxsO1xuICB9XG4gIGxlbmd0aCAtPSAoaG9sZGVycyA/IGhvbGRlcnMubGVuZ3RoIDogMCk7XG4gIGlmIChiaXRtYXNrICYgUEFSVElBTF9SSUdIVF9GTEFHKSB7XG4gICAgdmFyIHBhcnRpYWxzUmlnaHQgPSBwYXJ0aWFscyxcbiAgICAgICAgaG9sZGVyc1JpZ2h0ID0gaG9sZGVycztcblxuICAgIHBhcnRpYWxzID0gaG9sZGVycyA9IG51bGw7XG4gIH1cbiAgdmFyIG5ld0RhdGEgPSBbZnVuYywgYml0bWFzaywgdGhpc0FyZywgcGFydGlhbHMsIGhvbGRlcnMsIHBhcnRpYWxzUmlnaHQsIGhvbGRlcnNSaWdodCwgYXJnUG9zLCBhcnksIGFyaXR5XTtcblxuICBuZXdEYXRhWzldID0gYXJpdHkgPT0gbnVsbFxuICAgID8gKGlzQmluZEtleSA/IDAgOiBmdW5jLmxlbmd0aClcbiAgICA6IChuYXRpdmVNYXgoYXJpdHkgLSBsZW5ndGgsIDApIHx8IDApO1xuXG4gIGlmIChiaXRtYXNrID09IEJJTkRfRkxBRykge1xuICAgIHZhciByZXN1bHQgPSBjcmVhdGVCaW5kV3JhcHBlcihuZXdEYXRhWzBdLCBuZXdEYXRhWzJdKTtcbiAgfSBlbHNlIGlmICgoYml0bWFzayA9PSBQQVJUSUFMX0ZMQUcgfHwgYml0bWFzayA9PSAoQklORF9GTEFHIHwgUEFSVElBTF9GTEFHKSkgJiYgIW5ld0RhdGFbNF0ubGVuZ3RoKSB7XG4gICAgcmVzdWx0ID0gY3JlYXRlUGFydGlhbFdyYXBwZXIuYXBwbHkodW5kZWZpbmVkLCBuZXdEYXRhKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSBjcmVhdGVIeWJyaWRXcmFwcGVyLmFwcGx5KHVuZGVmaW5lZCwgbmV3RGF0YSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xufVxuXG4vKipcbiAqIFJlb3JkZXIgYGFycmF5YCBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBpbmRleGVzIHdoZXJlIHRoZSBlbGVtZW50IGF0XG4gKiB0aGUgZmlyc3QgaW5kZXggaXMgYXNzaWduZWQgYXMgdGhlIGZpcnN0IGVsZW1lbnQsIHRoZSBlbGVtZW50IGF0XG4gKiB0aGUgc2Vjb25kIGluZGV4IGlzIGFzc2lnbmVkIGFzIHRoZSBzZWNvbmQgZWxlbWVudCwgYW5kIHNvIG9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gcmVvcmRlci5cbiAqIEBwYXJhbSB7QXJyYXl9IGluZGV4ZXMgVGhlIGFycmFuZ2VkIGFycmF5IGluZGV4ZXMuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAqL1xuZnVuY3Rpb24gcmVvcmRlcihhcnJheSwgaW5kZXhlcykge1xuICB2YXIgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgbGVuZ3RoID0gbmF0aXZlTWluKGluZGV4ZXMubGVuZ3RoLCBhcnJMZW5ndGgpLFxuICAgICAgb2xkQXJyYXkgPSBhcnJheUNvcHkoYXJyYXkpO1xuXG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIHZhciBpbmRleCA9IGluZGV4ZXNbbGVuZ3RoXTtcbiAgICBhcnJheVtsZW5ndGhdID0gaXNJbmRleChpbmRleCwgYXJyTGVuZ3RoKSA/IG9sZEFycmF5W2luZGV4XSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlV3JhcHBlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wYXJ0aWFscmlnaHQvfi9sb2Rhc2guX2NyZWF0ZXdyYXBwZXIvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjcuMCA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiBgc291cmNlYCB0byBgYXJyYXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBzb3VyY2UgVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyB0by5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBhcnJheUNvcHkoc291cmNlLCBhcnJheSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG5cbiAgYXJyYXkgfHwgKGFycmF5ID0gQXJyYXkobGVuZ3RoKSk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgYXJyYXlbaW5kZXhdID0gc291cmNlW2luZGV4XTtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlDb3B5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBhcnRpYWxyaWdodC9+L2xvZGFzaC5fY3JlYXRld3JhcHBlci9+L2xvZGFzaC5fYXJyYXljb3B5L2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uY3JlYXRlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFzc2lnbmluZ1xuICogcHJvcGVydGllcyB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBuZXcgb2JqZWN0LlxuICovXG52YXIgYmFzZUNyZWF0ZSA9IChmdW5jdGlvbigpIHtcbiAgZnVuY3Rpb24gb2JqZWN0KCkge31cbiAgcmV0dXJuIGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgIGlmIChpc09iamVjdChwcm90b3R5cGUpKSB7XG4gICAgICBvYmplY3QucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgICAgdmFyIHJlc3VsdCA9IG5ldyBvYmplY3Q7XG4gICAgICBvYmplY3QucHJvdG90eXBlID0gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdCB8fCB7fTtcbiAgfTtcbn0oKSk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUNyZWF0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wYXJ0aWFscmlnaHQvfi9sb2Rhc2guX2NyZWF0ZXdyYXBwZXIvfi9sb2Rhc2guX2Jhc2VjcmVhdGUvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy42LjEgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlXG4gKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXMgYW4gYXJyYXkuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZSBbcmVzdCBwYXJhbWV0ZXJdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0Z1bmN0aW9ucy9yZXN0X3BhcmFtZXRlcnMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHNheSA9IF8ucmVzdFBhcmFtKGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICogfSk7XG4gKlxuICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHJlc3RQYXJhbShmdW5jLCBzdGFydCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiAoK3N0YXJ0IHx8IDApLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIHJlc3QgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHJlc3RbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIHJlc3QpO1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIHJlc3QpO1xuICAgIH1cbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICBpbmRleCA9IC0xO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHJlc3Q7XG4gICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN0UGFyYW07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGFydGlhbHJpZ2h0L34vbG9kYXNoLnJlc3RwYXJhbS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjEuMiAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIGJhc2VHZXQgPSByZXF1aXJlKCdsb2Rhc2guX2Jhc2VnZXQnKSxcbiAgICB0b1BhdGggPSByZXF1aXJlKCdsb2Rhc2guX3RvcGF0aCcpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCdsb2Rhc2guaXNhcnJheScpLFxuICAgIG1hcCA9IHJlcXVpcmUoJ2xvZGFzaC5tYXAnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcblxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuICB2YXIgcGF0aEtleSA9IChwYXRoICsgJycpO1xuICBwYXRoID0gdG9QYXRoKHBhdGgpO1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAoKHR5cGUgPT0gJ3N0cmluZycgJiYgcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSkgfHwgdHlwZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIHJlc3VsdCB8fCAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gdG9PYmplY3Qob2JqZWN0KSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBmcm9tIGFsbCBlbGVtZW50cyBpbiBgY29sbGVjdGlvbmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBDb2xsZWN0aW9uXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIHBsdWNrLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciB1c2VycyA9IFtcbiAqICAgeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSxcbiAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWdlJzogNDAgfVxuICogXTtcbiAqXG4gKiBfLnBsdWNrKHVzZXJzLCAndXNlcicpO1xuICogLy8gPT4gWydiYXJuZXknLCAnZnJlZCddXG4gKlxuICogdmFyIHVzZXJJbmRleCA9IF8uaW5kZXhCeSh1c2VycywgJ3VzZXInKTtcbiAqIF8ucGx1Y2sodXNlckluZGV4LCAnYWdlJyk7XG4gKiAvLyA9PiBbMzYsIDQwXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICovXG5mdW5jdGlvbiBwbHVjayhjb2xsZWN0aW9uLCBwYXRoKSB7XG4gIHJldHVybiBtYXAoY29sbGVjdGlvbiwgcHJvcGVydHkocGF0aCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZSBhdCBgcGF0aGAgb24gYVxuICogZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0cyA9IFtcbiAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMiB9IH0gfSxcbiAqICAgeyAnYSc6IHsgJ2InOiB7ICdjJzogMSB9IH0gfVxuICogXTtcbiAqXG4gKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmIuYycpKTtcbiAqIC8vID0+IFsyLCAxXVxuICpcbiAqIF8ucGx1Y2soXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYicsICdjJ10pKSwgJ2EuYi5jJyk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqL1xuZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkocGF0aCkgOiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBsdWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBsdWNrL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuNy4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBzdHJpbmcgcGF0aHNcbiAqIGFuZCBkZWZhdWx0IHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IFtwYXRoS2V5XSBUaGUga2V5IHJlcHJlc2VudGF0aW9uIG9mIHBhdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzb2x2ZWQgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoLCBwYXRoS2V5KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAocGF0aEtleSAhPT0gdW5kZWZpbmVkICYmIHBhdGhLZXkgaW4gdG9PYmplY3Qob2JqZWN0KSkge1xuICAgIHBhdGggPSBbcGF0aEtleV07XG4gIH1cbiAgdmFyIGluZGV4ID0gMCxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlIChvYmplY3QgIT0gbnVsbCAmJiBpbmRleCA8IGxlbmd0aCkge1xuICAgIG9iamVjdCA9IG9iamVjdFtwYXRoW2luZGV4KytdXTtcbiAgfVxuICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2guX2Jhc2VnZXQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy44LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0IGlzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0IGlzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBiYXNlVG9TdHJpbmcodmFsdWUpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9QYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLl90b3BhdGgvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4xLjQgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBhcnJheU1hcCA9IHJlcXVpcmUoJ2xvZGFzaC5fYXJyYXltYXAnKSxcbiAgICBiYXNlQ2FsbGJhY2sgPSByZXF1aXJlKCdsb2Rhc2guX2Jhc2VjYWxsYmFjaycpLFxuICAgIGJhc2VFYWNoID0gcmVxdWlyZSgnbG9kYXNoLl9iYXNlZWFjaCcpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCdsb2Rhc2guaXNhcnJheScpO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hcGAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFjayBzaG9ydGhhbmRzXG4gKiBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICovXG5mdW5jdGlvbiBiYXNlTWFwKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gaXNBcnJheUxpa2UoY29sbGVjdGlvbikgPyBBcnJheShjb2xsZWN0aW9uLmxlbmd0aCkgOiBbXTtcblxuICBiYXNlRWFjaChjb2xsZWN0aW9uLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBjb2xsZWN0aW9uKSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gaXRlcmF0ZWUodmFsdWUsIGtleSwgY29sbGVjdGlvbik7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gKi9cbnZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdmFsdWVzIGJ5IHJ1bm5pbmcgZWFjaCBlbGVtZW50IGluIGBjb2xsZWN0aW9uYCB0aHJvdWdoXG4gKiBgaXRlcmF0ZWVgLiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZVxuICogYXJndW1lbnRzOiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuXG4gKlxuICogSWYgYSBwcm9wZXJ0eSBuYW1lIGlzIHByb3ZpZGVkIGZvciBgaXRlcmF0ZWVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gKlxuICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICpcbiAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYGl0ZXJhdGVlYCB0aGUgY3JlYXRlZCBgXy5tYXRjaGVzYCBzdHlsZVxuICogY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSB0aGUgcHJvcGVydGllcyBvZiB0aGUgZ2l2ZW5cbiAqIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICpcbiAqIE1hbnkgbG9kYXNoIG1ldGhvZHMgYXJlIGd1YXJkZWQgdG8gd29yayBhcyBpdGVyYXRlZXMgZm9yIG1ldGhvZHMgbGlrZVxuICogYF8uZXZlcnlgLCBgXy5maWx0ZXJgLCBgXy5tYXBgLCBgXy5tYXBWYWx1ZXNgLCBgXy5yZWplY3RgLCBhbmQgYF8uc29tZWAuXG4gKlxuICogVGhlIGd1YXJkZWQgbWV0aG9kcyBhcmU6XG4gKiBgYXJ5YCwgYGNhbGxiYWNrYCwgYGNodW5rYCwgYGNsb25lYCwgYGNyZWF0ZWAsIGBjdXJyeWAsIGBjdXJyeVJpZ2h0YCxcbiAqIGBkcm9wYCwgYGRyb3BSaWdodGAsIGBldmVyeWAsIGBmaWxsYCwgYGZsYXR0ZW5gLCBgaW52ZXJ0YCwgYG1heGAsIGBtaW5gLFxuICogYHBhcnNlSW50YCwgYHNsaWNlYCwgYHNvcnRCeWAsIGB0YWtlYCwgYHRha2VSaWdodGAsIGB0ZW1wbGF0ZWAsIGB0cmltYCxcbiAqIGB0cmltTGVmdGAsIGB0cmltUmlnaHRgLCBgdHJ1bmNgLCBgcmFuZG9tYCwgYHJhbmdlYCwgYHNhbXBsZWAsIGBzb21lYCxcbiAqIGBzdW1gLCBgdW5pcWAsIGFuZCBgd29yZHNgXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBjb2xsZWN0XG4gKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW2l0ZXJhdGVlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkXG4gKiAgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgbWFwcGVkIGFycmF5LlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiB0aW1lc1RocmVlKG4pIHtcbiAqICAgcmV0dXJuIG4gKiAzO1xuICogfVxuICpcbiAqIF8ubWFwKFsxLCAyXSwgdGltZXNUaHJlZSk7XG4gKiAvLyA9PiBbMywgNl1cbiAqXG4gKiBfLm1hcCh7ICdhJzogMSwgJ2InOiAyIH0sIHRpbWVzVGhyZWUpO1xuICogLy8gPT4gWzMsIDZdIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogdmFyIHVzZXJzID0gW1xuICogICB7ICd1c2VyJzogJ2Jhcm5leScgfSxcbiAqICAgeyAndXNlcic6ICdmcmVkJyB9XG4gKiBdO1xuICpcbiAqIC8vIHVzaW5nIHRoZSBgXy5wcm9wZXJ0eWAgY2FsbGJhY2sgc2hvcnRoYW5kXG4gKiBfLm1hcCh1c2VycywgJ3VzZXInKTtcbiAqIC8vID0+IFsnYmFybmV5JywgJ2ZyZWQnXVxuICovXG5mdW5jdGlvbiBtYXAoY29sbGVjdGlvbiwgaXRlcmF0ZWUsIHRoaXNBcmcpIHtcbiAgdmFyIGZ1bmMgPSBpc0FycmF5KGNvbGxlY3Rpb24pID8gYXJyYXlNYXAgOiBiYXNlTWFwO1xuICBpdGVyYXRlZSA9IGJhc2VDYWxsYmFjayhpdGVyYXRlZSwgdGhpc0FyZywgMyk7XG4gIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS43LjAgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLm1hcGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIG9yIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IG1hcHBlZCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gYXJyYXlNYXAoYXJyYXksIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheU1hcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2guX2FycmF5bWFwL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMy4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCdsb2Rhc2guX2Jhc2Vpc2VxdWFsJyksXG4gICAgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnbG9kYXNoLl9iaW5kY2FsbGJhY2snKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKSxcbiAgICBwYWlycyA9IHJlcXVpcmUoJ2xvZGFzaC5wYWlycycpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcbiAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG4gICAgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNhbGxiYWNrYCB3aGljaCBzdXBwb3J0cyBzcGVjaWZ5aW5nIHRoZVxuICogbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBbZnVuYz1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gYmFzZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIGZ1bmM7XG4gIGlmICh0eXBlID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG4gICAgICA/IGZ1bmNcbiAgICAgIDogYmluZENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcbiAgfVxuICBpZiAoZnVuYyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIGlmICh0eXBlID09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGJhc2VNYXRjaGVzKGZ1bmMpO1xuICB9XG4gIHJldHVybiB0aGlzQXJnID09PSB1bmRlZmluZWRcbiAgICA/IHByb3BlcnR5KGZ1bmMpXG4gICAgOiBiYXNlTWF0Y2hlc1Byb3BlcnR5KGZ1bmMsIHRoaXNBcmcpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RyaW5nIHBhdGhzXG4gKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbcGF0aEtleV0gVGhlIGtleSByZXByZXNlbnRhdGlvbiBvZiBwYXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcbiAgICBwYXRoID0gW3BhdGhLZXldO1xuICB9XG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG4gIH1cbiAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVyeSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcbiAgdmFyIGluZGV4ID0gbWF0Y2hEYXRhLmxlbmd0aCxcbiAgICAgIGxlbmd0aCA9IGluZGV4LFxuICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuICFsZW5ndGg7XG4gIH1cbiAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcbiAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcbiAgICAgICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgdmFyIGtleSA9IGRhdGFbMF0sXG4gICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblxuICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgdHJ1ZSkgOiByZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lcyBub3QgY2xvbmUgYHNvdXJjZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG4gIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcbiAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICB2YXIga2V5ID0gbWF0Y2hEYXRhWzBdWzBdLFxuICAgICAgICB2YWx1ZSA9IG1hdGNoRGF0YVswXVsxXTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHZhbHVlICYmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gdG9PYmplY3Qob2JqZWN0KSkpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2VzIG5vdCB3aGljaCBkb2VzXG4gKiBub3QgY2xvbmUgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICB2YXIgaXNBcnIgPSBpc0FycmF5KHBhdGgpLFxuICAgICAgaXNDb21tb24gPSBpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpLFxuICAgICAgcGF0aEtleSA9IChwYXRoICsgJycpO1xuXG4gIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGtleSA9IHBhdGhLZXk7XG4gICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICBpZiAoKGlzQXJyIHx8ICFpc0NvbW1vbikgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBrZXkgPSBsYXN0KHBhdGgpO1xuICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZVxuICAgICAgPyAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIG9iamVjdCkpXG4gICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmplY3Rba2V5XSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcbiAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcbiAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc2xpY2VgIHdpdGhvdXQgYW4gaXRlcmF0ZWUgY2FsbCBndWFyZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNsaWNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICBzdGFydCA9IHN0YXJ0ID09IG51bGwgPyAwIDogKCtzdGFydCB8fCAwKTtcbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG4gIH1cbiAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiAoK2VuZCB8fCAwKTtcbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuZ3RoO1xuICB9XG4gIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6ICgoZW5kIC0gc3RhcnQpID4+PiAwKTtcbiAgc3RhcnQgPj4+PSAwO1xuXG4gIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gcGFpcnMob2JqZWN0KSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgcmVzdWx0W2xlbmd0aF1bMl0gPSBpc1N0cmljdENvbXBhcmFibGUocmVzdWx0W2xlbmd0aF1bMV0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKCh0eXBlID09ICdzdHJpbmcnICYmIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkpIHx8IHR5cGUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSk7XG4gIHJldHVybiByZXN1bHQgfHwgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIHRvT2JqZWN0KG9iamVjdCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gcHJvcGVydHkgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBiYXNlVG9TdHJpbmcodmFsdWUpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBBcnJheVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmxhc3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gbGFzdChhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICByZXR1cm4gbGVuZ3RoID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYHBhdGhgIG9uIGFcbiAqIGdpdmVuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxpdHlcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdHMgPSBbXG4gKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDIgfSB9IH0sXG4gKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDEgfSB9IH1cbiAqIF07XG4gKlxuICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iLmMnKSk7XG4gKiAvLyA9PiBbMiwgMV1cbiAqXG4gKiBfLnBsdWNrKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InLCAnYyddKSksICdhLmIuYycpO1xuICogLy8gPT4gWzEsIDJdXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHBhdGgpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlQ2FsbGJhY2s7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjcgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCdsb2Rhc2guaXN0eXBlZGFycmF5JyksXG4gICAga2V5cyA9IHJlcXVpcmUoJ2xvZGFzaC5rZXlzJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzRXF1YWxgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYHRoaXNgIGJpbmRpbmdcbiAqIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICBpZiAob2JqVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgfVxuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG90aGVyKTtcbiAgICBpZiAob3RoVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG90aFRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG90aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IG9iamVjdCkge1xuICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IG90aGVyO1xuICAgIH1cbiAgfVxuICAvLyBBZGQgYG9iamVjdGAgYW5kIGBvdGhlcmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICBzdGFja0EucHVzaChvYmplY3QpO1xuICBzdGFja0IucHVzaChvdGhlcik7XG5cbiAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblxuICBzdGFja0EucG9wKCk7XG4gIHN0YWNrQi5wb3AoKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBhcnJheXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IGFyclZhbHVlLCBpc0xvb3NlID8gYXJyVmFsdWUgOiBvdGhWYWx1ZSwgaW5kZXgpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChpc0xvb3NlKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHZhbHVlIFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcpIHtcbiAgc3dpdGNoICh0YWcpIHtcbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIGJvb2xlYW5zXG4gICAgICAvLyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhcyBub3QgZXF1YWwuXG4gICAgICByZXR1cm4gK29iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgLy8gVHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsLlxuICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdClcbiAgICAgICAgPyBvdGhlciAhPSArb3RoZXJcbiAgICAgICAgOiBvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSByZWdleHBUYWc6XG4gICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzIHByaW1pdGl2ZXMgYW5kIHN0cmluZ1xuICAgICAgLy8gb2JqZWN0cyBhcyBlcXVhbC4gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEwLjYuNCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9ialByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc0xvb3NlID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgdmFyIHNraXBDdG9yID0gaXNMb29zZTtcbiAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XSxcbiAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogb2JqVmFsdWUsIGlzTG9vc2U/IG9ialZhbHVlIDogb3RoVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmICghc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svfi9sb2Rhc2guX2Jhc2Vpc2VxdWFsL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID0gdHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID0gdHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svfi9sb2Rhc2guX2Jhc2Vpc2VxdWFsL34vbG9kYXNoLmlzdHlwZWRhcnJheS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUNhbGxiYWNrYCB3aGljaCBvbmx5IHN1cHBvcnRzIGB0aGlzYCBiaW5kaW5nXG4gKiBhbmQgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gaWRlbnRpdHk7XG4gIH1cbiAgaWYgKHRoaXNBcmcgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmdW5jO1xuICB9XG4gIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICB9O1xuICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgfTtcbiAgICBjYXNlIDU6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmluZENhbGxiYWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLm1hcC9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL34vbG9kYXNoLl9iaW5kY2FsbGJhY2svaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjEgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBrZXlzID0gcmVxdWlyZSgnbG9kYXNoLmtleXMnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHR3byBkaW1lbnNpb25hbCBhcnJheSBvZiB0aGUga2V5LXZhbHVlIHBhaXJzIGZvciBgb2JqZWN0YCxcbiAqIGUuZy4gYFtba2V5MSwgdmFsdWUxXSwgW2tleTIsIHZhbHVlMl1dYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLnBhaXJzKHsgJ2Jhcm5leSc6IDM2LCAnZnJlZCc6IDQwIH0pO1xuICogLy8gPT4gW1snYmFybmV5JywgMzZdLCBbJ2ZyZWQnLCA0MF1dIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbmZ1bmN0aW9uIHBhaXJzKG9iamVjdCkge1xuICBvYmplY3QgPSB0b09iamVjdChvYmplY3QpO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICByZXN1bHRbaW5kZXhdID0gW2tleSwgb2JqZWN0W2tleV1dO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcGFpcnM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svfi9sb2Rhc2gucGFpcnMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjQgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBrZXlzID0gcmVxdWlyZSgnbG9kYXNoLmtleXMnKTtcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gKi9cbnZhciBiYXNlRWFjaCA9IGNyZWF0ZUJhc2VFYWNoKGJhc2VGb3JPd24pO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9ySW5gIGFuZCBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXNcbiAqIG92ZXIgYG9iamVjdGAgcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGludm9raW5nIGBpdGVyYXRlZWAgZm9yXG4gKiBlYWNoIHByb3BlcnR5LiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHlcbiAqIHJldHVybmluZyBgZmFsc2VgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG52YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYGJhc2VFYWNoYCBvciBgYmFzZUVhY2hSaWdodGAgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcbiAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcbiAgICAgIHJldHVybiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xLFxuICAgICAgICBpdGVyYWJsZSA9IHRvT2JqZWN0KGNvbGxlY3Rpb24pO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYmFzZSBmdW5jdGlvbiBmb3IgYF8uZm9ySW5gIG9yIGBfLmZvckluUmlnaHRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VGb3IoZnJvbVJpZ2h0KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzRnVuYykge1xuICAgIHZhciBpdGVyYWJsZSA9IHRvT2JqZWN0KG9iamVjdCksXG4gICAgICAgIHByb3BzID0ga2V5c0Z1bmMob2JqZWN0KSxcbiAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKVxuICogdGhhdCBhZmZlY3RzIFNhZmFyaSBvbiBhdCBsZWFzdCBpT1MgOC4xLTguMyBBUk02NC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIFwibGVuZ3RoXCIgdmFsdWUuXG4gKi9cbnZhciBnZXRMZW5ndGggPSBiYXNlUHJvcGVydHkoJ2xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VFYWNoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnBsdWNrL34vbG9kYXNoLm1hcC9+L2xvZGFzaC5fYmFzZWVhY2gvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy45LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGAgW3NwZWNpYWwgY2hhcmFjdGVyc10oaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vY2hhcmFjdGVycy5odG1sI3NwZWNpYWwpLlxuICogSW4gYWRkaXRpb24gdG8gc3BlY2lhbCBjaGFyYWN0ZXJzIHRoZSBmb3J3YXJkIHNsYXNoIGlzIGVzY2FwZWQgdG8gYWxsb3cgZm9yXG4gKiBlYXNpZXIgYGV2YWxgIHVzZSBhbmQgYEZ1bmN0aW9uYCBjb21waWxhdGlvbi5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhcnMgPSAvWy4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2csXG4gICAgcmVIYXNSZWdFeHBDaGFycyA9IFJlZ0V4cChyZVJlZ0V4cENoYXJzLnNvdXJjZSk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpID4gNSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09ICdvYmplY3QnO1xufVxuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xudmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcbiAgZXNjYXBlUmVnRXhwKGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIHJldHVybiBpc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc05hdGl2ZShBcnJheS5wcm90b3R5cGUucHVzaCk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc05hdGl2ZShfKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnKSB7XG4gICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogRXNjYXBlcyB0aGUgYFJlZ0V4cGAgc3BlY2lhbCBjaGFyYWN0ZXJzIFwiXFxcIiwgXCIvXCIsIFwiXlwiLCBcIiRcIiwgXCIuXCIsIFwifFwiLCBcIj9cIixcbiAqIFwiKlwiLCBcIitcIiwgXCIoXCIsIFwiKVwiLCBcIltcIiwgXCJdXCIsIFwie1wiIGFuZCBcIn1cIiBpbiBgc3RyaW5nYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZXNjYXBlUmVnRXhwKCdbbG9kYXNoXShodHRwczovL2xvZGFzaC5jb20vKScpO1xuICogLy8gPT4gJ1xcW2xvZGFzaFxcXVxcKGh0dHBzOlxcL1xcL2xvZGFzaFxcLmNvbVxcL1xcKSdcbiAqL1xuZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZykge1xuICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFycy50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVJlZ0V4cENoYXJzLCAnXFxcXCQmJylcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXROYXRpdmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gucGx1Y2svfi9sb2Rhc2gubWFwL34vbG9kYXNoLmtleXMvfi9sb2Rhc2guX2dldG5hdGl2ZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5wbHVjay9+L2xvZGFzaC5tYXAvfi9sb2Rhc2gua2V5cy9+L2xvZGFzaC5pc2FyZ3VtZW50cy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuNy4wIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIGlzSXRlcmF0ZWVDYWxsID0gcmVxdWlyZSgnbG9kYXNoLl9pc2l0ZXJhdGVlY2FsbCcpO1xuXG4vKiogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGNlaWwgPSBNYXRoLmNlaWw7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBudW1iZXJzIChwb3NpdGl2ZSBhbmQvb3IgbmVnYXRpdmUpIHByb2dyZXNzaW5nIGZyb21cbiAqIGBzdGFydGAgdXAgdG8sIGJ1dCBub3QgaW5jbHVkaW5nLCBgZW5kYC4gSWYgYHN0YXJ0YCBpcyBsZXNzIHRoYW4gYGVuZGAgYVxuICogemVyby1sZW5ndGggcmFuZ2UgaXMgY3JlYXRlZCB1bmxlc3MgYSBuZWdhdGl2ZSBgc3RlcGAgaXMgc3BlY2lmaWVkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBUaGUgZW5kIG9mIHRoZSByYW5nZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RlcD0xXSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IG9yIGRlY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIG51bWJlcnMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8ucmFuZ2UoNCk7XG4gKiAvLyA9PiBbMCwgMSwgMiwgM11cbiAqXG4gKiBfLnJhbmdlKDEsIDUpO1xuICogLy8gPT4gWzEsIDIsIDMsIDRdXG4gKlxuICogXy5yYW5nZSgwLCAyMCwgNSk7XG4gKiAvLyA9PiBbMCwgNSwgMTAsIDE1XVxuICpcbiAqIF8ucmFuZ2UoMCwgLTQsIC0xKTtcbiAqIC8vID0+IFswLCAtMSwgLTIsIC0zXVxuICpcbiAqIF8ucmFuZ2UoMSwgNCwgMCk7XG4gKiAvLyA9PiBbMSwgMSwgMV1cbiAqXG4gKiBfLnJhbmdlKDApO1xuICogLy8gPT4gW11cbiAqL1xuZnVuY3Rpb24gcmFuZ2Uoc3RhcnQsIGVuZCwgc3RlcCkge1xuICBpZiAoc3RlcCAmJiBpc0l0ZXJhdGVlQ2FsbChzdGFydCwgZW5kLCBzdGVwKSkge1xuICAgIGVuZCA9IHN0ZXAgPSBudWxsO1xuICB9XG4gIHN0YXJ0ID0gK3N0YXJ0IHx8IDA7XG4gIHN0ZXAgPSBzdGVwID09IG51bGwgPyAxIDogKCtzdGVwIHx8IDApO1xuXG4gIGlmIChlbmQgPT0gbnVsbCkge1xuICAgIGVuZCA9IHN0YXJ0O1xuICAgIHN0YXJ0ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBlbmQgPSArZW5kIHx8IDA7XG4gIH1cbiAgLy8gVXNlIGBBcnJheShsZW5ndGgpYCBzbyBlbmdpbmVzIGxpa2UgQ2hha3JhIGFuZCBWOCBhdm9pZCBzbG93ZXIgbW9kZXMuXG4gIC8vIFNlZSBodHRwczovL3lvdXR1LmJlL1hBcUlwR1U4WlprI3Q9MTdtMjVzIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGNlaWwoKGVuZCAtIHN0YXJ0KSAvIChzdGVwIHx8IDEpKSwgMCksXG4gICAgICByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IHN0YXJ0O1xuICAgIHN0YXJ0ICs9IHN0ZXA7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByYW5nZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5yYW5nZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuOSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXlxcZCskLztcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgID8gKGlzQXJyYXlMaWtlKG9iamVjdCkgJiYgaXNJbmRleChpbmRleCwgb2JqZWN0Lmxlbmd0aCkpXG4gICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdCkpIHtcbiAgICB2YXIgb3RoZXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyAodmFsdWUgPT09IG90aGVyKSA6IChvdGhlciAhPT0gb3RoZXIpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSXRlcmF0ZWVDYWxsO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnJhbmdlL34vbG9kYXNoLl9pc2l0ZXJhdGVlY2FsbC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjcuNCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIHRvUGF0aCA9IHJlcXVpcmUoJ2xvZGFzaC5fdG9wYXRoJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJ2xvZGFzaC5pc2FycmF5Jyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUlzRGVlcFByb3AgPSAvXFwufFxcWyg/OlteW1xcXV0qfChbXCInXSkoPzooPyFcXDEpW15cXG5cXFxcXXxcXFxcLikqP1xcMSlcXF0vLFxuICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAoKHR5cGUgPT0gJ3N0cmluZycgJiYgcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSkgfHwgdHlwZSA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcmVzdWx0ID0gIXJlSXNEZWVwUHJvcC50ZXN0KHZhbHVlKTtcbiAgcmV0dXJuIHJlc3VsdCB8fCAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gdG9PYmplY3Qob2JqZWN0KSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHByb3BlcnR5IHZhbHVlIG9mIGBwYXRoYCBvbiBgb2JqZWN0YC4gSWYgYSBwb3J0aW9uIG9mIGBwYXRoYFxuICogZG9lcyBub3QgZXhpc3QgaXQgaXMgY3JlYXRlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGF1Z21lbnQuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAqXG4gKiBfLnNldChvYmplY3QsICdhWzBdLmIuYycsIDQpO1xuICogY29uc29sZS5sb2cob2JqZWN0LmFbMF0uYi5jKTtcbiAqIC8vID0+IDRcbiAqXG4gKiBfLnNldChvYmplY3QsICd4WzBdLnkueicsIDUpO1xuICogY29uc29sZS5sb2cob2JqZWN0LnhbMF0ueS56KTtcbiAqIC8vID0+IDVcbiAqL1xuZnVuY3Rpb24gc2V0KG9iamVjdCwgcGF0aCwgdmFsdWUpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICB2YXIgcGF0aEtleSA9IChwYXRoICsgJycpO1xuICBwYXRoID0gKG9iamVjdFtwYXRoS2V5XSAhPSBudWxsIHx8IGlzS2V5KHBhdGgsIG9iamVjdCkpID8gW3BhdGhLZXldIDogdG9QYXRoKHBhdGgpO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGgsXG4gICAgICBsYXN0SW5kZXggPSBsZW5ndGggLSAxLFxuICAgICAgbmVzdGVkID0gb2JqZWN0O1xuXG4gIHdoaWxlIChuZXN0ZWQgIT0gbnVsbCAmJiArK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHBhdGhbaW5kZXhdO1xuICAgIGlmIChpc09iamVjdChuZXN0ZWQpKSB7XG4gICAgICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgICAgIG5lc3RlZFtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKG5lc3RlZFtrZXldID09IG51bGwpIHtcbiAgICAgICAgbmVzdGVkW2tleV0gPSBpc0luZGV4KHBhdGhbaW5kZXggKyAxXSkgPyBbXSA6IHt9O1xuICAgICAgfVxuICAgIH1cbiAgICBuZXN0ZWQgPSBuZXN0ZWRba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqZWN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zZXQvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy44LjAgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxuXFxcXF18XFxcXC4pKj8pXFwyKVxcXS9nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0IGlzIG5vdCBvbmUuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZFxuICogZm9yIGBudWxsYCBvciBgdW5kZWZpbmVkYCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUb1N0cmluZyh2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBwcm9wZXJ0eSBwYXRoIGFycmF5IGlmIGl0IGlzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBiYXNlVG9TdHJpbmcodmFsdWUpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9QYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNldC9+L2xvZGFzaC5fdG9wYXRoL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMi4yIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgYmFzZUNhbGxiYWNrID0gcmVxdWlyZSgnbG9kYXNoLl9iYXNlY2FsbGJhY2snKSxcbiAgICBiYXNlRWFjaCA9IHJlcXVpcmUoJ2xvZGFzaC5fYmFzZWVhY2gnKSxcbiAgICBpc0l0ZXJhdGVlQ2FsbCA9IHJlcXVpcmUoJ2xvZGFzaC5faXNpdGVyYXRlZWNhbGwnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5zb21lYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrIHNob3J0aGFuZHNcbiAqIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZVNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlKSB7XG4gIHZhciByZXN1bHQ7XG5cbiAgYmFzZUVhY2goY29sbGVjdGlvbiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKSB7XG4gICAgcmVzdWx0ID0gcHJlZGljYXRlKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgcmV0dXJuICFyZXN1bHQ7XG4gIH0pO1xuICByZXR1cm4gISFyZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBwcmVkaWNhdGVgIHJldHVybnMgdHJ1dGh5IGZvciAqKmFueSoqIGVsZW1lbnQgb2YgYGNvbGxlY3Rpb25gLlxuICogVGhlIGZ1bmN0aW9uIHJldHVybnMgYXMgc29vbiBhcyBpdCBmaW5kcyBhIHBhc3NpbmcgdmFsdWUgYW5kIGRvZXMgbm90IGl0ZXJhdGVcbiAqIG92ZXIgdGhlIGVudGlyZSBjb2xsZWN0aW9uLiBUaGUgcHJlZGljYXRlIGlzIGJvdW5kIHRvIGB0aGlzQXJnYCBhbmQgaW52b2tlZFxuICogd2l0aCB0aHJlZSBhcmd1bWVudHM6ICh2YWx1ZSwgaW5kZXh8a2V5LCBjb2xsZWN0aW9uKS5cbiAqXG4gKiBJZiBhIHByb3BlcnR5IG5hbWUgaXMgcHJvdmlkZWQgZm9yIGBwcmVkaWNhdGVgIHRoZSBjcmVhdGVkIGBfLnByb3BlcnR5YFxuICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQuXG4gKlxuICogSWYgYSB2YWx1ZSBpcyBhbHNvIHByb3ZpZGVkIGZvciBgdGhpc0FyZ2AgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc1Byb3BlcnR5YFxuICogc3R5bGUgY2FsbGJhY2sgcmV0dXJucyBgdHJ1ZWAgZm9yIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1hdGNoaW5nIHByb3BlcnR5XG4gKiB2YWx1ZSwgZWxzZSBgZmFsc2VgLlxuICpcbiAqIElmIGFuIG9iamVjdCBpcyBwcm92aWRlZCBmb3IgYHByZWRpY2F0ZWAgdGhlIGNyZWF0ZWQgYF8ubWF0Y2hlc2Agc3R5bGVcbiAqIGNhbGxiYWNrIHJldHVybnMgYHRydWVgIGZvciBlbGVtZW50cyB0aGF0IGhhdmUgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGdpdmVuXG4gKiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGFsaWFzIGFueVxuICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWRcbiAqICBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBwcmVkaWNhdGVgLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5zb21lKFtudWxsLCAwLCAneWVzJywgZmFsc2VdLCBCb29sZWFuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiB2YXIgdXNlcnMgPSBbXG4gKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IHRydWUgfSxcbiAqICAgeyAndXNlcic6ICdmcmVkJywgICAnYWN0aXZlJzogZmFsc2UgfVxuICogXTtcbiAqXG4gKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc2AgY2FsbGJhY2sgc2hvcnRoYW5kXG4gKiBfLnNvbWUodXNlcnMsIHsgJ3VzZXInOiAnYmFybmV5JywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiAvLyB1c2luZyB0aGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBjYWxsYmFjayBzaG9ydGhhbmRcbiAqIF8uc29tZSh1c2VycywgJ2FjdGl2ZScsIGZhbHNlKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiAvLyB1c2luZyB0aGUgYF8ucHJvcGVydHlgIGNhbGxiYWNrIHNob3J0aGFuZFxuICogXy5zb21lKHVzZXJzLCAnYWN0aXZlJyk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIHNvbWUoY29sbGVjdGlvbiwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gIHZhciBmdW5jID0gaXNBcnJheShjb2xsZWN0aW9uKSA/IGFycmF5U29tZSA6IGJhc2VTb21lO1xuICBpZiAodGhpc0FyZyAmJiBpc0l0ZXJhdGVlQ2FsbChjb2xsZWN0aW9uLCBwcmVkaWNhdGUsIHRoaXNBcmcpKSB7XG4gICAgcHJlZGljYXRlID0gbnVsbDtcbiAgfVxuICBpZiAodHlwZW9mIHByZWRpY2F0ZSAhPSAnZnVuY3Rpb24nIHx8IHRoaXNBcmcgIT09IHVuZGVmaW5lZCkge1xuICAgIHByZWRpY2F0ZSA9IGJhc2VDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICB9XG4gIHJldHVybiBmdW5jKGNvbGxlY3Rpb24sIHByZWRpY2F0ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc29tZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zb21lL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMy4wIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCdsb2Rhc2guX2Jhc2Vpc2VxdWFsJyksXG4gICAgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnbG9kYXNoLl9iaW5kY2FsbGJhY2snKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzYXJyYXknKSxcbiAgICBwYWlycyA9IHJlcXVpcmUoJ2xvZGFzaC5wYWlycycpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVJc0RlZXBQcm9wID0gL1xcLnxcXFsoPzpbXltcXF1dKnwoW1wiJ10pKD86KD8hXFwxKVteXFxuXFxcXF18XFxcXC4pKj9cXDEpXFxdLyxcbiAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC8sXG4gICAgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXG5cXFxcXXxcXFxcLikqPylcXDIpXFxdL2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmNhbGxiYWNrYCB3aGljaCBzdXBwb3J0cyBzcGVjaWZ5aW5nIHRoZVxuICogbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBbZnVuYz1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhIGNhbGxiYWNrLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYXJnQ291bnRdIFRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjYWxsYmFjay5cbiAqL1xuZnVuY3Rpb24gYmFzZUNhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIGZ1bmM7XG4gIGlmICh0eXBlID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdGhpc0FyZyA9PT0gdW5kZWZpbmVkXG4gICAgICA/IGZ1bmNcbiAgICAgIDogYmluZENhbGxiYWNrKGZ1bmMsIHRoaXNBcmcsIGFyZ0NvdW50KTtcbiAgfVxuICBpZiAoZnVuYyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIGlmICh0eXBlID09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGJhc2VNYXRjaGVzKGZ1bmMpO1xuICB9XG4gIHJldHVybiB0aGlzQXJnID09PSB1bmRlZmluZWRcbiAgICA/IHByb3BlcnR5KGZ1bmMpXG4gICAgOiBiYXNlTWF0Y2hlc1Byb3BlcnR5KGZ1bmMsIHRoaXNBcmcpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3Igc3RyaW5nIHBhdGhzXG4gKiBhbmQgZGVmYXVsdCB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbcGF0aEtleV0gVGhlIGtleSByZXByZXNlbnRhdGlvbiBvZiBwYXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSkge1xuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHBhdGhLZXkgIT09IHVuZGVmaW5lZCAmJiBwYXRoS2V5IGluIHRvT2JqZWN0KG9iamVjdCkpIHtcbiAgICBwYXRoID0gW3BhdGhLZXldO1xuICB9XG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbcGF0aFtpbmRleCsrXV07XG4gIH1cbiAgcmV0dXJuIChpbmRleCAmJiBpbmRleCA9PSBsZW5ndGgpID8gb2JqZWN0IDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVyeSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyB0byBtYXRjaC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcbiAgdmFyIGluZGV4ID0gbWF0Y2hEYXRhLmxlbmd0aCxcbiAgICAgIGxlbmd0aCA9IGluZGV4LFxuICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuICFsZW5ndGg7XG4gIH1cbiAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgaWYgKChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSlcbiAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcbiAgICAgICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG4gICAgdmFyIGtleSA9IGRhdGFbMF0sXG4gICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblxuICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihvYmpWYWx1ZSwgc3JjVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgY3VzdG9taXplciwgdHJ1ZSkgOiByZXN1bHQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lcyBub3QgY2xvbmUgYHNvdXJjZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG4gIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcbiAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICB2YXIga2V5ID0gbWF0Y2hEYXRhWzBdWzBdLFxuICAgICAgICB2YWx1ZSA9IG1hdGNoRGF0YVswXVsxXTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqZWN0W2tleV0gPT09IHZhbHVlICYmICh2YWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gdG9PYmplY3Qob2JqZWN0KSkpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlSXNNYXRjaChvYmplY3QsIG1hdGNoRGF0YSk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc1Byb3BlcnR5YCB3aGljaCBkb2VzIG5vdCB3aGljaCBkb2VzXG4gKiBub3QgY2xvbmUgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICB2YXIgaXNBcnIgPSBpc0FycmF5KHBhdGgpLFxuICAgICAgaXNDb21tb24gPSBpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpLFxuICAgICAgcGF0aEtleSA9IChwYXRoICsgJycpO1xuXG4gIHBhdGggPSB0b1BhdGgocGF0aCk7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGtleSA9IHBhdGhLZXk7XG4gICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICBpZiAoKGlzQXJyIHx8ICFpc0NvbW1vbikgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuICAgICAgb2JqZWN0ID0gcGF0aC5sZW5ndGggPT0gMSA/IG9iamVjdCA6IGJhc2VHZXQob2JqZWN0LCBiYXNlU2xpY2UocGF0aCwgMCwgLTEpKTtcbiAgICAgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBrZXkgPSBsYXN0KHBhdGgpO1xuICAgICAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZVxuICAgICAgPyAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIG9iamVjdCkpXG4gICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmplY3Rba2V5XSwgdW5kZWZpbmVkLCB0cnVlKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VQcm9wZXJ0eWAgd2hpY2ggc3VwcG9ydHMgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpIHtcbiAgdmFyIHBhdGhLZXkgPSAocGF0aCArICcnKTtcbiAgcGF0aCA9IHRvUGF0aChwYXRoKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCwgcGF0aEtleSk7XG4gIH07XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uc2xpY2VgIHdpdGhvdXQgYW4gaXRlcmF0ZWUgY2FsbCBndWFyZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNsaWNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD0wXSBUaGUgc3RhcnQgcG9zaXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2VuZD1hcnJheS5sZW5ndGhdIFRoZSBlbmQgcG9zaXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHNsaWNlIG9mIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VTbGljZShhcnJheSwgc3RhcnQsIGVuZCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICBzdGFydCA9IHN0YXJ0ID09IG51bGwgPyAwIDogKCtzdGFydCB8fCAwKTtcbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ID0gLXN0YXJ0ID4gbGVuZ3RoID8gMCA6IChsZW5ndGggKyBzdGFydCk7XG4gIH1cbiAgZW5kID0gKGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA+IGxlbmd0aCkgPyBsZW5ndGggOiAoK2VuZCB8fCAwKTtcbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuZ3RoO1xuICB9XG4gIGxlbmd0aCA9IHN0YXJ0ID4gZW5kID8gMCA6ICgoZW5kIC0gc3RhcnQpID4+PiAwKTtcbiAgc3RhcnQgPj4+PSAwO1xuXG4gIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBhcnJheVtpbmRleCArIHN0YXJ0XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0gcGFpcnMob2JqZWN0KSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgcmVzdWx0W2xlbmd0aF1bMl0gPSBpc1N0cmljdENvbXBhcmFibGUocmVzdWx0W2xlbmd0aF1bMV0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5IGtleXMgb24uXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXkodmFsdWUsIG9iamVjdCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKCh0eXBlID09ICdzdHJpbmcnICYmIHJlSXNQbGFpblByb3AudGVzdCh2YWx1ZSkpIHx8IHR5cGUgPT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSk7XG4gIHJldHVybiByZXN1bHQgfHwgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIHRvT2JqZWN0KG9iamVjdCkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gcHJvcGVydHkgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHRvUGF0aCh2YWx1ZSkge1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBiYXNlVG9TdHJpbmcodmFsdWUpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuICAgIHJlc3VsdC5wdXNoKHF1b3RlID8gc3RyaW5nLnJlcGxhY2UocmVFc2NhcGVDaGFyLCAnJDEnKSA6IChudW1iZXIgfHwgbWF0Y2gpKTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGFzdCBlbGVtZW50IG9mIGBhcnJheWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBBcnJheVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHF1ZXJ5LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBgYXJyYXlgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmxhc3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gbGFzdChhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICByZXR1cm4gbGVuZ3RoID8gYXJyYXlbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUgYXQgYHBhdGhgIG9uIGFcbiAqIGdpdmVuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxpdHlcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdHMgPSBbXG4gKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDIgfSB9IH0sXG4gKiAgIHsgJ2EnOiB7ICdiJzogeyAnYyc6IDEgfSB9IH1cbiAqIF07XG4gKlxuICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iLmMnKSk7XG4gKiAvLyA9PiBbMiwgMV1cbiAqXG4gKiBfLnBsdWNrKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InLCAnYyddKSksICdhLmIuYycpO1xuICogLy8gPT4gWzEsIDJdXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHBhdGgpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlQ2FsbGJhY2s7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWNhbGxiYWNrL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC43IChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2xvZGFzaC5pc2FycmF5JyksXG4gICAgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnbG9kYXNoLmlzdHlwZWRhcnJheScpLFxuICAgIGtleXMgPSByZXF1aXJlKCdsb2Rhc2gua2V5cycpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzYCBiaW5kaW5nXG4gKiBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBhcnJheVRhZyxcbiAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXG4gIGlmICghb2JqSXNBcnIpIHtcbiAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG4gICAgaWYgKG9ialRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICBvYmpUYWcgPSBvYmplY3RUYWc7XG4gICAgfSBlbHNlIGlmIChvYmpUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgIH1cbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgaWYgKG90aFRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICBvdGhUYWcgPSBvYmplY3RUYWc7XG4gICAgfSBlbHNlIGlmIChvdGhUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICBvdGhJc0FyciA9IGlzVHlwZWRBcnJheShvdGhlcik7XG4gICAgfVxuICB9XG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIShvYmpJc0FyciB8fCBvYmpJc09iaikpIHtcbiAgICByZXR1cm4gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcpO1xuICB9XG4gIGlmICghaXNMb29zZSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIC8vIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGRldGVjdGluZyBjaXJjdWxhciByZWZlcmVuY2VzIHNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI0pPLlxuICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cbiAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBvYmplY3QpIHtcbiAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PSBvdGhlcjtcbiAgICB9XG4gIH1cbiAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgc3RhY2tBLnB1c2gob2JqZWN0KTtcbiAgc3RhY2tCLnB1c2gob3RoZXIpO1xuXG4gIHZhciByZXN1bHQgPSAob2JqSXNBcnIgPyBlcXVhbEFycmF5cyA6IGVxdWFsT2JqZWN0cykob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cbiAgc3RhY2tBLnBvcCgpO1xuICBzdGFja0IucG9wKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgYXJyYXlzLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG4gIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNMb29zZSAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdLFxuICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBhcnJWYWx1ZSwgaXNMb29zZSA/IGFyclZhbHVlIDogb3RoVmFsdWUsIGluZGV4KSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoaXNMb29zZSkge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZCBib29sZWFuc1xuICAgICAgLy8gdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXMgbm90IGVxdWFsLlxuICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSBlcnJvclRhZzpcbiAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cbiAgICAgIHJldHVybiAob2JqZWN0ICE9ICtvYmplY3QpXG4gICAgICAgID8gb3RoZXIgIT0gK290aGVyXG4gICAgICAgIDogb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncyBwcmltaXRpdmVzIGFuZCBzdHJpbmdcbiAgICAgIC8vIG9iamVjdHMgYXMgZXF1YWwuIFNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI3gxNS4xMC42LjQgZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzTG9vc2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG4gICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IG9ialZhbHVlLCBpc0xvb3NlPyBvYmpWYWx1ZSA6IG90aFZhbHVlLCBrZXkpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWQgPyBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikgOiByZXN1bHQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcbiAgfVxuICBpZiAoIXNraXBDdG9yKSB7XG4gICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgIC8vIE5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsLlxuICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5fYmFzZWlzZXF1YWwvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA1MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjIgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTGVuZ3RoKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVHlwZWRBcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zb21lL34vbG9kYXNoLl9iYXNlY2FsbGJhY2svfi9sb2Rhc2guX2Jhc2Vpc2VxdWFsL34vbG9kYXNoLmlzdHlwZWRhcnJheS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDUzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMSAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUNhbGxiYWNrYCB3aGljaCBvbmx5IHN1cHBvcnRzIGB0aGlzYCBiaW5kaW5nXG4gKiBhbmQgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gaWRlbnRpdHk7XG4gIH1cbiAgaWYgKHRoaXNBcmcgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmdW5jO1xuICB9XG4gIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICB9O1xuICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgfTtcbiAgICBjYXNlIDU6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmluZENhbGxiYWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5fYmluZGNhbGxiYWNrL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogbG9kYXNoIDMuMC4xIChDdXN0b20gQnVpbGQpIDxodHRwczovL2xvZGFzaC5jb20vPlxuICogQnVpbGQ6IGBsb2Rhc2ggbW9kZXJuIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IDIwMTItMjAxNSBUaGUgRG9qbyBGb3VuZGF0aW9uIDxodHRwOi8vZG9qb2ZvdW5kYXRpb24ub3JnLz5cbiAqIEJhc2VkIG9uIFVuZGVyc2NvcmUuanMgMS44LjMgPGh0dHA6Ly91bmRlcnNjb3JlanMub3JnL0xJQ0VOU0U+XG4gKiBDb3B5cmlnaHQgMjAwOS0yMDE1IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKiBBdmFpbGFibGUgdW5kZXIgTUlUIGxpY2Vuc2UgPGh0dHBzOi8vbG9kYXNoLmNvbS9saWNlbnNlPlxuICovXG52YXIga2V5cyA9IHJlcXVpcmUoJ2xvZGFzaC5rZXlzJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB0d28gZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIGtleS12YWx1ZSBwYWlycyBmb3IgYG9iamVjdGAsXG4gKiBlLmcuIGBbW2tleTEsIHZhbHVlMV0sIFtrZXkyLCB2YWx1ZTJdXWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbmV3IGFycmF5IG9mIGtleS12YWx1ZSBwYWlycy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5wYWlycyh7ICdiYXJuZXknOiAzNiwgJ2ZyZWQnOiA0MCB9KTtcbiAqIC8vID0+IFtbJ2Jhcm5leScsIDM2XSwgWydmcmVkJywgNDBdXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICovXG5mdW5jdGlvbiBwYWlycyhvYmplY3QpIHtcbiAgb2JqZWN0ID0gdG9PYmplY3Qob2JqZWN0KTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgcmVzdWx0W2luZGV4XSA9IFtrZXksIG9iamVjdFtrZXldXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhaXJzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoLnNvbWUvfi9sb2Rhc2guX2Jhc2VjYWxsYmFjay9+L2xvZGFzaC5wYWlycy9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuNCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xudmFyIGtleXMgPSByZXF1aXJlKCdsb2Rhc2gua2V5cycpO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAqL1xudmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYGJhc2VGb3JJbmAgYW5kIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlc1xuICogb3ZlciBgb2JqZWN0YCBwcm9wZXJ0aWVzIHJldHVybmVkIGJ5IGBrZXlzRnVuY2AgaW52b2tpbmcgYGl0ZXJhdGVlYCBmb3JcbiAqIGVhY2ggcHJvcGVydHkuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseVxuICogcmV0dXJuaW5nIGBmYWxzZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbnZhciBiYXNlRm9yID0gY3JlYXRlQmFzZUZvcigpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvck93bmAgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYmFzZUZvck93bihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgYmFzZUVhY2hgIG9yIGBiYXNlRWFjaFJpZ2h0YCBmdW5jdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgcmV0dXJuIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgIGl0ZXJhYmxlID0gdG9PYmplY3QoY29sbGVjdGlvbik7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNGdW5jKSB7XG4gICAgdmFyIGl0ZXJhYmxlID0gdG9PYmplY3Qob2JqZWN0KSxcbiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG4gKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAqL1xudmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIG9iamVjdCBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIHRvT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IE9iamVjdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUVhY2g7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2guc29tZS9+L2xvZGFzaC5fYmFzZWVhY2gvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA1NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBsb2Rhc2ggMy4wLjkgKEN1c3RvbSBCdWlsZCkgPGh0dHBzOi8vbG9kYXNoLmNvbS8+XG4gKiBCdWlsZDogYGxvZGFzaCBtb2Rlcm4gbW9kdWxhcml6ZSBleHBvcnRzPVwibnBtXCIgLW8gLi9gXG4gKiBDb3B5cmlnaHQgMjAxMi0yMDE1IFRoZSBEb2pvIEZvdW5kYXRpb24gPGh0dHA6Ly9kb2pvZm91bmRhdGlvbi5vcmcvPlxuICogQmFzZWQgb24gVW5kZXJzY29yZS5qcyAxLjguMyA8aHR0cDovL3VuZGVyc2NvcmVqcy5vcmcvTElDRU5TRT5cbiAqIENvcHlyaWdodCAyMDA5LTIwMTUgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbiAqIEF2YWlsYWJsZSB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKi9cblxuLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG4gKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAqL1xudmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICB2YWx1ZSA9ICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpID8gK3ZhbHVlIDogLTE7XG4gIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcbiAgcmV0dXJuIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGg7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBwcm92aWRlZCBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIHZhbHVlIGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBpbmRleCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIGluZGV4IG9yIGtleSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqZWN0IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgb2JqZWN0IGFyZ3VtZW50LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcmd1bWVudHMgYXJlIGZyb20gYW4gaXRlcmF0ZWUgY2FsbCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgaW5kZXgsIG9iamVjdCkge1xuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHR5cGUgPSB0eXBlb2YgaW5kZXg7XG4gIGlmICh0eXBlID09ICdudW1iZXInXG4gICAgICA/IChpc0FycmF5TGlrZShvYmplY3QpICYmIGlzSW5kZXgoaW5kZXgsIG9iamVjdC5sZW5ndGgpKVxuICAgICAgOiAodHlwZSA9PSAnc3RyaW5nJyAmJiBpbmRleCBpbiBvYmplY3QpKSB7XG4gICAgdmFyIG90aGVyID0gb2JqZWN0W2luZGV4XTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHZhbHVlID8gKHZhbHVlID09PSBvdGhlcikgOiAob3RoZXIgIT09IG90aGVyKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGUgW2xhbmd1YWdlIHR5cGVdKGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDgpIG9mIGBPYmplY3RgLlxuICogKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdCgxKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIC8vIEF2b2lkIGEgVjggSklUIGJ1ZyBpbiBDaHJvbWUgMTktMjAuXG4gIC8vIFNlZSBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL3Y4L2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MSBmb3IgbW9yZSBkZXRhaWxzLlxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0l0ZXJhdGVlQ2FsbDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zb21lL34vbG9kYXNoLl9pc2l0ZXJhdGVlY2FsbC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDU3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjkuMCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG5cbi8qKlxuICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYCBbc3BlY2lhbCBjaGFyYWN0ZXJzXShodHRwOi8vd3d3LnJlZ3VsYXItZXhwcmVzc2lvbnMuaW5mby9jaGFyYWN0ZXJzLmh0bWwjc3BlY2lhbCkuXG4gKiBJbiBhZGRpdGlvbiB0byBzcGVjaWFsIGNoYXJhY3RlcnMgdGhlIGZvcndhcmQgc2xhc2ggaXMgZXNjYXBlZCB0byBhbGxvdyBmb3JcbiAqIGVhc2llciBgZXZhbGAgdXNlIGFuZCBgRnVuY3Rpb25gIGNvbXBpbGF0aW9uLlxuICovXG52YXIgcmVSZWdFeHBDaGFycyA9IC9bLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZyxcbiAgICByZUhhc1JlZ0V4cENoYXJzID0gUmVnRXhwKHJlUmVnRXhwQ2hhcnMuc291cmNlKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkgPiA1KS4gKi9cbnZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogKHZhbHVlICsgJycpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBlc2NhcGVSZWdFeHAoZm5Ub1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KSlcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgcmV0dXJuIGlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTmF0aXZlKF8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGZ1bmNUYWcpIHtcbiAgICByZXR1cm4gcmVJc05hdGl2ZS50ZXN0KGZuVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIHRoZSBgUmVnRXhwYCBzcGVjaWFsIGNoYXJhY3RlcnMgXCJcXFwiLCBcIi9cIiwgXCJeXCIsIFwiJFwiLCBcIi5cIiwgXCJ8XCIsIFwiP1wiLFxuICogXCIqXCIsIFwiK1wiLCBcIihcIiwgXCIpXCIsIFwiW1wiLCBcIl1cIiwgXCJ7XCIgYW5kIFwifVwiIGluIGBzdHJpbmdgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5lc2NhcGVSZWdFeHAoJ1tsb2Rhc2hdKGh0dHBzOi8vbG9kYXNoLmNvbS8pJyk7XG4gKiAvLyA9PiAnXFxbbG9kYXNoXFxdXFwoaHR0cHM6XFwvXFwvbG9kYXNoXFwuY29tXFwvXFwpJ1xuICovXG5mdW5jdGlvbiBlc2NhcGVSZWdFeHAoc3RyaW5nKSB7XG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1JlZ0V4cENoYXJzLnRlc3Qoc3RyaW5nKSlcbiAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhcnMsICdcXFxcJCYnKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5hdGl2ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zb21lL34vbG9kYXNoLmtleXMvfi9sb2Rhc2guX2dldG5hdGl2ZS9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDU4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIGxvZGFzaCAzLjAuMyAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZGVybiBtb2R1bGFyaXplIGV4cG9ydHM9XCJucG1cIiAtbyAuL2BcbiAqIENvcHlyaWdodCAyMDEyLTIwMTUgVGhlIERvam8gRm91bmRhdGlvbiA8aHR0cDovL2Rvam9mb3VuZGF0aW9uLm9yZy8+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuICogQXZhaWxhYmxlIHVuZGVyIE1JVCBsaWNlbnNlIDxodHRwczovL2xvZGFzaC5jb20vbGljZW5zZT5cbiAqL1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHBzOi8vcGVvcGxlLm1vemlsbGEub3JnL35qb3JlbmRvcmZmL2VzNi1kcmFmdC5odG1sI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgaXNMZW5ndGgoZ2V0TGVuZ3RoKHZhbHVlKSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBiYXNlZCBvbiBbYFRvTGVuZ3RoYF0oaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC5zb21lL34vbG9kYXNoLmtleXMvfi9sb2Rhc2guaXNhcmd1bWVudHMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiaW1wb3J0IEJhY29uIGZyb20gJ2JhY29uanMnO1xuXG4vLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNDc3NDI3NlxuQmFjb24uRXZlbnRTdHJlYW0ucHJvdG90eXBlLmJ1ZmZlclVudGlsVmFsdWUgPSBmdW5jdGlvbih2YWx2ZSkge1xuICB2YXIgdmFsdmVfID0gdmFsdmUuc3RhcnRXaXRoKGZhbHNlKTtcblxuICByZXR1cm4gdGhpcy5maWx0ZXIoZmFsc2UpLm1lcmdlKHZhbHZlXy5mbGF0TWFwQ29uY2F0KChmdW5jdGlvbihfdGhpcykge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLnNjYW4oW10sIChmdW5jdGlvbih4cywgeCkge1xuICAgICAgICAgICAgcmV0dXJuIHhzLmNvbmNhdCh4KTtcbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIGVhZ2VyOiB0cnVlXG4gICAgICAgIH0pLnNhbXBsZWRCeSh2YWx2ZSkudGFrZSgxKTtcbiAgICB9O1xuICB9KSh0aGlzKSkpO1xufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc2NyaXB0cy9idWZmZXJVbnRpbFZhbHVlLmpzXG4gKiovIiwiY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG5jb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dhbWUnKS5hcHBlbmRDaGlsZChjYW52YXMpO1xuXG5mdW5jdGlvbiByZXNpemUoKSB7XG4gIGNhbnZhcy53aWR0aCA9IGNhbnZhcy5vZmZzZXRXaWR0aDtcbiAgY2FudmFzLmhlaWdodCA9IGNhbnZhcy5vZmZzZXRIZWlnaHQ7XG59XG5cbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemUpO1xucmVzaXplKCk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7Y2FudmFzLGN0eH07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvY2FudmFzLmpzXG4gKiovIiwiaW1wb3J0IGlkZW50aXR5IGZyb20gJ2xvZGFzaC5pZGVudGl0eSc7XG5pbXBvcnQgQmFjb24gZnJvbSAnYmFjb25qcyc7XG5cbmltcG9ydCB7XG4gIHVwZGF0ZUJpcmQsXG4gIGJpcmRUb3VjaGVzUGlwZSxcbiAgYmlyZFRvdWNoZXNHcm91bmRcbn0gZnJvbSAnLi9iaXJkJ1xuXG5pbXBvcnQge3VwZGF0ZVdvcmxkfSBmcm9tICcuL3dvcmxkJ1xuaW1wb3J0IHt1cGRhdGVQaXBlc30gZnJvbSAnLi9waXBlcydcblxuLy8gR2FtZSB3b3JsZCB1cGRhdGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdhbWVMb29wKGlucHV0LCBpbml0aWFscykge1xuICBjb25zdCBnYW1lT3V0cHV0ID0gbmV3IEJhY29uLkJ1cygpO1xuXG4gIGNvbnN0IGJpcmRUb3VjaGVkR3JvdW5kID0gZ2FtZU91dHB1dC5mbGF0TWFwKGJpcmRUb3VjaGVzR3JvdW5kKTtcbiAgY29uc3QgYmlyZFRvdWNoZWRQaXBlID0gZ2FtZU91dHB1dC5tYXAoYmlyZFRvdWNoZXNQaXBlKTtcblxuICBjb25zdCBvdXRwdXQgPSBCYWNvbi56aXBXaXRoKFxuICAgIChiaXJkVG91Y2hlZEdyb3VuZCwgYmlyZFRvdWNoZWRQaXBlKSA9PiAoe2JpcmRUb3VjaGVkR3JvdW5kLCBiaXJkVG91Y2hlZFBpcGV9KSxcbiAgICBiaXJkVG91Y2hlZEdyb3VuZC5zdGFydFdpdGgoZmFsc2UpLFxuICAgIGJpcmRUb3VjaGVkUGlwZS5zdGFydFdpdGgoZmFsc2UpXG4gIClcblxuICBjb25zdCBpbyA9IEJhY29uLnppcEFzQXJyYXkoXG4gICAgaW5wdXQsXG4gICAgb3V0cHV0XG4gICk7XG5cbiAgY29uc3QgdXBkYXRlZFdvcmxkID0gaW8uc2Nhbihpbml0aWFscy53b3JsZCwgdXBkYXRlV29ybGQpLnNraXAoMSk7XG5cbiAgY29uc3QgdXBkYXRlZEJpcmQgPSBCYWNvbi56aXBBc0FycmF5KGlvLCB1cGRhdGVkV29ybGQpXG4gICAgLnNjYW4oaW5pdGlhbHMuYmlyZCwgdXBkYXRlQmlyZCkuc2tpcCgxKTtcblxuICBjb25zdCB1cGRhdGVkUGlwZXMgPSBCYWNvbi56aXBBc0FycmF5KHVwZGF0ZWRXb3JsZCwgdXBkYXRlZEJpcmQpXG4gICAgLnNjYW4oaW5pdGlhbHMucGlwZXMsIHVwZGF0ZVBpcGVzKS5za2lwKDEpO1xuXG4gIGNvbnN0IGdhbWUgPSBCYWNvbi56aXBXaXRoKFxuICAgICh3b3JsZCwgYmlyZCwgcGlwZXMpID0+ICh7XG4gICAgICB3b3JsZCxcbiAgICAgIGJpcmQsXG4gICAgICBwaXBlc1xuICAgIH0pLFxuICAgIHVwZGF0ZWRXb3JsZCxcbiAgICB1cGRhdGVkQmlyZCxcbiAgICB1cGRhdGVkUGlwZXMpO1xuXG4gIGdhbWUub25WYWx1ZShnYW1lT3V0cHV0LnB1c2guYmluZChnYW1lT3V0cHV0KSk7XG5cbiAgcmV0dXJuIGdhbWU7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NjcmlwdHMvZ2FtZUxvb3AuanNcbiAqKi8iLCJpbXBvcnQgaWRlbnRpdHkgZnJvbSAnbG9kYXNoLmlkZW50aXR5JztcbmltcG9ydCBCYWNvbiBmcm9tICdiYWNvbmpzJztcbnJlcXVpcmUoJ2JhY29uLmFuaW1hdGlvbmZyYW1lJyk7XG5yZXF1aXJlKCcuL2J1ZmZlclVudGlsVmFsdWUnKTtcblxuaW1wb3J0IHtcbiAgRlJBTUVfUkFURSxcbiAgU1BBQ0VfS0VZXG59IGZyb20gJy4vY29uc3RhbnRzJztcblxuaW1wb3J0IHtyZWNvcmQsIHNlbGVjdGVkU3RhdGUkLCBpc1J1bm5pbmckLCBmdXR1cmVJbnB1dCR9IGZyb20gJy4vc3RvcmUnXG5pbXBvcnQgZ2FtZUxvb3AgZnJvbSAnLi9nYW1lTG9vcCdcbmltcG9ydCB7aW5pdGlhbEJpcmR9IGZyb20gJy4vYmlyZCdcbmltcG9ydCB7aW5pdGlhbFdvcmxkfSBmcm9tICcuL3dvcmxkJ1xuaW1wb3J0IHtpbml0aWFsUGlwZXN9IGZyb20gJy4vcGlwZXMnXG5cblxuLy8gVXNlciBldmVudHNcbmNvbnN0IHNwYWNlUHJlc3NlZCA9IEJhY29uLmZyb21FdmVudCh3aW5kb3csICdrZXlkb3duJykubWFwKCcua2V5Q29kZScpLmZpbHRlcih4ID0+IHggPT09IFNQQUNFX0tFWSk7XG5jb25zdCBtb3VzZUNsaWNrZWQgPSBCYWNvbi5mcm9tRXZlbnQod2luZG93LCAnY2xpY2snKVxuXG4vLyBHYW1lIHRpY2tcbmNvbnN0IHRpY2sgPSBCYWNvbi5zY2hlZHVsZUFuaW1hdGlvbkZyYW1lKCkuYnVmZmVyV2l0aFRpbWUoRlJBTUVfUkFURSlcbiAgLmZpbHRlcihpc1J1bm5pbmckKTtcblxuY29uc3QgdXNlckNsaWNrc0ZvckZyYW1lID0gbW91c2VDbGlja2VkLm1lcmdlKHNwYWNlUHJlc3NlZCkuYnVmZmVyVW50aWxWYWx1ZSh0aWNrKVxuXG4vLyBJbnB1dCBjYXVzZWQgYnkgZ2FtZSBzdGF0ZVxubGV0IGkgPSAwO1xuY29uc3QgaW5wdXQgPSBCYWNvbi56aXBXaXRoKChjbGlja3MpID0+ICh7Y2xpY2tzLCB0aWNrOiArK2l9KSxcbiAgdXNlckNsaWNrc0ZvckZyYW1lXG4gIC8vIFBvc3NpYmx5IG1vcmUgY29taW5nXG4pXG5cbmNvbnN0IGZ1dHVyZXMkID0gQmFjb24uemlwV2l0aCgoaW5pdGlhbFN0YXRlLCBmdXR1cmVJbnB1dCkgPT4ge1xuICAvLyBjb25zb2xlLmxvZyhpbml0aWFsU3RhdGUsIGZ1dHVyZUlucHV0KTtcbiAgcmV0dXJuIGdhbWVMb29wKEJhY29uLmZyb21BcnJheShmdXR1cmVJbnB1dCksIGluaXRpYWxTdGF0ZSk7XG59LCBzZWxlY3RlZFN0YXRlJCwgZnV0dXJlSW5wdXQkKS5mbGF0TWFwKGlkZW50aXR5KTtcblxuXG4vLyBmdXR1cmVzJC5sb2coKVxuXG5CYWNvblxuICAuY29tYmluZUFzQXJyYXkoZnV0dXJlcyQsIHNlbGVjdGVkU3RhdGUkKVxuICAub25WYWx1ZXMocmVxdWlyZSgnLi9yZW5kZXInKS5yZW5kZXJGdXR1cmUpXG5cbmNvbnN0IGdhbWUgPSBnYW1lTG9vcChpbnB1dC5maWx0ZXIoaXNSdW5uaW5nJCksIHtcbiAgYmlyZDogaW5pdGlhbEJpcmQsXG4gIHBpcGVzOiBpbml0aWFsUGlwZXMsXG4gIHdvcmxkOiBpbml0aWFsV29ybGRcbn0pO1xuXG5CYWNvbi56aXBXaXRoKChzdGF0ZSwgaW5wdXQpID0+ICh7c3RhdGUsIGlucHV0fSksIGdhbWUsIGlucHV0KVxuLmZpbHRlcihpc1J1bm5pbmckKVxuLm9uVmFsdWUocmVjb3JkKTtcblxuXG4vLyBSZW5kZXJpbmdcbmdhbWUubWVyZ2Uoc2VsZWN0ZWRTdGF0ZSQpLm9uVmFsdWUocmVxdWlyZSgnLi9yZW5kZXInKSk7XG5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc2NyaXB0cy9pbmRleC5qc1xuICoqLyIsImltcG9ydCBCYWNvbiBmcm9tICdiYWNvbmpzJztcbmltcG9ydCBwbHVjayBmcm9tICdsb2Rhc2gucGx1Y2snO1xuaW1wb3J0IGdldCBmcm9tICdsb2Rhc2guZ2V0JztcbmltcG9ydCBpZGVudGl0eSBmcm9tICdsb2Rhc2guaWRlbnRpdHknO1xuaW1wb3J0IHBhcnRpYWxSaWdodCBmcm9tICdsb2Rhc2gucGFydGlhbHJpZ2h0JztcbmltcG9ydCB7cmVwbGFjZU5vdGlmaWVyJH0gZnJvbSAnLi9ob3RSZXBsYWNlTm90aWZpZXInO1xuXG5jb25zdCBzbGlkZXJFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdXR1cmUtc2xpZGVyJyk7XG5jb25zdCBmcmFtZXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcmFtZXMnKTtcblxuaW1wb3J0IHtQQVVTRV9LRVl9IGZyb20gJy4vY29uc3RhbnRzJztcblxuY29uc3QgcmVjb3JkZWRTdGF0ZXMkID0gbmV3IEJhY29uLkJ1cygpO1xuXG5jb25zdCBzbGlkZXJDaGFuZ2UkID0gQmFjb24uZnJvbUV2ZW50KHNsaWRlckVsLCAnaW5wdXQnKVxuICAubWFwKGUgPT4gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUsIDEwKSk7XG5cbmNvbnN0IHBhdXNlZCQgPSBCYWNvbi5mcm9tRXZlbnQod2luZG93LCAna2V5ZG93bicpXG4gIC5maWx0ZXIoZXYgPT4gZXYua2V5Q29kZSA9PT0gUEFVU0VfS0VZKVxuICAuc2NhbihmYWxzZSwgcGF1c2VkID0+ICFwYXVzZWQpO1xuXG5wYXVzZWQkLmZpbHRlcihpZGVudGl0eSkub25WYWx1ZSgoKSA9PiBzbGlkZXJFbC5mb2N1cygpKTtcblxuY29uc3QgYWxsU3RhdGVzJCA9IHJlY29yZGVkU3RhdGVzJC5zY2FuKFtdLCAoc3RhdGVzLCB2YWx1ZSkgPT4ge1xuICBzdGF0ZXMucHVzaCh2YWx1ZSlcbiAgcmV0dXJuIHN0YXRlcztcbn0pO1xuXG5jb25zdCB1cGRhdGVSZXF1ZXN0JCA9IEJhY29uLmNvbWJpbmVXaXRoKGlkZW50aXR5LCBzbGlkZXJDaGFuZ2UkLCByZXBsYWNlTm90aWZpZXIkKTtcbmNvbnN0IGlzUnVubmluZyQgPSB1cGRhdGVSZXF1ZXN0JC5tYXAoZmFsc2UpLnRvUHJvcGVydHkoKS5zdGFydFdpdGgodHJ1ZSkuYW5kKHBhdXNlZCQubm90KCkpO1xuXG5jb25zdCBzZWxlY3RlZFN0YXRlJCA9IEJhY29uLmNvbWJpbmVXaXRoKChhcnIsIGluZGV4KSA9PiBhcnJbaW5kZXhdIHx8IGFyclthcnIubGVuZ3RoIC0gMV0sXG4gIGFsbFN0YXRlcyQuZmlsdGVyKGlzUnVubmluZyQpLFxuICB1cGRhdGVSZXF1ZXN0JCkubWFwKCcuc3RhdGUnKS50b0V2ZW50U3RyZWFtKCk7XG5cbmNvbnN0IGZ1dHVyZUlucHV0JCA9IGFsbFN0YXRlcyQuc2FtcGxlZEJ5KFxuICB1cGRhdGVSZXF1ZXN0JCxcbiAgKGFyciwgaW5kZXgpID0+IGFyci5zbGljZShpbmRleCArIDEsIGFyci5sZW5ndGgpXG4gICkubWFwKHBhcnRpYWxSaWdodChwbHVjaywgJ2lucHV0JykpO1xuXG5jb25zdCBuZXdTdGF0ZXNMZW5ndGgkID0gYWxsU3RhdGVzJC5tYXAoYSA9PiBhLmxlbmd0aCk7XG5cbm5ld1N0YXRlc0xlbmd0aCQuZmlsdGVyKGlzUnVubmluZyQpXG4gIC5vblZhbHVlKHZhbCA9PiBzbGlkZXJFbC52YWx1ZSA9IHZhbClcblxubmV3U3RhdGVzTGVuZ3RoJC5vblZhbHVlKHggPT4ge1xuICBzbGlkZXJFbC5tYXggPSB4O1xuICBmcmFtZXNFbC5pbm5lckhUTUwgPSB4O1xufSlcblxubW9kdWxlLmV4cG9ydHMucmVjb3JkID0gcmVjb3JkZWRTdGF0ZXMkLnB1c2guYmluZChyZWNvcmRlZFN0YXRlcyQpO1xubW9kdWxlLmV4cG9ydHMuaXNSdW5uaW5nJCA9IGlzUnVubmluZyQ7XG5tb2R1bGUuZXhwb3J0cy5zZWxlY3RlZFN0YXRlJCA9IHNlbGVjdGVkU3RhdGUkO1xubW9kdWxlLmV4cG9ydHMuZnV0dXJlSW5wdXQkID0gZnV0dXJlSW5wdXQkO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zY3JpcHRzL3N0b3JlLmpzXG4gKiovIiwiZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbShtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pICsgbWluO1xufVxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zY3JpcHRzL3V0aWxzLmpzXG4gKiovIiwiLy8gaHR0cDovL3dpa2kuY29tbW9uanMub3JnL3dpa2kvVW5pdF9UZXN0aW5nLzEuMFxuLy9cbi8vIFRISVMgSVMgTk9UIFRFU1RFRCBOT1IgTElLRUxZIFRPIFdPUksgT1VUU0lERSBWOCFcbi8vXG4vLyBPcmlnaW5hbGx5IGZyb20gbmFyd2hhbC5qcyAoaHR0cDovL25hcndoYWxqcy5vcmcpXG4vLyBDb3B5cmlnaHQgKGMpIDIwMDkgVGhvbWFzIFJvYmluc29uIDwyODBub3J0aC5jb20+XG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuLy8gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgJ1NvZnR3YXJlJyksIHRvXG4vLyBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZVxuLy8gcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yXG4vLyBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuLy8gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICdBUyBJUycsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTlxuLy8gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTlxuLy8gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHdoZW4gdXNlZCBpbiBub2RlLCB0aGlzIHdpbGwgYWN0dWFsbHkgbG9hZCB0aGUgdXRpbCBtb2R1bGUgd2UgZGVwZW5kIG9uXG4vLyB2ZXJzdXMgbG9hZGluZyB0aGUgYnVpbHRpbiB1dGlsIG1vZHVsZSBhcyBoYXBwZW5zIG90aGVyd2lzZVxuLy8gdGhpcyBpcyBhIGJ1ZyBpbiBub2RlIG1vZHVsZSBsb2FkaW5nIGFzIGZhciBhcyBJIGFtIGNvbmNlcm5lZFxudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsLycpO1xuXG52YXIgcFNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xudmFyIGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8vIDEuIFRoZSBhc3NlcnQgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9ucyB0aGF0IHRocm93XG4vLyBBc3NlcnRpb25FcnJvcidzIHdoZW4gcGFydGljdWxhciBjb25kaXRpb25zIGFyZSBub3QgbWV0LiBUaGVcbi8vIGFzc2VydCBtb2R1bGUgbXVzdCBjb25mb3JtIHRvIHRoZSBmb2xsb3dpbmcgaW50ZXJmYWNlLlxuXG52YXIgYXNzZXJ0ID0gbW9kdWxlLmV4cG9ydHMgPSBvaztcblxuLy8gMi4gVGhlIEFzc2VydGlvbkVycm9yIGlzIGRlZmluZWQgaW4gYXNzZXJ0LlxuLy8gbmV3IGFzc2VydC5Bc3NlcnRpb25FcnJvcih7IG1lc3NhZ2U6IG1lc3NhZ2UsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0dWFsOiBhY3R1YWwsXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IGV4cGVjdGVkIH0pXG5cbmFzc2VydC5Bc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKG9wdGlvbnMpIHtcbiAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgdGhpcy5hY3R1YWwgPSBvcHRpb25zLmFjdHVhbDtcbiAgdGhpcy5leHBlY3RlZCA9IG9wdGlvbnMuZXhwZWN0ZWQ7XG4gIHRoaXMub3BlcmF0b3IgPSBvcHRpb25zLm9wZXJhdG9yO1xuICBpZiAob3B0aW9ucy5tZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gb3B0aW9ucy5tZXNzYWdlO1xuICAgIHRoaXMuZ2VuZXJhdGVkTWVzc2FnZSA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubWVzc2FnZSA9IGdldE1lc3NhZ2UodGhpcyk7XG4gICAgdGhpcy5nZW5lcmF0ZWRNZXNzYWdlID0gdHJ1ZTtcbiAgfVxuICB2YXIgc3RhY2tTdGFydEZ1bmN0aW9uID0gb3B0aW9ucy5zdGFja1N0YXJ0RnVuY3Rpb24gfHwgZmFpbDtcblxuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBzdGFja1N0YXJ0RnVuY3Rpb24pO1xuICB9XG4gIGVsc2Uge1xuICAgIC8vIG5vbiB2OCBicm93c2VycyBzbyB3ZSBjYW4gaGF2ZSBhIHN0YWNrdHJhY2VcbiAgICB2YXIgZXJyID0gbmV3IEVycm9yKCk7XG4gICAgaWYgKGVyci5zdGFjaykge1xuICAgICAgdmFyIG91dCA9IGVyci5zdGFjaztcblxuICAgICAgLy8gdHJ5IHRvIHN0cmlwIHVzZWxlc3MgZnJhbWVzXG4gICAgICB2YXIgZm5fbmFtZSA9IHN0YWNrU3RhcnRGdW5jdGlvbi5uYW1lO1xuICAgICAgdmFyIGlkeCA9IG91dC5pbmRleE9mKCdcXG4nICsgZm5fbmFtZSk7XG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgLy8gb25jZSB3ZSBoYXZlIGxvY2F0ZWQgdGhlIGZ1bmN0aW9uIGZyYW1lXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc3RyaXAgb3V0IGV2ZXJ5dGhpbmcgYmVmb3JlIGl0IChhbmQgaXRzIGxpbmUpXG4gICAgICAgIHZhciBuZXh0X2xpbmUgPSBvdXQuaW5kZXhPZignXFxuJywgaWR4ICsgMSk7XG4gICAgICAgIG91dCA9IG91dC5zdWJzdHJpbmcobmV4dF9saW5lICsgMSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhY2sgPSBvdXQ7XG4gICAgfVxuICB9XG59O1xuXG4vLyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3IgaW5zdGFuY2VvZiBFcnJvclxudXRpbC5pbmhlcml0cyhhc3NlcnQuQXNzZXJ0aW9uRXJyb3IsIEVycm9yKTtcblxuZnVuY3Rpb24gcmVwbGFjZXIoa2V5LCB2YWx1ZSkge1xuICBpZiAodXRpbC5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gJycgKyB2YWx1ZTtcbiAgfVxuICBpZiAodXRpbC5pc051bWJlcih2YWx1ZSkgJiYgIWlzRmluaXRlKHZhbHVlKSkge1xuICAgIHJldHVybiB2YWx1ZS50b1N0cmluZygpO1xuICB9XG4gIGlmICh1dGlsLmlzRnVuY3Rpb24odmFsdWUpIHx8IHV0aWwuaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB0cnVuY2F0ZShzLCBuKSB7XG4gIGlmICh1dGlsLmlzU3RyaW5nKHMpKSB7XG4gICAgcmV0dXJuIHMubGVuZ3RoIDwgbiA/IHMgOiBzLnNsaWNlKDAsIG4pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE1lc3NhZ2Uoc2VsZikge1xuICByZXR1cm4gdHJ1bmNhdGUoSlNPTi5zdHJpbmdpZnkoc2VsZi5hY3R1YWwsIHJlcGxhY2VyKSwgMTI4KSArICcgJyArXG4gICAgICAgICBzZWxmLm9wZXJhdG9yICsgJyAnICtcbiAgICAgICAgIHRydW5jYXRlKEpTT04uc3RyaW5naWZ5KHNlbGYuZXhwZWN0ZWQsIHJlcGxhY2VyKSwgMTI4KTtcbn1cblxuLy8gQXQgcHJlc2VudCBvbmx5IHRoZSB0aHJlZSBrZXlzIG1lbnRpb25lZCBhYm92ZSBhcmUgdXNlZCBhbmRcbi8vIHVuZGVyc3Rvb2QgYnkgdGhlIHNwZWMuIEltcGxlbWVudGF0aW9ucyBvciBzdWIgbW9kdWxlcyBjYW4gcGFzc1xuLy8gb3RoZXIga2V5cyB0byB0aGUgQXNzZXJ0aW9uRXJyb3IncyBjb25zdHJ1Y3RvciAtIHRoZXkgd2lsbCBiZVxuLy8gaWdub3JlZC5cblxuLy8gMy4gQWxsIG9mIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb25zIG11c3QgdGhyb3cgYW4gQXNzZXJ0aW9uRXJyb3Jcbi8vIHdoZW4gYSBjb3JyZXNwb25kaW5nIGNvbmRpdGlvbiBpcyBub3QgbWV0LCB3aXRoIGEgbWVzc2FnZSB0aGF0XG4vLyBtYXkgYmUgdW5kZWZpbmVkIGlmIG5vdCBwcm92aWRlZC4gIEFsbCBhc3NlcnRpb24gbWV0aG9kcyBwcm92aWRlXG4vLyBib3RoIHRoZSBhY3R1YWwgYW5kIGV4cGVjdGVkIHZhbHVlcyB0byB0aGUgYXNzZXJ0aW9uIGVycm9yIGZvclxuLy8gZGlzcGxheSBwdXJwb3Nlcy5cblxuZnVuY3Rpb24gZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCBvcGVyYXRvciwgc3RhY2tTdGFydEZ1bmN0aW9uKSB7XG4gIHRocm93IG5ldyBhc3NlcnQuQXNzZXJ0aW9uRXJyb3Ioe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgYWN0dWFsOiBhY3R1YWwsXG4gICAgZXhwZWN0ZWQ6IGV4cGVjdGVkLFxuICAgIG9wZXJhdG9yOiBvcGVyYXRvcixcbiAgICBzdGFja1N0YXJ0RnVuY3Rpb246IHN0YWNrU3RhcnRGdW5jdGlvblxuICB9KTtcbn1cblxuLy8gRVhURU5TSU9OISBhbGxvd3MgZm9yIHdlbGwgYmVoYXZlZCBlcnJvcnMgZGVmaW5lZCBlbHNld2hlcmUuXG5hc3NlcnQuZmFpbCA9IGZhaWw7XG5cbi8vIDQuIFB1cmUgYXNzZXJ0aW9uIHRlc3RzIHdoZXRoZXIgYSB2YWx1ZSBpcyB0cnV0aHksIGFzIGRldGVybWluZWRcbi8vIGJ5ICEhZ3VhcmQuXG4vLyBhc3NlcnQub2soZ3VhcmQsIG1lc3NhZ2Vfb3B0KTtcbi8vIFRoaXMgc3RhdGVtZW50IGlzIGVxdWl2YWxlbnQgdG8gYXNzZXJ0LmVxdWFsKHRydWUsICEhZ3VhcmQsXG4vLyBtZXNzYWdlX29wdCk7LiBUbyB0ZXN0IHN0cmljdGx5IGZvciB0aGUgdmFsdWUgdHJ1ZSwgdXNlXG4vLyBhc3NlcnQuc3RyaWN0RXF1YWwodHJ1ZSwgZ3VhcmQsIG1lc3NhZ2Vfb3B0KTsuXG5cbmZ1bmN0aW9uIG9rKHZhbHVlLCBtZXNzYWdlKSB7XG4gIGlmICghdmFsdWUpIGZhaWwodmFsdWUsIHRydWUsIG1lc3NhZ2UsICc9PScsIGFzc2VydC5vayk7XG59XG5hc3NlcnQub2sgPSBvaztcblxuLy8gNS4gVGhlIGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzaGFsbG93LCBjb2VyY2l2ZSBlcXVhbGl0eSB3aXRoXG4vLyA9PS5cbi8vIGFzc2VydC5lcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5lcXVhbCA9IGZ1bmN0aW9uIGVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UpIHtcbiAgaWYgKGFjdHVhbCAhPSBleHBlY3RlZCkgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnPT0nLCBhc3NlcnQuZXF1YWwpO1xufTtcblxuLy8gNi4gVGhlIG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHdoZXRoZXIgdHdvIG9iamVjdHMgYXJlIG5vdCBlcXVhbFxuLy8gd2l0aCAhPSBhc3NlcnQubm90RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90RXF1YWwgPSBmdW5jdGlvbiBub3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT0gZXhwZWN0ZWQpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICchPScsIGFzc2VydC5ub3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDcuIFRoZSBlcXVpdmFsZW5jZSBhc3NlcnRpb24gdGVzdHMgYSBkZWVwIGVxdWFsaXR5IHJlbGF0aW9uLlxuLy8gYXNzZXJ0LmRlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5kZWVwRXF1YWwgPSBmdW5jdGlvbiBkZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoIV9kZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCkpIHtcbiAgICBmYWlsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2UsICdkZWVwRXF1YWwnLCBhc3NlcnQuZGVlcEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSB7XG4gIC8vIDcuMS4gQWxsIGlkZW50aWNhbCB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGFzIGRldGVybWluZWQgYnkgPT09LlxuICBpZiAoYWN0dWFsID09PSBleHBlY3RlZCkge1xuICAgIHJldHVybiB0cnVlO1xuXG4gIH0gZWxzZSBpZiAodXRpbC5pc0J1ZmZlcihhY3R1YWwpICYmIHV0aWwuaXNCdWZmZXIoZXhwZWN0ZWQpKSB7XG4gICAgaWYgKGFjdHVhbC5sZW5ndGggIT0gZXhwZWN0ZWQubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFjdHVhbC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFjdHVhbFtpXSAhPT0gZXhwZWN0ZWRbaV0pIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcblxuICAvLyA3LjIuIElmIHRoZSBleHBlY3RlZCB2YWx1ZSBpcyBhIERhdGUgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIERhdGUgb2JqZWN0IHRoYXQgcmVmZXJzIHRvIHRoZSBzYW1lIHRpbWUuXG4gIH0gZWxzZSBpZiAodXRpbC5pc0RhdGUoYWN0dWFsKSAmJiB1dGlsLmlzRGF0ZShleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsLmdldFRpbWUoKSA9PT0gZXhwZWN0ZWQuZ2V0VGltZSgpO1xuXG4gIC8vIDcuMyBJZiB0aGUgZXhwZWN0ZWQgdmFsdWUgaXMgYSBSZWdFeHAgb2JqZWN0LCB0aGUgYWN0dWFsIHZhbHVlIGlzXG4gIC8vIGVxdWl2YWxlbnQgaWYgaXQgaXMgYWxzbyBhIFJlZ0V4cCBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzb3VyY2UgYW5kXG4gIC8vIHByb3BlcnRpZXMgKGBnbG9iYWxgLCBgbXVsdGlsaW5lYCwgYGxhc3RJbmRleGAsIGBpZ25vcmVDYXNlYCkuXG4gIH0gZWxzZSBpZiAodXRpbC5pc1JlZ0V4cChhY3R1YWwpICYmIHV0aWwuaXNSZWdFeHAoZXhwZWN0ZWQpKSB7XG4gICAgcmV0dXJuIGFjdHVhbC5zb3VyY2UgPT09IGV4cGVjdGVkLnNvdXJjZSAmJlxuICAgICAgICAgICBhY3R1YWwuZ2xvYmFsID09PSBleHBlY3RlZC5nbG9iYWwgJiZcbiAgICAgICAgICAgYWN0dWFsLm11bHRpbGluZSA9PT0gZXhwZWN0ZWQubXVsdGlsaW5lICYmXG4gICAgICAgICAgIGFjdHVhbC5sYXN0SW5kZXggPT09IGV4cGVjdGVkLmxhc3RJbmRleCAmJlxuICAgICAgICAgICBhY3R1YWwuaWdub3JlQ2FzZSA9PT0gZXhwZWN0ZWQuaWdub3JlQ2FzZTtcblxuICAvLyA3LjQuIE90aGVyIHBhaXJzIHRoYXQgZG8gbm90IGJvdGggcGFzcyB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcsXG4gIC8vIGVxdWl2YWxlbmNlIGlzIGRldGVybWluZWQgYnkgPT0uXG4gIH0gZWxzZSBpZiAoIXV0aWwuaXNPYmplY3QoYWN0dWFsKSAmJiAhdXRpbC5pc09iamVjdChleHBlY3RlZCkpIHtcbiAgICByZXR1cm4gYWN0dWFsID09IGV4cGVjdGVkO1xuXG4gIC8vIDcuNSBGb3IgYWxsIG90aGVyIE9iamVjdCBwYWlycywgaW5jbHVkaW5nIEFycmF5IG9iamVjdHMsIGVxdWl2YWxlbmNlIGlzXG4gIC8vIGRldGVybWluZWQgYnkgaGF2aW5nIHRoZSBzYW1lIG51bWJlciBvZiBvd25lZCBwcm9wZXJ0aWVzIChhcyB2ZXJpZmllZFxuICAvLyB3aXRoIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCksIHRoZSBzYW1lIHNldCBvZiBrZXlzXG4gIC8vIChhbHRob3VnaCBub3QgbmVjZXNzYXJpbHkgdGhlIHNhbWUgb3JkZXIpLCBlcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnlcbiAgLy8gY29ycmVzcG9uZGluZyBrZXksIGFuZCBhbiBpZGVudGljYWwgJ3Byb3RvdHlwZScgcHJvcGVydHkuIE5vdGU6IHRoaXNcbiAgLy8gYWNjb3VudHMgZm9yIGJvdGggbmFtZWQgYW5kIGluZGV4ZWQgcHJvcGVydGllcyBvbiBBcnJheXMuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG9iakVxdWl2KGFjdHVhbCwgZXhwZWN0ZWQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG59XG5cbmZ1bmN0aW9uIG9iakVxdWl2KGEsIGIpIHtcbiAgaWYgKHV0aWwuaXNOdWxsT3JVbmRlZmluZWQoYSkgfHwgdXRpbC5pc051bGxPclVuZGVmaW5lZChiKSlcbiAgICByZXR1cm4gZmFsc2U7XG4gIC8vIGFuIGlkZW50aWNhbCAncHJvdG90eXBlJyBwcm9wZXJ0eS5cbiAgaWYgKGEucHJvdG90eXBlICE9PSBiLnByb3RvdHlwZSkgcmV0dXJuIGZhbHNlO1xuICAvLyBpZiBvbmUgaXMgYSBwcmltaXRpdmUsIHRoZSBvdGhlciBtdXN0IGJlIHNhbWVcbiAgaWYgKHV0aWwuaXNQcmltaXRpdmUoYSkgfHwgdXRpbC5pc1ByaW1pdGl2ZShiKSkge1xuICAgIHJldHVybiBhID09PSBiO1xuICB9XG4gIHZhciBhSXNBcmdzID0gaXNBcmd1bWVudHMoYSksXG4gICAgICBiSXNBcmdzID0gaXNBcmd1bWVudHMoYik7XG4gIGlmICgoYUlzQXJncyAmJiAhYklzQXJncykgfHwgKCFhSXNBcmdzICYmIGJJc0FyZ3MpKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKGFJc0FyZ3MpIHtcbiAgICBhID0gcFNsaWNlLmNhbGwoYSk7XG4gICAgYiA9IHBTbGljZS5jYWxsKGIpO1xuICAgIHJldHVybiBfZGVlcEVxdWFsKGEsIGIpO1xuICB9XG4gIHZhciBrYSA9IG9iamVjdEtleXMoYSksXG4gICAgICBrYiA9IG9iamVjdEtleXMoYiksXG4gICAgICBrZXksIGk7XG4gIC8vIGhhdmluZyB0aGUgc2FtZSBudW1iZXIgb2Ygb3duZWQgcHJvcGVydGllcyAoa2V5cyBpbmNvcnBvcmF0ZXNcbiAgLy8gaGFzT3duUHJvcGVydHkpXG4gIGlmIChrYS5sZW5ndGggIT0ga2IubGVuZ3RoKVxuICAgIHJldHVybiBmYWxzZTtcbiAgLy90aGUgc2FtZSBzZXQgb2Yga2V5cyAoYWx0aG91Z2ggbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lIG9yZGVyKSxcbiAga2Euc29ydCgpO1xuICBrYi5zb3J0KCk7XG4gIC8vfn5+Y2hlYXAga2V5IHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoa2FbaV0gIT0ga2JbaV0pXG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy9lcXVpdmFsZW50IHZhbHVlcyBmb3IgZXZlcnkgY29ycmVzcG9uZGluZyBrZXksIGFuZFxuICAvL35+fnBvc3NpYmx5IGV4cGVuc2l2ZSBkZWVwIHRlc3RcbiAgZm9yIChpID0ga2EubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBrZXkgPSBrYVtpXTtcbiAgICBpZiAoIV9kZWVwRXF1YWwoYVtrZXldLCBiW2tleV0pKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIDguIFRoZSBub24tZXF1aXZhbGVuY2UgYXNzZXJ0aW9uIHRlc3RzIGZvciBhbnkgZGVlcCBpbmVxdWFsaXR5LlxuLy8gYXNzZXJ0Lm5vdERlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlX29wdCk7XG5cbmFzc2VydC5ub3REZWVwRXF1YWwgPSBmdW5jdGlvbiBub3REZWVwRXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoX2RlZXBFcXVhbChhY3R1YWwsIGV4cGVjdGVkKSkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJ25vdERlZXBFcXVhbCcsIGFzc2VydC5ub3REZWVwRXF1YWwpO1xuICB9XG59O1xuXG4vLyA5LiBUaGUgc3RyaWN0IGVxdWFsaXR5IGFzc2VydGlvbiB0ZXN0cyBzdHJpY3QgZXF1YWxpdHksIGFzIGRldGVybWluZWQgYnkgPT09LlxuLy8gYXNzZXJ0LnN0cmljdEVxdWFsKGFjdHVhbCwgZXhwZWN0ZWQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnN0cmljdEVxdWFsID0gZnVuY3Rpb24gc3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICBpZiAoYWN0dWFsICE9PSBleHBlY3RlZCkge1xuICAgIGZhaWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZSwgJz09PScsIGFzc2VydC5zdHJpY3RFcXVhbCk7XG4gIH1cbn07XG5cbi8vIDEwLiBUaGUgc3RyaWN0IG5vbi1lcXVhbGl0eSBhc3NlcnRpb24gdGVzdHMgZm9yIHN0cmljdCBpbmVxdWFsaXR5LCBhc1xuLy8gZGV0ZXJtaW5lZCBieSAhPT0uICBhc3NlcnQubm90U3RyaWN0RXF1YWwoYWN0dWFsLCBleHBlY3RlZCwgbWVzc2FnZV9vcHQpO1xuXG5hc3NlcnQubm90U3RyaWN0RXF1YWwgPSBmdW5jdGlvbiBub3RTdHJpY3RFcXVhbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlKSB7XG4gIGlmIChhY3R1YWwgPT09IGV4cGVjdGVkKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCBtZXNzYWdlLCAnIT09JywgYXNzZXJ0Lm5vdFN0cmljdEVxdWFsKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkge1xuICBpZiAoIWFjdHVhbCB8fCAhZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGV4cGVjdGVkKSA9PSAnW29iamVjdCBSZWdFeHBdJykge1xuICAgIHJldHVybiBleHBlY3RlZC50ZXN0KGFjdHVhbCk7XG4gIH0gZWxzZSBpZiAoYWN0dWFsIGluc3RhbmNlb2YgZXhwZWN0ZWQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChleHBlY3RlZC5jYWxsKHt9LCBhY3R1YWwpID09PSB0cnVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIF90aHJvd3Moc2hvdWxkVGhyb3csIGJsb2NrLCBleHBlY3RlZCwgbWVzc2FnZSkge1xuICB2YXIgYWN0dWFsO1xuXG4gIGlmICh1dGlsLmlzU3RyaW5nKGV4cGVjdGVkKSkge1xuICAgIG1lc3NhZ2UgPSBleHBlY3RlZDtcbiAgICBleHBlY3RlZCA9IG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGJsb2NrKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBhY3R1YWwgPSBlO1xuICB9XG5cbiAgbWVzc2FnZSA9IChleHBlY3RlZCAmJiBleHBlY3RlZC5uYW1lID8gJyAoJyArIGV4cGVjdGVkLm5hbWUgKyAnKS4nIDogJy4nKSArXG4gICAgICAgICAgICAobWVzc2FnZSA/ICcgJyArIG1lc3NhZ2UgOiAnLicpO1xuXG4gIGlmIChzaG91bGRUaHJvdyAmJiAhYWN0dWFsKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnTWlzc2luZyBleHBlY3RlZCBleGNlcHRpb24nICsgbWVzc2FnZSk7XG4gIH1cblxuICBpZiAoIXNob3VsZFRocm93ICYmIGV4cGVjdGVkRXhjZXB0aW9uKGFjdHVhbCwgZXhwZWN0ZWQpKSB7XG4gICAgZmFpbChhY3R1YWwsIGV4cGVjdGVkLCAnR290IHVud2FudGVkIGV4Y2VwdGlvbicgKyBtZXNzYWdlKTtcbiAgfVxuXG4gIGlmICgoc2hvdWxkVGhyb3cgJiYgYWN0dWFsICYmIGV4cGVjdGVkICYmXG4gICAgICAhZXhwZWN0ZWRFeGNlcHRpb24oYWN0dWFsLCBleHBlY3RlZCkpIHx8ICghc2hvdWxkVGhyb3cgJiYgYWN0dWFsKSkge1xuICAgIHRocm93IGFjdHVhbDtcbiAgfVxufVxuXG4vLyAxMS4gRXhwZWN0ZWQgdG8gdGhyb3cgYW4gZXJyb3I6XG4vLyBhc3NlcnQudGhyb3dzKGJsb2NrLCBFcnJvcl9vcHQsIG1lc3NhZ2Vfb3B0KTtcblxuYXNzZXJ0LnRocm93cyA9IGZ1bmN0aW9uKGJsb2NrLCAvKm9wdGlvbmFsKi9lcnJvciwgLypvcHRpb25hbCovbWVzc2FnZSkge1xuICBfdGhyb3dzLmFwcGx5KHRoaXMsIFt0cnVlXS5jb25jYXQocFNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xufTtcblxuLy8gRVhURU5TSU9OISBUaGlzIGlzIGFubm95aW5nIHRvIHdyaXRlIG91dHNpZGUgdGhpcyBtb2R1bGUuXG5hc3NlcnQuZG9lc05vdFRocm93ID0gZnVuY3Rpb24oYmxvY2ssIC8qb3B0aW9uYWwqL21lc3NhZ2UpIHtcbiAgX3Rocm93cy5hcHBseSh0aGlzLCBbZmFsc2VdLmNvbmNhdChwU2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG59O1xuXG5hc3NlcnQuaWZFcnJvciA9IGZ1bmN0aW9uKGVycikgeyBpZiAoZXJyKSB7dGhyb3cgZXJyO319O1xuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgIGlmIChoYXNPd24uY2FsbChvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICB9XG4gIHJldHVybiBrZXlzO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vYXNzZXJ0L2Fzc2VydC5qc1xuICoqIG1vZHVsZSBpZCA9IDY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG47KGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuICB2YXIgQXJyID0gKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJylcbiAgICA/IFVpbnQ4QXJyYXlcbiAgICA6IEFycmF5XG5cblx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSCAgPSAnLycuY2hhckNvZGVBdCgwKVxuXHR2YXIgTlVNQkVSID0gJzAnLmNoYXJDb2RlQXQoMClcblx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdHZhciBVUFBFUiAgPSAnQScuY2hhckNvZGVBdCgwKVxuXHR2YXIgUExVU19VUkxfU0FGRSA9ICctJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cblx0ZnVuY3Rpb24gZGVjb2RlIChlbHQpIHtcblx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0aWYgKGNvZGUgPT09IFBMVVMgfHxcblx0XHQgICAgY29kZSA9PT0gUExVU19VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRpZiAoY29kZSA9PT0gU0xBU0ggfHxcblx0XHQgICAgY29kZSA9PT0gU0xBU0hfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIpXG5cdFx0XHRyZXR1cm4gLTEgLy9ubyBtYXRjaFxuXHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRyZXR1cm4gY29kZSAtIE5VTUJFUiArIDI2ICsgMjZcblx0XHRpZiAoY29kZSA8IFVQUEVSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0aWYgKGNvZGUgPCBMT1dFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBMT1dFUiArIDI2XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRUb0J5dGVBcnJheSAoYjY0KSB7XG5cdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblxuXHRcdGlmIChiNjQubGVuZ3RoICUgNCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0fVxuXG5cdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHQvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdFx0Ly8gcmVwcmVzZW50IG9uZSBieXRlXG5cdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHRcdHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cblx0XHQvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcblx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuXHRcdC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXG5cdFx0dmFyIEwgPSAwXG5cblx0XHRmdW5jdGlvbiBwdXNoICh2KSB7XG5cdFx0XHRhcnJbTCsrXSA9IHZcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwMDApID4+IDE2KVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwKSA+PiA4KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA+PiA0KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDEwKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDQpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPj4gMilcblx0XHRcdHB1c2goKHRtcCA+PiA4KSAmIDB4RkYpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFyclxuXHR9XG5cblx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHR2YXIgaSxcblx0XHRcdGV4dHJhQnl0ZXMgPSB1aW50OC5sZW5ndGggJSAzLCAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuXHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdHRlbXAsIGxlbmd0aFxuXG5cdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdHJldHVybiBsb29rdXAuY2hhckF0KG51bSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShudW0gPj4gMTggJiAweDNGKSArIGVuY29kZShudW0gPj4gMTIgJiAweDNGKSArIGVuY29kZShudW0gPj4gNiAmIDB4M0YpICsgZW5jb2RlKG51bSAmIDB4M0YpXG5cdFx0fVxuXG5cdFx0Ly8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0dGVtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcblx0XHRcdG91dHB1dCArPSB0cmlwbGV0VG9CYXNlNjQodGVtcClcblx0XHR9XG5cblx0XHQvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHRlbXAgPSB1aW50OFt1aW50OC5sZW5ndGggLSAxXVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPT0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdHRlbXAgPSAodWludDhbdWludDgubGVuZ3RoIC0gMl0gPDwgOCkgKyAodWludDhbdWludDgubGVuZ3RoIC0gMV0pXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA+PiA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgMikgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dFxuXHR9XG5cblx0ZXhwb3J0cy50b0J5dGVBcnJheSA9IGI2NFRvQnl0ZUFycmF5XG5cdGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IHVpbnQ4VG9CYXNlNjRcbn0odHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vYmFzZTY0LWpzL2xpYi9iNjQuanNcbiAqKiBtb2R1bGUgaWQgPSA2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sXG4gICAgICBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxLFxuICAgICAgZU1heCA9ICgxIDw8IGVMZW4pIC0gMSxcbiAgICAgIGVCaWFzID0gZU1heCA+PiAxLFxuICAgICAgbkJpdHMgPSAtNyxcbiAgICAgIGkgPSBpc0xFID8gKG5CeXRlcyAtIDEpIDogMCxcbiAgICAgIGQgPSBpc0xFID8gLTEgOiAxLFxuICAgICAgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgYyxcbiAgICAgIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDEsXG4gICAgICBlTWF4ID0gKDEgPDwgZUxlbikgLSAxLFxuICAgICAgZUJpYXMgPSBlTWF4ID4+IDEsXG4gICAgICBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMCksXG4gICAgICBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSksXG4gICAgICBkID0gaXNMRSA/IDEgOiAtMSxcbiAgICAgIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblxuICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXG4gIGlmIChpc05hTih2YWx1ZSkgfHwgdmFsdWUgPT09IEluZmluaXR5KSB7XG4gICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG4gICAgZSA9IGVNYXhcbiAgfSBlbHNlIHtcbiAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcbiAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG4gICAgICBlLS1cbiAgICAgIGMgKj0gMlxuICAgIH1cbiAgICBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIHZhbHVlICs9IHJ0IC8gY1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSArPSBydCAqIE1hdGgucG93KDIsIDEgLSBlQmlhcylcbiAgICB9XG4gICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG4gICAgICBlKytcbiAgICAgIGMgLz0gMlxuICAgIH1cblxuICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuICAgICAgbSA9IDBcbiAgICAgIGUgPSBlTWF4XG4gICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgbSA9ICh2YWx1ZSAqIGMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaWVlZTc1NC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcbi8qKlxuICogaXNBcnJheVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiB0b1N0cmluZ1xuICovXG5cbnZhciBzdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoZSBnaXZlbiBgdmFsYFxuICogaXMgYW4gYXJyYXkuXG4gKlxuICogZXhhbXBsZTpcbiAqXG4gKiAgICAgICAgaXNBcnJheShbXSk7XG4gKiAgICAgICAgLy8gPiB0cnVlXG4gKiAgICAgICAgaXNBcnJheShhcmd1bWVudHMpO1xuICogICAgICAgIC8vID4gZmFsc2VcbiAqICAgICAgICBpc0FycmF5KCcnKTtcbiAqICAgICAgICAvLyA+IGZhbHNlXG4gKlxuICogQHBhcmFtIHttaXhlZH0gdmFsXG4gKiBAcmV0dXJuIHtib29sfVxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheSB8fCBmdW5jdGlvbiAodmFsKSB7XG4gIHJldHVybiAhISB2YWwgJiYgJ1tvYmplY3QgQXJyYXldJyA9PSBzdHIuY2FsbCh2YWwpO1xufTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vYnVmZmVyL34vaXMtYXJyYXkvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgc2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbi8vIFRPRE8oc2h0eWxtYW4pXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3Byb2Nlc3MvYnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDcwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC9+L2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0J1ZmZlcihhcmcpIHtcbiAgcmV0dXJuIGFyZyAmJiB0eXBlb2YgYXJnID09PSAnb2JqZWN0J1xuICAgICYmIHR5cGVvZiBhcmcuY29weSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcuZmlsbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICYmIHR5cGVvZiBhcmcucmVhZFVJbnQ4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25vZGUtbGlicy1icm93c2VyL34vdXRpbC9zdXBwb3J0L2lzQnVmZmVyQnJvd3Nlci5qc1xuICoqIG1vZHVsZSBpZCA9IDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIGZvcm1hdFJlZ0V4cCA9IC8lW3NkaiVdL2c7XG5leHBvcnRzLmZvcm1hdCA9IGZ1bmN0aW9uKGYpIHtcbiAgaWYgKCFpc1N0cmluZyhmKSkge1xuICAgIHZhciBvYmplY3RzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9iamVjdHMucHVzaChpbnNwZWN0KGFyZ3VtZW50c1tpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0cy5qb2luKCcgJyk7XG4gIH1cblxuICB2YXIgaSA9IDE7XG4gIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG4gIHZhciBzdHIgPSBTdHJpbmcoZikucmVwbGFjZShmb3JtYXRSZWdFeHAsIGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gJyUlJykgcmV0dXJuICclJztcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiB4O1xuICAgIHN3aXRjaCAoeCkge1xuICAgICAgY2FzZSAnJXMnOiByZXR1cm4gU3RyaW5nKGFyZ3NbaSsrXSk7XG4gICAgICBjYXNlICclZCc6IHJldHVybiBOdW1iZXIoYXJnc1tpKytdKTtcbiAgICAgIGNhc2UgJyVqJzpcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnc1tpKytdKTtcbiAgICAgICAgfSBjYXRjaCAoXykge1xuICAgICAgICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB4O1xuICAgIH1cbiAgfSk7XG4gIGZvciAodmFyIHggPSBhcmdzW2ldOyBpIDwgbGVuOyB4ID0gYXJnc1srK2ldKSB7XG4gICAgaWYgKGlzTnVsbCh4KSB8fCAhaXNPYmplY3QoeCkpIHtcbiAgICAgIHN0ciArPSAnICcgKyB4O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgKz0gJyAnICsgaW5zcGVjdCh4KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cjtcbn07XG5cblxuLy8gTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbi8vIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4vLyBJZiAtLW5vLWRlcHJlY2F0aW9uIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuZXhwb3J0cy5kZXByZWNhdGUgPSBmdW5jdGlvbihmbiwgbXNnKSB7XG4gIC8vIEFsbG93IGZvciBkZXByZWNhdGluZyB0aGluZ3MgaW4gdGhlIHByb2Nlc3Mgb2Ygc3RhcnRpbmcgdXAuXG4gIGlmIChpc1VuZGVmaW5lZChnbG9iYWwucHJvY2VzcykpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZXhwb3J0cy5kZXByZWNhdGUoZm4sIG1zZykuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3Mubm9EZXByZWNhdGlvbiA9PT0gdHJ1ZSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKHByb2Nlc3MudGhyb3dEZXByZWNhdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy50cmFjZURlcHJlY2F0aW9uKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59O1xuXG5cbnZhciBkZWJ1Z3MgPSB7fTtcbnZhciBkZWJ1Z0Vudmlyb247XG5leHBvcnRzLmRlYnVnbG9nID0gZnVuY3Rpb24oc2V0KSB7XG4gIGlmIChpc1VuZGVmaW5lZChkZWJ1Z0Vudmlyb24pKVxuICAgIGRlYnVnRW52aXJvbiA9IHByb2Nlc3MuZW52Lk5PREVfREVCVUcgfHwgJyc7XG4gIHNldCA9IHNldC50b1VwcGVyQ2FzZSgpO1xuICBpZiAoIWRlYnVnc1tzZXRdKSB7XG4gICAgaWYgKG5ldyBSZWdFeHAoJ1xcXFxiJyArIHNldCArICdcXFxcYicsICdpJykudGVzdChkZWJ1Z0Vudmlyb24pKSB7XG4gICAgICB2YXIgcGlkID0gcHJvY2Vzcy5waWQ7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbXNnID0gZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignJXMgJWQ6ICVzJywgc2V0LCBwaWQsIG1zZyk7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWJ1Z3Nbc2V0XSA9IGZ1bmN0aW9uKCkge307XG4gICAgfVxuICB9XG4gIHJldHVybiBkZWJ1Z3Nbc2V0XTtcbn07XG5cblxuLyoqXG4gKiBFY2hvcyB0aGUgdmFsdWUgb2YgYSB2YWx1ZS4gVHJ5cyB0byBwcmludCB0aGUgdmFsdWUgb3V0XG4gKiBpbiB0aGUgYmVzdCB3YXkgcG9zc2libGUgZ2l2ZW4gdGhlIGRpZmZlcmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcHJpbnQgb3V0LlxuICogQHBhcmFtIHtPYmplY3R9IG9wdHMgT3B0aW9uYWwgb3B0aW9ucyBvYmplY3QgdGhhdCBhbHRlcnMgdGhlIG91dHB1dC5cbiAqL1xuLyogbGVnYWN5OiBvYmosIHNob3dIaWRkZW4sIGRlcHRoLCBjb2xvcnMqL1xuZnVuY3Rpb24gaW5zcGVjdChvYmosIG9wdHMpIHtcbiAgLy8gZGVmYXVsdCBvcHRpb25zXG4gIHZhciBjdHggPSB7XG4gICAgc2VlbjogW10sXG4gICAgc3R5bGl6ZTogc3R5bGl6ZU5vQ29sb3JcbiAgfTtcbiAgLy8gbGVnYWN5Li4uXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIGN0eC5kZXB0aCA9IGFyZ3VtZW50c1syXTtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPj0gNCkgY3R4LmNvbG9ycyA9IGFyZ3VtZW50c1szXTtcbiAgaWYgKGlzQm9vbGVhbihvcHRzKSkge1xuICAgIC8vIGxlZ2FjeS4uLlxuICAgIGN0eC5zaG93SGlkZGVuID0gb3B0cztcbiAgfSBlbHNlIGlmIChvcHRzKSB7XG4gICAgLy8gZ290IGFuIFwib3B0aW9uc1wiIG9iamVjdFxuICAgIGV4cG9ydHMuX2V4dGVuZChjdHgsIG9wdHMpO1xuICB9XG4gIC8vIHNldCBkZWZhdWx0IG9wdGlvbnNcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5zaG93SGlkZGVuKSkgY3R4LnNob3dIaWRkZW4gPSBmYWxzZTtcbiAgaWYgKGlzVW5kZWZpbmVkKGN0eC5kZXB0aCkpIGN0eC5kZXB0aCA9IDI7XG4gIGlmIChpc1VuZGVmaW5lZChjdHguY29sb3JzKSkgY3R4LmNvbG9ycyA9IGZhbHNlO1xuICBpZiAoaXNVbmRlZmluZWQoY3R4LmN1c3RvbUluc3BlY3QpKSBjdHguY3VzdG9tSW5zcGVjdCA9IHRydWU7XG4gIGlmIChjdHguY29sb3JzKSBjdHguc3R5bGl6ZSA9IHN0eWxpemVXaXRoQ29sb3I7XG4gIHJldHVybiBmb3JtYXRWYWx1ZShjdHgsIG9iaiwgY3R4LmRlcHRoKTtcbn1cbmV4cG9ydHMuaW5zcGVjdCA9IGluc3BlY3Q7XG5cblxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9BTlNJX2VzY2FwZV9jb2RlI2dyYXBoaWNzXG5pbnNwZWN0LmNvbG9ycyA9IHtcbiAgJ2JvbGQnIDogWzEsIDIyXSxcbiAgJ2l0YWxpYycgOiBbMywgMjNdLFxuICAndW5kZXJsaW5lJyA6IFs0LCAyNF0sXG4gICdpbnZlcnNlJyA6IFs3LCAyN10sXG4gICd3aGl0ZScgOiBbMzcsIDM5XSxcbiAgJ2dyZXknIDogWzkwLCAzOV0sXG4gICdibGFjaycgOiBbMzAsIDM5XSxcbiAgJ2JsdWUnIDogWzM0LCAzOV0sXG4gICdjeWFuJyA6IFszNiwgMzldLFxuICAnZ3JlZW4nIDogWzMyLCAzOV0sXG4gICdtYWdlbnRhJyA6IFszNSwgMzldLFxuICAncmVkJyA6IFszMSwgMzldLFxuICAneWVsbG93JyA6IFszMywgMzldXG59O1xuXG4vLyBEb24ndCB1c2UgJ2JsdWUnIG5vdCB2aXNpYmxlIG9uIGNtZC5leGVcbmluc3BlY3Quc3R5bGVzID0ge1xuICAnc3BlY2lhbCc6ICdjeWFuJyxcbiAgJ251bWJlcic6ICd5ZWxsb3cnLFxuICAnYm9vbGVhbic6ICd5ZWxsb3cnLFxuICAndW5kZWZpbmVkJzogJ2dyZXknLFxuICAnbnVsbCc6ICdib2xkJyxcbiAgJ3N0cmluZyc6ICdncmVlbicsXG4gICdkYXRlJzogJ21hZ2VudGEnLFxuICAvLyBcIm5hbWVcIjogaW50ZW50aW9uYWxseSBub3Qgc3R5bGluZ1xuICAncmVnZXhwJzogJ3JlZCdcbn07XG5cblxuZnVuY3Rpb24gc3R5bGl6ZVdpdGhDb2xvcihzdHIsIHN0eWxlVHlwZSkge1xuICB2YXIgc3R5bGUgPSBpbnNwZWN0LnN0eWxlc1tzdHlsZVR5cGVdO1xuXG4gIGlmIChzdHlsZSkge1xuICAgIHJldHVybiAnXFx1MDAxYlsnICsgaW5zcGVjdC5jb2xvcnNbc3R5bGVdWzBdICsgJ20nICsgc3RyICtcbiAgICAgICAgICAgJ1xcdTAwMWJbJyArIGluc3BlY3QuY29sb3JzW3N0eWxlXVsxXSArICdtJztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG5cblxuZnVuY3Rpb24gc3R5bGl6ZU5vQ29sb3Ioc3RyLCBzdHlsZVR5cGUpIHtcbiAgcmV0dXJuIHN0cjtcbn1cblxuXG5mdW5jdGlvbiBhcnJheVRvSGFzaChhcnJheSkge1xuICB2YXIgaGFzaCA9IHt9O1xuXG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24odmFsLCBpZHgpIHtcbiAgICBoYXNoW3ZhbF0gPSB0cnVlO1xuICB9KTtcblxuICByZXR1cm4gaGFzaDtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRWYWx1ZShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMpIHtcbiAgLy8gUHJvdmlkZSBhIGhvb2sgZm9yIHVzZXItc3BlY2lmaWVkIGluc3BlY3QgZnVuY3Rpb25zLlxuICAvLyBDaGVjayB0aGF0IHZhbHVlIGlzIGFuIG9iamVjdCB3aXRoIGFuIGluc3BlY3QgZnVuY3Rpb24gb24gaXRcbiAgaWYgKGN0eC5jdXN0b21JbnNwZWN0ICYmXG4gICAgICB2YWx1ZSAmJlxuICAgICAgaXNGdW5jdGlvbih2YWx1ZS5pbnNwZWN0KSAmJlxuICAgICAgLy8gRmlsdGVyIG91dCB0aGUgdXRpbCBtb2R1bGUsIGl0J3MgaW5zcGVjdCBmdW5jdGlvbiBpcyBzcGVjaWFsXG4gICAgICB2YWx1ZS5pbnNwZWN0ICE9PSBleHBvcnRzLmluc3BlY3QgJiZcbiAgICAgIC8vIEFsc28gZmlsdGVyIG91dCBhbnkgcHJvdG90eXBlIG9iamVjdHMgdXNpbmcgdGhlIGNpcmN1bGFyIGNoZWNrLlxuICAgICAgISh2YWx1ZS5jb25zdHJ1Y3RvciAmJiB2YWx1ZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUgPT09IHZhbHVlKSkge1xuICAgIHZhciByZXQgPSB2YWx1ZS5pbnNwZWN0KHJlY3Vyc2VUaW1lcywgY3R4KTtcbiAgICBpZiAoIWlzU3RyaW5nKHJldCkpIHtcbiAgICAgIHJldCA9IGZvcm1hdFZhbHVlKGN0eCwgcmV0LCByZWN1cnNlVGltZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG5cbiAgLy8gUHJpbWl0aXZlIHR5cGVzIGNhbm5vdCBoYXZlIHByb3BlcnRpZXNcbiAgdmFyIHByaW1pdGl2ZSA9IGZvcm1hdFByaW1pdGl2ZShjdHgsIHZhbHVlKTtcbiAgaWYgKHByaW1pdGl2ZSkge1xuICAgIHJldHVybiBwcmltaXRpdmU7XG4gIH1cblxuICAvLyBMb29rIHVwIHRoZSBrZXlzIG9mIHRoZSBvYmplY3QuXG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICB2YXIgdmlzaWJsZUtleXMgPSBhcnJheVRvSGFzaChrZXlzKTtcblxuICBpZiAoY3R4LnNob3dIaWRkZW4pIHtcbiAgICBrZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICB9XG5cbiAgLy8gSUUgZG9lc24ndCBtYWtlIGVycm9yIGZpZWxkcyBub24tZW51bWVyYWJsZVxuICAvLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvZHd3NTJzYnQodj12cy45NCkuYXNweFxuICBpZiAoaXNFcnJvcih2YWx1ZSlcbiAgICAgICYmIChrZXlzLmluZGV4T2YoJ21lc3NhZ2UnKSA+PSAwIHx8IGtleXMuaW5kZXhPZignZGVzY3JpcHRpb24nKSA+PSAwKSkge1xuICAgIHJldHVybiBmb3JtYXRFcnJvcih2YWx1ZSk7XG4gIH1cblxuICAvLyBTb21lIHR5cGUgb2Ygb2JqZWN0IHdpdGhvdXQgcHJvcGVydGllcyBjYW4gYmUgc2hvcnRjdXR0ZWQuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgdmFyIG5hbWUgPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZSgnW0Z1bmN0aW9uJyArIG5hbWUgKyAnXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICAgIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBjdHguc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsdWUpLCAncmVnZXhwJyk7XG4gICAgfVxuICAgIGlmIChpc0RhdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSksICdkYXRlJyk7XG4gICAgfVxuICAgIGlmIChpc0Vycm9yKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICB2YXIgYmFzZSA9ICcnLCBhcnJheSA9IGZhbHNlLCBicmFjZXMgPSBbJ3snLCAnfSddO1xuXG4gIC8vIE1ha2UgQXJyYXkgc2F5IHRoYXQgdGhleSBhcmUgQXJyYXlcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXJyYXkgPSB0cnVlO1xuICAgIGJyYWNlcyA9IFsnWycsICddJ107XG4gIH1cblxuICAvLyBNYWtlIGZ1bmN0aW9ucyBzYXkgdGhhdCB0aGV5IGFyZSBmdW5jdGlvbnNcbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgdmFyIG4gPSB2YWx1ZS5uYW1lID8gJzogJyArIHZhbHVlLm5hbWUgOiAnJztcbiAgICBiYXNlID0gJyBbRnVuY3Rpb24nICsgbiArICddJztcbiAgfVxuXG4gIC8vIE1ha2UgUmVnRXhwcyBzYXkgdGhhdCB0aGV5IGFyZSBSZWdFeHBzXG4gIGlmIChpc1JlZ0V4cCh2YWx1ZSkpIHtcbiAgICBiYXNlID0gJyAnICsgUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZGF0ZXMgd2l0aCBwcm9wZXJ0aWVzIGZpcnN0IHNheSB0aGUgZGF0ZVxuICBpZiAoaXNEYXRlKHZhbHVlKSkge1xuICAgIGJhc2UgPSAnICcgKyBEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHZhbHVlKTtcbiAgfVxuXG4gIC8vIE1ha2UgZXJyb3Igd2l0aCBtZXNzYWdlIGZpcnN0IHNheSB0aGUgZXJyb3JcbiAgaWYgKGlzRXJyb3IodmFsdWUpKSB7XG4gICAgYmFzZSA9ICcgJyArIGZvcm1hdEVycm9yKHZhbHVlKTtcbiAgfVxuXG4gIGlmIChrZXlzLmxlbmd0aCA9PT0gMCAmJiAoIWFycmF5IHx8IHZhbHVlLmxlbmd0aCA9PSAwKSkge1xuICAgIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgYnJhY2VzWzFdO1xuICB9XG5cbiAgaWYgKHJlY3Vyc2VUaW1lcyA8IDApIHtcbiAgICBpZiAoaXNSZWdFeHAodmFsdWUpKSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSwgJ3JlZ2V4cCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LnN0eWxpemUoJ1tPYmplY3RdJywgJ3NwZWNpYWwnKTtcbiAgICB9XG4gIH1cblxuICBjdHguc2Vlbi5wdXNoKHZhbHVlKTtcblxuICB2YXIgb3V0cHV0O1xuICBpZiAoYXJyYXkpIHtcbiAgICBvdXRwdXQgPSBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKTtcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQgPSBrZXlzLm1hcChmdW5jdGlvbihrZXkpIHtcbiAgICAgIHJldHVybiBmb3JtYXRQcm9wZXJ0eShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXksIGFycmF5KTtcbiAgICB9KTtcbiAgfVxuXG4gIGN0eC5zZWVuLnBvcCgpO1xuXG4gIHJldHVybiByZWR1Y2VUb1NpbmdsZVN0cmluZyhvdXRwdXQsIGJhc2UsIGJyYWNlcyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0UHJpbWl0aXZlKGN0eCwgdmFsdWUpIHtcbiAgaWYgKGlzVW5kZWZpbmVkKHZhbHVlKSlcbiAgICByZXR1cm4gY3R4LnN0eWxpemUoJ3VuZGVmaW5lZCcsICd1bmRlZmluZWQnKTtcbiAgaWYgKGlzU3RyaW5nKHZhbHVlKSkge1xuICAgIHZhciBzaW1wbGUgPSAnXFwnJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKS5yZXBsYWNlKC9eXCJ8XCIkL2csICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKSArICdcXCcnO1xuICAgIHJldHVybiBjdHguc3R5bGl6ZShzaW1wbGUsICdzdHJpbmcnKTtcbiAgfVxuICBpZiAoaXNOdW1iZXIodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnbnVtYmVyJyk7XG4gIGlmIChpc0Jvb2xlYW4odmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnJyArIHZhbHVlLCAnYm9vbGVhbicpO1xuICAvLyBGb3Igc29tZSByZWFzb24gdHlwZW9mIG51bGwgaXMgXCJvYmplY3RcIiwgc28gc3BlY2lhbCBjYXNlIGhlcmUuXG4gIGlmIChpc051bGwodmFsdWUpKVxuICAgIHJldHVybiBjdHguc3R5bGl6ZSgnbnVsbCcsICdudWxsJyk7XG59XG5cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuICdbJyArIEVycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSArICddJztcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRBcnJheShjdHgsIHZhbHVlLCByZWN1cnNlVGltZXMsIHZpc2libGVLZXlzLCBrZXlzKSB7XG4gIHZhciBvdXRwdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICBpZiAoaGFzT3duUHJvcGVydHkodmFsdWUsIFN0cmluZyhpKSkpIHtcbiAgICAgIG91dHB1dC5wdXNoKGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsXG4gICAgICAgICAgU3RyaW5nKGkpLCB0cnVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG91dHB1dC5wdXNoKCcnKTtcbiAgICB9XG4gIH1cbiAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICgha2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgb3V0cHV0LnB1c2goZm9ybWF0UHJvcGVydHkoY3R4LCB2YWx1ZSwgcmVjdXJzZVRpbWVzLCB2aXNpYmxlS2V5cyxcbiAgICAgICAgICBrZXksIHRydWUpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbmZ1bmN0aW9uIGZvcm1hdFByb3BlcnR5KGN0eCwgdmFsdWUsIHJlY3Vyc2VUaW1lcywgdmlzaWJsZUtleXMsIGtleSwgYXJyYXkpIHtcbiAgdmFyIG5hbWUsIHN0ciwgZGVzYztcbiAgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodmFsdWUsIGtleSkgfHwgeyB2YWx1ZTogdmFsdWVba2V5XSB9O1xuICBpZiAoZGVzYy5nZXQpIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbR2V0dGVyL1NldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHIgPSBjdHguc3R5bGl6ZSgnW0dldHRlcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgIHN0ciA9IGN0eC5zdHlsaXplKCdbU2V0dGVyXScsICdzcGVjaWFsJyk7XG4gICAgfVxuICB9XG4gIGlmICghaGFzT3duUHJvcGVydHkodmlzaWJsZUtleXMsIGtleSkpIHtcbiAgICBuYW1lID0gJ1snICsga2V5ICsgJ10nO1xuICB9XG4gIGlmICghc3RyKSB7XG4gICAgaWYgKGN0eC5zZWVuLmluZGV4T2YoZGVzYy52YWx1ZSkgPCAwKSB7XG4gICAgICBpZiAoaXNOdWxsKHJlY3Vyc2VUaW1lcykpIHtcbiAgICAgICAgc3RyID0gZm9ybWF0VmFsdWUoY3R4LCBkZXNjLnZhbHVlLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ciA9IGZvcm1hdFZhbHVlKGN0eCwgZGVzYy52YWx1ZSwgcmVjdXJzZVRpbWVzIC0gMSk7XG4gICAgICB9XG4gICAgICBpZiAoc3RyLmluZGV4T2YoJ1xcbicpID4gLTEpIHtcbiAgICAgICAgaWYgKGFycmF5KSB7XG4gICAgICAgICAgc3RyID0gc3RyLnNwbGl0KCdcXG4nKS5tYXAoZnVuY3Rpb24obGluZSkge1xuICAgICAgICAgICAgcmV0dXJuICcgICcgKyBsaW5lO1xuICAgICAgICAgIH0pLmpvaW4oJ1xcbicpLnN1YnN0cigyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgPSAnXFxuJyArIHN0ci5zcGxpdCgnXFxuJykubWFwKGZ1bmN0aW9uKGxpbmUpIHtcbiAgICAgICAgICAgIHJldHVybiAnICAgJyArIGxpbmU7XG4gICAgICAgICAgfSkuam9pbignXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gY3R4LnN0eWxpemUoJ1tDaXJjdWxhcl0nLCAnc3BlY2lhbCcpO1xuICAgIH1cbiAgfVxuICBpZiAoaXNVbmRlZmluZWQobmFtZSkpIHtcbiAgICBpZiAoYXJyYXkgJiYga2V5Lm1hdGNoKC9eXFxkKyQvKSkge1xuICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgbmFtZSA9IEpTT04uc3RyaW5naWZ5KCcnICsga2V5KTtcbiAgICBpZiAobmFtZS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLykpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cigxLCBuYW1lLmxlbmd0aCAtIDIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICduYW1lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKVxuICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxcXFwiL2csICdcIicpXG4gICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oXlwifFwiJCkvZywgXCInXCIpO1xuICAgICAgbmFtZSA9IGN0eC5zdHlsaXplKG5hbWUsICdzdHJpbmcnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbmFtZSArICc6ICcgKyBzdHI7XG59XG5cblxuZnVuY3Rpb24gcmVkdWNlVG9TaW5nbGVTdHJpbmcob3V0cHV0LCBiYXNlLCBicmFjZXMpIHtcbiAgdmFyIG51bUxpbmVzRXN0ID0gMDtcbiAgdmFyIGxlbmd0aCA9IG91dHB1dC5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3VyKSB7XG4gICAgbnVtTGluZXNFc3QrKztcbiAgICBpZiAoY3VyLmluZGV4T2YoJ1xcbicpID49IDApIG51bUxpbmVzRXN0Kys7XG4gICAgcmV0dXJuIHByZXYgKyBjdXIucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csICcnKS5sZW5ndGggKyAxO1xuICB9LCAwKTtcblxuICBpZiAobGVuZ3RoID4gNjApIHtcbiAgICByZXR1cm4gYnJhY2VzWzBdICtcbiAgICAgICAgICAgKGJhc2UgPT09ICcnID8gJycgOiBiYXNlICsgJ1xcbiAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIG91dHB1dC5qb2luKCcsXFxuICAnKSArXG4gICAgICAgICAgICcgJyArXG4gICAgICAgICAgIGJyYWNlc1sxXTtcbiAgfVxuXG4gIHJldHVybiBicmFjZXNbMF0gKyBiYXNlICsgJyAnICsgb3V0cHV0LmpvaW4oJywgJykgKyAnICcgKyBicmFjZXNbMV07XG59XG5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cbmZ1bmN0aW9uIGlzQXJyYXkoYXIpIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXIpO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gaXNPYmplY3QocmUpICYmIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gaXNPYmplY3QoZCkgJiYgb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KGUpICYmXG4gICAgICAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSByZXF1aXJlKCcuL3N1cHBvcnQvaXNCdWZmZXInKTtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuXG5cbmZ1bmN0aW9uIHBhZChuKSB7XG4gIHJldHVybiBuIDwgMTAgPyAnMCcgKyBuLnRvU3RyaW5nKDEwKSA6IG4udG9TdHJpbmcoMTApO1xufVxuXG5cbnZhciBtb250aHMgPSBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJyxcbiAgICAgICAgICAgICAgJ09jdCcsICdOb3YnLCAnRGVjJ107XG5cbi8vIDI2IEZlYiAxNjoxOTozNFxuZnVuY3Rpb24gdGltZXN0YW1wKCkge1xuICB2YXIgZCA9IG5ldyBEYXRlKCk7XG4gIHZhciB0aW1lID0gW3BhZChkLmdldEhvdXJzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRNaW51dGVzKCkpLFxuICAgICAgICAgICAgICBwYWQoZC5nZXRTZWNvbmRzKCkpXS5qb2luKCc6Jyk7XG4gIHJldHVybiBbZC5nZXREYXRlKCksIG1vbnRoc1tkLmdldE1vbnRoKCldLCB0aW1lXS5qb2luKCcgJyk7XG59XG5cblxuLy8gbG9nIGlzIGp1c3QgYSB0aGluIHdyYXBwZXIgdG8gY29uc29sZS5sb2cgdGhhdCBwcmVwZW5kcyBhIHRpbWVzdGFtcFxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJyVzIC0gJXMnLCB0aW1lc3RhbXAoKSwgZXhwb3J0cy5mb3JtYXQuYXBwbHkoZXhwb3J0cywgYXJndW1lbnRzKSk7XG59O1xuXG5cbi8qKlxuICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBGdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHMgZnJvbSBsYW5nLmpzIHJld3JpdHRlbiBhcyBhIHN0YW5kYWxvbmVcbiAqIGZ1bmN0aW9uIChub3Qgb24gRnVuY3Rpb24ucHJvdG90eXBlKS4gTk9URTogSWYgdGhpcyBmaWxlIGlzIHRvIGJlIGxvYWRlZFxuICogZHVyaW5nIGJvb3RzdHJhcHBpbmcgdGhpcyBmdW5jdGlvbiBuZWVkcyB0byBiZSByZXdyaXR0ZW4gdXNpbmcgc29tZSBuYXRpdmVcbiAqIGZ1bmN0aW9ucyBhcyBwcm90b3R5cGUgc2V0dXAgdXNpbmcgbm9ybWFsIEphdmFTY3JpcHQgZG9lcyBub3Qgd29yayBhc1xuICogZXhwZWN0ZWQgZHVyaW5nIGJvb3RzdHJhcHBpbmcgKHNlZSBtaXJyb3IuanMgaW4gcjExNDkwMykuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB3aGljaCBuZWVkcyB0byBpbmhlcml0IHRoZVxuICogICAgIHByb3RvdHlwZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1cGVyQ3RvciBDb25zdHJ1Y3RvciBmdW5jdGlvbiB0byBpbmhlcml0IHByb3RvdHlwZSBmcm9tLlxuICovXG5leHBvcnRzLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuZXhwb3J0cy5fZXh0ZW5kID0gZnVuY3Rpb24ob3JpZ2luLCBhZGQpIHtcbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgYWRkIGlzbid0IGFuIG9iamVjdFxuICBpZiAoIWFkZCB8fCAhaXNPYmplY3QoYWRkKSkgcmV0dXJuIG9yaWdpbjtcblxuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFkZCk7XG4gIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBvcmlnaW5ba2V5c1tpXV0gPSBhZGRba2V5c1tpXV07XG4gIH1cbiAgcmV0dXJuIG9yaWdpbjtcbn07XG5cbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9ub2RlLWxpYnMtYnJvd3Nlci9+L3V0aWwvdXRpbC5qc1xuICoqIG1vZHVsZSBpZCA9IDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG52YXIgc3R5bGVzSW5Eb20gPSB7fSxcclxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcclxuXHRcdHZhciBtZW1vO1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdFx0cmV0dXJuIG1lbW87XHJcblx0XHR9O1xyXG5cdH0sXHJcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gL21zaWUgWzYtOV1cXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0fSksXHJcblx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHR9KSxcclxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcclxuXHRzaW5nbGV0b25Db3VudGVyID0gMDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xyXG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xyXG5cdFx0aWYodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XHJcblx0fVxyXG5cclxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cclxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXHJcblx0aWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XHJcblxyXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XHJcblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XHJcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcclxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xyXG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XHJcblx0XHR9XHJcblx0XHRpZihuZXdMaXN0KSB7XHJcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XHJcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XHJcblx0XHR9XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcclxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xyXG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcclxuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XHJcblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xyXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xyXG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRpZihkb21TdHlsZSkge1xyXG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XHJcblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcclxuXHR2YXIgc3R5bGVzID0gW107XHJcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xyXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XHJcblx0XHR2YXIgaWQgPSBpdGVtWzBdO1xyXG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XHJcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xyXG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XHJcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XHJcblx0XHRpZighbmV3U3R5bGVzW2lkXSlcclxuXHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcclxuXHRcdGVsc2VcclxuXHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xyXG5cdH1cclxuXHRyZXR1cm4gc3R5bGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQoKSB7XHJcblx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcclxuXHR2YXIgaGVhZCA9IGdldEhlYWRFbGVtZW50KCk7XHJcblx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdHJldHVybiBzdHlsZUVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xyXG5cdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xyXG5cclxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcclxuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudCgpKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcclxuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQoKTtcclxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xyXG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xyXG5cdFx0fTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZShvYmopO1xyXG5cclxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XHJcblx0XHRpZihuZXdPYmopIHtcclxuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXBsYWNlVGV4dChzb3VyY2UsIGlkLCByZXBsYWNlbWVudCkge1xyXG5cdHZhciBib3VuZGFyaWVzID0gW1wiLyoqID4+XCIgKyBpZCArIFwiICoqL1wiLCBcIi8qKiBcIiArIGlkICsgXCI8PCAqKi9cIl07XHJcblx0dmFyIHN0YXJ0ID0gc291cmNlLmxhc3RJbmRleE9mKGJvdW5kYXJpZXNbMF0pO1xyXG5cdHZhciB3cmFwcGVkUmVwbGFjZW1lbnQgPSByZXBsYWNlbWVudFxyXG5cdFx0PyAoYm91bmRhcmllc1swXSArIHJlcGxhY2VtZW50ICsgYm91bmRhcmllc1sxXSlcclxuXHRcdDogXCJcIjtcclxuXHRpZiAoc291cmNlLmxhc3RJbmRleE9mKGJvdW5kYXJpZXNbMF0pID49IDApIHtcclxuXHRcdHZhciBlbmQgPSBzb3VyY2UubGFzdEluZGV4T2YoYm91bmRhcmllc1sxXSkgKyBib3VuZGFyaWVzWzFdLmxlbmd0aDtcclxuXHRcdHJldHVybiBzb3VyY2Uuc2xpY2UoMCwgc3RhcnQpICsgd3JhcHBlZFJlcGxhY2VtZW50ICsgc291cmNlLnNsaWNlKGVuZCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybiBzb3VyY2UgKyB3cmFwcGVkUmVwbGFjZW1lbnQ7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xyXG5cclxuXHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQsIGluZGV4LCBjc3MpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XHJcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGNzc05vZGUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xyXG5cdHZhciBjc3MgPSBvYmouY3NzO1xyXG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcclxuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHJcblx0aWYoc291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpICsgXCIgKi9cIjtcclxuXHRcdFx0Y3NzID0gXCJAaW1wb3J0IHVybChcXFwiZGF0YTp0ZXh0L2NzcztiYXNlNjQsXCIgKyBidG9hKGNzcykgKyBcIlxcXCIpXCI7XHJcblx0XHR9IGNhdGNoKGUpIHt9XHJcblx0fVxyXG5cclxuXHRpZihtZWRpYSkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxyXG5cdH1cclxuXHJcblx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XHJcblx0fSBlbHNlIHtcclxuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcblx0XHR9XHJcblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XHJcblx0fVxyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcbiAqKiBtb2R1bGUgaWQgPSA3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS9Vc2Vycy9yaWt1L0NvZGUvZmxhcHB5LWJpcmQvbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhL1VzZXJzL3Jpa3UvQ29kZS9mbGFwcHktYmlyZC9zY3JpcHRzL3N0eWxlLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhL1VzZXJzL3Jpa3UvQ29kZS9mbGFwcHktYmlyZC9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEvVXNlcnMvcmlrdS9Db2RlL2ZsYXBweS1iaXJkL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS9Vc2Vycy9yaWt1L0NvZGUvZmxhcHB5LWJpcmQvc2NyaXB0cy9zdHlsZS5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEvVXNlcnMvcmlrdS9Db2RlL2ZsYXBweS1iaXJkL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS9Vc2Vycy9yaWt1L0NvZGUvZmxhcHB5LWJpcmQvc2NyaXB0cy9zdHlsZS5jc3NcIik7XG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc2NyaXB0cy9zdHlsZS5jc3NcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBY1VBQUFFQUNBWUFBQURDNUcyREFBQUFDWEJJV1hNQUFBc1RBQUFMRXdFQW1wd1lBQUFXbG1sRFExQlFhRzkwYjNOb2IzQWdTVU5ESUhCeWIyWnBiR1VBQUhqYXJaaFpOTmZ2dDhmMzUvT2R2Nzc0bXVkNW51YzVaWjduTVVPWnA4eFRoRlFTb1NJSnlaQXhVNVJDK1VsQ1NZbUlCazFLUW9RS0plUmM5TS92bkl0emNkWTYrK3ExOW5xdjkvUHN2UytlWjIwQTlpU3ZpSWdRbEFvUUdoWVRaV2VzeDcvWHhaV2Y4QllRUUlBRUdzRGg1Uk1kb1d0all3SC9hNnc5QXdRQTRLbU1WMFJFQ1B6ZmdzSFhMOW9IQUxFQkFHL2ZhSjlRQU9RR0FITFVKeUlxQmdDakRBRENjVEVSTVFDWXZRREFITFhYeFJVQUV3SUF6QUYvK0NnQU1Idi80VHdBWUk1eXNOTUh3TlFDRUNsZVhsRUJBRFEzQUlEL29FOUFEQUROR0FDZU1jdzNLQXlBWVJZQXY5c24wTXNYZ0YwY0FLUkRROE45QWRnZEFFRGMrNy81QlB3UFQrOGRUeSt2Z0IzK1V3c0FBQkFOZ3FJalFyd093ZjkzaEliRS9qMkRGd0FvMGNIMjVnQkFCRURpZmJ3TTdmOXlvSitweFYrT2lOR3orOHRCTWFZT081cFlFOGUvSEJ2c3FQdVhnOFBOZC9SaDNsYldPLzdSK3E1L09TSFF3Zmt2Ky9vWkdQN2xxSEM3SFgzMFFYdkRmL1g2Vm4vNWdKZVp6Vi8yaXZyVEx3QWszaS9FMk83Zk85dnMzRE1zeEdxbkZ2OG9veDJOWC9TLzljWUVPcGpzY0pURGpzWS95TWgwcDk0b2szLzlRMngyUEtOaTdYYjY0QmZtdU9QcDYyV3cwMXNJQWt2d0FwOFl2L2dZQUFEOThJaERVVUVCZ1RIOHVoRVJJWDdTL0taaFByTFMvSXJ5Q3NxdzE4V1YvOCtJdnRzQkFnQUk2L0MvdVFRN2dEMGVBRWprdnptWGFvQXJSd0E0cVAvbUJOOEJNQWtDM0d6MGlZMDYrQ2VIQlFEQUFSbm9nUms0Z0JlRVFCeGtRQkZVUVF0MHdCRE13Qm9jd0FYMmd3OEVRaWhFUVJ3a3dURklneXpJZ2ZOUUJHVlFDYlZ3QlZxZ0hUcmhMdHlIUi9BRXh1RVZUTUkwek1NeXJNRUdnaUFFaEJaaFFqZ1FQa1FFa1VJVUVYVmtOMktJV0NCMmlBdmlpUVFnWVVnc2tvUWNSN0tRWEtRSUtVZnFrR3ZJTGVRdU1vQ01JQytSOThnYzhnMzVoV0pRQ3NxTThxQ2lxQnlxanVxaTVxZ0R1ZzhOUUNQUkJEUVZQWU1Xb2hWb0k5cUcza1Vmb2VQb0pEcVBybUlBUTROaHhRaGdaRERxR0gyTU5jWVY0NCtKd2lSak1qSDVtQXBNRTZZRDA0OTVpcG5FTEdEV3NYZ3NFNVlmSzRQVndwcGdIYkUrMkVoc012WVV0Z2hiaTIzRDltR2ZZdDlqbDdHL2NiUTRicHdVVGhObml0dUxDOERGNGRKdytiZ2FYQ3Z1SG00Y040MWJ3K1B4ckhneHZCcmVCTytDUDRCUHhKL0NsK0NiOGQzNEVmd1VmcFZBSUhBUXBBamFCR3VDRnlHR2tFYTRRR2drM0NHTUVxWUpQNGswUkQ2aUl0R0k2RW9NSTZZUTg0bjF4QzdpS0hHR3VFR2lra1JJbWlScmtpL3BFQ21iVkVYcUlBMlRwa2tiWkFheUdGbWI3RUErUUQ1R0xpUTNrZStSWDVPLzA5RFFDTkpvME5qU0JORWNwU21rdVVyemdPWTl6VHFGa1NKSjBhZTRVMklwWnlpWEtkMlVsNVR2dExTMG9yUTZ0SzYwTWJSbmFPdG9lMm5mMHY2a1k2S1RwVE9sODZVN1FuZVJybzF1bEc2Um5rUXZRcTlMdjU4K2dUNmYvanI5TVAwQ2xVUVZwZXBUdmFqSjFJdlVXOVRuMUZVR0pnWUZCbXVHVUlaVERQVU1Bd3l6akFSR1VVWkRSbC9HVk1aS3hsN0dLU1lNa3hDVFBwTVAwM0dtS3FaN1ROUE1lR1l4WmxQbUE4eFp6RmVZaDVpWFdSaFpsRm1jV09KWkxyTGNacGxreGJDS3NwcXlockJtczdhd1BtUDl4Y2JEcHN2bXg1YkIxc1EyeXZhRG5ZdGRoOTJQUFpPOW1YMmMvUmNIUDRjaFJ6REhXWTUyamplY1dFNUpUbHZPT001U3pudWNDMXpNWEZwY1BseVpYQzFjRTl3b3R5UzNIWGNpZHlYM0lQY3FEeStQTVU4RXp3V2VYcDRGWGxaZUhkNER2SG04WGJ4emZFeDh1L21DK1BMNDd2Qjk1bWZoMStVUDRTL2s3K05mRnVBV01CR0lGU2dYR0JMWUVCUVRkQlJNRVd3V2ZDTkVGbElYOGhmS0Urb1JXaGJtRTdZVVRoSnVFSjRRSVltb2l3U0tGSWowaS93UUZSTjFGazBYYlJlZEZXTVhNeFZMRUdzUWV5MU9LNzVIUEZLOFFueE1BaStoTGhFc1VTTHhSQktWVkpFTWxMd29PU3lGU3FsS0JVbVZTSTFJNDZRMXBNT2tLNlNmeTFCa2RHVU95alRJdkpkbGxiV1FUWkZ0bDEyVUU1WnpsVHNyMXkvM1cxNUZQa1MrU3Y2VkFxT0NtVUtLUW9mQ04wVkpSUi9GaTRwalNyUktSa3BIbEc0cWZWV1dVdlpUTGxWK29jS2tZcW1TcnRLanNxV3FwaHFsMnFRNnB5YXM1cWxXclBaY25WbmRSdjJVK2dNTm5JYWV4aEdOVG8xMVRWWE5HTTBXelNVdEdhMWdyWHF0MlYxaXUveDJWZTJhMGhiVTl0SXUxNTdjemIvYmMvZWwzWk43QlBaNDdhblk4MEZIU01kWHAwWm5SbGRDOTRCdW8rNmlucnhlbEY2cjNnOTlUZjNEK3QwR0dBTmpnMHlESVVOR1EwZkRJc08zUm9KR0FVWU5Sc3ZHS3NhSnh0MG1PQk56azdNbXowMTVUSDFNNjB5WHpkVE1EcHYxbVZQTTdjMkx6RDlZU0ZwRVdYUllvcFptbHVjc1gxdUpXSVZadFZ1RHRhbjFPZXMzTm1JMmtUYi8yT0p0Yld3djJuNnlVN0JMc3V1M1o3TDNzSyszWDNQUWM4aDJlT1VvN2hqcjJPTkU3K1R1Vk9mMHc5bkFPZGQ1Y3EvYzNzTjdIN2x3dWdTNTNIUWx1RHE1MXJpdXVobTZuWGViZGxkeFQzTi90azlzWC95K2dmMmMrMFAyMy9hZzkvRHl1TzZKODNUMnJQZmM5TEwycXZCYTlUYjFMdlplOXRIM0tmQ1o5OVh4emZPZDg5UDJ5L1diOGRmMnovV2ZEZEFPT0Jjd0Y3Z25NRDl3SVVnL3FDam82d0dUQTJVSGZnUmJCMThPM2c1eERta09KWVo2aHQ0S1l3d0xEdXNMNXcyUER4K0prSXBJaTVpTTFJdzhIN2tjWlI1VkU0MUU3NHUrR2NNY0V4RXpHQ3NlZXlMMi9jSGRCeThlL0JubkZIYzluaUUrTEg3d2tPU2hqRU16Q1VZSjFZbllSSi9FbmlTQnBHTko3dy9ySGk1UFJwSzlrM3VPQ0IxSlBUSjkxUGhvN1RIeXNlQmpqMVBrVTNKVFZvNDdIKzlJNVVrOW1qcDF3dmhFUXhwZFdsVGE4M1N0OUxLVDJKTkJKNGN5bERJdVpQek85TTE4bUNXZmxaKzFlY3JuMU1QVENxY0xUMitmOFQ4emxLMmFYWnFEenduTGVYWjJ6OW5hWEliY2hOeXBjNWJuMnZMNDh6THpWczU3bkIvSVY4NHZLeUFYeEJaTUZsb1UzcndnZkNIbndtWlJZTkg0UmIyTHpjWGN4Um5GUDBwOFMwWkxkVXFieW5qS3NzcCtYUXE2OUtMY3VMeXRRclFpdnhKZmViRHlVNVZUVlgrMWVuVmREV2ROVnMzVzViRExrN1YydFgxMWFuVjE5ZHoxMlExb1EyekRYS043NDVNckJsZHVOc2swbFRlek5tZGRoYXV4Vno5Zjg3ejJyTVc4cGVlNit2V21HeUkzaWx1WldqUGJrTFpEYmN2dGdlMlROMTF1anR3eXU5WFRvZFhSK28vc1A1YzdCVG92M21hNW5kMUY3a3J0MnI2VGNHZTFPNko3NFc3QTNha2VqNTVYdlh0N3gvcHMrNGJ1bWQ5N2NOL29mbSsvYnYrZEI5b1BPZ2MwQjI0OVZIL1kva2oxVWR1Z3ltRHJZNVhIclVPcVEyM0Rhc00zbjJnODZSalpOZEkxdW1mMDdsT0RwL2ZIVE1jZWpWdU5qenh6ZlBiaXVmdnp5UmUrTDJaZmhyejhPbkZ3WXVQVjBkZTQxNWx2cUcveTMzSy9yWGduOGE1NVVuWHk5bnVEOTRNZjdEKzhtdktabXY4WS9YRnpPdlVUN2FmOEdiNlp1bG5GMmM0NW83a25uOTArVDg5SHpHOHNwSDFoK0ZLOEtMNTRZMGxuYVhCNTcvTDAxNml2Mjk5T2ZlZjRmbmxGZWFWbjFXYjE3VnJvMnNhUHpKOGNQMnZYMWRmN2Z6bi9tdG1JMnlSc0ZtNUpiSFg4TnYvOWVqdDBlenZDSzhvTEFBQXdBSUQ2K3dOOHV3eEE2d0xBOUFTQVRQZm5qL3Vmd0NBQUtBQ2dRQVJtRUlGZDRBckpVQWV2RUY0a0dabER3ekZFVENjMkJSZUlEeUVjSTdhVENUVEJsQTkwM3ZSZkdOS1plSmhiV0MzWkpqZ09jRzV3Wi9CeThiVUlXQWwrRWM0WDFSZGJrTWlWMHBOZWtpMlROMUpZVURxcm9xVDZVTjFENDZOVzZLNjUzZnYzRE92cTZwWG9melVVTlhJMlBtblNhdnJSbkdxaGJ1bGpsV1pkWi9QWWR0R2Uxa0hLMGRESnd6bHhiNEhMTmRkQnQrbDk2SDV1RDIxUFQ2OFU3ektmTHQ4SnY2OEJ4RUR1SU5rRHU0TXRRMXhDL2NOaXdwTWpUa1VXUjlWSDM0b1pqSjA0K0NidVZmekxReThTWGlST0pMMDYvQ2I1dzVHNW85K09iUjRucFhLZWtFblRTOTkzTWlIalFtWjcxb3RUdjg4SVpwdmtoSjB0eXUwOXQzaWVNOSt3SUt6dy9JVzJvb21MbXlYc3BjcGw1cGM4eTZNcWpsWVdWVFZXOTlhTVg1NnRYYXRIR3lpTlRGZlltN2lhdWE5eVhtTnBvVjRuMzBCdXJMZXV0SzIyYjk4aWRsRC9ZZTNrdk0zZHhYV0hzNXY5TGtzUFF5OXRIL2tlNFQ2dUgvTUFPd0FEbng5MlA4b2JESHk4ZTRobGFHSDQvcE9xa1pSUm42ZkdZekxqek9QYnorYWVQMzh4OExKeEl2YVY2cXVmcjd2ZlpMeDFlaWZ5Ym5YeXdmdmlEeEZUK2g5WlBzNU90MzlLbmJHZXBadHRtak9hZS9rNWJCNDdmM0ZCWldIa1MvZ2kzV0x6a3QzUzJuTHhWNzJ2Yzk5eXZtdDluMXU1c0dxNnVyNVcvOFB0SitWbjkzcnNMK2xmMHh1Vm16NWJvbHRMdjl1M2ZiYTNBUUFGQWpDQ0lLaURQY1JDQ1R4Q0FIRkVicUFDYUFWR0JUT0Z2WVlyd1pjVGJoTi9rVjFwdW1rMTZlNVF6Um1lTW5rekw3QUdzbjNnY09NYzRyYmllY0JueGo4aXVFOW9VU1JSakN4ZUpxa28xUyt6VjNaS1BrVGh1MUtrOG1kVkY3WDdHbkthbVZvZnRiVjNIOXR6VytlREh1aHpHNmdhMmhvZE1ENXNrbU5hYm5iVnZNdGl3SExVYXNMNm5jMlU3YXpkZ3YyU3czZkhGYWVmemxzdWRLNGlidXJ1WnZ2Mjc0L3dPT3laNFpYdlhlcFQ0OXZvMStMZkh0QVYyQk0wY0dBaytHWEloOUF2WVYvRFp5TW1JaDlHZFVRM3hseUt6VHQ0TWk0NVB1NVFaRUp3WW1CUzBPSGc1UEFqOFVlUEg4dE9LVHBlblhyMXhLMjB2dlRSazlNWjYxbDBwOFJPNjU1eHo0N0pPWFcyT3ZmT3VkRzgyZk8vQ3NpRjdCZEVpdFF1bWhTN2xZU1dIaTdMdkZSUVhsNVJWOWxjZGFQNlprMzc1ZGJhNjNYWDZtc2JxaHBMcjlRMFhXL3V1ZnJrMnV1V21ldExOOVphdDlveE4wbTM2RG9ZL21IdDVMek4xeVZ5UjdwYjdxNWtEMWN2cVhlOWIvcmUyUDI3L2MwUHlnYXlIeDU5RkRYbyszanZrT1d3L2hPdEVaVlJ5YWRzWXpBMk4vN3kyZjNuclM4cVg1NmJTSGtWL3RydGpjRmJ5WGYwNzc1T2pyeHYvSkEyNWZGUmJabzZQZldwZlNaOTFuRk9jTzdMNXh2ejhRdTdGbjUvNlY0OHVxUzdqQzRQZm0zNVZ2RTlleVZ4MVgvTjhvZjhUNGFmUyt2OXYwbzNvamNOdDFpMlpuNjMvbWYrQ0JDQUNueWdDT1lRQktlaERUNGhva2dDOGh3MVFoOWczTENBN2NIbDR1TUkwY1JrVWdHNWcyYUdscFBPa2o2VjJzNHd4OFRLck0wU3hsckNOc2lCY21weEpYSjM4UUtmRG4rS1FMOFFqYkMxeUJuUlIrSjRpVjJTb1ZMNTBsMHlrN0svNUJrVnBCU1ZsVlNWaFZUb1ZOWlUzNmoxcWRkcm5OWU0wN0xZSmExTjBwN2VmV2RQb1U2RXJwRWV0OTUzL1FHRFVzTm9JM05qZmhPOHliTHBDN083NXZVVzV5d1RyRHl0ald5a2JCbHNmOWk5dHU5eGFIQTg1NVRrSExUWDBVWFBWZEdOM1czSnZYdGZ6bjRQRDNsUHhQT3BWN1YzdkkrbHI2RHZENzloLzlxQTQ0RWVRWHNPOEFkRDhHUklSK2lac0gzaGNoRm94SXZJYTFHWjBYNHh1ckU4c2FzSEIrTXE0dzhkTWt2Z1NQaVllQ1VwK3JCaHN1WVJ0YU1xeHhSU0pJL3pwN0tjd0o5WVRmdVFQblN5STZNaU16TXIrcFRiYWIwejB0bnNPZlJucWJrTTV4anlxT2ZwOHNrRnVFSW8zTHF3VWZUcjRxL2lyVktrakhTSnFaeS9RckpTdUlxKzZtZjF4NXJoeTEyMVRYV1Y5Y1VOaFkwWHJwUTIxVFJmdlhyMzJrakxwK3UvV3lsdHhMYXQ5dFdicTdkK2RHeDFFbTZ6ZEluY1VlODJ1K3ZlRTlwN3VDL3JYc0g5c3Y3cUIzY0gzajNDREFvK05ocnlIMDUvVWpmeWFIUmhqREl1L2N6aWVlaUxNeThiSjRaZXJiNnhmbnRqa3Z2OTZTbmFqeVdmOUdaeGM5UHpYeFk1bGlPK3pheWUvR205SWY5YmNIc2I0TSt1QXdBQXJ3cFF2UXpnakFFd2t3QW9zZ1VRUGdiQXFBUmdRd3Znb0FIb1dBS2doeU1BYVRpeDgzNG9nQjJFd1Vrb2gzWVlnbyt3anRBaFFvZzZZb240SVBGSU5sS05kQ0pqeUFLS1IvbFFUZFFKalVKejBDdm9JRHFQb2NGSVlTd3dvWmhzekRYTVU4d2FsZ09yamZYR25zUTJZY2V3R3pnaG5Ea3VCbGVHZTRoYnd3dmhiZkJIOE0zNDl3UW1nZ2tobVhDRHNFQVVJL29RTHhIZmtYaEozcVJhMGxleUFibUFQRStqVDFORXMwS3hvVFRUMHRGRzBqNmoyMFZYUlU5UG4wUS9UOTFISFdFd1l1aGtWR0ZzWnBKbXFtY1daMjVna1dScFlKVmxiV1hUWnV0bmQyU2Y0VWpnWk9CczRETGhtdUhPNUpIbEdlTk41aFBuRytVL0lpQW44RWJ3akpDcE1FVjRST1NDcUxlWWxOZ1A4WHNTZVpMZVVvclNxUFNZVEpWc3RKeWhQSXY4UjRYcmlzZVZuSlFsbE5kVkJsVXIxT0xVclRXRU5EWTF4N1d1N3NyU1ByRGJZbytDRHJjdVFmZWIzcHorVzRPWGhoTkdiNHcvbWF5YXJwc1RMWmdzUmF6VXJlMXNvbXh6N1RydFp4MjVuR3ljcy9ZT3U3SzR1YnMzN1VjODdEM0x2YVo4Skgwai9lNEVVQU1EZys0Rmk0VmtoYTZFZTBROGlkS0pibzJWT0hncG51WFFtVVRScE9Ya3UwZnpVd0pTdGRPbzZXOHptckxpVCt0bVUzS0djeS9rdWVkekYyd1ZLUlpIbFpaZWVsU3hYTTEwV2FuT29TSGhTbTN6aXhiV0crNXRiYmNhT3I5MFMvUjYzVThmcUJ2c0c1NFluUnYvL1pMcE5mMDc0Z2ZLTk8wc3l6enJJdU5Yd3ZmNXRZSDFjNXY3dDdjQlFBVmNJUkVLb1FVZXdnZFlSK2dSWVVRVHNVSDhrU1RrSEZLUDlDQ3ZrQldVRHBWQWpWQWZOQVV0UjN2UUtRd1dJNG94dzRSaXptSmFNUk9ZYmF3STFnSWJneTNHOW1FWGNldzRmVndZN2lKdUFQY1RMNDUzd1dmaDcrQlhDRklFWDBJcDRTV1JsZWhFTENST2tIaEpBYVFXTWtwMkkxK25vYWNKcFJta3lGQnlLZXUwM3JSRGRMdm9ydEFMMEJkUXFkVFRERFFNV1l4MGpPZVlPSm1xbVdXWi8ySFJZZWxudFdOOXh4Yks5cHY5SEljVVJ4K25OeGZLVmNOdHpyM0tVOEpyenJ2T1Y4dnZJa0FSNkJhTUZWSVZ4Z2cvRmJrc21pUm1LeTRoZ1pGNEszbEw2cngwdEl5dHJLd2NSVzVlL29GQ3RXS3Frcit5cVlxY0tvY2FSbTFSL2JuR0hjMTZyYnhkeWRwQnU1MzJHT3RvNmNycENla0xHUEFZOGhxSkdNdWFhSnRhbURtWkIxckVXWjZ5cXJUdXRwbTB3OXJMT0xnNW5uSzY0N3pwb3UxNjFPMytQcmI5Zmg3dG51dmU2ajd4dnJmOGtRQ3p3S0tneFdERGtMTFF6WEMzaUx0Um90RTVNZXNIL2VOR0R1a20vSk5rY1hqaFNQb3htWlRSMU1OcFl1bWpHY2V5NUU2OU81T1RvM2QyNVZ6dGVhY0NjdUY0VVdOeFpxbmJKYVVLbXNyUDFYMlhMOWVkYVRoNkpiRTU2VnJtOWRMV3Z2YWxEcUZPcDY2UzdrKzlldmVxSDdBOUxIZ3NPdHc5NmpGT2VONDJZZnc2NlczOTVNeVU2SFQ0ek1CbjJZVkxTeUpmVzFkczF6Yldhelk5dDdjQlFBdjhJQVBxNFFGOFFsQ0VGOUZFbkpCb0pBZHBRaDRqWDFBNlZBRjFSQlBSU3ZRUnVvTGh3NWhqNGpCVm1CRXNZR1d4SHRpejJEN3NENXcwemh0M0FUZUtwOFdiNHRQeC9RUVN3WXFRVDNoTGxDSW1FaCtUK0VrSnBCZGtYZklWR2g2YUhBcU9jb1N5U1p0TWg5SmwwclBTMTFBMXFhTU1vWXcwakkxTWRrdy9tU3RaOUZpbVdFK3l5Ykc5WUUvalVPT1k1NnpnY3VObTQzN09rOC9yd3NmRDk1Ni9WaUJTVUVPSVhtaERlRUhrZytoTHNWSHhZWWtoeVNHcEVlbG5NaE95azNLejhsOFVWaFMzbGFrcThxcnVhdW5xTFJxdnRQQzdGTFU5ZHAvZE02aEwxclBTTHpINGJ1UmszR1BLYTZabDdtMXgwckxWYXRaRzBOYkRyc1orMlZIWEtjOTV5Y1hhdGRtZGVWL3kvbWxQYzY4Qzd4bGZEYjlzLzgrQkprR053VXdoQ2FGVDRlWVJiVkY4MFJreHl3ZjN4blVlRWtqSVM1SThQSDRrN2hoL3lyM1VBMm5rOUtvTTdjd25wenhQZjhsT3pObk96Y3lqUDU5ZHdGN1lVM1M4Mkxoa282eXBmSDhscWVwYWpkUGxqYnBMRFNhTnEwMVZWNTFicU5lSFd3dmJmVzlST201MnVuU1I3bHk5dTcrWDJ0ZDdQK2FCNU1EVW8wdVA5dzN6UEhrL1dqRVcrRXo1K2ViTDNsZW1yM3ZmYXJ5NytsN293K21wcFduVFQwVXo3K2Y0UGx2TVJ5eWMrVkt5ZUhtcGZybjhhOTYzeE85ZUs3cXJmS3VyYXdNL3p2LzBXQmRiWC9oMWRTTnlVMmx6YWF2dWQrNzJOa0MwdjVJaUFBQWdGRDBBM052dDdlK2lBSVJjZ0syejI5c2JGZHZiVzVVQW1OY0EzU0YvOXVjQUFIZ3FRSEh3LzdiSC9pLytpbGMydDVRcnNBQUFBQ0JqU0ZKTkFBQnRtQUFBYzQ0QUFQc0JBQUNGb2dBQWJGd0FBT095QUFBdk5BQUFGeXVsZjVZSkFBQWpIa2xFUVZSNDJ1eWRmWXdXMTMzdmY0K3ZzNDdaSmlaaHZaamxaVTFzNDhWeFpaRFZDNkx5VFNxTWlRTVZYS0dnU2lGMUNwV3daV3V0dHRyVnJTbHRtbTI0OWFKVzljcVc0UTl6elExL1JDQkw1Z1pLMWpnS3FkV1Y5MWJJV01HOHhNYXd2Q3ptNVNaZ2Q4RWxicDc3eDNKbXo1em56TXlabCtkNVpwN244NUVRenpOelp1Yk1ZWGMrZk0rY21WUGE4SzhIeXdLUWtLZCtmNkFrSXRLOTRDTitqcURxREF6ZlZWS2Z1eGQ4VkY3KzR5L0pvM2MrTEc5ZU91aVZPWGJzc0hSMVBTakhqaDEyM3UrcEEyTnk5OWRiNWRTQk1SRVIrV3p2bklwajFmcjhmclh6aW5mTUw2K2VITGxjUnkrVGhpK3ZubHl5N1N1b1BrSDdDRnNmdFg4WGd2WVJ0eDIrdkhweTZWWit6U0FML3VudFIya0VxRDZsdzNVNzlMMmJ6MGxYMTRQeTZKMFB4OXJ1elVzSEs4U3RjK3pZWVRsMVlFdysyenVuNGlML3U5OTZYWDZ4YTJYRlJWOWZiZ3BFMzFieGkxMHJLNzdyWmN6dmFsblF2cUtPRlZaM0c2cHMwRFl1Y282cXUrMmNiZHNnUmNnRTlRdHYvdSs4cSt0QjN5OC82MWlYWnQxamNsdmRmc2FWRVBXZmRkZEVhaXRqcHRNZ1VaZ1gvVi9zV3VrVGlNdTJOcUhwWmZUUDVyS3c0d1FkUzlYVnRnL3pjMWo5WE9VY2RHNjI0K295dEcyREZDRXp1SUN6cmhicm1wRW9NWVZ0RjVZTVhRaVNTTmo2dURKMWthaEwzWk9jbjdrTlVnU0V5RHFFMkFEWXVoZUR1azFOSVVTSnhaYnliQ2t0cWJ4ZDVSd212cVRITnV1T0ZDRVR6QzZnVXdlR1E4cXlqblhKMWowbS82MXBmcWYweEdRbXBTQUIyTXFIQ1Mvb1hxSXRvUVVsc0tEMVFmVVBFblpVK295cWg2MU1WTUswN2JQRTZGTklneHA5bXRWb040QXc5SUVWdFI1OWFoNHJ5WEhpSE5QbGR5ck9LTkJxL0J1RURYNnBkbjJTbkh2VWlGUkduMEptM0Q1dktZMEFOV0M0S2Y4RFVJM3kxYTVqTGVzVDUxaFJaVy9obHd3QUFBQXBBZ0FBK0tEN0ZBREFnWjlzR1phZkdOMjNZUU9FWEFoNlJoR1FJZ0JBcnRIZk9BT05MRVhHREFJQWhESXdmRmVwbHFOZG9YNXdUeEVBQUFBcEFnQUFJRVVBQUFDa0NBQUFnQlFCQUFDUUlnQUFBRklFQUFDSXphM0NrekVBQUFBa1JRQUFBS1FJQUFDQUZBRUFBSkFpQUFBQVVnUUFBRUNLQUFBQVNCRUFBQUFwQWdBQUlFVUFBQUNrQ0FBQWdCUUJBQUNRSWdBQUFGSUVBQUJBaWdBQUFFZ1JBQUFBS1FJQUFDQkZBQUFBcEFnQUFJQVVBUUFBa0NJQUFBQlNCQUFBUUlvQUFBQklFUUFBQUNrQ0FBQWdSUUFBQUtRSUFBQ0FGQUVBQUpBaUFBQUFVZ1FBQUVDS0FBQUFTQkVBQUFBcEFnQUFJRVVBQUFDa0NBQUFnQlFCQUFDYWwxdHBBc2lDMitjTWwyZ0ZBQ0FwQWdBQWtCUUJKdWhlOEZHWlZpZzJBOE4zMVRUdGQ4L2ZFZnRuWnVDZE5mUklBRktFWXZDL0J2K1lSaWdvZjdMMGY5Zmx1THNPM25BdSs2MkhXL2lIQXFRSXhlSGl4YXMwQXNUbXpMb1prV1Ztdm5LV2hnS2tDTVhrK3FGQkdxRUEzRDV2S1kwQWdCU0JDeTZJaUxTMzM1R3JkSy9TNEpsMU0zeWZBV29KbzA4QkFBQklpZ0NRbE80RjU2MGpSd2VHcHpFNkZKQWlBRFNYRFB0ZmU5cGIxcnZxSmRrNjlMS0lpS3hmOUZRWk1RSlNCSUNtRUtLUzRTY2ZiaEFSa2I2ZURrK0lJaUpiaDE1R2pJQVVBWkp3L2RDZ2IwQ08rcTZQWHJWOTE4dnJ5OHo5RmJFOXpQTzBuYVB0ZTlTeUxOS2hTb1ViTjQvNjFuL3cxaG01OTVHWktpa21GdVArbGUwaUl0STFwY1gzR1FBcFF0T0owWHlNby9PeDFTSXk4ZXlqK2o3eXhrNnZ2TG1zNk8yZ3prZWR0NzdNL0s2ZmM5aXl0S05MOVhRWUpzWXMwQVdJREFFcFFsUFMrZGhxR1hsanAvZTNRbjFXRjNuYnhiMlJYaGFnbjc4dWVQTWNYZHZCdHErczZIL3RhVStNR3plUFNsL1BKdWw1L2ptNTk1R1p2cTVVVjNnd0g1QWlnSFpCNzN4c2RjV0YzU1hwTk5KTEFsUTdKRW0rcWgzMGRzd3FLWXFNM3ovOHdsZCs0UHN1MHVGOVYySzBwY3lvTGxSZTNRWklFU0JCMGdtNzhPc0owN3puVmhTdUh4cVVFZTAvQkVxU2Vqdm8zNFBhUVoxM1ZrbHhZSGhhcWJ0SHloczNiL0NXOWZWMCtMcFArM282NUlXcDl1MWR4QWlBRkFHTUM3c3BBMXVDMGdWcVNpR29YSkhhd3F5N2ZrNFhMMTZ0K0Y2cmRsQmlWTi83bDUwUU9URCt1WGZ2UGZMQ1ZKRm5Md1J2RzdoZlpyd0FwQWdRbkJCMUdVUWxTWDFaMEhaRlQ4c3ViVkhMZHVoZmRzSzY3Tm1iWWpRSkVpVUFVZ1NBUWpNd1BLM1VMZU5wMFpTakVtT2NsQ2dpTWtPMlc5K0tjMWFlSUVFQ1VnU0EvSXRSUkVUSk1ZNEFneWlYL2JzcWxmQWhJRVVBS0tBY3MwS0owQlNrb20xa2RmbHk1MDVzQ1RXQldUSUFJTmNnUkVDS0FBQUFkWUR1VThndFk5Zit3N3E4ZGRKdE5FNERFZFJ0Q29BVUFVSmthSzVIanNXSGdUV0FGQUVTeWhBNU5oWlJqMTYwVHZ1LzViSHoveFZyUWszaG5pSVVVb2haYlFzNS9wbEFpSUFVQVNFaVJnQ29IM1NmQWtCZDZKNi9JL1lJRzk2WENrZ1JTSWt4OXNYOXhXS3g2K0FONTdKTU13VklFUUFhbmpQclprU1dZU0ppcUJYY1U0U0dTSW5WM0NjQWtCUUJvTTZvQ1pORktpZGJEbHRtSzFNVVZDSjBTWThBU0JHZ3lWQVRCbys4c2RNVG5EN1I4UFZEZzlaSm1VZmUyRmt4aVhQUjVJZ1lBU2tDZ0krUk4zWjZJbFNDVTh0dW43ZlVFNkNlQ21zeDZYTDNndlBXa2FOWnpxQ0JHQUVwQWtDc3BLaVNvVm1tMmpMc2YrMXBiMW52cXBkazY5RExJaUt5ZnRGVDVhekV1SDlsdTNSTlljUXBJRVVBY0V5SzF3OE55b2dtMEdxblF5WERUejdjSUNJaWZUMGRuaEJGUkxZT3ZaeUpHQkVpSUVWb09tYmYzUzRuVDEzTWZKOUZ2WThXbEJKVktyUXRzNVdwaGlDVkVKVU1kVDU0NjR6Yys4aE1sUlJUaVhIL3luWVJFWVFJU0JHYWoycklxMUdFR0hRdTVyS2c4ODFhaUJzM2oxcUZtRFhJRUpBaWtCWXpTb3VObEJMelJsOVBoKy83eHMyajN0OTlQWnVrNS9ubjVONUhadnE2VWwzaHdYeEFpZ0JWU0RRSU1YdjArNGc2dmF0ZXFoQ2piZHVvTGxSZTNRWklFYUFLYVpHVVdEMCsrWENEZk9FclAvQjlGK253cGNnWHBnWkxOY3ZITkFDUUlqUkZXa3dqUm9SWVBRYUdwNVc2ZTZRczhwSzJ0RVA2bDUwUU9TRFN1L2NlZVdHcXlMTVhncmNQM0RjelhnQlNCQWdYbzRnNHkxR1ZSNGcxRU9PQzgrWCtaU2NxMXZVdk95SFAzaFNqU1pBb0FaQWlnS01ZZGRrRnlSRVoxa21NSW1VbFFwc1k0NlJFeFF6WkhqaW40bGw1Z2lRSlNCSEFsR1BRZXFpOUdFVkVsQnpqQ2pDSWNyblNpNlVTUGdTa0NJRDhDaVJIZ0VhRStSUUJJQmVRRGdFcEFnQUFJRVVBQUFDa0NBQUFnQlFCQU1Ld2pVSUZRSW9BQUFCMWdrY3lBS0N1TU9vVWtDSUFGSnEya2RYbHk1MDdVOXVNdDlZQVVvU0c1L1o1UzZXOS9RNGFJdWRFdlJ3aFNIeHRJNnZMdDgzNnByU05TQ1ppQkVDSzBQUVhYTWgvRXJTSlR5MFhFVUdNZ0JRQlFyaCthSkJHYUJBdWQrNHMyWVNubHQ4MjY1dnlINmYvV1JBaUlFV0FBTDczRDUvU0NBMG14ampDQkdnRWVDUURBRElUSmdCSkVVQkVCb2J2NGlJSkFDUkZBQUFBa2lJQTVKYnUrVHR5L2M2MGdYZldWUFFzekpEdEZYWG1PVVpBaWdDUUNic08zc2hsdmI3MWNFdmdPdjM5cDd6cEJwQWlBR1RLbVhVemNsV2ZtYStjNVI4RmtDSUFnQXVsVWltM3MyVU1ETjlWa25ZUmtjUHltTnptTFg5TUh2YjlEY1dHZ1RiUVVIUXYrS2hzKzBQTDJPbmNObXI5M3JsdDFQdGpsZ3RibGdidUh3SkpFU0JER1lxSWJOMnp3MXUyZnZrYTcvdjY1V3ZLUERZU0xNYVJ0UjBWWWh0YzBTWWlJbDFUV256bDh2VHZ2ZWNQZnkxNzVFMWo3WFQ1UUg0dEl0Tmo3Zk9EdlpYSDRHY0dLUUlVVW9oS2ZpZU9IQkVSa2Y3ZVRUNUJidDJ6b3pCaTdGNXczcHBzQjRhblZhWHVneXZhWk9udXk5N2ZDdlZaaWRCY1gvZUwxN0pmVm5YL24rMmR3eThYVWdRb3BoQ1ZESFdPSHo4dTk5OS92eTgxNWxtTVNvYjlyejN0TGV0ZDlaSnNIWHA1L0J3V1BWV3VoaGk3cHJUSTRJbzJMeEVHSlVWVkxpOWkvTWFUQytUUk94K1dOeThkRkJHUlk4Y09TMWZYZzNMczJPRkUrenQxWUV6dS9ucXJuRG93eGk4V1VnUW9waEI3KzUrekNyRjQ1M0srckdUNHlZY2JSRVNrcjZmREU2S0l5TmFobDZzcVJoTXpLWnJsZEVIYXBBcFFSQmhvQXcxSmIvOXo4bzkvMFNmSGp4OGZGNHJXbFpwWElYN3k0UVpQaUlvUDNqcmpmVjYvNkNuWk92UnlZUGRxRWxRYU5MOFBybWp6L3BqbDlBU3B5bVFweEZLcHhET0tRRklFU0VKLzc2WUtHZXFmKy8raXo1b3c4OUtGMnIzZ2ZIbmo1dEVLR2RZS1UyWjZWMmxRdWFEUFdjQUlWRUNLQUlsa010NTFlczhERDNqTFRodzVJdjI5bXp3eDZwOHJ0dS9kbFB0Qk54czNqMHBmenlicGVmNDV1ZmVSbWI2dVZGZDRXQjRBS1VLVG9BdlJsS0Q2YkNaSlJaNkUyTmZUVVNGRFU0eTJoQmwxYnpIc2RXb0FnQlNoUVRFVG9vaDRRclFseFNCUjFqN3RqbmVkZnVFclAvQ1dmZkxoQnVucjZmREUyTmZUSVM5TURkNCtTSXkvNWNjQ0FDbEM0NlB1Qnc0TTMxVmF2M3hONklDVG9LU1lwNVNvQzFGSnNIL1pDWkVESXIxNzc1RVhwb284ZTBFQzBtNXdVbnpSTWdzRkFDQkZhR0JNdVhYM2Jpcm5XWUJocUlUWXYrekVSS0pkZGtLZXZTbEdreUJSTmhQcWVjUkg3M3pZK25jUWIxNDY2SHUrVWRIVnBUNGQ1bG5GSnFhMDRWOFA4bDVJU014VHZ6OVFjK2swMHV1M3pNY3JkQ2w2aVhmdlBiRlNva2l4NWxPMHphT29DQnFOV3F2MzJmS2FONUlpUUNFU29uNVJMUEtGeTVSYnQwZzVyZ0NES05KOGlyYVpNY0tlVlVSV2dCUUJ4SDlQc1RHRm4rM2JhcGhQRVFBcFFwT2tSTkpDNDZDbndpem1VenowL2NQV25jejc2d2Y1bVFHa0NJMG5SbHFoTm9sT0pjMlpyNXkxZnM2S3JDWVdWakpjc3VZaDYvcjk4bTRaT1FKU0JJQllRdHkvc2wxRVJKYThmdEVuUUxVdWJ5Ly9ObVZZZnUrY3RaeGFqeHdCS1FLQU16YnAxVUtJU1Y0RWZ1ajdoOHRSTXZRUzZjMzF1aHdSSStnd1N3WTBITFVhcnQ5czdGL1pMa3RldjFqVlk1VExaZTlQSENHVzN6dFhJY1JMVjI5WS95ZzVsdDg3SjB2V1BCUjQveEdRSWtERENCRXhwcFBmekZmTytycFJWWHBVNi9KRWtBeXZqUDNHK2tlSjBTVlpBbElFYUppRWlCaVRvZVNuZDVVcU9hcDFXYVBtVU5UL3VLWkVVNGhLZm5PV3pQSCtpSWpjMTlFcTkzVzBWb2lSdEFnNjNGT0VocUVSSHVyLzRhYjdyUmZuN3p4M3ZLYm40anFmWWhha21VTlJUM3BLaUVxQ2F0MzdvMk55WDBlclYrNitqbFo1ZjNUOE5XNTMzdEZDV2dTa0NKQlhHZjZQdi94TDYvcS9sLzlaVGlMSFJuMVlYcitYcUZCQ3RFbnUwdFViY3VjZExUNUp2ajg2NWkxYnN1WWhCdDBBVWdUSW13eHZmUHFwdFp4YUgwZU9qVDZmb2k2LzkwZkhBb1VZZDErQUZBRWFoaUoxbWY1dzAvM2xLQmtxMUhwZGpyWHVVaTJTSkhYTTdsSzlLMVZQa0FCSUVhRE9RclRKOE5xMWE5WnRKazJhNUpOam1CZ0htbWcrUlRWb1JvbFBsNkVweGl0anYvR1ZVZDhSSXlCRmdEcGpDbEhKY0dSa3hGcStzN05USmsyYTVKUXNtNGtyWTcrUit6cGFwZlRWNmI3VXFBK3dNUWZiNk9qM0ZnR1FJa0FPVXVLMWE5YzhHVDQwZjc2My9OMTMzcEc1YytlS2lNalJvMGQ5WWd4TGk0MCtuNkpLaUVwbXVoQ1Y2Q2EzZnM0YmthcDNvWnJNV1RKSExnNmQ1QWNUa0NKQUhsS2lFcUtTb1ZwMzlPaFJUNGdpSW5Qbnp2V0pNU290TnZKOGl2UCsrc0hTb2U4ZkxqODZ2ODIvbjVzSmNYTHI1N3hsazFzL0Y1Z1UzeDhkay9KNzUrVGREei9tUGFpQUZBSHlrQktWRUlQdUw2cGtxQ1NweXpMcTNtS2p6NmQ0NmVvTm1iTmtqdnh5L3k5RHl5a3hraElCS1VKVG9TWWhMa3BLUEhyMGFLQVE0KzZyeUNTWlQ5RkxpM2VjOHg3WVY5Z2thWlpSeVpLVUNFZ3hSenk3OEl2VzVTKzgvVEdOVXlPbWwxL041UDdidWRKM0UxMVlnOFJtZHBmcVhhbDZnc3lDem0yakU4bDFiVWZGY3JYTUxCZTBYVnpTektkNDZlb051ZE40SENOSWdMWnRBWkJpam1Wb3JrZU82WkpoMVBycDVWZkwxKzY1TjNVOUpwMzRJUFkyYXJUcDBhTkhLMlJvaXRGa1pHVEVOK2dtQ3daWGpOK2ZXN3I3c2ljOGM5bmdpalpadXZ1eURLNW84MTczcHNyVVk0NUZsUllmK3NyNDc0c2FlQlAxTUw2U0lTa1JuS1ZJZ3FsT20wVEpFRG5HUTczdlZJbFBGMkJjSWVwaVU4dlZNdk83dml3cEl5TWpNbmZ1WEduNS9PZDlxVkcvWjJnT3R0RUpXNWNFbTlTQzNvR3FMMSs2KzNMcXBKaWsrOVFVbzRpSUtjY3dHYXB0K1MyQ1VDbVNZSktudXFoMmlTdEVjMXZFR0N6R09NdURFdUsxZSs2VlNTYys4QW5ROXRtMkxHNUNWQWxQRjZJU1hXZG5wemNpTlNncGlvdy91bkhsVjcvS3JCMVZWNmllQXZYdTBhaUVtU1lwcHVrKzFlVm15dEVFR1lLekZJdVFZR3FkWHBOSUxLaGQwZ2d4VDIyU2Q5UXNHYlhvTWszQ2Q1NDdYdG9pVzh0Ly9tZC81bHV1RW1KblorZUVwRG83QTlQZzBhTkg1Y2FubjhxV3JWc3ptMEhEN0NvMWx3V1JSVkxNQ2xPT1Flc0JRcVdZOXdSVGpmUWFKWk8wRXRQcmxKVVE5YmF1UjV2WXl1ZHBtRUwzZ28vS3I3MzlFeEVSV2JYd0c0RmRwK2RLM3kxTkwzL2dKRWJidlVLelN6VUoxNjVkazRmbXo1ZDMzM2tuUEwzZEZHTzFVNko1ajdCclNvdDFtZTJ6SWsxU2RKay9NWWtjQVdKTE1Zc0xkclhFV0kzMEdxY3J0RjVwTTY5dG91K2pXc20zVnJpS3NScjNFdlcwcUwrOVJrU3NralRMcUdTWlpVcTB6WmNZTklkaTFuTXJwcGxQRWFBcVNUSHJGRk52bWRqcVV2U0xlRFgrZlpJS3RsR3dpVEhxYzViZHJyWVhmd2NKMEdWYkc0MDZuMkxZcStFUU1lUkNpbmxMVjNHNkdwdFJqTTNRSmk3M0Y1VVlhMTAzbFJhZlhMOStQSWs2dnVoYnlkQWxKUlp0UGtWZGRFZ0xHa0tLUVdreHpyMnFMQy9XeUxCNTJrUUpVS0h1TFlxRTMxOVVZcXhIblpVWVJVUk1PWWJKVUcwYnR1L2ZGdlRmc1Z3dVozNS9FU0EzU1pISE82QldRbnp0N1ovSXFvWGZzSzYvdVM2WHIzOVRjalBsYU9JcVE4V0xUVFNmSWtDdXBaam1NUWFBTk9qcHNHaVljZ3hhRHdBRlRvb0FrRXlPQUZBZmJxRUpvT2dNRE45VldyWHdHekw4TC85Q1l3QUFVZ1FZR0w2cjFOKzd5U3BHWkZrY0dHUUQ5YWFtM2FlL3VIakoreng2dGExaS9kTDdTazFWRDlva2V6RjI5MjRxOS9iN2wvZjNicEs4ejdFSVBJWUJUU2hGRVpGWnJiZmV2UENLTE95NDRpMS9lM1J5VTlhRE5zbWUvdDVOL0dZRFFPMmwrT20vWDY5WTl2bmZ1ZDFhZHZEOXNvaTB5ZWhWLy9MVFk1OTVGK09pMTRNMnlVZGE1TmNhQUdvcVJkc0Yxd1U5ZlpqcHBNajFvRTBBQUJwRWl1TXBZUnlYKzBaQkY5MmZuMWZ6d2xVK1pxWHZWNlVQOCsrSnhPSldsN3pVZ3pZWnArVS8vNnBtcjBxNzhWLytybTVwTUt2empIc09VY2RWKyt1ZXY2T2M1d3ZPZ1BaU2diRDNsM0ovRWVvbXhZNDdMc3VzMWx1ZDdodEZwUkF6Ylp3ZSs4dzZhQ01JMTdya3BSNjBpWjhuRnoxVDlSL1lMVU12MXYyWEp1MTViaGw2MFZtdXVqeURqbXUyeWE2RE4zSjVzYkc5aTFWTkxsd3FsWHlmQWVvbXhkR3JFL2VTOURUZ21wSk1vdTVEcVhYbTN5TGpveDZ6cWt0ZTZ0SG9iZklIeGo2MjczOGlzaDVQTE5sZVVjNjJ6TFpkWGtoem5xNVN0ZjBId0xZL0cyZld6Y2pWaGFaUlordUFCazZLSm0rUFR2YWxEOXNnallsdXVZbHR4aStnMFJkbVd4ZWRTMTN5VWcvYXBIN1VzcXZXbHRocUpkUjZuU3RBVTBzeDdRNXNBelRVQlZZbGpGcVFsM3JRSnRXbEZsMjBMb210Nk9mYXVXM1Urenl5dHNPM0xPcDcxTElrcUs1VFY3am5DRldYb2kwZHVCQ1dMaFRqaVdZOHVZUjEwYVdwUzE3cVFadjR1ZDc2ZTdhczVGVDI5ckYvUzV5eVhMcGlYYnB3WGJ0c3I3ZituclcrbGVmdjNnWHNjcTVKaFRpNFl1SS9SRjFUV256THpPOUxkMS8yaEJlMnJHdEtDMWRVSUNtNjhQNjFmL2N1dlBVa0wvVm9walp4U1R0S1BHYlpha21oV3VkcHEyODlrbTBVZ3l2YVpPbnV5eFhwenBTYVRYSzJaYlo5dWFJUHFvbVRGcWVYWDAzVnJWeXZPVFNoUUZJTVN3ZGgyTktGT1VKUjc2WnpTUzlKNnBLWGV0QW0wV25IbHI2S0pNQTRxYzRsZWJvazJ5enBtdEppVFh5dUtWT0pWUWt5YVZMVXUwRERIczhBcUNXMzZCZEUvVzlYek8zVTN3czdybmgvT3U2NG5HcWZSYW9IYlZKYjdOMnp5Y3ZWdWw3MW9IUGJxQ3pkZlZtVzdyN3NDVzF3Ulp0MGJodjFTVTk5MTd0YUIxZTArWkttRXF2K0hhQWhrbUlVU2Q2VTRwSTA0cWF3dk5TRE5za0hRZDJXU2N0bFdhOTBFdDF1TFdPN2J4a1g4MzZpbVI2N3ByUlVmTGVsUTcxTWtxUm93dk9Ka0NzcFp0bFZtSFRZZjVxNjVLVWV6ZDRtdXo3OVAwNTFNOHNsM1M3Tk12UDc4aDkvS1ZVOXpIM3QrY05mTzlmTkpsR3ozSjRsMjJYNWo3K1UrcGMrU0Y1Ujl4VDE3N3BNczREUnBKQWJLWTVlYlpOWnJWZms3ZEhKc3JCajRtK2RsNC92OVgxLzZ2NWwzbWR6Ty8yZTFheldXMlhic1o5NjM0OThMUExBRjFmSnJOWXJvbzZyL2o3eThXdHk1T09KWTZ6dFd1dzh3akZvVzhXYlozN3VLNyt3WTNHc05HV3JSMWliMk9RUzFpYVB6dnhhclBOSzJpYjZ2MDNTTmhFUlgvMmZqaWk3ZkVwZnhiSTlFcDJpbGsvcGt6My9iMk5oZnBIUzF0ZDg3Q1B0QUIwZWxnZEltUlJ0cUF2LzVCbDJJVHp3eFZXUkYwNXoyeU5ueHkvV2E3c1creTdlWmptMXZTb1hwMzZtZE1MMkhUZUJWYU5ObEtEVXVhcnZlV3VUb1BxSGtmVGkvdVNpWjV4U2tXdHl5aUpoWlZIZk1OUUxBdEkrc0c5N25Wb2U0ZDJua0dzcHFuUzRzT05LNU1WUExUOXk5alV2WmVqYm1lVnN5MXlQTWJIUFZmSzFhWjlXSkxTd1kxdzUrNW5UdmxXS092THgrUGwwM1BFMW54VDBkT2ZTSmtyNlppb3NXcHVjSHZ2TUU3UktuWEdFbUNZRlZWdGltU2ZGR3RUWDVSaS9MZGdGeVBZWUJ2Y1dvYTVTMUx2WjFuWXRsbTNIZmhyN3doZDBNVmNYNEtpTHRMN2V2R2lic3NuaUdPWnh6UHJyWFl0eDJ5UktjRVZ0RTVkOTF5SUZaU29aVzlkdWdicHNiYnlvelVJQkFBbWtxRi9jekZUalNsU3ljYm1RQnBXSjJqYk9NVnpMcFdtVExPdGJqemFKdSs4aVkwdXNSVXVvalFMcEVISWpSWmVMcVMycDJKSkdsR1NDRWxEWXhUL3RNV3dwS0U3S2FhWTJTYkx2cVBRVk5LaEdMN2RIbnJHbXRvb1VaOW1YNjBBZXM5enlvWFQzQVYzcmEydVBKRzBVcDAyS2lONk5paUFoTjFKMFRScHBVMExTQkZUUDR6UkxtMVFqZmJtVVN6TWdKOHR5dFRodXZlb01BQW1sbUhYM25HdlNTYk5mTS9Ga1hYL2FKQnJYMlNTU3pqcmhPc2x1Mm5MVnFuL2VqcEVIa3I3N0ZLQm1Vc3l5ZXk3TmZ0TW1GNWRqdWRhZk5nbi9qNEtJKzN5RFNlY2xWQU4wZ3JvZXpZRThTY3VabU4yVFdjNnJtSFViRlJGRUNMbVhZdElra2tXWnRQV28xckZvayt6cms1U3N1eDdwb2dTQVVDa0M1SldzdTJlYnBZc3l6ekNvQm5MM00vbjg2R2I2THlBeDMrNDR6RlVOQUJxR1cyZ0NBQUNBY2VnK0JXZ0F1dWZ2eUhXUHo4RE5OKzBFdmU5VXZlczBhajBBVWdRQUozWWR2SkhMZXBrdktEZEhuSnIzRmFQV0F5QkZ5RDNWZXFkcGtzY1RrdFJGUDA3YTdiT3VUeHpPckp1UnE1K0xvQ21zd2tUSHM0dUFGS0VoeVByeGhpMURMeWFXYlp5NjJFYWh4dDArcXA1Wjd5K3RQT3ROMEd2ZDlHN1NzS21sQUpBaUZJSWY5cjBiV2VZN0d4K0tMUGVkalErbGxxeHJYZEp1NzFyUHJQY1g5NUdTem0yajN1ZVJ0UjNTdVcxVVJ0WjJlT3YwejZxTWJidWdaWEZRSWlRSkFsSUV5RkJxU1dSWDdYcmFwQituUG1sbEhpVEV3UlZ0M3ZldUtTMlI1WmJ1dnV3SkwyeFowTDVja3lJQVVnU0Ftaks0b2syVzdyNWNrZXoweEJjbVROc3kyLzdpcE1Tc3l3SWdSY2c5WTR2Zmt0YWZQdElRZGNuNlhHclpObDFUV2lJVFlKZ28xYkxCRlcyZUlKTWt4VGlQVnZBWUJpQkZhRGpHNzQ5VmR2V1ozWDh1WFlaQkVuR1Z5NU9MbnBFZjlxVTdselRiSjkxZkZ2THMzRFlxblZwcVZDS3pDYzBtU3B0UWt5WkZBS1FJVFkwdVBKZEJObkVsNGlxWE5QY29xOTB1MVpheDdYNmltZnBVbW5SZFp1NFBBQ2tDUUNHSXVrOW9TNDZ1eXdDUUlnRFVsTEhGYi9rWGJMUS90aEgwc0R3QUlFV0Foc0hsMlVYemRXb0FnQlNob0Ntb0ZxTXdLOUpXU09LcVMvb0xxVS9VZy9xLzVjY0lBQ2xDNDZTZ0xFZDFwa2xiZVV0L09tR3ZkSHZ4NWl3VUFJQVVJY2U0akxDczFhaFEyM0d5ZnROTTJuSzFmQk1QQUNCRmdJYUUrUlFCa0NKQUxvaTZKenEyK0syYTNMdGtQa1VBcEFnNUZFUW9HNStKTGhOVUxtamJPR1V0MnlZK2w1dmJQN25vR2RreUZGeFczVHRNYzk2dUZHMCt4YUFYZ3pPTEJpQkZhQWhjQm8rNERqQ3hsUXZhTms3WkxNOUZaSHhrYUZoWnRUN05lVGNhVWJKRGhvQVVvZkRFbmQrdmtjNGxxbnhlMmtaUGJtZld6YWo0cnBjeHYwY3RpME5ZRXRTN1M1RWpJRVVvSkVXZEFiN1J6OFVVNHY2VjdkNzNyaWt0c245bHV5eDUvYUxzWDlrdVhWTmFmR1dXdkg3UkU1NjV6Tnd1eTZTSUNBRXBBa0RWVVNMVDAxM1krMDExekdWcDNvRWFOWENHZ1RXQUZBR2c2cWhrYUtaQVc2SU1XcFkwR1NxaUhxM2cwUXRBaXRBUXRQem5YOVcwenl1cWk3UFc5UW1xWDFROWF0bFZPL09Wc3pKVFM0MUJjdFBGYVZ1V3R4R3VBRWdSY2ttdFJrMjZEbHFwMXloT3MzNUI5YWoxNEJ2emZxSllCR243SExVZUFDa0NCT0R5aWpQWGlZWnQ1ZUsrQnEzYTliR1ZjYWxIUFY3bkZpU3dvUHVKVWZjYkVTSWdSWUNjWU91V3pOT29VZGZ1VzVkeWNjNkwrUlFCa0NJMEdiYnV5RHc5SXhuVmJhdFNva3YzYnB6ellqNUZBS1FJT2NkMXprRFhPUlhUeml6aGVweWdjdWI1Mk1va21Sa2tiVmN4OHlrQ0lFVW9hS29MS2xlck9SVmRqbU9XQzBwM3RhaXpDOHluQ0lBVW9TQzRKS0JhemFtWXRNNTVyQ01BSUVWb2NseTdZOEhQZXpzdVdnZjBmSFZOZXlZSjg5Vy91ZHU2LysvKzdTa1NMQ0JGZ0dwUnhCa2tYTzlqVmxPR2ozMzduNjNyMzVCdmx0UElVY2x3dy9lK1oxMy9BL2xlR1RrQ1VnU29JbWtHcE5TakM5VGxQbWJXOVRKbGVQSGFPbXM1dFQ2dUhFMFpYamg5MmxwT3JYZVI0d3paN3FWTlh2Y0dTQkdhbW5wMWk0NHRmaXR3Tkd4VVhlcVpBS09FR0NWRGhWcXZ5ekZLaksvK3pkM2xLQmtxMUhwZGpqWXhLaUdXeTJVcGxVb3lRN2FYRVNNZ1JXaGFYTHRGczA1VWNTWXRUcElBNnlWRW13d25YN0J2YzJXcVg0NWhZbFJDdE1udzVNbVQxdjNQbmozYko4Y2dNYW9wbzVRWUFaQWlOQnl1RWt2Ny9HR2Ercm1NaGswellyYldYYmFtRUpVTXo1MGZzNWFmTHExeVphbzRKVXRiT2xReVBITHNXT0EyczJmUGpreVdwVklKSVFKU0JHaEdiTjNGYWJ0aWJTbHg4b1VKR2M1ZTlLTUprUTM5a2JUT2F4Mlg1YUV4bnhpRDBxSXRKWjQ4ZWRLVDRkcjE2NzNsMjdadWxXV1BQeTRpSW52MzdmT0owWllXejhvVHBSbXl2YXlFU05jcElFV0FHc2tvRC9jQmJkMnpXWFRGMm9Tb1pLaldqUjBhODRRb0l0STZyOVVueHJDMGFCT2lrcUZhdDNmZlBrK0lJaUxMSG4vY0o4YWd0SWdJQVNsQ1V5U2dDalkrazNrNTEvbzh1ZWdaMlRMMFZ2empaRmpuTFl2Vi9janN1bFZ0S1ZFSk1laitva3FHU3BMbkRvMUo2OVJXYTFxMHBVUWx4S0Q3aXlvWktrbnUzYmN2TkMwQ0lFVm9PT0s4MWkzTGNuRzJkMTFXcnpwbmtSTEhEZ1VMTWU2K2JDbHg3NzU5Z1VKMEllbDJBRWdSQ2tPZVpxcklZMzFxTGM0Z0lacmRwWHBYcXA0Z2s0ck43QzdWdTFMMUJBbUFGS0ZoeWROY2hubXNqNDZhUTlHbHl6WUpreStJak4xTWk2WU1UVEhLZWYrMjU4NzdCOTNZVUtOTmxmaDBHWnBpTkVla3F1K0lFWkFpQU5Ra0xaNDdQMzZQc0gzU0s3N1VxQSt3TVFmYitMYlg3aTNhT0hMc21DeDcvSEdaT211V0x6WHFBMnpNd1RZNityMUZBS1FJQUZYcDJ0VzdQblVoS2dsT245WXFjbUZDbW1hU1ZNeGU5Q081Y1hLZE5TRXFtZWxDVktKN29LdkxHNUdxZDZHYXJGMi9YdDcrK2MvNUlRQ2tDQURWNmRyOTZwcjIwb0VkNTh2ei92czAzM0tWRUtkUG0waCswNmZkSEdscVNZcGpoOGJrNHJWMWNtam92Tzg5cU4vOTIxT2xWK1ZuNVQ4MUVwNUtpQTkwZFhuTEh1anFDa3lLZS9mdGt3dW5UOHRQZi9ZelhoSU9TQkVBcXN2a0N5THRpMzRrSjRmK0tMU2NFcU5yU3RUVDR0cjE2MlhiMXEyaCsxZGlKQ1VDVW9UbXZCalAvRms1emZaWHp2eUJseHIwMlJKTTlBZTg2MUV1cUV5dDFqdWx4YW5yZkcrdkVSR3JKTTB5S2xtYUtkRk1pN05uei9hOXZVWkVySkkweTZoa1NVb0VwQWhOUWV2cEViblcyU2tpSXBOR3hqOVBHaG54MXF2dnFvd3FOemFyczJKZjZ1WFFPclozWXRham5Ga215WHExelBhdXo2anRYZExpeGFucm5BUm8yellLMjR1L2d3VG9zaTBBVW9TR3haU2VrcUZMdWFLZ1N5cEtvcmIxY1k4UkI1VVd2NzVvL042aTY0dStsUXdQQktSRU15MHVWckoxZU5HM0xrTlNJaUJGYUNyTWRLZ0VHQ1RIdEhLSUt5QTFFME9hY2xIYnUrdy96ajdpQ2xLSlVVVEVsR09ZRE5XMlVmdFhZaFFSTWVVWUprTzFMYjhsZ0JTaHFjV1lKaEdHeWNIMWZtQmNZYm1VQ3hOVjJpU1pSZEpVY2pQbGFCSkhocVlZUlVSTU9ab2dRMENLQUFaNlV0VHZLeGE1Q3pWTTFtRWljeEY1VWhHNnlERm9mVkpNT1FhdEIwQ0swSFRvQTJiVVo5c2dtckIxdHRTVXBTU2k5dWVTMHVKMDZiclVKODMyY2VWWUxaQWZJRVVBRGYyUmltb2xzbHJzTDJwOTFLTVJjZVlFdEpWbFRrR0ErbklMVFFBQUFFQlNoQnlUcEF2UmRmQkwxc2NGZ0FhNjlqdy91cmxNTTBCU3Z0MXhHSXNBUU1Qdy93Y0F0OGlSOTFnbXRYOEFBQUFBU1VWT1JLNUNZSUk9XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91cmwtbG9hZGVyIS4vYXNzZXRzL3Nwcml0ZS5wbmdcbiAqKiBtb2R1bGUgaWQgPSA3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqICh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanNcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfYW1kX29wdGlvbnNfXztcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9hbWQtb3B0aW9ucy5qc1xuICoqIG1vZHVsZSBpZCA9IDc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9